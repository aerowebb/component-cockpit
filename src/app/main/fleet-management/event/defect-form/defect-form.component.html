<div #page *ngIf="loadedWorkflow">
  <div class="page-header">
    <div class="page-info">
      <div>
        <div class="page-title">
          {{ "transaction." + componentData.componentId | translate }}
        </div>

        <div class="page-subtitle">
          <div *ngIf="!isCreateOpenMode && componentSubtitle" class="page-subtitle">- {{ componentSubtitle }}</div>
        </div>
      </div>

      <div class="object-status" *ngIf="defect.status" (click)="showStatus()">
        {{ defect.status | formatSelectOption: statusList }}
      </div>
    </div>

    <div class="page-actions">
      <button
        id="edit"
        *ngIf="isReadOpenMode && hasUpdateAccessRight"
        type="button"
        mat-raised-button
        (click)="editDefect()"
      >
        {{ "global.edit" | translate }}
      </button>

      <button
        id="cancel"
        *ngIf="!isReadOpenMode && !isCreateOpenMode"
        type="button"
        color="warn"
        mat-raised-button
        (click)="cancelDefect()"
      >
        {{ "global.cancel" | translate }}
      </button>

      <button
        id="save"
        *ngIf="!isReadOpenMode"
        class="btn-with-spinner"
        color="primary"
        type="button"
        mat-raised-button
        (click)="saveDefect()"
      >
        <span class="lds-hourglass" *ngIf="showSaveSpinner"></span>
        {{ "global.save" | translate }}
      </button>

      <button
        id="actions"
        mat-icon-button
        class="mat-elevation-z1"
        matTooltip="{{ 'global.showAllActionTooltip' | translate }}"
        matTooltipPosition="above"
        aria-label="Show all actions"
        [matMenuTriggerFor]="actions"
      >
        <mat-icon>more_horiz</mat-icon>
      </button>
      <mat-menu #actions="matMenu">
        <button id="report" type="button" mat-menu-item (click)="opWorkPackageToShow.toggle($event)">
          {{ componentData.componentId + ".report" | translate }}
        </button>
        <button id="updates" *ngIf="isReadOpenMode" mat-menu-item (click)="openStatusUpdatesPopup()">
          {{ "updates" | translate }}
        </button>
        <button id="refresh" mat-menu-item (click)="reloadDefect()">{{ "global.refresh" | translate }}</button>
        <button id="favorites" mat-menu-item (click)="updateFavoriteState()">
          {{ (isFavoriteEntry ? "page.removeFromFavorites" : "page.addToFavorites") | translate }}
        </button>
      </mat-menu>
    </div>
  </div>

  <div class="page-wrapper">
    <div class="page-container search-page-container">
      <mat-tab-group animationDuration="0ms" dynamicHeight>
        <mat-tab id="homeTab">
          <ng-template mat-tab-label>
            {{ "home" | translate }}
          </ng-template>
          <div class="grid-row">
            <div id="mainDataPanel" class="grid-cell--12">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">{{ "page.mainData" | translate }}</h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <div class="row">
                    <div id="notificationCode" class="form-group">
                      <label class="form-label"> {{ componentData.componentId + ".code" | translate }} </label>

                      <div class="form-control">
                        <input type="text" class="aw-input" [(ngModel)]="defect.notificationCode" [disabled]="true" />
                      </div>
                    </div>

                    <div id="typeCode" class="form-group">
                      <label class="form-label"> {{ "global.type" | translate }} </label>

                      <div class="form-control">
                        <p-dropdown
                          class="aw-dropdown fixed-width"
                          [options]="typeList"
                          [(ngModel)]="defect.typeCode"
                          [disabled]="isReadOpenMode || isWriteOpenMode"
                          [showClear]="true"
                          placeholder="&nbsp;"
                        ></p-dropdown>
                      </div>
                    </div>

                    <div id="notificationAsset" class="form-group" [ngClass]="{ required: !isReadOpenMode }">
                      <label class="form-label">{{ "global.asset" | translate }}</label>
                      <div class="form-control form-control-with-btn">
                        <input
                          type="text"
                          class="aw-input"
                          [(ngModel)]="notificationAsset"
                          [ngModelOptions]="{ standalone: true }"
                          disabled="true"
                        />

                        <i
                          class="fa fa-fw fa-external-link aw-icon"
                          aria-hidden="true"
                          tooltipPosition="top"
                          (click)="openLinkAssetEquipment($event)"
                        ></i>
                      </div>
                    </div>

                    <div id="operatorCode" class="form-group">
                      <label class="form-label">
                        {{ componentData.componentId + ".operator" | translate }}
                      </label>

                      <div class="form-control">
                        <input type="text" class="aw-input" [(ngModel)]="defect.operatorCode" [disabled]="true" />
                      </div>
                    </div>

                    <div id="reportingPeriodStartDate" class="form-group" [ngClass]="{ required: !isReadOpenMode }">
                      <label class="form-label"> {{ "global.eventDate" | translate }} </label>

                      <div class="form-control">
                        <p-calendar
                          appendTo="body"
                          showButtonBar="true"
                          [monthNavigator]="true"
                          [yearNavigator]="true"
                          [yearRange]="sessionService.calendarYearRange"
                          class="aw-calendar"
                          [dateFormat]="sessionService.dateFormatPrimeNG"
                          [locale]="sessionService.calendarFormat"
                          [showTime]="true"
                          [(ngModel)]="defect.reportingPeriodStartDate"
                          [disabled]="isReadOpenMode"
                        ></p-calendar>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div id="defectIsCritical" class="form-group">
                      <label class="form-label">{{ componentData.componentId + ".isCritical" | translate }}</label>

                      <div class="form-control">
                        <p-checkbox
                          binary="true"
                          class="aw-checkbox"
                          [(ngModel)]="defectIsCritical"
                          [disabled]="isReadOpenMode"
                        ></p-checkbox>
                      </div>
                    </div>
                    <div id="defectAuthor" class="form-group">
                      <label class="form-label">{{ "global.author" | translate }}</label>

                      <div class="form-control">
                        <input type="text" class="aw-input" [disabled]="true" [(ngModel)]="author" />
                      </div>
                    </div>

                    <div id="defectLastAuthor" class="form-group">
                      <label class="form-label">{{ "global.lastAuthor" | translate }}</label>

                      <div class="form-control">
                        <input type="text" class="aw-input" disabled="true" [(ngModel)]="lastAuthor" />
                      </div>
                    </div>
                    <div id="filler" class="form-group"></div>
                    <div id="reportingPeriodEndDate" class="form-group">
                      <label class="form-label"> {{ "global.closureDate" | translate }} </label>

                      <div class="form-control">
                        <p-calendar
                          appendTo="body"
                          showButtonBar="true"
                          [monthNavigator]="true"
                          [yearNavigator]="true"
                          [yearRange]="sessionService.calendarYearRange"
                          class="aw-calendar"
                          [dateFormat]="sessionService.dateFormatPrimeNG"
                          [locale]="sessionService.calendarFormat"
                          [showTime]="true"
                          [(ngModel)]="defect.reportingPeriodEndDate"
                          [disabled]="isReadOpenMode"
                        ></p-calendar>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="grid-row">
            <div id="rootCausePanel" class="grid-cell--12">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">{{ componentData.componentId + ".rootCause" | translate }}</h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <div class="column">
                    <div class="row">
                      <div id="selectedRootCause" class="form-group">
                        <label class="form-label">
                          {{ componentData.componentId + ".rootCause" | translate }}
                        </label>

                        <div class="form-control">
                          <p-dropdown
                            class="aw-dropdown fixed-width"
                            [options]="rootCauseList"
                            [disabled]="isReadOpenMode || !defectBlockVisibility"
                            [(ngModel)]="selectedRootCause"
                            [showClear]="true"
                            placeholder="&nbsp;"
                            (onChange)="onChangeDefectRootCause($event.value)"
                          ></p-dropdown>
                        </div>
                      </div>

                      <div id="defectAtaCode" *ngIf="displayDefectAtaBlock" class="form-group flex--2">
                        <label class="form-label">{{ "global.ataCode" | translate }}</label>
                        <aw-ata-code-input
                          [userWorkflow]="userWorkflow"
                          [ataCode]="defectAtaCode"
                          (ataCodeChange)="addATACode($event)"
                          [familyVariantCode]="masterFamilyVariantCode"
                        ></aw-ata-code-input>
                      </div>

                      <!-- <div *ngIf="!displayDefectAtaBlock" class="form-group flex--2"></div> -->

                      <!-- <div *ngIf="displayDefectAtaBlock" class="form-group flex--1"></div> -->

                      <div id="defectEquipmentAssetCode" *ngIf="displayDefectEquipmentBlock" class="form-group">
                        <label class="form-label">{{ "global.assetCode" | translate }}</label>

                        <div class="form-control form-control-with-modal" [ngClass]="{ disabled: isReadOpenMode }">
                          <div class="form-control-data" (click)="openDefectEquipmentAssetCode($event)">
                            {{ defectEquipmentAssetCode }}
                          </div>

                          <div *ngIf="defectEquipmentAssetCode" class="btn-clear-wrapper">
                            <i class="ui-dropdown-clear-icon pi pi-times aw-icon btn-clear" aria-hidden="true"></i>
                          </div>
                          <div class="btn-search-wrapper">
                            <i
                              class="fa fa-fw fa-search aw-icon btn-search"
                              aria-hidden="true"
                              (click)="openDefectEquipmentAssetCode($event)"
                            ></i>
                          </div>
                        </div>
                      </div>
                      <div id="defectEquipmentPn" *ngIf="displayDefectEquipmentBlock" class="form-group">
                        <label class="form-label">{{ "global.pn" | translate }}</label>

                        <div class="form-control">
                          <input type="text" class="aw-input" disabled="true" [(ngModel)]="defectEquipmentPn" />
                        </div>
                      </div>

                      <div id="defectEquipmentSn" *ngIf="displayDefectEquipmentBlock" class="form-group">
                        <label class="form-label">{{ "global.sn" | translate }}</label>

                        <div class="form-control">
                          <input type="text" class="aw-input" disabled="true" [(ngModel)]="defectEquipmentSn" />
                        </div>
                      </div>

                      <div id="defectEquipmentName" *ngIf="displayDefectEquipmentBlock" class="form-group flex--2">
                        <label class="form-label">{{ "global.name" | translate }}</label>

                        <div class="form-control">
                          <input type="text" class="aw-input" disabled="true" [(ngModel)]="defectEquipmentName" />
                        </div>
                      </div>

                      <div id="rootCauseFlCode" *ngIf="displayDefectFunctionalLocationBlock" class="form-group">
                        <label class="form-label">{{ componentData.componentId + ".flCode" | translate }}</label>

                        <div class="form-control">
                          <p-dropdown
                            class="aw-dropdown fixed-width"
                            [options]="flCodeList"
                            [(ngModel)]="rootCauseFlCode"
                            [showClear]="true"
                            placeholder="&nbsp;"
                          ></p-dropdown>
                        </div>
                      </div>

                      <div id="rootCausePn" *ngIf="displayDefectPartBlock" class="form-group">
                        <label class="form-label">{{ "global.part" | translate }}</label>

                        <div class="form-control form-control-with-modal" [ngClass]="{ disabled: isReadOpenMode }">
                          <div class="form-control-data" (click)="openDefectPart($event)">{{ rootCausePn }}</div>

                          <div *ngIf="rootCausePn" class="btn-clear-wrapper">
                            <i class="ui-dropdown-clear-icon pi pi-times aw-icon btn-clear" aria-hidden="true"></i>
                          </div>
                          <div class="btn-search-wrapper">
                            <i
                              class="fa fa-fw fa-search aw-icon btn-search"
                              aria-hidden="true"
                              (click)="openDefectPart($event)"
                            ></i>
                          </div>
                        </div>
                      </div>

                      <div id="rootCauseQuantity" *ngIf="displayDefectPartBlock" class="form-group">
                        <label class="form-label">{{ "global.quantity" | translate }}</label>

                        <div class="form-control">
                          <input
                            type="text"
                            class="aw-input"
                            [(ngModel)]="rootCauseQuantity"
                            [disabled]="isReadOpenMode"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="grid-row">
            <!-- DEFECT -->
            <div id="defectDetailPanel" class="grid-cell--equally">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">{{ componentData.componentId + ".defectDetail" | translate }}</h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <div class="row flex-row--justify-end action-list">
                    <button
                      id="askForDeferralDefectDetailPanel"
                      *ngIf="defectAskForDeferralVisibility"
                      type="button"
                      mat-raised-button
                      (click)="askForDeferral()"
                    >
                      {{ componentData.componentId + ".askForDeferral" | translate }}
                    </button>
                  </div>

                  <div class="section">
                    <div class="section-content">
                      <div class="row">
                        <div id="defectLogNumber" class="form-group">
                          <label class="form-label">{{ "global.logNumber" | translate }}</label>

                          <div class="form-control ">
                            <input
                              type="text"
                              class="aw-input"
                              [disabled]="isReadOpenMode || !defectBlockVisibility"
                              [(ngModel)]="defectLogNumber"
                            />
                          </div>
                        </div>

                        <div id="notificationSubject" class="form-group">
                          <label class="form-label">{{ "global.title" | translate }}</label>

                          <div class="form-control">
                            <input
                              type="text"
                              class="aw-input"
                              [disabled]="isReadOpenMode || !defectBlockVisibility"
                              [(ngModel)]="defect.notificationSubject"
                            />
                          </div>
                        </div>

                        <div id="rootCauseDefectName" class="form-group">
                          <label class="form-label">{{ "global.name" | translate }}</label>

                          <div class="form-control">
                            <p-dropdown
                              class="aw-dropdown fixed-width"
                              [options]="defectNameList"
                              [(ngModel)]="rootCauseDefectName"
                              [disabled]="isReadOpenMode || !defectBlockVisibility"
                              [showClear]="true"
                              placeholder="&nbsp;"
                            ></p-dropdown>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div id="rootCauseDefectLocation" class="form-group">
                          <label class="form-label">{{ "global.location" | translate }}</label>

                          <div class="form-control">
                            <p-dropdown
                              class="aw-dropdown fixed-width"
                              [options]="defectLocationList"
                              [(ngModel)]="rootCauseDefectLocation"
                              [disabled]="isReadOpenMode || !defectBlockVisibility"
                              [showClear]="true"
                              placeholder="&nbsp;"
                            ></p-dropdown>
                          </div>
                        </div>
                        <div id="selectedFaultCode" class="form-group">
                          <label class="form-label">{{ componentData.componentId + ".faultCode" | translate }}</label>

                          <div class="form-control">
                            <p-dropdown
                              class="aw-dropdown fixed-width"
                              [options]="faultCodeList"
                              [(ngModel)]="selectedFaultCode"
                              [disabled]="isReadOpenMode || !defectBlockVisibility"
                              placeholder="&nbsp;"
                            ></p-dropdown>
                          </div>
                        </div>
                        <div id="selectedInspectionMean" class="form-group">
                          <label class="form-label">{{
                            componentData.componentId + ".inspectionMean" | translate
                          }}</label>

                          <div class="form-control">
                            <p-dropdown
                              class="aw-dropdown fixed-width"
                              [options]="inspectionMeanList"
                              [(ngModel)]="selectedInspectionMean"
                              [disabled]="isReadOpenMode || !defectBlockVisibility"
                              placeholder="&nbsp;"
                            ></p-dropdown>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div id="defectSrmReference" class="form-group">
                          <label class="form-label">{{
                            componentData.componentId + ".srmReference" | translate
                          }}</label>

                          <div
                            class="form-control form-control-with-btn"
                            [ngClass]="{ disabled: isReadOpenMode || !defectBlockVisibility }"
                          >
                            <input
                              type="text"
                              class="aw-input"
                              [disabled]="isReadOpenMode || !defectBlockVisibility"
                              [(ngModel)]="defectSrmReference"
                            />

                            <i
                              *ngIf="showOpenField()"
                              (click)="openField()"
                              class="fa fa-fw fa-external-link aw-icon"
                              aria-hidden="true"
                              pTooltip="{{ componentData.componentId + '.openFIELD' | translate }}"
                              tooltipPosition="top"
                            ></i>
                          </div>
                        </div>

                        <div id="defectDetectionContext" class="form-group">
                          <label class="form-label">{{ "global.context" | translate }}</label>

                          <div class="form-control">
                            <input
                              type="text"
                              class="aw-input"
                              [disabled]="isReadOpenMode || !defectBlockVisibility"
                              [(ngModel)]="defectDetectionContext"
                            />
                          </div>
                        </div>
                        <div id="isMELAlertObject" *ngIf="isMELAlertVisible" class="form-group">
                          <label class="form-label">{{ componentData.componentId + ".melAlert" | translate }}</label>
                          <div
                            class="form-control form-control-with-modal"
                            style="border: none"
                            [ngClass]="{ disabled: isReadOpenMode }"
                          >
                            <div class="form-control-data" (click)="openFunctionLocationUC()">
                              {{ isMELAlertObject }}
                            </div>

                            <div class="btn-clear-wrapper">
                              <i
                                class="fa fa-fw fa-external-link aw-icon"
                                aria-hidden="true"
                                (click)="openFunctionLocationUC()"
                                tooltipPosition="top"
                              ></i>
                            </div>
                            <div class="btn-search-wrapper">
                              <i class="fa fa-exclamation-triangle" style="color: #F4C604" aria-hidden="true"></i>
                            </div>
                          </div>
                        </div>
                        <div *ngIf="!isMELAlertVisible" class="form-group"></div>
                      </div>
                      <div class="row">
                        <div id="rootCauseComment" class="form-group flex--2">
                          <label class="form-label">{{ "global.description" | translate }}</label>

                          <div class="form-control">
                            <textarea
                              class="aw-textarea"
                              [rows]="3"
                              [(ngModel)]="rootCauseComment"
                              pInputTextarea
                              [disabled]="isReadOpenMode || !defectBlockVisibility"
                            ></textarea>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- CORRECTIVE -->
            <div id="correctiveActionPanel" class="grid-cell--equally">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">
                      {{ "global.correctiveAction" | translate }}
                    </h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <div class="row">
                    <div id="defectProposedTask" class="form-group flex--2">
                      <label class="form-label">{{ "global.task" | translate }}</label>

                      <div class="form-control form-control-with-modal" [ngClass]="{ disabled: isReadOpenMode }">
                        <div class="form-control-data" (click)="openCorrectiveActionTask($event)">
                          {{ defectProposedTask }}
                        </div>

                        <div *ngIf="defectProposedTask" class="btn-clear-wrapper">
                          <i
                            class="ui-dropdown-clear-icon pi pi-times aw-icon btn-clear"
                            aria-hidden="true"
                            (click)="defectProposedTask = undefined"
                          ></i>
                          <i class="fa fa-fw fa-external-link aw-icon" aria-hidden="true" (click)="openTaskCode()"></i>
                        </div>
                        <div class="btn-search-wrapper">
                          <i
                            class="fa fa-fw fa-search aw-icon btn-search"
                            aria-hidden="true"
                            (click)="openCorrectiveActionTask($event)"
                          ></i>
                        </div>
                      </div>
                    </div>

                    <div id="correctiveActionDescription" class="form-group flex--2">
                      <label class="form-label">{{ "global.description" | translate }}</label>

                      <div class="form-control">
                        <textarea
                          class="aw-textarea"
                          [rows]="3"
                          [(ngModel)]="correctiveActionDescription"
                          pInputTextarea
                          [disabled]="isReadOpenMode"
                        ></textarea>
                      </div>
                    </div>

                    <div class="section-actions" *ngIf="!isReadOpenMode">
                      <div
                        *ngIf="
                          (defectProposedTask !== undefined &&
                            defectProposedTask !== null &&
                            defectProposedTask.trim().length > 0 &&
                            !defectTargetWorkOrder) ||
                          (defectTargetWorkOrder !== undefined && defectTargetWorkOrder !== null)
                        "
                        class="section-actions"
                        style="margin-top: 2em"
                      >
                        <button
                          id="createWPCorrectiveActionPanel"
                          *ngIf="
                            defectProposedTask !== undefined &&
                            defectProposedTask !== null &&
                            defectProposedTask.trim().length > 0 &&
                            !defectTargetWorkOrder &&
                            !isReadOpenMode
                          "
                          type="button"
                          mat-raised-button
                          (click)="openCorrectiveActionWorkPackage()"
                        >
                          <span>{{ componentData.componentId + ".createWP" | translate }}</span>
                        </button>

                        <button
                          id="prepareWPCorrectiveActionPanel"
                          *ngIf="defectTargetWorkOrder !== undefined && defectTargetWorkOrder !== null"
                          type="button"
                          mat-raised-button
                          (click)="prepareWorkPackage()"
                        >
                          <span>{{ componentData.componentId + ".prepareWP" | translate }}</span>
                        </button>
                      </div>
                    </div>
                  </div>

                  <div class="row">
                    <div class="section">
                      <h4 id="correctiveActionComponentTableTitle" class="section-title">
                        {{ "global.components" | translate }}
                        ({{ correctiveActionComponentTable ? correctiveActionComponentTable.length : 0 }})
                      </h4>

                      <div class="section-content">
                        <p-table
                          id="correctiveActionComponentTable"
                          [resizableColumns]="true"
                          #ptableCorrectiveActionComponents
                          class="aw-table2"
                          [columns]="correctiveActionComponentTableColList"
                          [value]="correctiveActionComponentTable"
                          [(selection)]="selectedCorrectiveActionComponentList"
                          [scrollable]="true"
                        >
                          <ng-template pTemplate="emptymessage">
                            <span *ngIf="!isLoadingCorrectiveActionComponentTable"> &nbsp;</span>

                            <div *ngIf="isLoadingCorrectiveActionComponentTable" class="aw-table-loading-indicator">
                              <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                              <div class="lds-hourglass"></div>
                            </div>
                          </ng-template>

                          <ng-template pTemplate="caption">
                            <div
                              class="aw-table-header"
                              [ngClass]="{ 'rows-selected': selectedCorrectiveActionComponentList.length > 0 }"
                            >
                              <div class="aw-table-global-filter">
                                <label class="aw-table-global-filter-label">
                                  <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                                </label>

                                <input
                                  #ptableCorrectiveActionComponentsGlobalFilter
                                  class="aw-table-global-filter-input"
                                  type="text"
                                  placeholder="{{ 'table.globalFilterText' | translate }}"
                                  (input)="
                                    ptableCorrectiveActionComponents.filterGlobal($event.target.value, 'contains')
                                  "
                                />
                              </div>

                              <div class="aw-table-actions">
                                <button
                                  id="deleteCorrectiveActionComponentTable"
                                  *ngIf="!isReadOpenMode && selectedCorrectiveActionComponentList.length > 0"
                                  type="button"
                                  mat-raised-button
                                  (click)="deleteCorrectiveActionComponent()"
                                >
                                  {{ "global.delete" | translate }}
                                </button>

                                <button
                                  id="editCorrectiveActionComponentTable"
                                  *ngIf="!isReadOpenMode && selectedCorrectiveActionComponentList.length === 1"
                                  type="button"
                                  mat-raised-button
                                  (click)="editCorrectiveActionComponent()"
                                >
                                  {{ "global.edit" | translate }}
                                </button>

                                <button
                                  id="openCorrectiveActionComponentTable"
                                  *ngIf="selectedCorrectiveActionComponentList.length === 1"
                                  type="button"
                                  mat-raised-button
                                  (click)="openCorrectiveActionComponent()"
                                >
                                  {{ "global.open" | translate }}
                                </button>

                                <button
                                  id="addCorrectiveActionComponentTable"
                                  *ngIf="
                                    !isReadOpenMode &&
                                    selectedCorrectiveActionComponentList.length === 0 &&
                                    !defectTargetWorkOrder
                                  "
                                  type="button"
                                  mat-raised-button
                                  (click)="createCorrectiveActionComponent()"
                                >
                                  {{ "global.add" | translate }}
                                </button>
                              </div>
                            </div>
                          </ng-template>

                          <ng-template pTemplate="colgroup" let-columns>
                            <colgroup>
                              <col class="aw-table-checkbox-wrapper" />
                              <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                            </colgroup>
                          </ng-template>

                          <ng-template pTemplate="header" let-columns>
                            <tr>
                              <th class="aw-table-checkbox-wrapper">
                                <p-tableHeaderCheckbox class="aw-table-checkbox"></p-tableHeaderCheckbox>
                              </th>

                              <th
                                pResizableColumn
                                *ngFor="let col of columns"
                                [ngStyle]="{ 'text-align': col.alignment }"
                              >
                                {{ componentData.componentId + "." + col.field | translate }}
                              </th>
                            </tr>
                          </ng-template>

                          <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                            <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                              <td class="aw-table-checkbox-wrapper">
                                <p-tableCheckbox class="aw-table-checkbox" [value]="rowData"></p-tableCheckbox>
                              </td>

                              <td
                                *ngFor="let col of columns"
                                [ngSwitch]="col.field"
                                [ngStyle]="{ 'text-align': col.alignment }"
                              >
                                <span *ngSwitchCase="'isRequestForPart'">
                                  <i
                                    *ngIf="rowData[col.field] !== null && rowData[col.field]"
                                    class="fa fa-fw fa-check"
                                    aria-hidden="true"
                                  ></i>
                                </span>

                                <span *ngSwitchDefault>
                                  {{ rowData[col.field] }}
                                </span>
                              </td>
                            </tr>
                          </ng-template>
                        </p-table>
                      </div>
                    </div>
                  </div>

                  <div class="section">
                    <div class="section-content">
                      <div class="row">
                        <div
                          id="defectCAWPDescription"
                          class="form-group"
                          *ngIf="
                            (defectCAWPDescription !== undefined && defectCAWPDescription !== null) ||
                            (defectCAWODescription !== undefined && defectCAWODescription !== null)
                          "
                        >
                          <label
                            *ngIf="defectCAWPDescription !== undefined && defectCAWPDescription !== null"
                            class="form-label"
                            >WP</label
                          >

                          <div class="form-control form-control-with-btn">
                            <input
                              *ngIf="defectCAWPDescription !== undefined && defectCAWPDescription !== null"
                              type="text"
                              class="aw-input"
                              disabled="true"
                              [(ngModel)]="defectCAWPDescription"
                            />

                            <i
                              class="fa fa-fw fa-external-link aw-icon"
                              aria-hidden="true"
                              (click)="openWorkPackage()"
                            ></i>
                          </div>
                        </div>

                        <div
                          id="defectCAWODescription"
                          class="form-group"
                          *ngIf="
                            (defectCAWPDescription !== undefined && defectCAWPDescription !== null) ||
                            (defectCAWODescription !== undefined && defectCAWODescription !== null)
                          "
                        >
                          <label
                            *ngIf="defectCAWPDescription !== undefined && defectCAWPDescription !== null"
                            class="form-label"
                            >WO</label
                          >

                          <div class="form-control form-control-with-btn">
                            <input
                              *ngIf="defectCAWODescription !== undefined && defectCAWODescription !== null"
                              type="text"
                              class="aw-input"
                              disabled="true"
                              [(ngModel)]="defectCAWODescription"
                            />

                            <i
                              class="fa fa-fw fa-external-link aw-icon"
                              aria-hidden="true"
                              (click)="openWO(defectTargetWorkOrder)"
                            ></i>
                          </div>
                        </div>

                        <!-- <div
                        *ngIf="
                          !(defectCAWPDescription !== undefined && defectCAWPDescription !== null) ||
                          (defectCAWODescription !== undefined && defectCAWODescription !== null)
                        "
                        class="form-group flex--4"
                      ></div> -->
                        <div id="filler11" *ngIf="!defectCAWPDescription" class="form-group"></div>
                        <div id="filler12" *ngIf="!defectCAWPDescription" class="form-group"></div>
                        <div id="filler13" *ngIf="!defectCAWPDescription" class="form-group"></div>
                      </div>

                      <div class="row">
                        <div id="filler14" class="form-group"></div>
                        <div id="filler15" class="form-group"></div>
                        <div id="filler16" class="form-group"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- <div class="row">
          <div class="form-group" [ngClass]="{ required: !isReadOpenMode }">
            <label class="form-label">
              {{ componentData.componentId + ".location" | translate }}
            </label>
            <div class="form-control">
              <p-dropdown
                class="aw-dropdown fixed-width"
                [options]="eventLocationMap"
                [disabled]="isReadOpenMode"
                [(ngModel)]="location"
                [showClear]="true"
                placeholder="&nbsp;"
              ></p-dropdown>
            </div>
          </div>
          <div class="form-group"></div>
          <div class="form-group"></div>
          <div class="form-group"></div>
        </div> -->
        </mat-tab>

        <mat-tab id="circumstancesTab">
          <ng-template mat-tab-label>
            {{ componentData.componentId + ".circumstances" | translate }}
          </ng-template>
          <!-- CIRCUMSTANCE -->
          <div class="grid-row">
            <div id="contextPanel" class="grid-cell--equally">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">
                      {{ componentData.componentId + ".context" | translate }}
                    </h3>
                  </div>
                </div>
                <div class="grid-cell-content grid-cell-content-with-section">
                  <!-- Context -->
                  <div class="section">
                    <div class="section-content">
                      <div class="row">
                        <div id="symptomCode" class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".context" | translate }}
                          </label>
                          <div class="form-control">
                            <p-dropdown
                              class="aw-dropdown fixed-width"
                              [disabled]="isReadOpenMode"
                              [showClear]="true"
                              [options]="contextNameMap"
                              [(ngModel)]="contextTabData.symptomCode"
                              placeholder="&nbsp;"
                              (onChange)="onChangeContext()"
                            ></p-dropdown>
                          </div>
                        </div>
                        <div id="missionType" class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".missionType" | translate }}
                          </label>
                          <div class="form-control">
                            <p-dropdown
                              class="aw-dropdown fixed-width"
                              [disabled]="isReadOpenMode"
                              [showClear]="true"
                              [options]="contextMissionMap"
                              [(ngModel)]="contextTabData.missionType"
                              placeholder="&nbsp;"
                              (onChange)="onChangeMissionType()"
                            ></p-dropdown>
                          </div>
                        </div>
                        <div id="symptomComment" class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".comment" | translate }}
                          </label>
                          <div class="form-control">
                            <textarea
                              class="aw-textarea"
                              [rows]="3"
                              pInputTextarea
                              [(ngModel)]="contextTabData.symptomComment"
                              [disabled]="isReadOpenMode"
                              maxlength="300"
                            ></textarea>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="section">
                        <h4 id="contextTableDataTitle" class="section-title">
                          {{ componentData.componentId + ".parameterAssociated" | translate }}
                          ({{ contextTableData ? contextTableData.length : 0 }})
                        </h4>
                        <div class="section-content">
                          <p-table
                            id="contextTableData"
                            [resizableColumns]="true"
                            #contextTable
                            class="aw-table2"
                            [columns]="symptomContextCols"
                            [value]="contextTableData"
                            [(selection)]="selectedContext"
                            selectionMode="single"
                            [scrollable]="true"
                            scrollHeight="200px"
                            (onRowSelect)="onContextRowSelect($event)"
                            (onRowUnselect)="onContextRowUnselect()"
                          >
                            <ng-template pTemplate="emptymessage">
                              <span *ngIf="!isLoadingMaintenanceProgramTable"> &nbsp;</span>
                              <div *ngIf="isLoadingMaintenanceProgramTable" class="aw-table-loading-indicator">
                                <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                                <div class="lds-hourglass"></div>
                              </div>
                            </ng-template>
                            <ng-template pTemplate="caption">
                              <div
                                class="aw-table-header"
                                [ngClass]="{ 'rows-selected': !isReadOpenMode && showContextHeader }"
                              >
                                <div class="aw-table-global-filter">
                                  <label class="aw-table-global-filter-label">
                                    <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                                  </label>

                                  <input
                                    #ptableCusCustomerGlobalFilter
                                    class="aw-table-global-filter-input"
                                    type="text"
                                    placeholder="{{ 'table.globalFilterText' | translate }}"
                                    (input)="contextTable.filterGlobal($event.target.value, 'contains')"
                                  />
                                </div>
                                <div class="aw-table-actions">
                                  <button
                                    id="editContextTableData"
                                    *ngIf="!isReadOpenMode && showContextHeader"
                                    type="button"
                                    mat-raised-button
                                    color="warn"
                                    (click)="editSelectedContextParam()"
                                  >
                                    {{ "global.edit" | translate }}
                                  </button>
                                </div>
                              </div>
                            </ng-template>
                            <ng-template pTemplate="colgroup" let-columns>
                              <colgroup>
                                <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                              </colgroup>
                            </ng-template>
                            <ng-template pTemplate="header" let-columns>
                              <tr>
                                <th
                                  pResizableColumn
                                  *ngFor="let col of columns"
                                  [ngStyle]="{ 'text-align': col.alignment }"
                                >
                                  {{ componentData.componentId + "." + col.field | translate }}
                                </th>
                              </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                              <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                                <td *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }">
                                  {{ rowData[col.field] }}
                                </td>
                              </tr>
                            </ng-template>
                          </p-table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div id="symptomManagementPanel" class="grid-cell--equally">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">
                      {{ componentData.componentId + ".symptomManagement" | translate }}
                    </h3>
                  </div>
                </div>
                <div class="grid-cell-content grid-cell-content-with-section">
                  <!-- Symptom -->
                  <div class="section">
                    <div class="section-content">
                      <div class="row">
                        <div class="list-with-details">
                          <div class="list">
                            <div class="section">
                              <h4 id="symptomRowDataTitle" class="section-title">
                                {{ componentData.componentId + ".symptoms" | translate }}
                                ({{ symptomRowData ? symptomRowData.length : 0 }})
                              </h4>
                              <p-table
                                id="symptomRowData"
                                [resizableColumns]="true"
                                #symptomTable
                                class="aw-table2"
                                [columns]="symptomRowCols"
                                [value]="symptomRowData"
                                [(selection)]="selectedSymptom"
                                selectionMode="single"
                                [scrollable]="true"
                                scrollHeight="200px"
                                (onRowSelect)="onSymptomRowSelect($event)"
                                (onRowUnselect)="onSymptomRowUnselect()"
                              >
                                <ng-template pTemplate="emptymessage">
                                  <span *ngIf="!isLoadingMaintenanceProgramTable"> &nbsp;</span>
                                  <div *ngIf="isLoadingMaintenanceProgramTable" class="aw-table-loading-indicator">
                                    <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                                    <div class="lds-hourglass"></div>
                                  </div>
                                </ng-template>
                                <ng-template pTemplate="caption">
                                  <div
                                    class="aw-table-header"
                                    [ngClass]="{
                                      'rows-selected': !isReadOpenMode && showSymptomHeader
                                    }"
                                  >
                                    <div class="aw-table-global-filter">
                                      <label class="aw-table-global-filter-label">
                                        <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                                      </label>

                                      <input
                                        #ptableCusCustomerGlobalFilter
                                        class="aw-table-global-filter-input"
                                        type="text"
                                        placeholder="{{ 'table.globalFilterText' | translate }}"
                                        (input)="symptomTable.filterGlobal($event.target.value, 'contains')"
                                      />
                                    </div>
                                    <div class="aw-table-actions" *ngIf="defect.status !== '4-clo'">
                                      <button
                                        id="deleteSymptomRowData"
                                        *ngIf="!isReadOpenMode && showSymptomHeader"
                                        type="button"
                                        mat-raised-button
                                        color="warn"
                                        (click)="deleteSelectedSymptom()"
                                      >
                                        {{ "global.delete" | translate }}
                                      </button>

                                      <button
                                        id="editSymptomRowData"
                                        *ngIf="!isReadOpenMode && showSymptomHeader"
                                        type="button"
                                        mat-raised-button
                                        (click)="editSymptom()"
                                      >
                                        {{ "global.edit" | translate }}
                                      </button>

                                      <button
                                        id="addSymptomRowData"
                                        *ngIf="!isReadOpenMode && !showSymptomHeader"
                                        type="button"
                                        mat-raised-button
                                        (click)="addSymptom()"
                                      >
                                        {{ "global.add" | translate }}
                                      </button>
                                    </div>
                                  </div>
                                </ng-template>
                                <ng-template pTemplate="colgroup" let-columns>
                                  <colgroup>
                                    <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                                  </colgroup>
                                </ng-template>
                                <ng-template pTemplate="header" let-columns>
                                  <tr>
                                    <th
                                      pResizableColumn
                                      *ngFor="let col of columns"
                                      [ngStyle]="{ 'text-align': col.alignment }"
                                    >
                                      {{ componentData.componentId + "." + col.field | translate }}
                                    </th>
                                  </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                                  <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                                    <td *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }">
                                      {{ rowData[col.field] }}
                                    </td>
                                  </tr>
                                </ng-template>
                              </p-table>
                            </div>
                          </div>
                          <div class="details">
                            <div class="section">
                              <h4 id="symptomParameterTableDataTitle" class="section-title">
                                {{ componentData.componentId + ".parameterAssociatedToSymptoms" | translate }}
                                ({{ symptomParameterTableData ? symptomParameterTableData.length : 0 }})
                              </h4>
                              <div class="section-content">
                                <p-table
                                  id="symptomParameterTableData"
                                  [resizableColumns]="true"
                                  #symptomParamTable
                                  class="aw-table2"
                                  [columns]="symptomContextCols"
                                  [value]="symptomParameterTableData"
                                  [(selection)]="selectedSymptomParam"
                                  selectionMode="single"
                                  [scrollable]="true"
                                  scrollHeight="200px"
                                  (onRowSelect)="onSymptomParamRowSelect($event)"
                                  (onRowUnselect)="onSymptomParamRowUnselect()"
                                >
                                  <ng-template pTemplate="emptymessage">
                                    <span *ngIf="!isLoadingMaintenanceProgramTable"> &nbsp;</span>
                                    <div *ngIf="isLoadingMaintenanceProgramTable" class="aw-table-loading-indicator">
                                      <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                                      <div class="lds-hourglass"></div>
                                    </div>
                                  </ng-template>
                                  <ng-template pTemplate="caption">
                                    <div
                                      class="aw-table-header"
                                      [ngClass]="{ 'rows-selected': !isReadOpenMode && showSymptomParamHeader }"
                                    >
                                      <div class="aw-table-global-filter">
                                        <label class="aw-table-global-filter-label">
                                          <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                                        </label>

                                        <input
                                          #ptableCusCustomerGlobalFilter
                                          class="aw-table-global-filter-input"
                                          type="text"
                                          placeholder="{{ 'table.globalFilterText' | translate }}"
                                          (input)="symptomParamTable.filterGlobal($event.target.value, 'contains')"
                                        />
                                      </div>
                                      <div class="aw-table-actions" *ngIf="defect.status !== '4-clo'">
                                        <button
                                          id="editSymptomParameterTableData"
                                          *ngIf="!isReadOpenMode && showSymptomParamHeader"
                                          type="button"
                                          mat-raised-button
                                          color="warn"
                                          (click)="editSelectedSymptomParam()"
                                        >
                                          {{ "global.edit" | translate }}
                                        </button>
                                      </div>
                                    </div>
                                  </ng-template>
                                  <ng-template pTemplate="colgroup" let-columns>
                                    <colgroup>
                                      <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                                    </colgroup>
                                  </ng-template>
                                  <ng-template pTemplate="header" let-columns>
                                    <tr>
                                      <th
                                        pResizableColumn
                                        *ngFor="let col of columns"
                                        [ngStyle]="{ 'text-align': col.alignment }"
                                      >
                                        {{ componentData.componentId + "." + col.field | translate }}
                                      </th>
                                    </tr>
                                  </ng-template>
                                  <ng-template
                                    pTemplate="body"
                                    let-rowData
                                    let-columns="columns"
                                    let-rowIndex="rowIndex"
                                  >
                                    <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                                      <td *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }">
                                        {{ rowData[col.field] }}
                                      </td>
                                    </tr>
                                  </ng-template>
                                </p-table>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>

        <mat-tab id="attributesTab">
          <ng-template mat-tab-label>
            {{ componentData.componentId + ".attributes" | translate }}
          </ng-template>
          <!-- ATTRIBUTES -->
          <div class="grid-row">
            <div id="attributesPanel" class="grid-cell--12">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">
                      {{ componentData.componentId + ".attributes" | translate }}
                    </h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <div class="section">
                    <div class="section-content">
                      <div class="grid-cell--12">
                        <div class="row">
                          <aw-dynamic-attributes
                            id="dynamicAttributes"
                            [workflowControls]="userWorkflow ? userWorkflow.listControlByIdentifier : []"
                            [attributes]="dynamicAttributes"
                            [isReadOpenMode]="isReadOpenMode"
                          ></aw-dynamic-attributes>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>

        <mat-tab id="deferralTab">
          <ng-template mat-tab-label>
            {{ "global.deferral" | translate }}
          </ng-template>
          <!-- DEFERRAL -->
          <div class="grid-row">
            <div id="deferralPanel" class="grid-cell--12">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">
                      {{ "global.deferral" | translate }}
                    </h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <div class="section">
                    <div class="section-content">
                      <div class="row">
                        <div id="deferralAuthor" class="form-group">
                          <label class="form-label">{{ "global.author" | translate }}</label>

                          <div class="form-control">
                            <input
                              type="text"
                              class="aw-input"
                              [disabled]="isReadOpenMode || !deferralBlockVisibility"
                              [(ngModel)]="deferralAuthor"
                            />
                          </div>
                        </div>

                        <div id="deferralLastAuthor" class="form-group">
                          <label class="form-label">{{ "global.lastAuthor" | translate }}</label>

                          <div class="form-control">
                            <input type="text" class="aw-input" disabled="true" [(ngModel)]="deferralLastAuthor" />
                          </div>
                        </div>

                        <div class="section-actions flex--3" *ngIf="!isReadOpenMode && deferralBlockVisibility">
                          <button
                            id="acceptDeferralDeferralPanel"
                            *ngIf="deferralAcceptDeferralVisibility"
                            type="button"
                            mat-raised-button
                            [disabled]="isReadOpenMode"
                            (click)="acceptDeferral()"
                          >
                            {{ componentData.componentId + ".acceptDeferral" | translate }}
                          </button>

                          <button
                            id="refuseDeferralDeferralPanel"
                            *ngIf="deferralRefuseDeferralVisibility"
                            type="button"
                            mat-raised-button
                            (click)="cancelDeferral()"
                          >
                            {{ componentData.componentId + ".refuseDeferral" | translate }}
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="section">
                    <div class="section-content">
                      <div class="column">
                        <div class="row">
                          <div id="deferralDelayCategory" class="form-group">
                            <label class="form-label">{{
                              componentData.componentId + ".delayCategory" | translate
                            }}</label>

                            <div class="form-control">
                              <p-dropdown
                                class="aw-dropdown fixed-width"
                                [options]="delayCategoryList"
                                [(ngModel)]="deferralDelayCategory"
                                [disabled]="isReadOpenMode || !deferralBlockVisibility"
                                [showClear]="true"
                                (onChange)="onChangeDelayCategory()"
                                placeholder="&nbsp;"
                                appendTo="body"
                              ></p-dropdown>
                            </div>
                          </div>

                          <div id="deferralDelayAuthorizedValue" class="form-group">
                            <label class="form-label">{{
                              componentData.componentId + ".authorizedDelay" | translate
                            }}</label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [disabled]="isReadOpenMode || !deferralBlockVisibility"
                                [(ngModel)]="deferralDelayAuthorizedValue"
                              />
                            </div>
                          </div>

                          <div id="deferralDelayAuthorizedUnit" class="form-group">
                            <label class="form-label">{{
                              componentData.componentId + ".authorizedDelayUnit" | translate
                            }}</label>

                            <div class="form-control">
                              <p-dropdown
                                class="aw-dropdown fixed-width"
                                [options]="delayAuthorizedUnitList"
                                [(ngModel)]="deferralDelayAuthorizedUnit"
                                [disabled]="isReadOpenMode || !deferralBlockVisibility"
                                [showClear]="true"
                                placeholder="&nbsp;"
                                appendTo="body"
                              ></p-dropdown>
                            </div>
                          </div>

                          <div id="deferralDelayAuthorizationNumber" class="form-group">
                            <label class="form-label">{{
                              componentData.componentId + ".authorizationNumber" | translate
                            }}</label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [disabled]="isReadOpenMode || !deferralBlockVisibility"
                                [(ngModel)]="deferralDelayAuthorizationNumber"
                              />
                            </div>
                          </div>

                          <div id="defectExtensionNumber" class="form-group">
                            <label class="form-label">{{
                              componentData.componentId + ".extensionNumber" | translate
                            }}</label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [disabled]="isReadOpenMode || !deferralBlockVisibility"
                                [(ngModel)]="defectExtensionNumber"
                              />
                            </div>
                          </div>
                        </div>

                        <div class="row">
                          <div id="deferralFlightRestriction" class="form-group flex--3">
                            <label class="form-label">
                              {{ componentData.componentId + ".flightRestriction" | translate }}
                            </label>

                            <div class="form-control">
                              <textarea
                                class="aw-textarea"
                                [rows]="3"
                                [(ngModel)]="deferralFlightRestriction"
                                pInputTextarea
                                [disabled]="isReadOpenMode || !deferralBlockVisibility"
                              ></textarea>
                            </div>
                          </div>

                          <div id="filler17" class="form-group"></div>
                          <div id="filler18" class="form-group"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>

        <mat-tab id="arisingEventsTab">
          <ng-template mat-tab-label>
            {{ componentData.componentId + ".arisingEvents" | translate }}
          </ng-template>
          <!-- ARISING EVENTS -->
          <div class="grid-row">
            <div id="arisingEventsPanel" class="grid-cell--12">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 id="arisingEventTableDataTitle" class="grid-cell-title">
                      {{ componentData.componentId + ".arisingEvents" | translate }}({{
                        arisingEventTableData ? arisingEventTableData.length : 0
                      }})
                    </h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <div class="section">
                    <div class="section-content">
                      <p-table
                        id="arisingEventTableData"
                        [resizableColumns]="true"
                        #ptableEvents
                        class="aw-table2"
                        [columns]="arisingEventTableCols"
                        [value]="arisingEventTableData"
                        [(selection)]="selectedArisingEvents"
                        [scrollable]="true"
                      >
                        <ng-template pTemplate="emptymessage">
                          <span *ngIf="!isLoadingEventsTable"> &nbsp;</span>

                          <div *ngIf="isLoadingEventsTable" class="aw-table-loading-indicator">
                            <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                            <div class="lds-hourglass"></div>
                          </div>
                        </ng-template>

                        <ng-template pTemplate="caption">
                          <div
                            class="aw-table-header"
                            [ngClass]="{ 'rows-selected': selectedArisingEvents.length > 0 }"
                          >
                            <div class="aw-table-global-filter">
                              <label class="aw-table-global-filter-label">
                                <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                              </label>

                              <input
                                #ptableMeasuresGlobalFilter
                                class="aw-table-global-filter-input"
                                type="text"
                                placeholder="{{ 'table.globalFilterText' | translate }}"
                                (input)="ptableEvents.filterGlobal($event.target.value, 'contains')"
                              />
                            </div>
                            <div class="aw-table-actions" *ngIf="defect.status !== '4-clo'">
                              <p-splitButton
                                *ngIf="!isReadOpenMode && selectedArisingEvents.length === 0"
                                class="aw-split-btn aw-table-action"
                                label="{{ getComponentName() + '.createEvent' | translate }}"
                                [model]="navigationLinkList"
                              ></p-splitButton>
                              <button
                                id="deleteArisingEventTableData"
                                *ngIf="!isReadOpenMode && selectedArisingEvents.length > 0"
                                type="button"
                                mat-raised-button
                                color="warn"
                                (click)="deleteEvents()"
                              >
                                {{ "global.delete" | translate }}
                              </button>
                            </div>
                          </div>
                        </ng-template>

                        <ng-template pTemplate="colgroup" let-columns>
                          <colgroup>
                            <col class="aw-table-checkbox-wrapper" />
                            <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                          </colgroup>
                        </ng-template>

                        <ng-template pTemplate="header" let-columns>
                          <tr>
                            <th class="aw-table-checkbox-wrapper">
                              <p-tableHeaderCheckbox class="aw-table-checkbox"></p-tableHeaderCheckbox>
                            </th>
                            <th
                              pResizableColumn
                              *ngFor="let col of columns"
                              [ngStyle]="{ 'text-align': col.alignment }"
                            >
                              {{ componentData.componentId + "." + col.field | translate }}
                            </th>
                          </tr>
                        </ng-template>

                        <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                          <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                            <td class="aw-table-checkbox-wrapper">
                              <p-tableCheckbox class="aw-table-checkbox" [value]="rowData"></p-tableCheckbox>
                            </td>
                            <td
                              *ngFor="let col of columns"
                              [ngSwitch]="col.field"
                              [ngStyle]="{ 'text-align': col.alignment }"
                            >
                              <a *ngSwitchCase="'asset'" (click)="openArisingEventAsset(rowData)">
                                {{ rowData[col.field] }}
                              </a>
                              <a *ngSwitchCase="'notificationCode'" (click)="openEvent(rowData)">
                                {{ rowData[col.field] }}
                              </a>
                              <span
                                *ngSwitchCase="'notificationSubject'"
                                pTooltip="{{ rowData[col.field] }}"
                                tooltipPosition="bottom"
                              >
                                {{ rowData[col.field] }}
                              </span>
                              <span *ngSwitchCase="'isDeduced'">
                                <i *ngIf="rowData[col.field]" class="fa fa-fw fa-check" aria-hidden="true"></i>
                              </span>
                              <span *ngSwitchDefault>
                                {{ rowData[col.field] }}
                              </span>
                            </td>
                          </tr>
                        </ng-template>
                      </p-table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>

        <mat-tab id="assetAtDateTab">
          <ng-template mat-tab-label>
            {{ componentData.componentId + ".assetAtDate" | translate }}
          </ng-template>
          <!-- ASSET AT DATE TAB -->
          <div class="grid-row">
            <div id="assetPanel" class="grid-cell--12">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">
                      {{ componentData.componentId + ".asset" | translate }}
                    </h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <div class="section">
                    <div class="section-content">
                      <div class="row">
                        <div id="pnCode" class="form-group" *ngIf="!!masterEquipment && !isAircraft()">
                          <label class="form-label">
                            {{ componentData.componentId + ".pn" | translate }}
                          </label>

                          <div class="form-control">
                            <input
                              type="text"
                              class="aw-input"
                              [(ngModel)]="masterEquipment.pnCode"
                              [disabled]="true"
                            />
                          </div>
                        </div>
                        <div id="registration" class="form-group" *ngIf="!!masterEquipment && isAircraft()">
                          <label class="form-label">
                            {{ componentData.componentId + ".registration" | translate }}
                          </label>

                          <div class="form-control">
                            <input
                              type="text"
                              class="aw-input"
                              [(ngModel)]="masterEquipment.registration"
                              [disabled]="true"
                            />
                          </div>
                        </div>
                        <div id="sn" class="form-group" *ngIf="!!masterEquipment && !isAircraft() && !isEngine()">
                          <label class="form-label">
                            {{ componentData.componentId + ".sn" | translate }}
                          </label>

                          <div class="form-control">
                            <input type="text" class="aw-input" [(ngModel)]="masterEquipment.sn" [disabled]="true" />
                          </div>
                        </div>
                        <div id="sn2" class="form-group" *ngIf="!!masterEquipment && isAircraft() && !isEngine()">
                          <label class="form-label">
                            {{ componentData.componentId + ".msn" | translate }}
                          </label>

                          <div class="form-control">
                            <input type="text" class="aw-input" [(ngModel)]="masterEquipment.sn" [disabled]="true" />
                          </div>
                        </div>
                        <div id="sn3" class="form-group" *ngIf="!!masterEquipment && isEngine() && !isAircraft()">
                          <label class="form-label">
                            {{ componentData.componentId + ".esn" | translate }}
                          </label>

                          <div class="form-control">
                            <input type="text" class="aw-input" [(ngModel)]="masterEquipment.sn" [disabled]="true" />
                          </div>
                        </div>
                        <div id="familyVariantCode" *ngIf="!!masterEquipment" class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".familyVariant" | translate }}
                          </label>

                          <div class="form-control">
                            <input
                              type="text"
                              class="aw-input"
                              [(ngModel)]="masterEquipment.familyVariantCode"
                              [disabled]="true"
                            />
                          </div>
                        </div>
                        <div id="operationalStatus" *ngIf="!!masterEquipment" class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".assetStatus" | translate }}
                          </label>

                          <div class="form-control">
                            <input
                              type="text"
                              class="aw-input"
                              [(ngModel)]="masterEquipment.operationalStatus"
                              [disabled]="true"
                            />
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div id="functionLocationStr" class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".functionLocation" | translate }}
                          </label>

                          <div class="form-control">
                            <input type="text" class="aw-input" [disabled]="true" [(ngModel)]="functionLocationStr" />
                          </div>
                        </div>
                        <div id="ownerCustomerCode" class="form-group" *ngIf="!!masterEquipment">
                          <label class="form-label">
                            {{ componentData.componentId + ".owner" | translate }}
                          </label>

                          <div class="form-control">
                            <input
                              type="text"
                              class="aw-input"
                              [(ngModel)]="masterEquipment.ownerCustomerCode"
                              [disabled]="true"
                            />
                          </div>
                        </div>
                        <div id="operatorCustomerCode" class="form-group" *ngIf="!!masterEquipment">
                          <label class="form-label">
                            {{ componentData.componentId + ".operator" | translate }}
                          </label>

                          <div class="form-control">
                            <input
                              type="text"
                              class="aw-input"
                              [(ngModel)]="masterEquipment.operatorCustomerCode"
                              [disabled]="true"
                            />
                          </div>
                        </div>
                        <div id="filler19" class="form-group"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="grid-row">
            <div id="countersPanel" class="grid-cell--12">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 id="bidoMeasuresDisplayedTitle" class="grid-cell-title">
                      {{ componentData.componentId + ".counters" | translate }} ({{
                        !!bidoMeasuresDisplayed ? bidoMeasuresDisplayed.length : 0
                      }})
                    </h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <div class="section">
                    <div class="section-content">
                      <div class="grid-cell-content grid-cell-content-with-section">
                        <div class="section">
                          <div class="section-content">
                            <p-table
                              id="bidoMeasuresDisplayed"
                              [resizableColumns]="true"
                              #ptableMeasures
                              class="aw-table2"
                              [columns]="measuresTableCols"
                              [value]="bidoMeasuresDisplayed"
                              [(selection)]="selectedMeasure"
                              [scrollable]="true"
                            >
                              <ng-template pTemplate="emptymessage">
                                <span *ngIf="!isLoadingMeasureTable"> &nbsp;</span>

                                <div *ngIf="isLoadingMeasureTable" class="aw-table-loading-indicator">
                                  <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                                  <div class="lds-hourglass"></div>
                                </div>
                              </ng-template>

                              <ng-template pTemplate="caption">
                                <div
                                  class="aw-table-header"
                                  [ngClass]="{ 'rows-selected': selectedMeasure.length > 0 }"
                                >
                                  <div class="aw-table-global-filter">
                                    <label class="aw-table-global-filter-label">
                                      <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                                    </label>

                                    <input
                                      #ptableMeasuresGlobalFilter
                                      class="aw-table-global-filter-input"
                                      type="text"
                                      placeholder="{{ 'table.globalFilterText' | translate }}"
                                      (input)="ptableMeasures.filterGlobal($event.target.value, 'contains')"
                                    />
                                  </div>

                                  <div class="aw-table-actions" *ngIf="defect.status !== '4-clo'">
                                    <button
                                      id="updateMeasureBidoMeasuresDisplayed"
                                      *ngIf="!isReadOpenMode"
                                      type="button"
                                      mat-raised-button
                                      (click)="updateMeasure()"
                                    >
                                      {{ componentData.componentId + ".updateMeasure" | translate }}
                                    </button>

                                    <button
                                      id="estimateCounterBidoMeasuresDisplayed"
                                      *ngIf="!isReadOpenMode && isEstimateCounterVisible()"
                                      type="button"
                                      mat-raised-button
                                      (click)="estimateCounter()"
                                    >
                                      {{ componentData.componentId + ".estimateCounter" | translate }}
                                    </button>
                                  </div>
                                </div>
                              </ng-template>

                              <ng-template pTemplate="colgroup" let-columns>
                                <colgroup>
                                  <!-- <col class="aw-table-checkbox-wrapper" /> -->
                                  <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                                </colgroup>
                              </ng-template>

                              <ng-template pTemplate="header" let-columns>
                                <tr>
                                  <!-- <th class="aw-table-checkbox-wrapper">
                          <p-tableHeaderCheckbox class="aw-table-checkbox"></p-tableHeaderCheckbox>
                        </th> -->

                                  <th
                                    pResizableColumn
                                    *ngFor="let col of columns"
                                    [ngStyle]="{ 'text-align': col.alignment }"
                                  >
                                    {{ componentData.componentId + "." + col.field | translate }}
                                  </th>
                                </tr>
                              </ng-template>
                              <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                                <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                                  <!-- <td class="aw-table-checkbox-wrapper">
                                <p-tableCheckbox class="aw-table-checkbox" [value]="rowData"></p-tableCheckbox>
                              </td> -->

                                  <td
                                    *ngFor="let col of columns"
                                    [ngSwitch]="col.field"
                                    [ngStyle]="{ 'text-align': col.alignment }"
                                    [ngClass]="{
                                      'value-none': col.field === 'remainingValue' && getAlertIcon(rowData) === '',
                                      'value-red': col.field === 'remainingValue' && getAlertIcon(rowData) === 'red',
                                      'value-green':
                                        col.field === 'remainingValue' && getAlertIcon(rowData) === 'green',
                                      'value-yellow':
                                        col.field === 'remainingValue' && getAlertIcon(rowData) === 'yellow'
                                    }"
                                  >
                                    <span *ngSwitchCase="'counterCode'">
                                      <span>
                                        {{ rowData[col.field] }}
                                        <i
                                          *ngIf="getMonthGapToolTip(rowData) !== ''"
                                          style="color:#ff9800"
                                          class="fa fa-fw fa-exclamation-triangle"
                                          aria-hidden="true"
                                          pTooltip="{{ getMonthGapToolTip(rowData) }}"
                                        ></i>
                                      </span>
                                    </span>
                                    <span
                                      *ngSwitchCase="'remainingValue'"
                                      pTooltip="{{ getAlertIconTooltip(rowData) }}"
                                    >
                                      {{ rowData[col.field] }}
                                    </span>
                                    <span *ngSwitchDefault>
                                      {{ rowData[col.field] }}
                                    </span>
                                  </td>
                                </tr>
                              </ng-template>
                            </p-table>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>

        <mat-tab id="documentsTab">
          <ng-template mat-tab-label>
            {{ "global.documents" | translate }}
          </ng-template>
          <!-- DOCUMENTS -->
          <div class="grid-row">
            <div id="documentsPanel" class="grid-cell--12">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 id="documentTableTitle" class="grid-cell-title">
                      {{ "global.documents" | translate }} ({{ documentTable ? documentTable.length : 0 }})
                    </h3>
                  </div>
                </div>

                <div class="grid-cell-content">
                  <p-table
                    id="documentTable"
                    [resizableColumns]="true"
                    #ptableDocument
                    class="aw-table2"
                    [columns]="documentTableColList"
                    [value]="documentTable"
                    [(selection)]="selectedDocumentList"
                    dataKey="docName"
                    [scrollable]="true"
                  >
                    <ng-template pTemplate="emptymessage">
                      <span *ngIf="!isLoadingDocumentTable"> &nbsp;</span>

                      <div *ngIf="isLoadingDocumentTable" class="aw-table-loading-indicator">
                        <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                        <div class="lds-hourglass"></div>
                      </div>
                    </ng-template>

                    <ng-template pTemplate="caption">
                      <div class="aw-table-header" [ngClass]="{ 'rows-selected': selectedDocumentList.length > 0 }">
                        <div class="aw-table-global-filter">
                          <label class="aw-table-global-filter-label">
                            <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                          </label>

                          <input
                            #ptableDocumentGlobalFilter
                            class="aw-table-global-filter-input"
                            type="text"
                            placeholder="{{ 'table.globalFilterText' | translate }}"
                            (input)="ptableDocument.filterGlobal($event.target.value, 'contains')"
                          />
                        </div>

                        <div class="aw-table-actions" *ngIf="defect.status !== '4-clo'">
                          <button
                            id="downloadDocumentTable"
                            *ngIf="selectedDocumentList.length > 0"
                            type="button"
                            mat-raised-button
                            (click)="downloadFiles()"
                          >
                            {{ "global.download" | translate }}
                          </button>

                          <button
                            id="deleteDocumentTable"
                            *ngIf="!isReadOpenMode && selectedDocumentList.length > 0"
                            type="button"
                            mat-raised-button
                            color="warn"
                            (click)="deleteSelectedDocumentList()"
                          >
                            {{ "global.delete" | translate }}
                          </button>

                          <button
                            id="editDocumentTable"
                            *ngIf="!isReadOpenMode && selectedDocumentList.length === 1"
                            type="button"
                            mat-raised-button
                            (click)="editDocument()"
                          >
                            {{ "global.edit" | translate }}
                          </button>

                          <button
                            id="openDocumentTable"
                            *ngIf="selectedDocumentList.length === 1"
                            type="button"
                            mat-raised-button
                            (click)="openDocument()"
                          >
                            {{ "global.open" | translate }}
                          </button>
                          <p-fileUpload
                            id="uploadDocumentTable"
                            #fileUploader
                            *ngIf="!isReadOpenMode && selectedDocumentList.length === 0"
                            chooseLabel="{{ 'global.upload' | translate }}"
                            name="document[]"
                            customUpload="true"
                            mode="basic"
                            auto="true"
                            (uploadHandler)="uploadDocument($event, fileUploader)"
                          ></p-fileUpload>
                        </div>
                      </div>
                    </ng-template>

                    <ng-template pTemplate="colgroup" let-columns>
                      <colgroup>
                        <col class="aw-table-checkbox-wrapper" />
                        <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                      </colgroup>
                    </ng-template>

                    <ng-template pTemplate="header" let-columns>
                      <tr>
                        <th class="aw-table-checkbox-wrapper">
                          <p-tableHeaderCheckbox class="aw-table-checkbox"></p-tableHeaderCheckbox>
                        </th>

                        <th
                          pResizableColumn
                          *ngFor="let col of columns"
                          [ngSwitch]="col.field"
                          [ngStyle]="{ 'text-align': col.alignment }"
                        >
                          <span *ngSwitchCase="'isChecked'">
                            <i class="fa fa-fw fa-envelope" aria-hidden="true"></i>
                          </span>

                          <span *ngSwitchDefault> {{ componentData.componentId + "." + col.field | translate }} </span>
                        </th>
                      </tr>
                    </ng-template>

                    <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                      <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                        <td class="aw-table-checkbox-wrapper">
                          <p-tableCheckbox class="aw-table-checkbox" [value]="rowData"></p-tableCheckbox>
                        </td>

                        <td
                          *ngFor="let col of columns"
                          [ngSwitch]="col.field"
                          [ngStyle]="{ 'text-align': col.alignment }"
                        >
                          <span *ngSwitchCase="'isChecked'">
                            <i
                              *ngIf="rowData[col.field] !== null && rowData[col.field]"
                              class="fa fa-fw fa-check"
                              aria-hidden="true"
                            ></i>
                          </span>

                          <span *ngSwitchDefault> {{ rowData[col.field] }} </span>
                        </td>
                      </tr>
                    </ng-template>
                  </p-table>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>

        <mat-tab id="diffusionTab">
          <ng-template mat-tab-label>
            {{ componentData.componentId + ".diffusion" | translate }}
          </ng-template>
          <!-- DIFFUSION -->
          <div class="grid-row">
            <div id="diffusionPanel" class="grid-cell--12">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 id="diffusionTableDataTitle" class="grid-cell-title">
                      {{ componentData.componentId + ".diffusion" | translate }} ({{
                        diffusionTableData ? diffusionTableData.length : 0
                      }})
                    </h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <div class="section">
                    <div class="section-content">
                      <p-table
                        id="diffusionTableData"
                        [resizableColumns]="true"
                        #ptableDiffusion
                        class="aw-table2"
                        [columns]="diffusionTableCols"
                        [value]="diffusionTableData"
                        [(selection)]="selectedDiffusion"
                        [scrollable]="true"
                      >
                        <ng-template pTemplate="emptymessage">
                          <span *ngIf="!isLoadingDiffusionTable"> &nbsp;</span>

                          <div *ngIf="isLoadingDiffusionTable" class="aw-table-loading-indicator">
                            <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                            <div class="lds-hourglass"></div>
                          </div>
                        </ng-template>

                        <ng-template pTemplate="caption">
                          <div class="aw-table-header" [ngClass]="{ 'rows-selected': selectedDiffusion.length > 0 }">
                            <div class="aw-table-global-filter">
                              <label class="aw-table-global-filter-label">
                                <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                              </label>

                              <input
                                #ptableMeasuresGlobalFilter
                                class="aw-table-global-filter-input"
                                type="text"
                                placeholder="{{ 'table.globalFilterText' | translate }}"
                                (input)="ptableDiffusion.filterGlobal($event.target.value, 'contains')"
                              />
                            </div>
                            <div class="aw-table-actions" *ngIf="defect.status !== '4-clo'">
                              <button
                                id="sendDiffusionTableData"
                                *ngIf="!isReadOpenMode && selectedDiffusion.length > 0"
                                type="button"
                                mat-raised-button
                                color="warn"
                                (click)="sendDiffusionMail()"
                              >
                                {{ componentData.componentId + ".send" | translate }}
                              </button>
                            </div>
                          </div>
                        </ng-template>

                        <ng-template pTemplate="colgroup" let-columns>
                          <colgroup>
                            <col class="aw-table-checkbox-wrapper" />
                            <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                          </colgroup>
                        </ng-template>

                        <ng-template pTemplate="header" let-columns>
                          <tr>
                            <th class="aw-table-checkbox-wrapper">
                              <p-tableHeaderCheckbox class="aw-table-checkbox"></p-tableHeaderCheckbox>
                            </th>
                            <th
                              pResizableColumn
                              *ngFor="let col of columns"
                              [ngStyle]="{ 'text-align': col.alignment }"
                            >
                              {{ componentData.componentId + "." + col.field | translate }}
                            </th>
                          </tr>
                        </ng-template>

                        <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                          <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                            <td class="aw-table-checkbox-wrapper">
                              <p-tableCheckbox class="aw-table-checkbox" [value]="rowData"></p-tableCheckbox>
                            </td>
                            <td
                              *ngFor="let col of columns"
                              [ngSwitch]="col.field"
                              [ngStyle]="{ 'text-align': col.alignment }"
                            >
                              <span *ngSwitchDefault>
                                {{ rowData[col.field] }}
                              </span>
                            </td>
                          </tr>
                        </ng-template>
                      </p-table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>
      </mat-tab-group>
    </div>

    <aw-dialog-defect-bido-document
      *ngIf="showDocumentDialog"
      [(display)]="showDocumentDialog"
      [document]="currentDocument"
      [openMode]="documentDialogOpenMode"
      [types]="documentTypeList"
      (onValidated)="onAddDocument($event)"
    ></aw-dialog-defect-bido-document>

    <aw-dialog-defect-component
      *ngIf="showCorrectiveActionComponentDialog"
      [(display)]="showCorrectiveActionComponentDialog"
      [component]="currentCorrectiveActionComponent"
      [decisionList]="correctiveActionComponentDecisionList"
      [masterEquipment]="masterEquipment"
      [openMode]="correctiveActionComponentDialogOpenMode"
      [pnTypeList]="pnTypeList"
      (onValidated)="onAddCorrectiveActionComponent($event)"
    ></aw-dialog-defect-component>

    <aw-dialog-defect-task
      *ngIf="showCorrectiveActionTaskDialog"
      [(display)]="showCorrectiveActionTaskDialog"
      [familyVariantCode]="masterEquipment.familyVariantCode"
      (onValidated)="onAddCorrectiveActionTask($event)"
    ></aw-dialog-defect-task>

    <aw-dialog-search-equipment
      *ngIf="showDefectEquipmentAssetCodeDialog"
      [(display)]="showDefectEquipmentAssetCodeDialog"
      [selectionMultiple]="false"
      [family-variant]="masterEquipment.familyVariantCode"
      (onSelected)="onSelectDefectEquipmentAssetCode($event)"
    ></aw-dialog-search-equipment>

    <aw-dialog-search-pn
      *ngIf="showDefectPartDialog"
      [(display)]="showDefectPartDialog"
      (onSelected)="onSelectDefectPart($event)"
      [familyVariant]="partSearchInput.familyVariantSelected"
      [pnType]="partSearchInput.type"
      [toolSearch]="partSearchInput.toolSearch"
      [showFamilyVariantSelection]="false"
    ></aw-dialog-search-pn>

    <aw-dialog-work-package
      *ngIf="showCorrectiveActionWorkPackageDialog"
      [(display)]="showCorrectiveActionWorkPackageDialog"
      [displayDescription]="false"
      [displayOperation]="false"
      [displayStatus]="false"
      [displayWorkCenter]="false"
      (onValidated)="onCreateWorkPackage($event)"
    ></aw-dialog-work-package>

    <p-overlayPanel
      #opWorkPackageToShow
      [appendTo]="'body'"
      (onShow)="reportListToShowVisible = true"
      (onHide)="reportListToShowVisible = false"
    >
      <div style="width: 60vw;">
        <div *ngIf="isReportDataLoading" class="lds-hourglass"></div>
        <p-table
          id="reportTable"
          [resizableColumns]="true"
          #tableAssets
          class="aw-table2"
          [columns]="reportTableCols"
          [value]="reportTable"
          [scrollable]="true"
        >
          <ng-template pTemplate="emptymessage">
            <span *ngIf="!isLoading"> &nbsp;</span>

            <div *ngIf="isLoading" class="aw-table-loading-indicator">
              <div class="loading-message">{{ "table.loadingData" | translate }}</div>
              <div class="lds-hourglass"></div>
            </div>
          </ng-template>

          <ng-template pTemplate="colgroup" let-columns>
            <colgroup>
              <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
            </colgroup>
          </ng-template>

          <ng-template pTemplate="header" let-columns>
            <tr>
              <th pResizableColumn *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }">
                {{ getComponentName() + "." + col.field | translate }}
              </th>
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
            <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
              <td *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }" [ngSwitch]="col.field">
                <button
                  id="generateReportTable"
                  *ngSwitchCase="'action'"
                  type="button"
                  mat-raised-button
                  (click)="generateReport(rowData['id'])"
                >
                  {{ getComponentName() + ".generate" | translate }}
                </button>

                <span *ngSwitchCase="'fileName'" pTooltip="{{ rowData['fileDesc'] }}" tooltipPosition="bottom">{{
                  rowData[col.field]
                }}</span>

                <span *ngSwitchDefault>{{ rowData[col.field] }}</span>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </p-overlayPanel>
  </div>
</div>

<aw-status-update-history
  *ngIf="showStatusUpdatesPopup"
  [object]="defect"
  [data]="tableStatusUpdatesData"
  [deleteApi]="deleteApi"
  [(display)]="showStatusUpdatesPopup"
  [keyMap]="updatesKeyMap"
></aw-status-update-history>

<aw-dialog-add-symptom
  *ngIf="showSymptomTableDialog"
  [(display)]="showSymptomTableDialog"
  [symptomMap]="symptomNameMap"
  [data]="dataSymptom"
  (onValidated)="onUpdateSymptom($event)"
  (onAdded)="onAddSymptom($event)"
></aw-dialog-add-symptom>

<aw-dialog-add-param-value
  *ngIf="showContextTableDialog"
  [(display)]="showContextTableDialog"
  [data]="dataContext"
  (onAdded)="onAddContextParam($event)"
></aw-dialog-add-param-value>

<aw-dialog-add-param-value
  *ngIf="showSymptomParamDialog"
  [(display)]="showSymptomParamDialog"
  [data]="dataContext"
  (onAdded)="onAddSymptomParamParam($event)"
></aw-dialog-add-param-value>
