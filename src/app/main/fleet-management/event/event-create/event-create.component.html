<div #page *ngIf="loadedWorkflow">
  <div class="page-header">
    <div class="page-info">
      <div>
        <div class="page-title">
          {{ "transaction." + componentData.componentId | translate }}
        </div>

        <div class="page-subtitle">
          <div *ngIf="!isCreateOpenMode && componentData && componentData.objectId" class="page-subtitle">
            - {{ componentSubtitle }}
          </div>
        </div>
      </div>
      <div
        [ngClass]="{ disabled: bidoNotificationDTO.typeCode === 'WPR' }"
        class="object-status"
        *ngIf="bidoNotificationDTO.status && bidoNotificationDTO.notificationStatusVisibility"
        (click)="
          bidoNotificationDTO.typeCode !== aWPropertiesConstants.EVENT_TYPE_WORK_POSTPONEMENT_REQUEST && showStatus()
        "
      >
        {{ bidoNotificationDTO.status | formatSelectOption: statusMap }}
      </div>
    </div>

    <div class="page-actions">
      <button
        id="reopen"
        *ngIf="!isCreateOpenMode && isReopenEnabled"
        type="button"
        mat-raised-button
        (click)="reopenEvent()"
      >
        {{ componentData.componentId + ".reopen" | translate }}
      </button>

      <button id="validateAcrs" *ngIf="acrsButtonVisibility()" type="button" mat-raised-button (click)="updateACRS()">
        <span *ngIf="showForm1()">{{ componentData.componentId + ".validateForm1" | translate }}</span>
        <span *ngIf="!showForm1()">{{ componentData.componentId + ".validateAcrs" | translate }}</span>
      </button>

      <button
        id="edit"
        *ngIf="isReadOpenMode && !isReopenEnabled && hasUpdateAccessRight"
        type="button"
        mat-raised-button
        (click)="editEvent()"
      >
        {{ "global.edit" | translate }}
      </button>

      <button
        id="cancel"
        *ngIf="!isReadOpenMode && !isCreateOpenMode"
        type="button"
        color="warn"
        mat-raised-button
        (click)="cancelEvent()"
      >
        {{ "global.cancel" | translate }}
      </button>

      <button
        id="save"
        *ngIf="!isReadOpenMode && isCreateOpenMode"
        class="btn-with-spinner"
        color="primary"
        type="button"
        mat-raised-button
        (click)="preSavedEvent()"
      >
        <span class="lds-hourglass" *ngIf="showSaveSpinner"></span>
        {{ "global.save" | translate }}
      </button>

      <button
        id="save2"
        *ngIf="(!isReadOpenMode && !isCreateOpenMode) || isReopenEnabled"
        type="button"
        class="btn-with-spinner"
        color="primary"
        mat-raised-button
        (click)="preSavedEvent()"
      >
        <span class="lds-hourglass" *ngIf="showSaveSpinner"></span>
        {{ "global.save" | translate }}
      </button>

      <button
        id="actions"
        mat-icon-button
        class="mat-elevation-z1"
        matTooltip="{{ 'global.showAllActionTooltip' | translate }}"
        matTooltipPosition="above"
        aria-label="Show all actions"
        [matMenuTriggerFor]="actions"
      >
        <mat-icon>more_horiz</mat-icon>
      </button>
      <mat-menu #actions="matMenu">
        <button
          id="generateACRSForm"
          *ngIf="isAircraft() && generateACRSFormVisible"
          mat-menu-item
          (click)="downloadACRSForm()"
        >
          {{ componentData.componentId + ".generateACRSForm" | translate }}
        </button>
        <button
          id="generateEASAForm"
          *ngIf="!isAircraft() && generateACRSFormVisible"
          mat-menu-item
          (click)="downloadEASAForm()"
        >
          {{ componentData.componentId + ".generateEASAForm" | translate }}
        </button>

        <button id="updates" *ngIf="isReadOpenMode" mat-menu-item (click)="openStatusUpdatesPopup()">
          {{ "updates" | translate }}
        </button>
        <button
          id="openXLSFormat"
          *ngIf="!isCreateOpenMode && bidoNotificationDTO.bidoNotificationTypeDTO.typeCategory === '1-ope'"
          mat-menu-item
          (click)="openXLSFormat()"
        >
          {{ componentData.componentId + ".openXLSFormat" | translate }}
        </button>
        <button id="refresh" mat-menu-item (click)="reloadEvent()">{{ "global.refresh" | translate }}</button>
        <button id="favorites" mat-menu-item (click)="updateFavoriteState()">
          {{ (isFavoriteEntry ? "page.removeFromFavorites" : "page.addToFavorites") | translate }}
        </button>
      </mat-menu>
    </div>
  </div>

  <div class="page-wrapper">
    <div class="page-container">
      <mat-tab-group animationDuration="0ms" dynamicHeight>
        <mat-tab id="homeTab">
          <ng-template mat-tab-label>
            {{ "home" | translate }}
          </ng-template>
          <div class="grid-row">
            <div id="mainDataPanel" class="grid-cell--12">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">
                      {{ "page.mainData" | translate }}
                    </h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <!-- ROW 1-->
                  <div class="row">
                    <div id="notificationCode" class="form-group" *ngIf="!isCreateOpenMode">
                      <label class="form-label">
                        {{ componentData.componentId + ".code" | translate }}
                      </label>

                      <div class="form-control">
                        <input
                          type="text"
                          class="aw-input"
                          [(ngModel)]="bidoNotificationDTO.notificationCode"
                          [disabled]="true"
                        />
                      </div>
                    </div>

                    <div id="typeCategory" class="form-group" [ngClass]="{ required: !isReadOpenMode }">
                      <label class="form-label">
                        {{ componentData.componentId + ".category" | translate }}
                      </label>

                      <div class="form-control">
                        <p-dropdown
                          class="aw-dropdown fixed-width"
                          [options]="categoryMap"
                          [showClear]="true"
                          [(ngModel)]="bidoNotificationDTO.bidoNotificationTypeDTO.typeCategory"
                          placeholder="&nbsp;"
                          (onChange)="getTypeMap()"
                          [disabled]="isReadOpenMode || !isCreateOpenMode"
                        ></p-dropdown>
                      </div>
                    </div>

                    <div id="selectedType" class="form-group" [ngClass]="{ required: !isReadOpenMode }">
                      <label class="form-label">
                        {{ componentData.componentId + ".type" | translate }}
                      </label>

                      <div class="form-control">
                        <p-dropdown
                          class="aw-dropdown fixed-width"
                          [options]="eventTypeMap"
                          [showClear]="true"
                          placeholder="&nbsp;"
                          [(ngModel)]="selectedType"
                          (onChange)="getStatusVal()"
                          [disabled]="isTypeEditable()"
                        ></p-dropdown>
                      </div>
                    </div>

                    <div
                      id="notificationAsset"
                      class="form-group"
                      [ngClass]="{ disabled: isReadOpenMode, required: !isReadOpenMode }"
                    >
                      <label class="form-label">{{ componentData.componentId + ".asset" | translate }}</label>
                      <div class="form-control form-control-with-modal" (click)="searchAsset($event, 0)">
                        <input
                          type="text"
                          class="aw-input"
                          [(ngModel)]="notificationAsset"
                          [ngModelOptions]="{ standalone: true }"
                          disabled="true"
                        />

                        <div class="btn-external-link-wrapper">
                          <i
                            class="fa fa-fw fa-external-link aw-icon read-only-link"
                            aria-hidden="true"
                            tooltipPosition="top"
                            (click)="openLinkAssetEquipment($event)"
                          ></i>
                        </div>
                        <div class="btn-clear-wrapper">
                          <i
                            *ngIf="notificationAsset && !isReadOpenMode"
                            class="ui-dropdown-clear-icon pi pi-times aw-icon btn-clear"
                            aria-hidden="true"
                            (click)="resetAssetField($event)"
                          ></i>
                        </div>
                        <div class="btn-search-wrapper">
                          <i
                            class="fa fa-fw fa-search aw-icon btn-search"
                            *ngIf="!isReadOpenMode"
                            aria-hidden="true"
                            (click)="searchAsset($event, 0)"
                          ></i>
                        </div>
                      </div>
                    </div>

                    <div id="reportingPeriodStartDate" class="form-group" [ngClass]="{ required: !isReadOpenMode }">
                      <label class="form-label">
                        {{ componentData.componentId + ".date" | translate }}
                      </label>

                      <div class="form-control">
                        <p-calendar
                          showButtonBar="true"
                          [monthNavigator]="true"
                          [yearNavigator]="true"
                          [yearRange]="sessionService.calendarYearRange"
                          class="aw-calendar"
                          [dateFormat]="sessionService.dateFormatPrimeNG"
                          [locale]="sessionService.calendarFormat"
                          [(ngModel)]="bidoNotificationDTO.reportingPeriodStartDate"
                          appendTo="body"
                          [showTime]="true"
                          [disabled]="isEventDateEditable()"
                        ></p-calendar>
                      </div>
                    </div>
                  </div>
                  <!-- ROW 2-->
                  <div class="row">
                    <div id="eventReason" class="form-group" *ngIf="isEventReasonVisible()">
                      <label class="form-label">
                        {{ componentData.componentId + ".eventReason" | translate }}
                      </label>

                      <div class="form-control">
                        <p-dropdown
                          class="aw-dropdown fixed-width"
                          [options]="eventReasonMap"
                          [showClear]="true"
                          placeholder="&nbsp;"
                          [(ngModel)]="bidoNotificationDTO.eventReason"
                          [disabled]="isReadOpenMode || isFieldEnabled"
                        ></p-dropdown>
                      </div>
                    </div>

                    <div id="isDeduced" class="form-group">
                      <label class="form-label">
                        {{ componentData.componentId + ".isDeduced" | translate }}
                      </label>

                      <div class="form-control">
                        <p-checkbox
                          binary="true"
                          class="aw-checkbox"
                          [(ngModel)]="bidoNotificationDTO.isDeduced"
                          [disabled]="true"
                        ></p-checkbox>
                      </div>
                    </div>
                    <div id="isScheduled" class="form-group" *ngIf="isScheduleVisible()">
                      <label class="form-label">
                        {{ componentData.componentId + ".isScheduled" | translate }}
                      </label>

                      <div class="form-control">
                        <p-checkbox
                          binary="true"
                          class="aw-checkbox"
                          [(ngModel)]="bidoNotificationDTO.isScheduled"
                          [disabled]="isReadOpenMode || isFieldEnabled"
                        ></p-checkbox>
                      </div>
                    </div>

                    <div
                      id="reportingPeriodEndDate"
                      class="form-group"
                      *ngIf="!isCreateOpenMode && bidoNotificationDTO.bidoNotificationTypeDTO.typeCategory !== '5-def'"
                    >
                      <label class="form-label">
                        {{ componentData.componentId + ".closureDate" | translate }}
                      </label>

                      <div class="form-control">
                        <p-calendar
                          showButtonBar="true"
                          [monthNavigator]="true"
                          [yearNavigator]="true"
                          [yearRange]="sessionService.calendarYearRange"
                          class="aw-calendar"
                          [dateFormat]="sessionService.dateFormatPrimeNG"
                          [locale]="sessionService.calendarFormat"
                          [(ngModel)]="bidoNotificationDTO.reportingPeriodEndDate"
                          appendTo="body"
                          [showTime]="true"
                          [disabled]="isReadOpenMode"
                        ></p-calendar>
                      </div>
                    </div>

                    <div
                      id="filler"
                      class="form-group"
                      *ngIf="bidoNotificationDTO.bidoNotificationTypeDTO.typeCategory === '5-def'"
                    ></div>
                    <div
                      id="reportingDate"
                      class="form-group"
                      [ngClass]="{
                        required:
                          !isReadOpenMode &&
                          !isCreateOpenMode &&
                          bidoNotificationDTO.status === aWPropertiesConstants.EVENT_STATUS_DRAFT_KEY
                      }"
                      *ngIf="bidoNotificationDTO.bidoNotificationTypeDTO.typeCategory === '1-ope'"
                    >
                      <label class="form-label">
                        {{ componentData.componentId + ".notificationDate" | translate }}
                      </label>

                      <div class="form-control">
                        <p-calendar
                          showButtonBar="true"
                          [monthNavigator]="true"
                          [yearNavigator]="true"
                          [yearRange]="sessionService.calendarYearRange"
                          class="aw-calendar"
                          [dateFormat]="sessionService.dateFormatPrimeNG"
                          [locale]="sessionService.calendarFormat"
                          [(ngModel)]="bidoNotificationDTO.reportingDate"
                          appendTo="body"
                          [showTime]="true"
                          [disabled]="isReadOpenMode"
                        ></p-calendar>
                      </div>
                    </div>

                    <div id="filler2" class="form-group" *ngIf="!isCreateOpenMode"></div>
                    <div id="filler3" class="form-group" *ngIf="!isCreateOpenMode"></div>
                    <div id="filler4" class="form-group" *ngIf="isCreateOpenMode"></div>
                    <div id="filler5" class="form-group" *ngIf="isCreateOpenMode"></div>
                    <div
                      id="filler6"
                      class="form-group"
                      *ngIf="isCreateOpenMode && !bidoNotificationDTO.bidoNotificationTypeDTO.typeCategory"
                    ></div>
                  </div>
                  <!-- ROW 3-->
                  <div class="row">
                    <!-- Location -->
                    <div
                      id="location"
                      class="form-group"
                      [ngClass]="{
                        required:
                          !isReadOpenMode &&
                          !isCreateOpenMode &&
                          bidoNotificationDTO.status === aWPropertiesConstants.EVENT_STATUS_DRAFT_KEY
                      }"
                    >
                      <label class="form-label">
                        {{ componentData.componentId + ".location" | translate }}
                      </label>
                      <div class="form-control">
                        <p-dropdown
                          class="aw-dropdown fixed-width"
                          [options]="eventLocationMap"
                          [disabled]="isReadOpenMode"
                          [(ngModel)]="location"
                          [showClear]="true"
                          placeholder="&nbsp;"
                          appendTo="body"
                        ></p-dropdown>
                      </div>
                    </div>

                    <div id="notificationSubject" class="form-group" *ngIf="!isCreateOpenMode">
                      <label class="form-label">
                        {{ componentData.componentId + ".subject" | translate }}
                      </label>

                      <div class="form-control">
                        <textarea
                          class="aw-textarea"
                          pInputTextarea
                          [(ngModel)]="bidoNotificationDTO.notificationSubject"
                          [rows]="3"
                          pTooltip="{{ bidoNotificationDTO.notificationSubject }}"
                          tooltipPosition="bottom"
                          [disabled]="isReadOpenMode || isFieldEnabled || isCreateOpenMode"
                          maxlength="150"
                        ></textarea>
                      </div>
                    </div>

                    <div id="notificationDescription" class="form-group">
                      <label class="form-label">
                        {{ componentData.componentId + ".description" | translate }}
                      </label>

                      <div class="form-control">
                        <textarea
                          class="aw-textarea"
                          pInputTextarea
                          [(ngModel)]="bidoNotificationDTO.notificationDescription"
                          [rows]="3"
                          [disabled]="isReadOpenMode || isFieldEnabled"
                          maxlength="2000"
                        ></textarea>
                      </div>
                    </div>

                    <div id="notificationRemarks" class="form-group">
                      <label class="form-label">
                        {{ componentData.componentId + ".comment" | translate }}
                      </label>

                      <div class="form-control">
                        <textarea
                          class="aw-textarea"
                          pInputTextarea
                          [rows]="3"
                          maxlength="2000"
                          [(ngModel)]="bidoNotificationDTO.notificationRemarks"
                          [disabled]="isReadOpenMode || isFieldEnabled"
                        ></textarea>
                      </div>
                    </div>

                    <!-- <div class="column" *ngIf="isAirMInstalled"> -->
                    <div id="woCode" class="form-group">
                      <label class="form-label">
                        {{ componentData.componentId + ".workOrder" | translate }}: &nbsp;<a class="anchorClass"
                          ><b (click)="openWorkOrder(woCode)">{{ woCode }}</b></a
                        >
                      </label>
                    </div>
                    <!-- </div> -->
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div [hidden]="isCreateOpenMode">
            <div class="grid-row">
              <div id="linkedEventPanel" class="grid-cell--12">
                <div class="grid-cell grid-cell--container">
                  <div class="grid-cell-header">
                    <div class="grid-cell-title-container">
                      <h3 class="grid-cell-title">
                        {{ componentData.componentId + ".linkedEvent" | translate }}
                      </h3>
                    </div>
                  </div>

                  <div class="grid-cell-content grid-cell-content-with-section">
                    <!-- LINKED EVENT -->
                    <div class="section">
                      <div class="section-content">
                        <div class="row">
                          <div id="notNotificationCode" class="form-group">
                            <label class="form-label"> {{ componentData.componentId + ".code" | translate }} </label>
                            <div
                              class="form-control form-control-with-modal"
                              (click)="searchEventCode($event)"
                              *ngIf="bidoNotificationDTO.status !== '4-clo'"
                            >
                              <input
                                type="text"
                                class="aw-input"
                                [(ngModel)]="bidoNotificationDTO.notNotificationCode"
                                [ngModelOptions]="{ standalone: true }"
                                disabled="true"
                              />
                              <div class="btn-clear-wrapper">
                                <i
                                  class="ui-dropdown-clear-icon pi pi-times aw-icon btn-clear"
                                  aria-hidden="true"
                                  *ngIf="
                                    (!isReadOpenMode || !isFieldEnabled) && bidoNotificationDTO.notNotificationCode
                                  "
                                  (click)="resetEventField($event)"
                                ></i>
                              </div>
                              <div class="btn-search-wrapper">
                                <i
                                  class="fa fa-fw fa-search aw-icon btn-search"
                                  aria-hidden="true"
                                  *ngIf="!isReadOpenMode || !isFieldEnabled"
                                  (click)="searchEventCode($event)"
                                ></i>
                              </div>
                            </div>
                            <div
                              class="form-control form-control-with-modal"
                              *ngIf="bidoNotificationDTO.status === '4-clo'"
                            >
                              <input
                                type="text"
                                class="aw-input"
                                [(ngModel)]="bidoNotificationDTO.notNotificationCode"
                                [ngModelOptions]="{ standalone: true }"
                                disabled="true"
                              />
                            </div>
                            <a
                              *ngIf="!!bidoNotificationDTO.notNotificationCode"
                              style="margin: 1em 0 0 1em; cursor: pointer;"
                              (click)="openLinkedEventAsset(bidoNotificationDTO!.notNotificationCode)"
                              >{{ bidoNotificationDTO.notNotificationCode }}</a
                            >
                          </div>

                          <div id="linkedEventType" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".type" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                style="color: #00652C"
                                [(ngModel)]="linkedEventType"
                                [disabled]="true"
                              />
                            </div>
                          </div>

                          <div id="linkedEventSubject" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".subject" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                style="color: #00652C"
                                [(ngModel)]="linkedEventSubject"
                                [disabled]="true"
                              />
                            </div>
                          </div>

                          <div id="linkedEventStatus" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".status" | translate }}
                            </label>

                            <div class="form-control" *ngIf="isShowEventStatus">
                              <input
                                type="text"
                                class="aw-input"
                                style="color: #00652C"
                                [(ngModel)]="linkedEventStatus"
                                [disabled]="true"
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="grid-row">
            <!-- CRITICALITY -->
            <div *ngIf="isCriticalityVisible()" [hidden]="isCreateOpenMode" class="grid-cell--equally">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">
                      {{ componentData.componentId + ".criticality" | translate }}
                    </h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <div class="section">
                    <div class="section-content">
                      <div class="row">
                        <div id="eventCause" class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".eventCause" | translate }}
                          </label>

                          <div class="form-control">
                            <p-dropdown
                              class="aw-dropdown fixed-width"
                              [options]="eventCauseMap"
                              [showClear]="true"
                              placeholder="&nbsp;"
                              [(ngModel)]="bidoNotificationDTO.eventCause"
                              [disabled]="isReadOpenMode || isFieldEnabled"
                              appendTo="body"
                            ></p-dropdown>
                          </div>
                        </div>

                        <div id="priority" class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".eventPriority" | translate }}
                          </label>

                          <div class="form-control">
                            <p-dropdown
                              class="aw-dropdown fixed-width"
                              [options]="eventPriorityMap"
                              [showClear]="true"
                              placeholder="&nbsp;"
                              [(ngModel)]="bidoNotificationDTO.priority"
                              [disabled]="isReadOpenMode || isFieldEnabled"
                              appendTo="body"
                            ></p-dropdown>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- GEOGRAPHICAL LOCATION -->
            <div id="geographicalLocationPanel" [hidden]="isCreateOpenMode" class="grid-cell--equally">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">
                      {{ componentData.componentId + ".geographicalLocation" | translate }}
                    </h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <div class="section">
                    <div class="section-content">
                      <div class="row">
                        <div id="zone" class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".zone" | translate }}
                          </label>

                          <div class="form-control">
                            <p-dropdown
                              class="aw-dropdown fixed-width"
                              [options]="zoneMap"
                              [showClear]="true"
                              placeholder="&nbsp;"
                              [(ngModel)]="bidoNotificationDTO.zone"
                              [disabled]="isReadOpenMode || isFieldEnabled"
                              (onChange)="getCountries()"
                              appendTo="body"
                            ></p-dropdown>
                          </div>
                        </div>

                        <div id="country" class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".country" | translate }}
                          </label>

                          <div class="form-control">
                            <p-dropdown
                              class="aw-dropdown fixed-width"
                              [options]="countryMap"
                              [showClear]="true"
                              placeholder="&nbsp;"
                              [(ngModel)]="bidoNotificationDTO.country"
                              [disabled]="isReadOpenMode || isFieldEnabled"
                              appendTo="body"
                            ></p-dropdown>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- SOURCE -->
            <div id="sourcePanel" [hidden]="isCreateOpenMode" class="grid-cell--equally">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">
                      {{ componentData.componentId + ".source" | translate }}
                    </h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <div class="section">
                    <div class="section-content">
                      <div class="row">
                        <div id="selectedSystemId" class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".systemId" | translate }}
                          </label>

                          <div class="form-control">
                            <p-dropdown
                              class="aw-dropdown fixed-width"
                              placeholder="&nbsp;"
                              [(ngModel)]="selectedSystemId"
                              [options]="systemIdMap"
                              [showClear]="true"
                              [disabled]="isReadOpenMode || isFieldEnabled"
                              appendTo="body"
                            ></p-dropdown>
                          </div>
                        </div>
                        <div id="systemReference" class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".systemRef" | translate }}
                          </label>

                          <div class="form-control">
                            <input
                              type="text"
                              class="aw-input"
                              [(ngModel)]="systemReference"
                              [disabled]="isReadOpenMode || isFieldEnabled"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>

        <mat-tab id="circumstancesTab" *ngIf="isCircumstancesTabVisible">
          <ng-template mat-tab-label>
            {{ getComponentName() + ".circumstances" | translate }}
          </ng-template>
          <!-- ROOT CAUSE TAB -->
          <div class="grid-row">
            <div class="grid-cell--12">
              <div class="grid-row">
                <div class="grid-cell--6">
                  <div [hidden]="isCreateOpenMode || !isRootCauseTabVisible">
                    <div class="grid-row">
                      <div id="rootCausePanel" class="grid-cell--12">
                        <div class="grid-cell grid-cell--container" *ngIf="isRootCauseTabVisible">
                          <div class="grid-cell-header">
                            <div class="grid-cell-title-container">
                              <h3 class="grid-cell-title">
                                {{ componentData.componentId + ".rootCause" | translate }}
                              </h3>
                            </div>
                          </div>

                          <div class="grid-cell-content grid-cell-content-with-section">
                            <div class="section">
                              <div class="section-content">
                                <div class="column">
                                  <div class="row">
                                    <div id="selectedRootCause" class="form-group">
                                      <label class="form-label">
                                        {{ componentData.componentId + ".rootCause" | translate }}
                                      </label>

                                      <div class="form-control">
                                        <p-dropdown
                                          class="aw-dropdown fixed-width"
                                          [options]="rootCauseList"
                                          [disabled]="isReadOpenMode"
                                          [(ngModel)]="selectedRootCause"
                                          [showClear]="true"
                                          placeholder="&nbsp;"
                                          (onChange)="onChangeDefectRootCause($event.value)"
                                        ></p-dropdown>
                                      </div>
                                    </div>

                                    <div id="defectAssetCode" *ngIf="displayDefectEquipmentBlock" class="form-group">
                                      <label class="form-label">{{ "global.assetCode" | translate }}</label>

                                      <div
                                        class="form-control form-control-with-modal"
                                        [ngClass]="{ disabled: isReadOpenMode }"
                                      >
                                        <div class="form-control-data" (click)="searchAsset($event, 2)">
                                          {{ defectAssetCode }}
                                        </div>

                                        <div *ngIf="defectAssetCode" class="btn-clear-wrapper">
                                          <i
                                            class="ui-dropdown-clear-icon pi pi-times aw-icon btn-clear"
                                            aria-hidden="true"
                                            (click)="resetRootCauseAssetField()"
                                          ></i>
                                        </div>
                                        <div class="btn-search-wrapper">
                                          <i
                                            class="fa fa-fw fa-search aw-icon btn-search"
                                            aria-hidden="true"
                                            (click)="searchAsset($event, 2)"
                                          ></i>
                                        </div>
                                      </div>
                                    </div>

                                    <div
                                      id="defectEquipmentName"
                                      *ngIf="displayDefectEquipmentBlock"
                                      class="form-group"
                                    >
                                      <label class="form-label">{{ "global.name" | translate }}</label>

                                      <div class="form-control">
                                        <input
                                          type="text"
                                          class="aw-input"
                                          disabled="true"
                                          pTooltip="{{ defectEquipmentName }}"
                                          [(ngModel)]="defectEquipmentName"
                                        />
                                      </div>
                                    </div>

                                    <div id="defectEquipmentPn" *ngIf="displayDefectEquipmentBlock" class="form-group">
                                      <label class="form-label">{{ "global.pn" | translate }}</label>

                                      <div class="form-control">
                                        <input
                                          type="text"
                                          class="aw-input"
                                          disabled="true"
                                          [(ngModel)]="defectEquipmentPn"
                                        />
                                      </div>
                                    </div>

                                    <div id="defectEquipmentSn" *ngIf="displayDefectEquipmentBlock" class="form-group">
                                      <label class="form-label">{{ "global.sn" | translate }}</label>

                                      <div class="form-control">
                                        <input
                                          type="text"
                                          class="aw-input"
                                          disabled="true"
                                          [(ngModel)]="defectEquipmentSn"
                                        />
                                      </div>
                                    </div>

                                    <div
                                      id="rootCauseFlCode"
                                      *ngIf="displayDefectFunctionalLocationBlock"
                                      class="form-group"
                                    >
                                      <label class="form-label">{{
                                        componentData.componentId + ".flCode" | translate
                                      }}</label>

                                      <div class="form-control">
                                        <p-dropdown
                                          class="aw-dropdown fixed-width"
                                          [options]="flCodeList"
                                          [(ngModel)]="rootCauseFlCode"
                                          [showClear]="true"
                                          placeholder="&nbsp;"
                                        ></p-dropdown>
                                      </div>
                                    </div>

                                    <div id="rootCausePn" *ngIf="displayDefectPartBlock" class="form-group">
                                      <label class="form-label">{{ "global.part" | translate }}</label>

                                      <div
                                        class="form-control form-control-with-modal"
                                        [ngClass]="{ disabled: isReadOpenMode }"
                                      >
                                        <div class="form-control-data" (click)="openDefectPart($event)">
                                          {{ rootCausePn }}
                                        </div>

                                        <div *ngIf="rootCausePn" class="btn-clear-wrapper">
                                          <i
                                            class="ui-dropdown-clear-icon pi pi-times aw-icon btn-clear"
                                            aria-hidden="true"
                                            (click)="resetRootCausePNField()"
                                          ></i>
                                        </div>
                                        <div class="btn-search-wrapper">
                                          <i
                                            class="fa fa-fw fa-search aw-icon btn-search"
                                            aria-hidden="true"
                                            (click)="openDefectPart($event)"
                                          ></i>
                                        </div>
                                      </div>
                                    </div>

                                    <div id="rootCauseQuantity" *ngIf="displayDefectPartBlock" class="form-group">
                                      <label class="form-label">{{ "global.quantity" | translate }}</label>

                                      <div class="form-control">
                                        <input type="text" class="aw-input" [(ngModel)]="rootCauseQuantity" />
                                      </div>
                                    </div>

                                    <div
                                      id="rootCauseChapter"
                                      *ngIf="displayDefectItemBlock"
                                      class="form-group flex--2"
                                    >
                                      <label class="form-label">{{ "global.ataCode" | translate }}</label>
                                      <aw-ata-code-input
                                        [userWorkflow]="userWorkflow"
                                        [ataCode]="eventAtaCode"
                                        (ataCodeChange)="addATACode($event)"
                                        [familyVariantCode]="familyVariantEquipmentCode"
                                      ></aw-ata-code-input>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- CIRCUMSTANCES TAB -->
                  <div [hidden]="isCreateOpenMode || !isCircumstancesTabVisible">
                    <div class="grid-row">
                      <div id="contextPanel" class="grid-cell--12">
                        <div class="grid-cell grid-cell--container" *ngIf="isCircumstancesTabVisible">
                          <div class="grid-cell-header">
                            <div class="grid-cell-title-container">
                              <h3 class="grid-cell-title">
                                {{ componentData.componentId + ".context" | translate }}
                              </h3>
                            </div>
                          </div>
                          <div class="grid-cell-content grid-cell-content-with-section">
                            <!-- Context -->
                            <div class="section">
                              <div class="section-content">
                                <div class="row">
                                  <div id="symptomCode" class="form-group">
                                    <label class="form-label">
                                      {{ componentData.componentId + ".context" | translate }}
                                    </label>
                                    <div class="form-control">
                                      <p-dropdown
                                        class="aw-dropdown fixed-width"
                                        [disabled]="isReadOpenMode"
                                        [showClear]="true"
                                        [options]="contextNameMap"
                                        [(ngModel)]="contextTabData.symptomCode"
                                        placeholder="&nbsp;"
                                        (onChange)="onChangeContext()"
                                      ></p-dropdown>
                                    </div>
                                  </div>
                                  <div id="missionType" class="form-group">
                                    <label class="form-label">
                                      {{ componentData.componentId + ".missionType" | translate }}
                                    </label>
                                    <div class="form-control">
                                      <p-dropdown
                                        class="aw-dropdown fixed-width"
                                        [disabled]="isReadOpenMode"
                                        [showClear]="true"
                                        [options]="contextMissionMap"
                                        [(ngModel)]="contextTabData.missionType"
                                        placeholder="&nbsp;"
                                        (onChange)="onChangeMissionType()"
                                      ></p-dropdown>
                                    </div>
                                  </div>
                                  <div id="symptomComment" class="form-group">
                                    <label class="form-label">
                                      {{ componentData.componentId + ".comment" | translate }}
                                    </label>
                                    <div class="form-control">
                                      <textarea
                                        class="aw-textarea"
                                        [rows]="3"
                                        pInputTextarea
                                        [(ngModel)]="contextTabData.symptomComment"
                                        [disabled]="isReadOpenMode"
                                        maxlength="300"
                                      ></textarea>
                                    </div>
                                  </div>
                                </div>
                                <div class="section">
                                  <h4 id="contextTableDataSourceTitle" class="section-title">
                                    {{ componentData.componentId + ".parameterAssociated" | translate }}
                                    ({{ contextTableDataSource.dataCount }})
                                  </h4>
                                  <div class="section-content">
                                    <a-table
                                      id="contextTableDataSource"
                                      [dataSource]="contextTableDataSource"
                                      (onRowSelect)="onContextRowSelect()"
                                      (onRowUnselect)="onContextRowUnselect()"
                                    >
                                      <ng-template tableActionsDef>
                                        <button
                                          id="editContext"
                                          *ngIf="!isReadOpenMode && showContextHeader"
                                          type="button"
                                          mat-raised-button
                                          color="warn"
                                          (click)="editSelectedContextParam()"
                                        >
                                          {{ "global.edit" | translate }}
                                        </button>
                                      </ng-template>
                                    </a-table>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="grid-cell--6">
                  <div [hidden]="isCreateOpenMode || !isRootCauseTabVisible">
                    <div class="grid-row">
                      <div id="defectPanel" class="grid-cell--12">
                        <div class="grid-cell grid-cell--container" *ngIf="isRootCauseTabVisible">
                          <div class="grid-cell-header">
                            <div class="grid-cell-title-container">
                              <h3 class="grid-cell-title">
                                {{ componentData.componentId + ".defect" | translate }}
                              </h3>
                            </div>
                          </div>

                          <div class="grid-cell-content grid-cell-content-with-section">
                            <div class="section" *ngIf="isDefectBlockVisible()">
                              <div class="section-content">
                                <div class="row">
                                  <div id="selectedDefectName" class="form-group">
                                    <label class="form-label">
                                      {{ componentData.componentId + ".name" | translate }}
                                    </label>

                                    <div class="form-control">
                                      <p-dropdown
                                        class="aw-dropdown fixed-width"
                                        placeholder="&nbsp;"
                                        [(ngModel)]="selectedDefectName"
                                        [options]="defectNameMap"
                                        [showClear]="true"
                                        [disabled]="isReadOpenMode"
                                      ></p-dropdown>
                                    </div>
                                  </div>
                                  <div id="selectedDefectLocation" class="form-group">
                                    <label class="form-label">
                                      {{ componentData.componentId + ".location" | translate }}
                                    </label>

                                    <div class="form-control">
                                      <p-dropdown
                                        class="aw-dropdown fixed-width"
                                        placeholder="&nbsp;"
                                        [(ngModel)]="selectedDefectLocation"
                                        [options]="locationMap"
                                        [showClear]="true"
                                        [disabled]="isReadOpenMode"
                                      ></p-dropdown>
                                    </div>
                                  </div>
                                  <div id="rootCauseComment" class="form-group">
                                    <label class="form-label">
                                      {{ componentData.componentId + ".description" | translate }}
                                    </label>

                                    <div class="form-control">
                                      <textarea
                                        class="aw-textarea"
                                        [rows]="3"
                                        pInputTextarea
                                        [(ngModel)]="rootCauseComment"
                                        [disabled]="isReadOpenMode"
                                      ></textarea>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div [hidden]="isCreateOpenMode || !isCircumstancesTabVisible">
                    <div class="grid-row">
                      <div id="symptomManagementPanel" class="grid-cell--12">
                        <div class="grid-cell grid-cell--container" *ngIf="isCircumstancesTabVisible">
                          <div class="grid-cell-header">
                            <div class="grid-cell-title-container">
                              <h3 class="grid-cell-title">
                                {{ componentData.componentId + ".symptomManagement" | translate }}
                              </h3>
                            </div>
                          </div>
                          <div class="grid-cell-content grid-cell-content-with-section">
                            <div class="section">
                              <div class="section-content">
                                <div class="row">
                                  <div class="list-with-details">
                                    <div class="list">
                                      <div class="section">
                                        <h4 id="symptomRowDataSourceTitle" class="section-title">
                                          {{ componentData.componentId + ".symptoms" | translate }}
                                          ({{ symptomRowDataSource.dataCount }})
                                        </h4>
                                        <a-table
                                          id="symptomRowDataSource"
                                          [dataSource]="symptomRowDataSource"
                                          (onRowSelect)="onSymptomRowSelect($event)"
                                          (onRowUnselect)="onSymptomRowUnselect()"
                                        >
                                          <ng-template tableActionsDef>
                                            <button
                                              id="deleteSymptomRowDataSource"
                                              *ngIf="!isReadOpenMode && showSymptomHeader"
                                              type="button"
                                              mat-raised-button
                                              color="warn"
                                              (click)="deleteSelectedSymptom()"
                                            >
                                              {{ "global.delete" | translate }}
                                            </button>

                                            <button
                                              id="editSymptomRowDataSource"
                                              *ngIf="!isReadOpenMode && showSymptomHeader"
                                              type="button"
                                              mat-raised-button
                                              (click)="editSymptom()"
                                            >
                                              {{ "global.edit" | translate }}
                                            </button>

                                            <button
                                              id="addSymptomRowDataSource"
                                              *ngIf="!isReadOpenMode && !showSymptomHeader"
                                              type="button"
                                              mat-raised-button
                                              (click)="addSymptom()"
                                            >
                                              {{ "global.add" | translate }}
                                            </button>
                                          </ng-template>
                                        </a-table>
                                      </div>
                                    </div>
                                    <div class="details">
                                      <div class="section">
                                        <h4 id="symptomParameterTableDataSourceTitle" class="section-title">
                                          {{ componentData.componentId + ".parameterAssociatedToSymptoms" | translate }}
                                          ({{ symptomParameterTableDataSource.dataCount }})
                                        </h4>
                                        <div class="section-content">
                                          <a-table
                                            id="symptomParameterTableDataSource"
                                            [dataSource]="symptomParameterTableDataSource"
                                            (onRowSelect)="onSymptomParamRowSelect()"
                                            (onRowUnselect)="onSymptomParamRowUnselect()"
                                          >
                                            <ng-template tableActionsDef>
                                              <button
                                                id="editSymptomParameter"
                                                *ngIf="!isReadOpenMode && showSymptomParamHeader"
                                                type="button"
                                                mat-raised-button
                                                color="warn"
                                                (click)="editSelectedSymptomParam()"
                                              >
                                                {{ "global.edit" | translate }}
                                              </button>
                                            </ng-template>
                                          </a-table>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>
        <mat-tab id="assetAtDateTab" *ngIf="isAssetAtDateTabVisible">
          <ng-template mat-tab-label>
            {{ getComponentName() + ".assetAtDate" | translate }}
          </ng-template>
          <!-- ASSET AT DATE TAB -->
          <div [hidden]="isCreateOpenMode || !isAssetAtDateTabVisible">
            <div class="grid-row">
              <div id="assetPanel" class="grid-cell--12">
                <div class="grid-cell grid-cell--container" *ngIf="isAssetAtDateTabVisible">
                  <div class="grid-cell-header">
                    <div class="grid-cell-title-container">
                      <h3 class="grid-cell-title">
                        {{ componentData.componentId + ".asset" | translate }}
                      </h3>
                    </div>
                  </div>

                  <div class="grid-cell-content grid-cell-content-with-section">
                    <div class="section">
                      <div class="section-content">
                        <div class="row">
                          <div id="pnCode" class="form-group" *ngIf="!isAircraft()">
                            <label class="form-label">
                              {{ componentData.componentId + ".pn" | translate }}
                            </label>

                            <div class="form-control">
                              <input type="text" class="aw-input" [(ngModel)]="bidoEquipmentDTO.pn" [disabled]="true" />
                            </div>
                          </div>
                          <div id="registration" class="form-group" *ngIf="isAircraft()">
                            <label class="form-label">
                              {{ componentData.componentId + ".registration" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [(ngModel)]="bidoEquipmentDTO.registration"
                                [disabled]="true"
                              />
                            </div>
                          </div>
                          <div id="sn" class="form-group" *ngIf="!isAircraft() && !isEngine()">
                            <label class="form-label">
                              {{ componentData.componentId + ".sn" | translate }}
                            </label>

                            <div class="form-control">
                              <input type="text" class="aw-input" [(ngModel)]="bidoEquipmentDTO.sn" [disabled]="true" />
                            </div>
                          </div>
                          <div id="sn2" class="form-group" *ngIf="isAircraft() && !isEngine()">
                            <label class="form-label">
                              {{ componentData.componentId + ".msn" | translate }}
                            </label>

                            <div class="form-control">
                              <input type="text" class="aw-input" [(ngModel)]="bidoEquipmentDTO.sn" [disabled]="true" />
                            </div>
                          </div>
                          <div id="sn3" class="form-group" *ngIf="isEngine() && !isAircraft()">
                            <label class="form-label">
                              {{ componentData.componentId + ".esn" | translate }}
                            </label>

                            <div class="form-control">
                              <input type="text" class="aw-input" [(ngModel)]="bidoEquipmentDTO.sn" [disabled]="true" />
                            </div>
                          </div>
                          <div id="familyVariantCode" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".familyVariant" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [(ngModel)]="bidoEquipmentDTO.familyVariantCode"
                                [disabled]="true"
                              />
                            </div>
                          </div>
                          <div id="operationalStatus" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".assetStatus" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [(ngModel)]="bidoEquipmentDTO.operationalStatus"
                                [disabled]="true"
                              />
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div id="functionLocationStr" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".functionLocation" | translate }}
                            </label>

                            <div class="form-control">
                              <input type="text" class="aw-input" [disabled]="true" [(ngModel)]="functionLocationStr" />
                            </div>
                          </div>
                          <div id="ownerCustomerCode" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".owner" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [(ngModel)]="bidoEquipmentDTO.ownerCustomerCode"
                                [disabled]="true"
                              />
                            </div>
                          </div>
                          <div id="operatorCustomerCode" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".operator" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [(ngModel)]="bidoEquipmentDTO.operatorCustomerCode"
                                [disabled]="true"
                              />
                            </div>
                            <div id="filler7" class="form-group"></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- COUNTERS TAB -->
          <div [hidden]="isCreateOpenMode || !isAssetAtDateTabVisible">
            <div class="grid-row">
              <div id="countersPanel" class="grid-cell--12">
                <div class="grid-cell grid-cell--container" *ngIf="isAssetAtDateTabVisible">
                  <div class="grid-cell-header">
                    <div class="grid-cell-title-container">
                      <h3 id="bidoMeasuresDisplayedDataSourceTitle" class="grid-cell-title">
                        {{ componentData.componentId + ".counters" | translate }}
                      </h3>
                    </div>
                  </div>

                  <div class="grid-cell-content grid-cell-content-with-section">
                    <div class="section">
                      <!--- TEST -->
                      <div class="section-content">
                        <div class="grid-cell-content grid-cell-content-with-section">
                          <div class="section">
                            <div class="section-content">
                              <a-table
                                id="bidoMeasuresDisplayedDataSource"
                                [dataSource]="bidoMeasuresDisplayedDataSource"
                              >
                                <ng-template tableActionsDef>
                                  <button
                                    id="updateMeasureBidoMeasuresDisplayedDataSource"
                                    *ngIf="!isReadOpenMode && bidoMeasuresDisplayedDataSource.dataSelectionCount === 1"
                                    type="button"
                                    mat-raised-button
                                    (click)="addMeasure()"
                                  >
                                    {{ componentData.componentId + ".updateMeasure" | translate }}
                                  </button>

                                  <button
                                    id="estimateCounterBidoMeasuresDisplayedDataSource"
                                    *ngIf="!isReadOpenMode && isEstimateCounterVisible()"
                                    type="button"
                                    mat-raised-button
                                    (click)="estimateCounter()"
                                  >
                                    {{ componentData.componentId + ".estimateCounter" | translate }}
                                  </button>
                                </ng-template>
                              </a-table>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>
        <!-- STRUCTURE TAB -->
        <mat-tab id="structureTab" *ngIf="isStructureTabVisible">
          <ng-template mat-tab-label>
            {{ getComponentName() + ".structure" | translate }}
          </ng-template>
          <!-- CONFIGURATION PANEL -->
          <div [hidden]="isCreateOpenMode || !isStructureTabVisible">
            <div *ngIf="selectedType === 'AS' || selectedType === 'DI'" class="grid-row">
              <div id="configurationPanel" class="grid-cell--12">
                <div class="grid-cell grid-cell--container" *ngIf="isStructureTabVisible">
                  <div class="grid-cell-header">
                    <div class="grid-cell-title-container">
                      <h3 class="grid-cell-title">
                        {{ componentData.componentId + ".configuration" | translate }}
                      </h3>
                    </div>
                  </div>

                  <div class="grid-cell-content grid-cell-content-with-section">
                    <div class="section">
                      <div class="section-content">
                        <div class="row">
                          <div id="fieldNewValue" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".superiorAsset" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [(ngModel)]="bidoNotificationDTO.fieldNewValue"
                                [disabled]="true"
                              />
                            </div>
                          </div>
                          <div id="assetName" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".name" | translate }}
                            </label>

                            <div class="form-control">
                              <input type="text" class="aw-input" [(ngModel)]="assetName" [disabled]="true" />
                            </div>
                          </div>
                          <div id="assetDesignation" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".designation" | translate }}
                            </label>

                            <div class="form-control">
                              <input type="text" class="aw-input" [(ngModel)]="assetDesignation" [disabled]="true" />
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div id="fieldOldValue" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".oldSuperiorAsset" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [(ngModel)]="bidoNotificationDTO.fieldOldValue"
                                [disabled]="true"
                              />
                            </div>
                          </div>
                          <div id="oldAssetName" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".name" | translate }}
                            </label>

                            <div class="form-control">
                              <input type="text" class="aw-input" [(ngModel)]="oldAssetName" [disabled]="true" />
                            </div>
                          </div>
                          <div id="oldDesignation" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".designation" | translate }}
                            </label>

                            <div class="form-control">
                              <input type="text" class="aw-input" [(ngModel)]="oldDesignation" [disabled]="true" />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- MOVEMENT PANEL -->
          <div [hidden]="isCreateOpenMode || !isStructureTabVisible">
            <div *ngIf="selectedType === 'MVI' || selectedType === 'MVR'" class="grid-row">
              <div id="movementPanel" class="grid-cell--12">
                <div class="grid-cell grid-cell--container" *ngIf="isStructureTabVisible">
                  <div class="grid-cell-header">
                    <div class="grid-cell-title-container">
                      <h3 class="grid-cell-title">
                        {{ componentData.componentId + ".movement" | translate }}
                      </h3>
                    </div>
                  </div>

                  <div class="grid-cell-content grid-cell-content-with-section">
                    <div class="section">
                      <div class="section-content">
                        <div class="row">
                          <div id="movementPn" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".pn" | translate }}
                            </label>

                            <div class="form-control form-control-with-modal" (click)="openPartNumberDialog($event, 0)">
                              <input
                                type="text"
                                class="aw-input"
                                [(ngModel)]="bidoNotificationDTO.movementPn"
                                [ngModelOptions]="{ standalone: true }"
                                disabled="true"
                              />
                              <div class="btn-clear-wrapper">
                                <i
                                  *ngIf="bidoNotificationDTO.movementPn && !isReadOpenMode"
                                  class="ui-dropdown-clear-icon pi pi-times aw-icon btn-clear"
                                  aria-hidden="true"
                                  (click)="clearPartNumber($event)"
                                ></i>
                              </div>
                              <div class="btn-external-link-wrapper">
                                <i
                                  *ngIf="!isReadOpenMode"
                                  class="fa fa-fw fa-external-link aw-icon aw-icon-with-border read-only-link"
                                  aria-hidden="true"
                                  (click)="openPartNumberScreen(bidoNotificationDTO.movementPn, $event)"
                                ></i>
                              </div>
                              <div class="btn-search-wrapper">
                                <i
                                  class="fa fa-fw fa-search aw-icon btn-search"
                                  *ngIf="!isReadOpenMode"
                                  aria-hidden="true"
                                  (click)="openPartNumberDialog($event, 0)"
                                ></i>
                              </div>
                            </div>
                          </div>
                          <div id="movementQuantity" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".quantity" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="string"
                                pKeyFilter="int"
                                class="aw-input"
                                [(ngModel)]="bidoNotificationDTO.movementQuantity"
                                [disabled]="isReadOpenMode"
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="section" *ngIf="specificSNVisibility">
                      <h4 class="section-title">{{ componentData.componentId + ".shop" | translate }}</h4>
                      <div class="section-content">
                        <div class="row">
                          <div id="shopName" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".shopName" | translate }}
                            </label>

                            <div class="form-control">
                              <input type="text" class="aw-input" [(ngModel)]="shopName" [disabled]="true" />
                              <p-dropdown
                                class="aw-dropdown fixed-width"
                                [options]="shopNameMap"
                                [showClear]="true"
                                [(ngModel)]="shopName"
                                placeholder="&nbsp;"
                                [disabled]="isReadOpenMode || !isCreateOpenMode"
                              ></p-dropdown>
                            </div>
                          </div>
                          <div id="shopTechnicalLevel" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".shopTechnicalLevel" | translate }}
                            </label>

                            <div class="form-control">
                              <p-dropdown
                                class="aw-dropdown fixed-width"
                                [options]="shopTechnicalLevelMap"
                                [showClear]="true"
                                [(ngModel)]="shopTechnicalLevel"
                                placeholder="&nbsp;"
                                [disabled]="isReadOpenMode || !isCreateOpenMode"
                              ></p-dropdown>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>
        <mat-tab id="arisingEventsTab" *ngIf="isArisingEventTabVisible && !isCreateOpenMode">
          <ng-template mat-tab-label>
            {{ getComponentName() + ".arisingEvents" | translate }}
          </ng-template>
          <!-- Arising Events TAB -->
          <div [hidden]="isCreateOpenMode || !isArisingEventTabVisible">
            <div class="grid-row">
              <div id="arisingEventsPanel" class="grid-cell--12">
                <div class="grid-cell grid-cell--container" *ngIf="isArisingEventTabVisible">
                  <div class="grid-cell-header">
                    <div class="grid-cell-title-container">
                      <h3 id="arisingEventTableDataSourceTitle" class="grid-cell-title">
                        {{ componentData.componentId + ".arisingEvents" | translate }}({{
                          arisingEventTableDataSource.dataCount
                        }})
                      </h3>
                    </div>
                  </div>

                  <div class="grid-cell-content grid-cell-content-with-section">
                    <div class="section">
                      <div class="section-content">
                        <a-table id="arisingEventTableDataSource" [dataSource]="arisingEventTableDataSource">
                          <ng-template tableActionsDef>
                            <p-splitButton
                              *ngIf="!isReadOpenMode && !arisingEventTableDataSource.hasDataSelection"
                              class="aw-split-btn aw-table-action"
                              label="{{ getComponentName() + '.createEvent' | translate }}"
                              [model]="navigationLinkList"
                              appendTo="body"
                            ></p-splitButton>
                            <button
                              id="deleteArisingEvent"
                              *ngIf="!isReadOpenMode && arisingEventTableDataSource.hasDataSelection"
                              type="button"
                              mat-raised-button
                              color="warn"
                              (click)="deleteEvents()"
                            >
                              {{ "global.delete" | translate }}
                            </button>
                          </ng-template>

                          <ng-template columnDef="asset" let-rowData="rowData">
                            <a (click)="openArisingEventAsset(rowData)">
                              {{ rowData.asset }}
                            </a>
                          </ng-template>
                          <ng-template columnDef="notificationCode" let-rowData="rowData">
                            <a (click)="openEvent(rowData)">
                              {{ rowData.notificationCode }}
                            </a>
                          </ng-template>

                          <ng-template columnDef="notificationSubject" let-rowData="rowData">
                            <span pTooltip="{{ rowData.notificationSubject }}" tooltipPosition="bottom">
                              {{ rowData.notificationSubject }}
                            </span>
                          </ng-template>

                          <ng-template columnDef="isDeduced" let-rowData="rowData">
                            <i
                              *ngIf="rowData.isDeduced !== null && rowData.isDeduced"
                              class="fa fa-fw fa-check"
                              aria-hidden="true"
                            ></i>
                          </ng-template>
                        </a-table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>
        <mat-tab id="taskTab" *ngIf="isTaskTabVisible">
          <ng-template mat-tab-label>
            {{ componentData.componentId + ".task" | translate }}
          </ng-template>
          <!-- TASK TAB -->
          <div [hidden]="isCreateOpenMode || !isTaskTabVisible">
            <div class="grid-row">
              <div id="taskManagementPanel" class="grid-cell--12">
                <div class="grid-cell grid-cell--container" *ngIf="isTaskTabVisible">
                  <div class="grid-cell-header">
                    <div class="grid-cell-title-container">
                      <h3 class="grid-cell-title">
                        {{ componentData.componentId + ".taskManagement" | translate }}
                      </h3>
                    </div>
                  </div>

                  <div class="grid-cell-content grid-cell-content-with-section">
                    <div class="section">
                      <div class="section-content">
                        <div class="row">
                          <div id="taskCode" class="form-group" [ngClass]="{ required: !isReadOpenMode }">
                            <label class="form-label">
                              {{ componentData.componentId + ".taskCode" | translate }}
                            </label>

                            <div class="form-control form-control-with-modal" [ngClass]="{ disabled: isReadOpenMode }">
                              <div class="form-control-data" (click)="taskSearchCode($event)">
                                {{ bidoNotificationDTO.taskCode }}
                              </div>

                              <div *ngIf="bidoNotificationDTO.taskCode" class="btn-clear-wrapper">
                                <i
                                  class="ui-dropdown-clear-icon pi pi-times aw-icon btn-clear"
                                  aria-hidden="true"
                                  (click)="clearTaskCode()"
                                ></i>
                              </div>
                              <div class="btn-search-wrapper">
                                <i
                                  class="fa fa-fw fa-search aw-icon btn-search"
                                  aria-hidden="true"
                                  (click)="taskSearchCode($event)"
                                ></i>
                              </div>
                            </div>
                          </div>

                          <div id="taskVersion" class="form-group" [ngClass]="{ required: !isReadOpenMode }">
                            <label class="form-label">
                              {{ componentData.componentId + ".taskVersion" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [disabled]="true"
                                [(ngModel)]="bidoNotificationDTO.taskVersion"
                              />
                            </div>
                          </div>

                          <div id="isIgnoreInitialDeadlines" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".initialDeadlines" | translate }}
                            </label>

                            <div class="form-control">
                              <p-checkbox
                                binary="true"
                                class="aw-checkbox"
                                [(ngModel)]="isIgnoreInitialDeadlines"
                                [disabled]="isReadOpenMode"
                              ></p-checkbox>
                            </div>
                          </div>
                        </div>

                        <div class="row">
                          <div id="selectedTaskDesignation" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".designation" | translate }}
                            </label>

                            <div class="form-control">
                              <textarea
                                class="aw-textarea"
                                [rows]="3"
                                pInputTextarea
                                [disabled]="true"
                                [(ngModel)]="selectedTaskDesignation"
                              ></textarea>
                            </div>
                          </div>
                          <div id="selectedTaskDescription" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".taskDescription" | translate }}
                            </label>

                            <div class="form-control">
                              <textarea
                                class="aw-textarea"
                                [rows]="3"
                                pInputTextarea
                                [disabled]="true"
                                [(ngModel)]="selectedTaskDescription"
                              ></textarea>
                            </div>
                          </div>

                          <div id="originalDeadlines" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".originalDeadlines" | translate }}
                            </label>

                            <div class="form-control">
                              <textarea
                                class="aw-textarea"
                                [rows]="3"
                                pInputTextarea
                                [(ngModel)]="originalDeadlines"
                                [disabled]="true"
                              ></textarea>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div [hidden]="isCreateOpenMode || !isTaskTabVisible">
            <div class="grid-row">
              <div id="assetPanel2" class="grid-cell--12">
                <div class="grid-cell grid-cell--container" *ngIf="isTaskTabVisible">
                  <div class="grid-cell-header">
                    <div class="grid-cell-title-container">
                      <h3 class="grid-cell-title">
                        {{ componentData.componentId + ".asset" | translate }}
                      </h3>
                    </div>
                  </div>

                  <div class="grid-cell-content grid-cell-content-with-section">
                    <div class="section">
                      <div class="section-content">
                        <div class="row">
                          <div id="selectedSearchAsset" class="form-group flex--2">
                            <label class="form-label"> &nbsp; </label>

                            <div class="form-control aw-selectbutton-wrapper">
                              <p-selectButton
                                [(ngModel)]="selectedSearchAsset"
                                [options]="searchAssetList"
                                (onChange)="changeTaskAssetType()"
                              ></p-selectButton>
                            </div>
                          </div>
                        </div>
                        <div class="row" *ngIf="selectedSearchAsset === 0">
                          <div id="taskAssetCode" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".assetCode" | translate }}
                            </label>

                            <div class="form-control form-control-with-modal" (click)="searchAsset($event, 1)">
                              <input
                                type="text"
                                class="aw-input"
                                [(ngModel)]="bidoNotificationDTO.taskAssetCode"
                                [ngModelOptions]="{ standalone: true }"
                                disabled="true"
                              />
                              <div class="btn-clear-wrapper">
                                <i
                                  *ngIf="bidoNotificationDTO.taskAssetCode && !isReadOpenMode"
                                  class="ui-dropdown-clear-icon pi pi-times aw-icon btn-clear"
                                  aria-hidden="true"
                                  (click)="resetTaskAssetField($event)"
                                ></i>
                              </div>
                              <div class="btn-search-wrapper">
                                <i
                                  class="fa fa-fw fa-search aw-icon btn-search"
                                  *ngIf="!isReadOpenMode"
                                  aria-hidden="true"
                                  (click)="searchAsset($event, 1)"
                                ></i>
                              </div>
                            </div>
                          </div>
                          <div id="selectedAssetPN" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".pn" | translate }}
                            </label>

                            <div class="form-control">
                              <input type="text" class="aw-input" [disabled]="true" [(ngModel)]="selectedAssetPN" />
                            </div>
                          </div>
                          <div id="selectedAssetSN" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".sn" | translate }}
                            </label>

                            <div class="form-control">
                              <input type="text" class="aw-input" [disabled]="true" [(ngModel)]="selectedAssetSN" />
                            </div>
                          </div>
                          <div id="selectedAssetName" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".name" | translate }}
                            </label>

                            <div class="form-control">
                              <input type="text" class="aw-input" [disabled]="true" [(ngModel)]="selectedAssetName" />
                            </div>
                          </div>
                          <div id="selectedAssetDesignation" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".designation" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [disabled]="true"
                                [(ngModel)]="selectedAssetDesignation"
                              />
                            </div>
                          </div>
                        </div>
                        <div class="row grid-cell--4" *ngIf="selectedSearchAsset === 1">
                          <div id="taskAssetPn" class="form-group">
                            <!-- <label class="form-label">
                {{ componentData.componentId + ".part" | translate }}
              </label> -->

                            <div class="form-control form-control-with-modal" (click)="openPartNumberDialog($event, 1)">
                              <input
                                type="text"
                                class="aw-input"
                                [(ngModel)]="bidoNotificationDTO.taskAssetPn"
                                [ngModelOptions]="{ standalone: true }"
                                disabled="true"
                              />
                              <div class="btn-clear-wrapper">
                                <i
                                  *ngIf="bidoNotificationDTO.taskAssetPn && !isReadOpenMode"
                                  class="ui-dropdown-clear-icon pi pi-times aw-icon btn-clear"
                                  aria-hidden="true"
                                  (click)="clearTaskPn($event)"
                                ></i>
                              </div>
                              <div class="btn-external-link-wrapper">
                                <i
                                  *ngIf="bidoNotificationDTO.taskAssetPn && !isReadOpenMode"
                                  class="fa fa-fw fa-external-link aw-icon aw-icon-with-border"
                                  aria-hidden="true"
                                  (click)="openPartNumberScreen(bidoNotificationDTO.taskAssetPn, $event)"
                                ></i>
                              </div>
                              <div class="btn-search-wrapper">
                                <i
                                  class="fa fa-fw fa-search aw-icon btn-search"
                                  *ngIf="!isReadOpenMode"
                                  aria-hidden="true"
                                  (click)="openPartNumberDialog($event, 1)"
                                ></i>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="row grid-cell--4" *ngIf="selectedSearchAsset === 2">
                          <div id="taskAtaChapter" class="form-group flex--2">
                            <!-- <label class="form-label">
                {{ componentData.componentId + ".itemCode" | translate }}
              </label> -->

                            <div class="form-control display--flex-row">
                              <input
                                type="text"
                                class="aw-input flex--1"
                                [disabled]="isReadOpenMode"
                                [(ngModel)]="bidoNotificationDTO.taskAtaChapter"
                                maxlength="2"
                              />
                              <span class="separator">-</span>
                              <input
                                type="text"
                                class="aw-input flex--1"
                                [disabled]="isReadOpenMode"
                                [(ngModel)]="bidoNotificationDTO.taskAtaSection"
                                maxlength="2"
                              />
                              <span class="separator">-</span>
                              <input
                                type="text"
                                class="aw-input flex--1"
                                [disabled]="isReadOpenMode"
                                [(ngModel)]="bidoNotificationDTO.taskAtaSubject"
                                maxlength="2"
                              />
                              <i
                                class="fa fa-fw fa-search aw-icon btn-search"
                                *ngIf="!isReadOpenMode"
                                aria-hidden="true"
                                (click)="searchItems($event, 0)"
                              ></i>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>
        <mat-tab id="attributesTab" *ngIf="isAttributeTabVisible">
          <ng-template mat-tab-label>
            {{ componentData.componentId + ".attributes" | translate }}
          </ng-template>
          <!-- Attributes TAB -->
          <div [hidden]="isCreateOpenMode || !isAttributeTabVisible">
            <div class="grid-row">
              <div
                id="attributesPanel"
                #attributes
                class="grid-cell--12"
                (click)="selectPageTocEntry(component.ATTRIBUTES_ANCHOR_ID)"
              >
                <div
                  class="grid-cell grid-cell--container"
                  [ngClass]="{ active: isPageTocEntrySelected(component.ATTRIBUTES_ANCHOR_ID) }"
                  *ngIf="isAttributeTabVisible"
                >
                  <div class="grid-cell-header">
                    <div class="grid-cell-title-container">
                      <h3 class="grid-cell-title">
                        {{ componentData.componentId + ".attributes" | translate }}
                      </h3>
                    </div>
                  </div>

                  <div class="grid-cell-content grid-cell-content-with-section">
                    <div class="section">
                      <div class="section-content">
                        <div class="grid-cell--12">
                          <div class="row">
                            <div id="historicAttributes" class="form-group">
                              <div class="form-control">
                                <button
                                  id="historicAttributesPanel"
                                  type="button"
                                  (click)="openHistoricAttributes()"
                                  mat-raised-button
                                >
                                  <span>{{ "global.historic" | translate }}</span>
                                </button>
                              </div>
                            </div>
                          </div>
                          <div class="row">
                            <aw-dynamic-attributes
                              id="dynamicAttributes"
                              [workflowControls]="userWorkflow ? userWorkflow.listControlByIdentifier : []"
                              [attributes]="dynamicAttributesForEvent"
                              [showHistory]="false"
                              [isReadOpenMode]="isReadOpenMode"
                            ></aw-dynamic-attributes>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>
        <mat-tab id="workPostponmentTab" *ngIf="isWorkPostponmentTabVisible">
          <ng-template mat-tab-label>
            {{ componentData.componentId + ".workPostponment" | translate }}
          </ng-template>
          <!-- Work Postponment TAB -->
          <div [hidden]="isCreateOpenMode || !isWorkPostponmentTabVisible">
            <div class="grid-row">
              <div
                id="workPostponmentPanel"
                #workPostponment
                class="grid-cell--12"
                (click)="selectPageTocEntry(component.WORK_POSTPONMENT_ANCHOR_ID)"
              >
                <div
                  class="grid-cell grid-cell--container"
                  [ngClass]="{ active: isPageTocEntrySelected(component.WORK_POSTPONMENT_ANCHOR_ID) }"
                  *ngIf="isWorkPostponmentTabVisible"
                >
                  <div class="grid-cell-header">
                    <div class="grid-cell-title-container">
                      <h3 class="grid-cell-title">
                        {{ componentData.componentId + ".workPostponment" | translate }}
                      </h3>
                    </div>
                  </div>

                  <div class="grid-cell-content grid-cell-content-with-section">
                    <div class="row">
                      <div class="postponement-historic">
                        <button
                          id="historicWorkPostponmentPanel"
                          type="button"
                          (click)="openHistoricAttributes()"
                          mat-raised-button
                        >
                          <span>{{ "global.historic" | translate }}</span>
                        </button>
                      </div>
                      <div class="postponement-choices">
                        <button
                          type="button"
                          (click)="reviewToCentral()"
                          mat-raised-button
                          *ngIf="displayReviewToCentral()"
                          [disabled]="!enableReviewToCentral()"
                        >
                          <span>{{ componentData.componentId + ".reviewToCentral" | translate }}</span>
                        </button>

                        <button
                          id="acceptPostponementWorkPostponmentPanel"
                          type="button"
                          (click)="onAcceptPostponement()"
                          mat-raised-button
                          *ngIf="showAcceptPostponement()"
                        >
                          <span>{{ componentData.componentId + ".acceptPostponement" | translate }}</span>
                        </button>

                        <button
                          id="refusePostponementWorkPostponmentPanel"
                          type="button"
                          (click)="onRefusePostpone()"
                          mat-raised-button
                          *ngIf="showRefusePostponement()"
                        >
                          <span>{{ componentData.componentId + ".refusePostponement" | translate }}</span>
                        </button>
                      </div>
                    </div>
                    <!-- REQUEST -->
                    <div class="section">
                      <h4 class="section-title">{{ componentData.componentId + ".request" | translate }}</h4>
                      <div class="section-content">
                        <div class="row">
                          <div id="requestAuthorTxt" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".author" | translate }}
                            </label>

                            <div class="form-control">
                              <input type="text" class="aw-input" [disabled]="true" [(ngModel)]="requestAuthorTxt" />
                            </div>
                          </div>
                          <div id="notificationDescription2" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".reason" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [disabled]="true"
                                [(ngModel)]="bidoNotificationDTO.notificationDescription"
                              />
                            </div>
                          </div>
                          <div id="relatedWorkOrder" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".relatedWorkOrder" | translate }}
                            </label>

                            <div class="form-control">
                              <a style="cursor: pointer" (click)="openWorkOrderUC(postponmentRelatedWO)">{{
                                postponmentRelatedWO
                              }}</a>
                            </div>
                          </div>
                          <div id="relatedEvolution" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".relatedEvolution" | translate }}
                            </label>

                            <div class="form-control">
                              <a style="cursor: pointer" (click)="openEvolutionUC(relatedEvolutionKey)">{{
                                relatedEvolutionKey
                              }}</a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- APPROVAL -->
                    <div class="section" *ngIf="showWPRAcceptationPanel()">
                      <h4 class="section-title">{{ componentData.componentId + ".approval" | translate }}</h4>
                      <div class="section-content">
                        <div class="row">
                          <div id="requestDecisionAuthorTxt" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".decisionAuthor" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [disabled]="true"
                                [(ngModel)]="requestDecisionAuthorTxt"
                              />
                            </div>
                          </div>
                          <div id="postponementAuthorizationNum" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".authorizationNumber" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [disabled]="isReadOpenMode"
                                [(ngModel)]="postponementAuthorizationNum"
                              />
                            </div>
                          </div>
                          <div
                            id="postponementNewLimitDate"
                            class="form-group"
                            [ngClass]="{ required: !isReadOpenMode }"
                          >
                            <label class="form-label">
                              {{ componentData.componentId + ".newLimitDate" | translate }}
                            </label>

                            <div class="form-control">
                              <p-calendar
                                showButtonBar="true"
                                [monthNavigator]="true"
                                [yearNavigator]="true"
                                [yearRange]="sessionService.calendarYearRange"
                                class="aw-calendar"
                                [dateFormat]="sessionService.dateFormatPrimeNG"
                                [locale]="sessionService.calendarFormat"
                                [(ngModel)]="postponementNewLimitDate"
                                appendTo="body"
                                [disabled]="isReadOpenMode"
                              ></p-calendar>
                            </div>
                          </div>
                          <div id="flightRestriction" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".flightRestriction" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [disabled]="isReadOpenMode"
                                [(ngModel)]="flightRestriction"
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- REFUSAL -->
                    <div class="section" *ngIf="showWPRRefusalPanel()">
                      <h4 class="section-title">{{ componentData.componentId + ".refusal" | translate }}</h4>
                      <div class="section-content">
                        <div class="row">
                          <div id="workPostponmentDecisionAuthor" class="form-group flex--1">
                            <label class="form-label">
                              {{ componentData.componentId + ".decisionAuthor" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [disabled]="true"
                                [(ngModel)]="workPostponmentDecisionAuthor"
                              />
                            </div>
                          </div>
                          <div
                            id="workPostponmentRefusalReason"
                            class="form-group flex--2"
                            [ngClass]="{ required: !isReadOpenMode }"
                          >
                            <label class="form-label">
                              {{ componentData.componentId + ".refusalReason" | translate }}
                            </label>

                            <div class="form-control">
                              <textarea
                                class="aw-textarea"
                                [rows]="3"
                                pInputTextarea
                                [(ngModel)]="workPostponmentRefusalReason"
                                [disabled]="isReadOpenMode"
                              ></textarea>
                            </div>
                          </div>

                          <div id="filler8" class="form-group flex--1"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>
        <mat-tab id="evolutionTab" *ngIf="isEvolutionTabVisible">
          <ng-template mat-tab-label>
            {{ componentData.componentId + ".evolution" | translate }}
          </ng-template>
          <!-- EVOLUTION TAB -->
          <div [hidden]="isCreateOpenMode || !isEvolutionTabVisible">
            <div class="grid-row">
              <div id="evolutionPanel" class="grid-cell--12">
                <div class="grid-cell grid-cell--container" *ngIf="isEvolutionTabVisible">
                  <div class="grid-cell-header">
                    <div class="grid-cell-title-container">
                      <h3 class="grid-cell-title">
                        {{ componentData.componentId + ".evolution" | translate }}
                      </h3>
                    </div>
                  </div>

                  <div class="grid-cell-content grid-cell-content-with-section">
                    <div class="section">
                      <div class="section-content">
                        <div class="row">
                          <div id="evolutionNumber" class="form-group" [ngClass]="{ required: !isReadOpenMode }">
                            <label class="form-label">{{ getComponentName() + ".evolutionNumber" | translate }} </label>

                            <div class="form-control form-control-with-modal" [ngClass]="{ disabled: isReadOpenMode }">
                              <div class="form-control-data" (click)="openEvolutionDialog($event)">
                                {{ notificationEvolutionDTO.evolutionNumber }}
                              </div>

                              <div *ngIf="notificationEvolutionDTO.evolutionNumber" class="btn-clear-wrapper">
                                <i
                                  *ngIf="!isReadOpenMode"
                                  class="ui-dropdown-clear-icon pi pi-times aw-icon btn-clear"
                                  aria-hidden="true"
                                  (click)="
                                    notificationEvolutionDTO.evolutionNumber = undefined;
                                    notificationEvolutionDTO.evolutionRevisionNumber = undefined;
                                    evolutionType = undefined
                                  "
                                ></i>
                              </div>
                              <div class="btn-search-wrapper">
                                <i
                                  *ngIf="!isReadOpenMode"
                                  class="fa fa-fw fa-search aw-icon btn-search"
                                  aria-hidden="true"
                                  (click)="openEvolutionDialog($event)"
                                ></i>
                              </div>
                            </div>
                          </div>

                          <div
                            id="evolutionRevisionNumber"
                            class="form-group"
                            [ngClass]="{ required: !isReadOpenMode }"
                          >
                            <label class="form-label">
                              {{ componentData.componentId + ".evolutionRevisionNumber" | translate }}
                            </label>

                            <div class="form-control">
                              <input
                                type="text"
                                class="aw-input"
                                [disabled]="true"
                                [(ngModel)]="notificationEvolutionDTO.evolutionRevisionNumber"
                              />
                            </div>
                          </div>

                          <div id="evolutionType" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".evolutionType" | translate }}
                            </label>

                            <div class="form-control">
                              <input type="text" class="aw-input" [disabled]="true" [(ngModel)]="evolutionType" />
                            </div>
                          </div>
                          <div id="originalDeadlines2" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".originalDeadlines" | translate }}
                            </label>

                            <div class="form-control">
                              <textarea
                                class="aw-textarea"
                                [rows]="3"
                                pInputTextarea
                                [(ngModel)]="originalDeadlines"
                                [disabled]="true"
                              ></textarea>
                            </div>
                          </div>

                          <div id="isIgnoreInitialDeadlines2" class="form-group">
                            <label class="form-label">
                              {{ componentData.componentId + ".initialDeadlines" | translate }}
                            </label>

                            <div class="form-control">
                              <p-checkbox
                                binary="true"
                                class="aw-checkbox"
                                [(ngModel)]="isIgnoreInitialDeadlines"
                                [disabled]="isReadOpenMode"
                              ></p-checkbox>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>
        <mat-tab id="documentsTab" *ngIf="isDocumentTabVisible && !isCreateOpenMode">
          <ng-template mat-tab-label>
            {{ getComponentName() + ".documents" | translate }}
          </ng-template>
          <!-- DOCUMENTS -->
          <div [hidden]="isCreateOpenMode || !isDocumentTabVisible">
            <div class="grid-row">
              <div id="documentsPanel" class="grid-cell--12">
                <div class="grid-cell grid-cell--container" *ngIf="isDocumentTabVisible">
                  <div class="grid-cell-header">
                    <div class="grid-cell-title-container">
                      <h3 id="bireDocumentDisplayedDataSourceTitle" class="grid-cell-title">
                        {{ getComponentName() + ".documents" | translate }} ({{
                          bireDocumentDisplayedDataSource.dataCount
                        }})
                      </h3>
                    </div>
                  </div>

                  <div class="grid-cell-content">
                    <a-table id="bireDocumentDisplayedDataSource" [dataSource]="bireDocumentDisplayedDataSource">
                      <ng-template tableActionsDef>
                        <button
                          id="deleteBireDocumentDisplayedDataSource"
                          *ngIf="!isFieldEnabled && !isReadOpenMode && bireDocumentDisplayedDataSource.hasDataSelection"
                          type="button"
                          mat-raised-button
                          color="warn"
                          (click)="deleteDocuments()"
                        >
                          {{ "global.delete" | translate }}
                        </button>

                        <button
                          id="editBireDocumentDisplayedDataSource"
                          *ngIf="
                            !isFieldEnabled &&
                            !isReadOpenMode &&
                            bireDocumentDisplayedDataSource.dataSelectionCount === 1
                          "
                          type="button"
                          mat-raised-button
                          (click)="editDocument()"
                        >
                          {{ "global.edit" | translate }}
                        </button>

                        <button
                          id="openBireDocumentDisplayedDataSource"
                          *ngIf="
                            !isFieldEnabled &&
                            !isReadOpenMode &&
                            bireDocumentDisplayedDataSource.dataSelectionCount === 1
                          "
                          type="button"
                          mat-raised-button
                          (click)="openDocument()"
                        >
                          {{ "global.open" | translate }}
                        </button>

                        <button
                          id="addBireDocumentDisplayedDataSource"
                          *ngIf="
                            !isFieldEnabled && !isReadOpenMode && !bireDocumentDisplayedDataSource.hasDataSelection
                          "
                          type="button"
                          mat-raised-button
                          (click)="addDocument()"
                        >
                          {{ "global.add" | translate }}
                        </button>
                      </ng-template>
                      <ng-template columnDef="docEndOfValidityDate" let-rowData="rowData">
                        {{ rowData.docEndOfValidityDate | date: "yyyy/MM/dd":"":translateService.currentLang }}
                      </ng-template>
                      <ng-template columnDef="docName" let-rowData="rowData">
                        <a (click)="downloadDocument(rowData)">
                          {{ rowData.docName }}
                        </a>
                      </ng-template>
                      <ng-template columnDef="docExtension" let-rowData="rowData">
                        {{ showDocExtension(rowData) }}
                      </ng-template>

                      <ng-template columnDef="docPublicationDate" let-rowData="rowData">
                        {{ rowData.docPublicationDate | date: "yyyy/MM/dd":"":translateService.currentLang }}
                      </ng-template>
                    </a-table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>
        <mat-tab id="diffusionTab" *ngIf="isDiffusionTabVisible && !isCreateOpenMode">
          <ng-template mat-tab-label>
            {{ componentData.componentId + ".diffusion" | translate }}
          </ng-template>
          <!-- DIFFUSION -->
          <div [hidden]="isCreateOpenMode">
            <div class="grid-row">
              <div id="diffusionPanel" class="grid-cell--12" (click)="selectPageTocEntry('diffusion')">
                <div
                  class="grid-cell grid-cell--container"
                  [ngClass]="{ active: isPageTocEntrySelected('diffusion') }"
                  *ngIf="isDiffusionTabVisible"
                >
                  <div class="grid-cell-header">
                    <div class="grid-cell-title-container">
                      <h3 id="diffusionTableDataSourceTitle" class="grid-cell-title">
                        {{ componentData.componentId + ".diffusion" | translate }} ({{
                          diffusionTableDataSource.dataCount
                        }})
                      </h3>
                    </div>
                  </div>

                  <div class="grid-cell-content grid-cell-content-with-section">
                    <div class="section">
                      <div class="section-content">
                        <a-table id="diffusionTableDataSource" [dataSource]="diffusionTableDataSource">
                          <ng-template tableActionsDef>
                            <button
                              id="sendDiffusion"
                              *ngIf="!isReadOpenMode && diffusionTableDataSource.hasDataSelection"
                              type="button"
                              mat-raised-button
                              color="warn"
                              (click)="sendDiffusionMail()"
                            >
                              {{ componentData.componentId + ".send" | translate }}
                            </button>
                          </ng-template>
                        </a-table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>
</div>

<!-- DIALOGS -->
<aw-dialog-search-event
  *ngIf="showQuickSearchEventPopup"
  [(display)]="showQuickSearchEventPopup"
  [event-code]="bidoNotificationDTO.notNotificationCode"
  (onSelected)="setSelectedEvent($event)"
></aw-dialog-search-event>

<aw-dialog-search-equipment
  *ngIf="showQuickSearchEquipmentPopup"
  [(display)]="showQuickSearchEquipmentPopup"
  [selectionMultiple]="false"
  [equipment-code]="superiorAssetCode"
  (onSelected)="setSelectedAsset($event)"
></aw-dialog-search-equipment>

<aw-dynamic-attributes-history
  *ngIf="showDynamicAttributesHistoric"
  [attributes]="hDynamicAttributesForEvent"
  [history]="dynamicAttributesHistoric"
  [showDelete]="false"
  [(display)]="showDynamicAttributesHistoric"
></aw-dynamic-attributes-history>

<aw-status-update-history
  *ngIf="showStatusUpdatesPopup"
  [object]="bidoNotificationDTO"
  [data]="tableStatusUpdatesData"
  [deleteApi]="deleteApi"
  [(display)]="showStatusUpdatesPopup"
  [keyMap]="updatesKeyMap"
></aw-status-update-history>

<aw-dialog-search-evolution
  *ngIf="showEvolutionDialog"
  [(display)]="showEvolutionDialog"
  (onSelected)="onSelectedEvolution($event)"
>
</aw-dialog-search-evolution>

<aw-dialog-table
  *ngIf="showPartNumberDialog"
  [data]="partNumberTableData"
  [keyMap]="keyMap"
  [(display)]="showPartNumberDialog"
  (onSelected)="onSelectedPartNumber($event)"
></aw-dialog-table>

<aw-dialog-table
  *ngIf="showItemDialog"
  [(display)]="showItemDialog"
  [data]="dialogTableDataItems"
  (onSelected)="setSelectedItems($event)"
></aw-dialog-table>

<aw-dialog-search-task
  *ngIf="showItemTaskSearchPopup"
  [(display)]="showItemTaskSearchPopup"
  (onSelected)="addTask($event)"
></aw-dialog-search-task>

<aw-dialog-bire-document
  *ngIf="showDocumentDialog"
  [document]="currentDocument"
  [(display)]="showDocumentDialog"
  [isReadOnlyForm]="isReadOnlyDocumentDialog"
  (onValidated)="updateDocument($event)"
></aw-dialog-bire-document>

<aw-event-import-popup
  *ngIf="showAddDocumentDialog"
  [document]="currentDocument"
  [(display)]="showAddDocumentDialog"
  [isReadOnlyForm]="isReadOnlyDocumentDialog"
  [types]="documentTypes"
  (onValidated)="addNewDocument($event)"
></aw-event-import-popup>

<aw-dialog-table
  *ngIf="showDefectPartDialog"
  [(display)]="showDefectPartDialog"
  [data]="defectPartTableData"
  (onSelected)="onSelectDefectPart($event)"
></aw-dialog-table>

<aw-dialog-add-symptom
  *ngIf="showSymptomTableDialog"
  [(display)]="showSymptomTableDialog"
  [symptomMap]="symptomNameMap"
  [data]="dataSymptom"
  (onValidated)="onUpdateSymptom($event)"
  (onAdded)="onAddSymptom($event)"
></aw-dialog-add-symptom>

<aw-dialog-add-param-value
  *ngIf="showContextTableDialog"
  [(display)]="showContextTableDialog"
  [data]="dataContext"
  (onAdded)="onAddContextParam($event)"
></aw-dialog-add-param-value>

<aw-dialog-add-param-value
  *ngIf="showSymptomParamDialog"
  [(display)]="showSymptomParamDialog"
  [data]="dataContext"
  (onAdded)="onAddSymptomParamParam($event)"
></aw-dialog-add-param-value>

<aw-dialog-measure-update
  *ngIf="showMeasurePopup"
  [(display)]="showMeasurePopup"
  [component-data]="dataMeasure"
  [context]="notificationAsset"
  [equipment]="bidoEquipmentDTO"
  [isReadOnlyForm]="isReadOnlyMeasureUpdateDialog"
  [dateEvent]="bidoNotificationDTO.reportingPeriodStartDate"
  (onUpdate)="loadMeasureTableData()"
  (onReport)="showMeasureReport($event)"
></aw-dialog-measure-update>

<aw-dialog-measure-report
  *ngIf="showMeasureReportText"
  [(display)]="showMeasureReportText"
  [reportMessage]="measureReportText"
></aw-dialog-measure-report>
