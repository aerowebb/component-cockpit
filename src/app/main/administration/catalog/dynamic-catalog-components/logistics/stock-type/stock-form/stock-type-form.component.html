<div class="page-header-container">
  <div class="page-context">
    <div class="page-title-container">
      <div class="page-title">
        {{ "transaction." + componentData.componentId | translate }}
      </div>

      <div class="page-secondary-actions">
        <i
          class="fa fa-fw aw-icon aw-icon-with-border"
          [ngClass]="{ 'fa-star': isFavoriteEntry, 'fa-star-o': !isFavoriteEntry }"
          aria-hidden="true"
          (click)="updateFavoriteState()"
          pTooltip="{{ 'page.' + (isFavoriteEntry ? 'removeFromFavorites' : 'addToFavorites') | translate }}"
          tooltipPosition="bottom"
        ></i>

        <i
          class="fa fa-fw fa-info aw-icon aw-icon-with-border"
          aria-hidden="true"
          pTooltip="{{ 'page.info' | translate }}"
          tooltipPosition="bottom"
        ></i>
      </div>
    </div>

    <div class="page-subtitle-container">
      <div *ngIf="!isCreateOpenMode && componentData && componentData.objectId" class="page-subtitle">
        {{ serializationService.deserialize(componentData.objectId)["planCode"] }}
      </div>
    </div>
  </div>

  <div class="page-primary-actions">
    <button *ngIf="isReadOpenMode && !isCreateOpenMode" type="button" mat-raised-button (click)="reloadStockTypeForm()">
      {{ "global.refresh" | translate }}
    </button>

    <button
      *ngIf="isReadOpenMode && hasUpdateAccessRight"
      type="button"
      mat-raised-button
      (click)="editStockTypeForm()"
    >
      {{ "global.edit" | translate }}
    </button>

    <button
      *ngIf="!isReadOpenMode && !isCreateOpenMode"
      type="button"
      mat-raised-button
      (click)="cancelStockTypeForm()"
    >
      {{ "global.cancel" | translate }}
    </button>

    <button
      *ngIf="!isReadOpenMode"
      class="btn-with-spinner"
      color="primary"
      type="button"
      mat-raised-button
      (click)="saveStockTypeForm()"
    >
      <span class="lds-hourglass" *ngIf="showSaveSpinner"></span>
      {{ "global.save" | translate }}
    </button>
  </div>
</div>

<div class="page-wrapper">
  <div class="page-container search-page-container">
    <div class="page-content">
      <div class="grid-row">
        <div class="grid-cell--12">
          <div class="grid-cell grid-cell--container">
            <div class="grid-cell-content">
              <div class="form-group required">
                <label class="form-label">{{ componentData.componentId + ".code" | translate }}</label>
                <div class="form-control">
                  <input
                    type="text"
                    class="aw-input"
                    [disabled]="isReadOpenMode"
                    [(ngModel)]="stockTypeField.stockTypeCode"
                    maxlength="50"
                  />
                </div>
              </div>
              <div class="form-group"></div>
              <div class="form-group"></div>
              <div class="form-group"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="grid-row">
        <div class="grid-cell--6">
          <div class="grid-cell grid-cell--container">
            <div class="grid-cell-header">
              <div class="grid-cell-title-container">
                <h3 class="grid-cell-title">{{ componentData.componentId + ".fields" | translate }}</h3>
              </div>
            </div>
            <div class="grid-cell-content">
              <div class="form-group required">
                <label class="form-label">{{ componentData.componentId + ".owner" | translate }}</label>
                <div class="form-control">
                  <p-dropdown
                    name="status"
                    class="aw-dropdown fixed-width"
                    placeholder="&nbsp;"
                    [disabled]="isReadOpenMode"
                    [options]="ownerName"
                    [(ngModel)]="stockTypeField.stockTypeOwner"
                  ></p-dropdown>
                </div>
              </div>
              <div class="form-group">
                <label class="form-label">{{ componentData.componentId + ".valuated" | translate }}</label>
                <div class="form-control">
                  <p-checkbox
                    class="aw-checkbox"
                    binary="true"
                    [disabled]="isReadOpenMode"
                    [(ngModel)]="stockTypeField.stockTypeIsValuated"
                  ></p-checkbox>
                </div>
              </div>
            </div>

            <div class="grid-cell-content">
              <div class="form-group">
                <label class="form-label">{{ componentData.componentId + ".description" | translate }}</label>
                <div class="form-control">
                  <textarea
                    class="aw-textarea"
                    [rows]="3"
                    pInputTextarea
                    [disabled]="isReadOpenMode"
                    [(ngModel)]="stockTypeField.stockTypeDescription"
                    maxlength="100"
                  ></textarea>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="grid-cell--6">
          <div class="grid-cell grid-cell--container">
            <div class="grid-cell-header">
              <div class="grid-cell-title-container">
                <h3 class="grid-cell-title">
                  {{ componentData.componentId + ".status" | translate }}({{ statusTableDataSource.dataCount }})
                </h3>
              </div>
            </div>
            <div class="grid-cell-content">
              <div class="section">
                <div class="section-content">
                  <a-table [dataSource]="statusTableDataSource">
                    <ng-template tableActionsDef>
                      <button
                        *ngIf="!isReadOpenMode && !statusTableDataSource.hasDataSelection"
                        type="button"
                        mat-raised-button
                        (click)="addNewStatus()"
                      >
                        {{ "global.add" | translate }}
                      </button>
                      <button
                        *ngIf="!isReadOpenMode && statusTableDataSource.hasDataSelection"
                        type="button"
                        mat-raised-button
                        (click)="deleteStatus()"
                      >
                        {{ "global.delete" | translate }}
                      </button>
                    </ng-template>

                    <ng-template columnDef="opeCode" let-rowData="rowData" class="page-header-links">
                      <a
                        (click)="openOperationForm(rowData)"
                        style="cursor: pointer; text-decoration: underline; color: blue"
                        >{{ rowData.opeCode }}
                      </a>
                    </ng-template>
                  </a-table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- <div class="grid-row">
        
      </div> -->
    </div>
  </div>

  <!-- POPUP ZONE -->

  <aw-status-form-popup
    *ngIf="showStatusFormPopup"
    [(display)]="showStatusFormPopup"
    [statusForm]="currentStatusForm"
    (onCreate)="createStatusForm($event)"
  ></aw-status-form-popup>
</div>
