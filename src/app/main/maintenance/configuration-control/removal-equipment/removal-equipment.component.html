<h4 class="section-title">
  {{ getComponentName() + ".removal" | translate }}
</h4>

<div class="section-content">
  <div class="row">
    <div class="form-group">
      <label class="form-label">
        {{ getComponentName() + ".woCode" | translate }}
      </label>

      <div class="form-control">
        <div class="form-control-generic">
          <a (click)="openWorkOrder()">{{ workOrderCode }}</a>
        </div>
      </div>
    </div>

    <div class="form-group flex--2">
      <label class="form-label">
        {{ getComponentName() + ".woDescription" | translate }}
      </label>

      <div class="form-control">
        <textarea
          class="aw-textarea"
          [rows]="2"
          pInputTextarea
          autoResize="autoResize"
          [(ngModel)]="workOrderDescription"
          [disabled]="true"
        ></textarea>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="form-group" [ngClass]="{ required: !isReadOpenMode }">
      <label class="form-label">
        {{ getComponentName() + ".date" | translate }}
      </label>

      <div class="form-control">
        <p-calendar
          showButtonBar="true"
          [monthNavigator]="true"
          [yearNavigator]="true"
          [yearRange]="sessionService.calendarYearRange"
          class="aw-calendar"
          [dateFormat]="sessionService.dateFormatPrimeNG"
          [(ngModel)]="removalDate"
          [showTime]="true"
          appendTo="body"
          [readonlyInput]="true"
          [disabled]="stockMvt.bidoNotificationNotificationCode"
        ></p-calendar>
      </div>
    </div>

    <div class="form-group" [ngClass]="{ required: !isReadOpenMode }">
      <label class="form-label">
        {{ getComponentName() + ".newOperationalStatus" | translate }}
      </label>

      <div class="form-control">
        <p-dropdown
          class="aw-dropdown fixed-width"
          [options]="operationalStatusList"
          [(ngModel)]="removalNewOperationalStatus"
          [showClear]="true"
          placeholder="&nbsp;"
          [disabled]="stockMvt.bidoNotificationNotificationCode"
        ></p-dropdown>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">
        {{ getComponentName() + ".warehouse" | translate }}
      </label>

      <div class="form-control">
        <div class="form-control-generic">
          {{ removalWarehouseName }}
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="form-group" [ngClass]="{ required: !isReadOpenMode }">
      <label class="form-label">
        {{ getComponentName() + ".superiorAsset" | translate }}
      </label>

      <div class="form-control">
        <p-dropdown
          class="aw-dropdown fixed-width"
          [options]="superiorAssetList"
          [(ngModel)]="removalSuperiorAsset"
          [showClear]="true"
          placeholder="&nbsp;"
          (onChange)="onChangeSuperiorAsset()"
          [disabled]="
            stockMvt.bidoNotificationNotificationCode ||
            (removalSuperiorAsset && superiorAssetList && superiorAssetList.length === 1)
          "
        ></p-dropdown>
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">
        {{ getComponentName() + ".functionLocation" | translate }}
      </label>

      <div class="form-control">
        <p-dropdown
          *ngIf="!stockMvt.bidoNotificationNotificationCode"
          class="aw-dropdown fixed-width"
          [options]="functionLocationList"
          [(ngModel)]="removalFunctionLocation"
          [showClear]="true"
          placeholder="&nbsp;"
          (onChange)="onChangeFunctionLocation()"
          [disabled]="removalFunctionLocation && functionLocationList && functionLocationList.length === 1"
        ></p-dropdown>
        <div class="form-control-generic" *ngIf="stockMvt.bidoNotificationNotificationCode">
          {{ removalFunctionLocationName }}
        </div>
      </div>
    </div>

    <div class="form-group" *ngIf="!stockMvt.bidoNotificationNotificationCode">
      <label class="form-label">
        {{ getComponentName() + ".item" | translate }}
      </label>

      <div class="form-control">
        <p-dropdown
          class="aw-dropdown fixed-width"
          [options]="itemList"
          [(ngModel)]="removalItem"
          [showClear]="true"
          placeholder="&nbsp;"
          (onChange)="onChangeItem()"
          [disabled]="stockMvt.bidoNotificationNotificationCode || (removalItem && itemList && itemList.length === 1)"
        ></p-dropdown>
      </div>
    </div>
    <div class="form-group" *ngIf="stockMvt.bidoNotificationNotificationCode"></div>
  </div>

  <div class="row">
    <div class="form-group" [ngClass]="{ required: !isReadOpenMode }">
      <label class="form-label">
        {{ getComponentName() + ".removalReason" | translate }}
      </label>

      <div class="form-control">
        <p-dropdown
          class="aw-dropdown fixed-width"
          [options]="removalReasonList"
          [(ngModel)]="removalReason"
          [showClear]="true"
          placeholder="&nbsp;"
          [disabled]="stockMvt.bidoNotificationNotificationCode"
        ></p-dropdown>
      </div>
    </div>
  </div>

  <div class="row flex-row--justify-end">
    <button type="button" mat-raised-button (click)="openEvent()" *ngIf="stockMvt.bidoNotificationNotificationCode">
      {{ "openEvent" | translate }}
    </button>

    <button
      type="button"
      mat-raised-button
      class="btn-with-spinner"
      color="primary"
      (click)="validate()"
      *ngIf="!stockMvt.bidoNotificationNotificationCode"
      [disabled]="!removalDate || !removalReason || !removalNewOperationalStatus"
    >
      <span class="lds-hourglass" *ngIf="saving"></span>
      <span *ngIf="saving">&nbsp;</span>
      {{ "validate" | translate }}
    </button>
  </div>
</div>
