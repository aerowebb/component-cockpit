<div class="page-header">
  <div class="page-info">
    <div>
      <h2 class="page-title">
        {{ "transaction." + componentData.componentId | translate }}
      </h2>

      <div class="page-subtitle">
        <div class="page-subtitle" *ngIf="!isCreateOpenMode && componentData && componentData.objectId">
          - {{ subtitle }}
        </div>
      </div>
    </div>

    <div class="object-status" *ngIf="evolution.statusState" (click)="showStatus()">
      {{ evolution.statusState | formatSelectOption: propertyStatus }}
    </div>
  </div>

  <div class="page-actions">
    <button *ngIf="isReadOpenMode && hasUpdateAccessRight" type="button" mat-raised-button (click)="edit()">
      {{ "global.edit" | translate }}
    </button>

    <button
      *ngIf="!isReadOpenMode && !isCreateOpenMode"
      type="button"
      mat-raised-button
      color="warn"
      (click)="refresh()"
    >
      {{ "global.cancel" | translate }}
    </button>

    <button
      *ngIf="!isReadOpenMode"
      class="btn-with-spinner"
      color="primary"
      type="button"
      mat-raised-button
      (click)="saveEvolutionData()"
    >
      <span class="lds-hourglass" *ngIf="showSaveSpinner"></span>
      {{ "global.save" | translate }}
    </button>

    <button
      mat-icon-button
      class="mat-elevation-z1"
      matTooltip="{{ 'global.showAllActionTooltip' | translate }}"
      matTooltipPosition="above"
      aria-label="Show all actions"
      [matMenuTriggerFor]="actions"
    >
      <mat-icon>more_horiz</mat-icon>
    </button>
    <mat-menu #actions="matMenu">
      <button
        mat-menu-item
        *ngIf="!isReadOpenMode && evolution.evolutionNumber != null"
        (click)="confirmUpgradeEvolution()"
      >
        {{ "global.upgrade" | translate }}
      </button>

      <button mat-menu-item *ngIf="!isCreateOpenMode" (click)="openStatusUpdatesPopup()">
        {{ "updates" | translate }}
      </button>

      <button mat-menu-item *ngIf="isReadOpenMode && !isCreateOpenMode" (click)="refresh()">
        {{ "global.refresh" | translate }}
      </button>

      <button mat-menu-item (click)="updateFavoriteState()">
        {{ (isFavoriteEntry ? "page.removeFromFavorites" : "page.addToFavorites") | translate }}
      </button>
    </mat-menu>
  </div>
</div>

<div class="page-wrapper">
  <div class="page-content">
    <mat-tab-group animationDuration="0ms" dynamicHeight>
      <!-- Home -->
      <mat-tab>
        <ng-template mat-tab-label>
          {{ "home" | translate }}
        </ng-template>

        <!-- Main data -->
        <div class="grid-row">
          <div #mainInfoAnchor class="grid-cell--4" (click)="selectPageTocEntry('mainInfoAnchor')">
            <div
              class="grid-cell grid-cell--container"
              [ngClass]="{ active: isPageTocEntrySelected('mainInfoAnchor') }"
            >
              <div class="grid-cell-header">
                <div class="grid-cell-title-container">
                  <h3 class="grid-cell-title">{{ "page.mainData" | translate }}</h3>
                </div>
              </div>

              <div class="grid-cell-content">
                <div class="column">
                  <div class="row">
                    <div class="row">
                      <div class="form-group flex--2" [ngClass]="{ required: !isReadOpenMode }">
                        <label class="form-label">{{
                          componentData.componentId + ".evolutionNumber" | translate
                        }}</label>

                        <div class="form-control">
                          <input
                            type="text"
                            class="aw-input"
                            [(ngModel)]="evolution.evolutionNumber"
                            maxlength="100"
                            [disabled]="isReadOpenMode || !isEditable"
                          />
                        </div>
                      </div>

                      <div class="form-group flex--2" [ngClass]="{ required: !isReadOpenMode }">
                        <label class="form-label">{{
                          componentData.componentId + ".evolutionRevisionNumber" | translate
                        }}</label>

                        <div class="form-control">
                          <input
                            type="text"
                            class="aw-input"
                            [(ngModel)]="evolution.evolutionRevisionNumber"
                            maxlength="10"
                            [disabled]="isReadOpenMode || !isEditable"
                          />
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="form-group flex--2">
                        <label class="form-label">{{ "global.comments" | translate }}</label>

                        <div class="form-control">
                          <textarea
                            class="aw-textarea"
                            [rows]="3"
                            [(ngModel)]="evolution.evolutionSummary"
                            pInputTextarea
                            [disabled]="isReadOpenMode"
                            maxlength="300"
                          ></textarea>
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <div class="form-group flex--2">
                        <label class="form-label">{{ componentData.componentId + ".evolutionType" | translate }}</label>

                        <div class="form-control">
                          <p-dropdown
                            class="aw-dropdown fixed-width"
                            [options]="propertyType"
                            [(ngModel)]="evolution.evolutionType"
                            [showClear]="true"
                            placeholder="&nbsp;"
                            [disabled]="isReadOpenMode"
                          ></p-dropdown>
                        </div>
                      </div>

                      <div class="form-group flex--2">
                        <label class="form-label">{{
                          componentData.componentId + ".evolutionCompliance" | translate
                        }}</label>

                        <div class="form-control">
                          <p-dropdown
                            class="aw-dropdown fixed-width"
                            [options]="propertyCompliance"
                            [(ngModel)]="evolution.evolutionCompliance"
                            [showClear]="true"
                            placeholder="&nbsp;"
                            [disabled]="isReadOpenMode"
                          ></p-dropdown>
                        </div>
                      </div>
                    </div>

                    <!--Ex-Additional Information-->
                    <div class="row">
                      <div class="form-group flex--1">
                        <label class="form-label">{{
                          componentData.componentId + ".evolutionLevel" | translate
                        }}</label>

                        <div class="form-control">
                          <p-dropdown
                            class="aw-dropdown fixed-width"
                            [options]="propertyLevel"
                            [(ngModel)]="evolution.evolutionLevel"
                            [showClear]="true"
                            placeholder="&nbsp;"
                            [disabled]="isReadOpenMode"
                          ></p-dropdown>
                        </div>
                      </div>

                      <div class="form-group flex--1">
                        <label class="form-label">{{ componentData.componentId + ".tracked" | translate }}</label>

                        <div class="form-control">
                          <p-checkbox
                            class="aw-checkbox"
                            binary="true"
                            [(ngModel)]="evolution.tracked"
                            [disabled]="isReadOpenMode"
                          ></p-checkbox>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="vertical" class="grid-cell--8 column-cell">
            <!-- Airworthiness Documents associated with Evolution -->
            <div #airworthiDocAnchor class="grid-cell--12" (click)="selectPageTocEntry('airworthiDocAnchor')">
              <div
                class="grid-cell grid-cell--container"
                [ngClass]="{ active: isPageTocEntrySelected('airworthiDocAnchor') }"
              >
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">
                      {{ componentData.componentId + ".sbadAssociated" | translate }} ({{
                        bireSbadDisplayed ? bireSbadDisplayed.length : 0
                      }})
                    </h3>
                  </div>
                </div>
                <p-table
                  [resizableColumns]="true"
                  #ptableSbad
                  class="aw-table2"
                  [columns]="evolutionTableCols"
                  [value]="bireSbadDisplayed"
                  [(selection)]="selectedEvolutions"
                  [scrollable]="true"
                >
                  <ng-template pTemplate="emptymessage">
                    <span *ngIf="!isLoadingSbadTable"> &nbsp;</span>

                    <div *ngIf="isLoadingSbadTable" class="aw-table-loading-indicator">
                      <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                      <div class="lds-hourglass"></div>
                    </div>
                  </ng-template>

                  <ng-template pTemplate="caption">
                    <div class="aw-table-header" [ngClass]="{ 'rows-selected': selectedEvolutions.length > 0 }">
                      <div class="aw-table-global-filter">
                        <label class="aw-table-global-filter-label">
                          <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                        </label>

                        <input
                          #ptableSbadGlobalFilter
                          class="aw-table-global-filter-input"
                          type="text"
                          placeholder="{{ 'table.globalFilterText' | translate }}"
                          (input)="ptableSbad.filterGlobal($event.target.value, 'contains')"
                        />
                      </div>

                      <div class="aw-table-actions">
                        <button
                          *ngIf="!isReadOpenMode && selectedEvolutions.length > 0"
                          type="button"
                          mat-raised-button
                          color="warn"
                          (click)="confirmDeleteSbad()"
                        >
                          {{ "global.delete" | translate }}
                        </button>

                        <button
                          *ngIf="selectedEvolutions.length === 1"
                          type="button"
                          mat-raised-button
                          (click)="openSbad()"
                        >
                          {{ "global.open" | translate }}
                        </button>

                        <button
                          *ngIf="!isReadOpenMode && selectedEvolutions.length === 0"
                          type="button"
                          mat-raised-button
                          (click)="createSbad()"
                        >
                          {{ "global.add" | translate }}
                        </button>
                      </div>
                    </div>
                  </ng-template>

                  <ng-template pTemplate="colgroup" let-columns>
                    <colgroup>
                      <col class="aw-table-checkbox-wrapper" />
                      <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                    </colgroup>
                  </ng-template>

                  <ng-template pTemplate="header" let-columns>
                    <tr>
                      <th class="aw-table-checkbox-wrapper">
                        <p-tableHeaderCheckbox class="aw-table-checkbox"></p-tableHeaderCheckbox>
                      </th>

                      <th pResizableColumn *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }">
                        {{ componentData.componentId + "." + col.field | translate }}
                      </th>
                    </tr>
                  </ng-template>

                  <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                    <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                      <td class="aw-table-checkbox-wrapper">
                        <p-tableCheckbox class="aw-table-checkbox" [value]="rowData"></p-tableCheckbox>
                      </td>

                      <td
                        *ngFor="let col of columns"
                        [ngSwitch]="col.field"
                        [ngStyle]="{ 'text-align': col.alignment }"
                      >
                        <a *ngSwitchCase="'sbNumber'" (click)="openRevisionNumber(rowData)">{{ rowData[col.field] }}</a>
                        <i
                          *ngSwitchCase="'statusInfo'"
                          class="fa fa-fw fa-info-circle aw-icon"
                          aria-hidden="true"
                          (click)="openStatusPopupSbad(rowData)"
                        ></i>

                        <span *ngSwitchDefault> {{ rowData[col.field] }} </span>
                      </td>
                    </tr>
                  </ng-template>
                </p-table>
              </div>
            </div>

            <!-- Modifications associated with Evolution -->
            <div #airworthiDocAnchor class="grid-cell--12" (click)="selectPageTocEntry('airworthiDocAnchor')">
              <div
                class="grid-cell grid-cell--container"
                [ngClass]="{ active: isPageTocEntrySelected('airworthiDocAnchor') }"
              >
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">
                      {{ componentData.componentId + ".modificationAssociated" | translate }} ({{
                        bireModificationDisplayed ? bireModificationDisplayed.length : 0
                      }})
                    </h3>
                  </div>
                </div>
                <p-table
                  [resizableColumns]="true"
                  #ptableModification
                  class="aw-table2"
                  [columns]="modificationsTableCols"
                  [value]="bireModificationDisplayed"
                  [(selection)]="selectedModifications"
                  [scrollable]="true"
                >
                  <ng-template pTemplate="emptymessage">
                    <span *ngIf="!isLoadingModificationTable"> &nbsp;</span>

                    <div *ngIf="isLoadingModificationTable" class="aw-table-loading-indicator">
                      <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                      <div class="lds-hourglass"></div>
                    </div>
                  </ng-template>

                  <ng-template pTemplate="caption">
                    <div class="aw-table-header" [ngClass]="{ 'rows-selected': selectedModifications.length > 0 }">
                      <div class="aw-table-global-filter">
                        <label class="aw-table-global-filter-label">
                          <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                        </label>

                        <input
                          #ptableModificationGlobalFilter
                          class="aw-table-global-filter-input"
                          type="text"
                          placeholder="{{ 'table.globalFilterText' | translate }}"
                          (input)="ptableModification.filterGlobal($event.target.value, 'contains')"
                        />
                      </div>

                      <div class="aw-table-actions">
                        <button
                          *ngIf="!isReadOpenMode && selectedModifications.length > 0"
                          type="button"
                          mat-raised-button
                          color="warn"
                          (click)="confirmDeleteModification()"
                        >
                          {{ "global.delete" | translate }}
                        </button>

                        <button
                          *ngIf="selectedModifications.length === 1"
                          type="button"
                          mat-raised-button
                          (click)="openModification()"
                        >
                          {{ "global.open" | translate }}
                        </button>

                        <button
                          *ngIf="!isReadOpenMode && selectedModifications.length === 0"
                          type="button"
                          mat-raised-button
                          (click)="createModification()"
                        >
                          {{ "global.add" | translate }}
                        </button>
                      </div>
                    </div>
                  </ng-template>

                  <ng-template pTemplate="colgroup" let-columns>
                    <colgroup>
                      <col class="aw-table-checkbox-wrapper" />
                      <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                    </colgroup>
                  </ng-template>

                  <ng-template pTemplate="header" let-columns>
                    <tr>
                      <th class="aw-table-checkbox-wrapper">
                        <p-tableHeaderCheckbox class="aw-table-checkbox"></p-tableHeaderCheckbox>
                      </th>

                      <th pResizableColumn *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }">
                        {{ componentData.componentId + "." + col.field | translate }}
                      </th>
                    </tr>
                  </ng-template>

                  <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                    <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                      <td class="aw-table-checkbox-wrapper">
                        <p-tableCheckbox class="aw-table-checkbox" [value]="rowData"></p-tableCheckbox>
                      </td>

                      <td
                        *ngFor="let col of columns"
                        [ngSwitch]="col.field"
                        [ngStyle]="{ 'text-align': col.alignment }"
                      >
                        <a *ngSwitchCase="'modificationNumber'" (click)="openModificationNumber(rowData)">{{
                          rowData[col.field]
                        }}</a>
                        <i
                          *ngSwitchCase="'statusInfo'"
                          class="fa fa-fw fa-info-circle aw-icon"
                          aria-hidden="true"
                          (click)="openStatusPopupModification(rowData)"
                        ></i>

                        <span *ngSwitchDefault> {{ rowData[col.field] }} </span>
                      </td>
                    </tr>
                  </ng-template>
                </p-table>
              </div>
            </div>
          </div>
        </div>
      </mat-tab>

      <!-- Applicability -->
      <mat-tab>
        <ng-template mat-tab-label>
          {{ "global.applicabilities" | translate }}
        </ng-template>

        <!-- Concerned Families OR Applicabilities associated with Evolution -->
        <div class="grid-row">
          <div #applicabilityAnchor class="grid-cell--equally" (click)="selectPageTocEntry('applicabilityAnchor')">
            <div
              class="grid-cell grid-cell--container"
              [ngClass]="{ active: isPageTocEntrySelected('applicabilityAnchor') }"
            >
              <div class="grid-cell-header">
                <div class="grid-cell-title-container">
                  <h3 class="grid-cell-title">
                    {{ componentData.componentId + ".concernedFamilies" | translate }} ({{
                      bireApplicabilityDisplayed ? bireApplicabilityDisplayed.length : 0
                    }})
                  </h3>
                </div>
              </div>

              <div class="section">
                <div class="section-content">
                  <p-table
                    [resizableColumns]="true"
                    #ptableApplicability
                    class="aw-table2"
                    [columns]="applicabilitiesTableCols"
                    [value]="bireApplicabilityDisplayed"
                    [(selection)]="selectedApplicabilities"
                    [scrollable]="true"
                  >
                    <ng-template pTemplate="emptymessage">
                      <span *ngIf="!isLoadingApplicabilityTable"> &nbsp;</span>

                      <div *ngIf="isLoadingApplicabilityTable" class="aw-table-loading-indicator">
                        <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                        <div class="lds-hourglass"></div>
                      </div>
                    </ng-template>

                    <ng-template pTemplate="caption">
                      <div class="aw-table-header" [ngClass]="{ 'rows-selected': selectedApplicabilities.length > 0 }">
                        <div class="aw-table-global-filter">
                          <label class="aw-table-global-filter-label">
                            <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                          </label>

                          <input
                            #ptableApplicabilityGlobalFilter
                            class="aw-table-global-filter-input"
                            type="text"
                            placeholder="{{ 'table.globalFilterText' | translate }}"
                            (input)="ptableApplicability.filterGlobal($event.target.value, 'contains')"
                          />
                        </div>

                        <div class="aw-table-actions">
                          <button
                            *ngIf="!isReadOpenMode && selectedApplicabilities.length > 0"
                            type="button"
                            mat-raised-button
                            color="warn"
                            (click)="confirmDeleteApplicability()"
                          >
                            {{ "global.delete" | translate }}
                          </button>

                          <button
                            *ngIf="selectedApplicabilities.length === 1"
                            type="button"
                            mat-raised-button
                            (click)="openStatusPopupApplicability()"
                          >
                            {{ componentData.componentId + ".displayStatus" | translate }}
                          </button>

                          <!-- <button
                            *ngIf="!isReadOpenMode && selectedApplicabilities.length === 1"
                            type="button"
                            mat-raised-button
                            (click)="editApplicability()"
                          >
                            {{ "global.edit" | translate }}
                          </button> -->

                          <button
                            *ngIf="selectedApplicabilities.length === 1"
                            type="button"
                            mat-raised-button
                            (click)="openApplicability()"
                          >
                            {{ "global.open" | translate }}
                          </button>

                          <button
                            *ngIf="!isReadOpenMode && selectedApplicabilities.length === 0"
                            type="button"
                            mat-raised-button
                            (click)="createApplicability()"
                          >
                            {{ "global.add" | translate }}
                          </button>
                        </div>
                      </div>
                    </ng-template>

                    <ng-template pTemplate="colgroup" let-columns>
                      <colgroup>
                        <col class="aw-table-checkbox-wrapper" />
                        <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                      </colgroup>
                    </ng-template>

                    <ng-template pTemplate="header" let-columns>
                      <tr>
                        <th class="aw-table-checkbox-wrapper">
                          <p-tableHeaderCheckbox class="aw-table-checkbox"></p-tableHeaderCheckbox>
                        </th>

                        <th pResizableColumn *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }">
                          {{ componentData.componentId + "." + col.field | translate }}
                        </th>
                      </tr>
                    </ng-template>

                    <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                      <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                        <td class="aw-table-checkbox-wrapper">
                          <p-tableCheckbox class="aw-table-checkbox" [value]="rowData"></p-tableCheckbox>
                        </td>

                        <td
                          *ngFor="let col of columns"
                          [ngSwitch]="col.field"
                          [ngStyle]="{ 'text-align': col.alignment }"
                        >
                          <span *ngSwitchCase="'variantStructureTypeFamily'">
                            {{ rowData.familyCode + "-" + rowData.structureType + "-" + rowData.variantCode }}
                          </span>

                          <span *ngSwitchCase="'evolutionApplicabilityDate'">
                            {{ rowData[col.field] | date: "shortDate":"":translateService.currentLang }}
                          </span>

                          <span *ngSwitchDefault> {{ rowData[col.field] }} </span>
                        </td>
                      </tr>
                    </ng-template>
                  </p-table>
                </div>
              </div>
            </div>
          </div>

          <!-- Concerned Assets OR Assets Concerned by the Evolution -->
          <div #applicabilityAnchor class="grid-cell--equally" (click)="selectPageTocEntry('applicabilityAnchor')">
            <div
              class="grid-cell grid-cell--container"
              [ngClass]="{ active: isPageTocEntrySelected('applicabilityAnchor') }"
            >
              <div class="grid-cell-header">
                <div class="grid-cell-title-container">
                  <h3 class="grid-cell-title">
                    {{ componentData.componentId + ".concernedAssets" | translate }} ({{
                      bireConcernedAssetDisplayed ? bireConcernedAssetDisplayed.length : 0
                    }})
                  </h3>
                </div>
              </div>

              <div class="section">
                <div class="section-content">
                  <p-table
                    [resizableColumns]="true"
                    #ptableAsset
                    class="aw-table2"
                    [columns]="assetsTableCols"
                    [value]="bireConcernedAssetDisplayed"
                    [(selection)]="selectedAssets"
                    [scrollable]="true"
                  >
                    <ng-template pTemplate="emptymessage">
                      <span *ngIf="!isLoadingAssetTable"> &nbsp;</span>

                      <div *ngIf="isLoadingAssetTable" class="aw-table-loading-indicator">
                        <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                        <div class="lds-hourglass"></div>
                      </div>
                    </ng-template>

                    <ng-template pTemplate="caption">
                      <div class="aw-table-header" [ngClass]="{ 'rows-selected': selectedAssets.length > 0 }">
                        <div class="aw-table-global-filter">
                          <label class="aw-table-global-filter-label">
                            <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                          </label>

                          <input
                            #ptableAssetGlobalFilter
                            class="aw-table-global-filter-input"
                            type="text"
                            placeholder="{{ 'table.globalFilterText' | translate }}"
                            (input)="ptableAsset.filterGlobal($event.target.value, 'contains')"
                          />
                        </div>

                        <div class="aw-table-actions">
                          <button
                            *ngIf="!isReadOpenMode && selectedAssets.length > 0"
                            type="button"
                            mat-raised-button
                            color="warn"
                            (click)="confirmDeleteAsset()"
                          >
                            {{ "global.delete" | translate }}
                          </button>

                          <!-- <button
                            *ngIf="!isReadOpenMode && selectedAssets.length === 1"
                            type="button"
                            mat-raised-button
                            (click)="editAsset()"
                          >
                            {{ "global.edit" | translate }}
                          </button> -->

                          <button
                            *ngIf="selectedAssets.length === 1"
                            type="button"
                            mat-raised-button
                            (click)="openAsset()"
                          >
                            {{ "global.open" | translate }}
                          </button>

                          <button
                            *ngIf="!isReadOpenMode && selectedAssets.length === 0"
                            type="button"
                            mat-raised-button
                            (click)="createAsset()"
                          >
                            {{ "global.add" | translate }}
                          </button>
                        </div>
                      </div>
                    </ng-template>

                    <ng-template pTemplate="colgroup" let-columns>
                      <colgroup>
                        <col class="aw-table-checkbox-wrapper" />
                        <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                      </colgroup>
                    </ng-template>

                    <ng-template pTemplate="header" let-columns>
                      <tr>
                        <th class="aw-table-checkbox-wrapper">
                          <p-tableHeaderCheckbox class="aw-table-checkbox"></p-tableHeaderCheckbox>
                        </th>

                        <th pResizableColumn *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }">
                          {{ componentData.componentId + "." + col.field | translate }}
                        </th>
                      </tr>
                    </ng-template>

                    <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                      <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                        <td class="aw-table-checkbox-wrapper">
                          <p-tableCheckbox class="aw-table-checkbox" [value]="rowData"></p-tableCheckbox>
                        </td>

                        <td *ngFor="let col of columns">{{ rowData[col.field] }}</td>
                      </tr>
                    </ng-template>
                  </p-table>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Interdependances associated with Evolution -->
        <div class="grid-row">
          <div #applicabilityAnchor class="grid-cell--12" (click)="selectPageTocEntry('applicabilityAnchor')">
            <div
              class="grid-cell grid-cell--container"
              [ngClass]="{ active: isPageTocEntrySelected('applicabilityAnchor') }"
            >
              <div class="grid-cell-header">
                <div class="grid-cell-title-container">
                  <h3 class="grid-cell-title">
                    {{ componentData.componentId + ".interdependencesAssociated" | translate }} ({{
                      bireInterdependenceDisplayed ? bireInterdependenceDisplayed.length : 0
                    }})
                  </h3>
                </div>
              </div>

              <div class="grid-cell-content grid-cell-content-with-section">
                <div class="section">
                  <div class="section-content">
                    <p-table
                      [resizableColumns]="true"
                      #ptableInterdependence
                      class="aw-table2"
                      [columns]="interdependencesTableCols"
                      [value]="bireInterdependenceDisplayed"
                      [(selection)]="selectedInterdependences"
                      [scrollable]="true"
                    >
                      <ng-template pTemplate="emptymessage">
                        <span *ngIf="!isLoadingInterdependenceTable"> &nbsp;</span>

                        <div *ngIf="isLoadingInterdependenceTable" class="aw-table-loading-indicator">
                          <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                          <div class="lds-hourglass"></div>
                        </div>
                      </ng-template>

                      <ng-template pTemplate="caption">
                        <div
                          class="aw-table-header"
                          [ngClass]="{ 'rows-selected': selectedInterdependences.length > 0 }"
                        >
                          <div class="aw-table-global-filter">
                            <label class="aw-table-global-filter-label">
                              <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                            </label>

                            <input
                              #ptableInterdependenceGlobalFilter
                              class="aw-table-global-filter-input"
                              type="text"
                              placeholder="{{ 'table.globalFilterText' | translate }}"
                              (input)="ptableInterdependence.filterGlobal($event.target.value, 'contains')"
                            />
                          </div>

                          <div class="aw-table-actions">
                            <button
                              *ngIf="!isReadOpenMode && selectedInterdependences.length > 0"
                              type="button"
                              mat-raised-button
                              color="warn"
                              (click)="confirmDeleteInterdependence()"
                            >
                              {{ "global.delete" | translate }}
                            </button>

                            <button
                              *ngIf="selectedInterdependences.length === 1"
                              type="button"
                              mat-raised-button
                              (click)="openStatusPopupInterdependence()"
                            >
                              {{ componentData.componentId + ".displayStatus" | translate }}
                            </button>

                            <!-- <button
                              *ngIf="!isReadOpenMode && selectedInterdependences.length === 1"
                              type="button"
                              mat-raised-button
                              (click)="editInterdependence()"
                            >
                              {{ "global.edit" | translate }}
                            </button> -->

                            <button
                              *ngIf="selectedInterdependences.length === 1"
                              type="button"
                              mat-raised-button
                              (click)="openInterdependence()"
                            >
                              {{ "global.open" | translate }}
                            </button>

                            <button
                              *ngIf="!isReadOpenMode && selectedInterdependences.length === 0"
                              type="button"
                              mat-raised-button
                              (click)="createInterdependence()"
                            >
                              {{ "global.add" | translate }}
                            </button>
                          </div>
                        </div>
                      </ng-template>

                      <ng-template pTemplate="colgroup" let-columns>
                        <colgroup>
                          <col class="aw-table-checkbox-wrapper" />
                          <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                        </colgroup>
                      </ng-template>

                      <ng-template pTemplate="header" let-columns>
                        <tr>
                          <th class="aw-table-checkbox-wrapper">
                            <p-tableHeaderCheckbox class="aw-table-checkbox"></p-tableHeaderCheckbox>
                          </th>

                          <th pResizableColumn *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }">
                            {{ componentData.componentId + "." + col.field | translate }}
                          </th>
                        </tr>
                      </ng-template>

                      <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                        <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                          <td class="aw-table-checkbox-wrapper">
                            <p-tableCheckbox class="aw-table-checkbox" [value]="rowData"></p-tableCheckbox>
                          </td>

                          <td
                            *ngFor="let col of columns"
                            [ngSwitch]="col.field"
                            [ngStyle]="{ 'text-align': col.alignment }"
                          >
                            <a *ngSwitchCase="'evoEvolutionNumber'" (click)="openEvolutionNumber(rowData)">{{
                              rowData[col.field]
                            }}</a>
                            <span *ngSwitchCase="'variantCode'">
                              {{ rowData.familyCode }}-{{ rowData.structureType }}-{{ rowData.variantCode }}
                            </span>
                            <span *ngSwitchCase="'way'">
                              <i
                                *ngIf="arrowOrientation.get(rowData)"
                                class="fa fa-fw fa-chevron-right aw-icon"
                                aria-hidden="true"
                              ></i>
                              <i
                                *ngIf="!arrowOrientation.get(rowData)"
                                class="fa fa-fw fa-chevron-left aw-icon"
                                aria-hidden="true"
                              ></i>
                            </span>

                            <span *ngSwitchDefault> {{ rowData[col.field] }} </span>
                          </td>
                        </tr>
                      </ng-template>
                    </p-table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </mat-tab>

      <!-- Impact -->
      <mat-tab>
        <ng-template mat-tab-label>
          {{ "global.impacts" | translate }}
        </ng-template>

        <!-- Associated Impacts on P N Evolution -->
        <div class="grid-row">
          <div #impactAnchor class="grid-cell--12" (click)="selectPageTocEntry('impactAnchor')">
            <div class="grid-cell grid-cell--container" [ngClass]="{ active: isPageTocEntrySelected('impactAnchor') }">
              <div class="grid-cell-header">
                <div class="grid-cell-title-container">
                  <h3 class="grid-cell-title">
                    {{ componentData.componentId + ".impactsAssociatedOnEvolution" | translate }} ({{
                      bireImpactEvolDisplayed ? bireImpactEvolDisplayed.length : 0
                    }})
                  </h3>
                </div>
              </div>

              <div class="grid-cell-content grid-cell-content-with-section">
                <div class="section">
                  <div class="section-content">
                    <p-table
                      [resizableColumns]="true"
                      #ptableImpactEvol
                      class="aw-table2"
                      [columns]="impactsEvolTableCols"
                      [value]="bireImpactEvolDisplayed"
                      [(selection)]="selectedImpactsEvol"
                      [scrollable]="true"
                    >
                      <ng-template pTemplate="emptymessage">
                        <span *ngIf="!isLoadingImpactEvolTable"> &nbsp;</span>

                        <div *ngIf="isLoadingImpactEvolTable" class="aw-table-loading-indicator">
                          <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                          <div class="lds-hourglass"></div>
                        </div>
                      </ng-template>

                      <ng-template pTemplate="caption">
                        <div class="aw-table-header" [ngClass]="{ 'rows-selected': selectedImpactsEvol.length > 0 }">
                          <div class="aw-table-global-filter">
                            <label class="aw-table-global-filter-label">
                              <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                            </label>

                            <input
                              #ptableImpactEvolGlobalFilter
                              class="aw-table-global-filter-input"
                              type="text"
                              placeholder="{{ 'table.globalFilterText' | translate }}"
                              (input)="ptableImpactEvol.filterGlobal($event.target.value, 'contains')"
                            />
                          </div>

                          <div class="aw-table-actions">
                            <!-- <button *ngIf="!isReadOpenMode && selectedImpactsEvol.length === 1" type="button" mat-raised-button
                              (click)="duplicateImpactEvol()">
                              {{'global.duplicate' | translate}}
                            </button> -->

                            <button
                              *ngIf="!isReadOpenMode && selectedImpactsEvol.length > 0"
                              type="button"
                              mat-raised-button
                              color="warn"
                              (click)="confirmDeleteImpactEvol()"
                            >
                              {{ "global.delete" | translate }}
                            </button>

                            <button
                              *ngIf="selectedImpactsEvol.length === 1"
                              type="button"
                              mat-raised-button
                              (click)="openStatusPopupImpactEvol()"
                            >
                              {{ componentData.componentId + ".displayStatus" | translate }}
                            </button>

                            <!-- <button
                              *ngIf="!isReadOpenMode && selectedImpactsEvol.length === 1"
                              type="button"
                              mat-raised-button
                              (click)="editImpactEvol()"
                            >
                              {{ "global.edit" | translate }}
                            </button> -->

                            <button
                              *ngIf="selectedImpactsEvol.length === 1"
                              type="button"
                              mat-raised-button
                              (click)="openImpactEvol()"
                            >
                              {{ "global.open" | translate }}
                            </button>

                            <button
                              *ngIf="!isReadOpenMode && selectedImpactsEvol.length === 0"
                              type="button"
                              mat-raised-button
                              (click)="createImpactEvol()"
                            >
                              {{ "global.add" | translate }}
                            </button>
                          </div>
                        </div>
                      </ng-template>

                      <ng-template pTemplate="colgroup" let-columns>
                        <colgroup>
                          <col class="aw-table-checkbox-wrapper" />
                          <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                        </colgroup>
                      </ng-template>

                      <ng-template pTemplate="header" let-columns>
                        <tr>
                          <th class="aw-table-checkbox-wrapper">
                            <p-tableHeaderCheckbox class="aw-table-checkbox"></p-tableHeaderCheckbox>
                          </th>

                          <th pResizableColumn *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }">
                            {{ componentData.componentId + "." + col.field | translate }}
                          </th>
                        </tr>
                      </ng-template>

                      <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                        <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                          <td class="aw-table-checkbox-wrapper">
                            <p-tableCheckbox class="aw-table-checkbox" [value]="rowData"></p-tableCheckbox>
                          </td>

                          <td
                            *ngFor="let col of columns"
                            [ngSwitch]="col.field"
                            [ngStyle]="{ 'text-align': col.alignment }"
                          >
                            <span *ngSwitchDefault> {{ rowData[col.field] }} </span>
                          </td>
                        </tr>
                      </ng-template>
                    </p-table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Associated Impacts on P N  -->
        <div class="grid-row">
          <div #impactAnchor class="grid-cell--12" (click)="selectPageTocEntry('impactAnchor')">
            <div class="grid-cell grid-cell--container" [ngClass]="{ active: isPageTocEntrySelected('impactAnchor') }">
              <div class="grid-cell-header">
                <div class="grid-cell-title-container">
                  <h3 class="grid-cell-title">
                    {{ componentData.componentId + ".impactsAssociated" | translate }} ({{
                      bireImpactDisplayed ? bireImpactDisplayed.length : 0
                    }})
                  </h3>
                </div>
              </div>

              <div class="section">
                <div class="section-content">
                  <p-table
                    [resizableColumns]="true"
                    #ptableImpact
                    class="aw-table2"
                    [columns]="impactsTableCols"
                    [value]="bireImpactDisplayed"
                    [(selection)]="selectedImpacts"
                    [scrollable]="true"
                  >
                    <ng-template pTemplate="emptymessage">
                      <span *ngIf="!isLoadingImpactTable"> &nbsp;</span>

                      <div *ngIf="isLoadingImpactTable" class="aw-table-loading-indicator">
                        <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                        <div class="lds-hourglass"></div>
                      </div>
                    </ng-template>

                    <ng-template pTemplate="caption">
                      <div class="aw-table-header" [ngClass]="{ 'rows-selected': selectedImpacts.length > 0 }">
                        <div class="aw-table-global-filter">
                          <label class="aw-table-global-filter-label">
                            <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                          </label>

                          <input
                            #ptableImpactGlobalFilter
                            class="aw-table-global-filter-input"
                            type="text"
                            placeholder="{{ 'table.globalFilterText' | translate }}"
                            (input)="ptableImpact.filterGlobal($event.target.value, 'contains')"
                          />
                        </div>

                        <div class="aw-table-actions">
                          <button
                            *ngIf="!isReadOpenMode && selectedImpacts.length > 0"
                            type="button"
                            mat-raised-button
                            color="warn"
                            (click)="confirmDeleteImpact()"
                          >
                            {{ "global.delete" | translate }}
                          </button>

                          <button
                            *ngIf="selectedImpacts.length === 1"
                            type="button"
                            mat-raised-button
                            (click)="openStatusPopupImpact()"
                          >
                            {{ componentData.componentId + ".displayStatus" | translate }}
                          </button>

                          <!-- <button
                            *ngIf="!isReadOpenMode && selectedImpacts.length === 1"
                            type="button"
                            mat-raised-button
                            (click)="editImpact()"
                          >
                            {{ "global.edit" | translate }}
                          </button> -->

                          <button
                            *ngIf="selectedImpacts.length === 1"
                            type="button"
                            mat-raised-button
                            (click)="openImpact()"
                          >
                            {{ "global.open" | translate }}
                          </button>

                          <button
                            *ngIf="!isReadOpenMode && selectedImpacts.length === 0"
                            type="button"
                            mat-raised-button
                            (click)="createImpact()"
                          >
                            {{ "global.add" | translate }}
                          </button>
                        </div>
                      </div>
                    </ng-template>

                    <ng-template pTemplate="colgroup" let-columns>
                      <colgroup>
                        <col class="aw-table-checkbox-wrapper" />
                        <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                      </colgroup>
                    </ng-template>

                    <ng-template pTemplate="header" let-columns>
                      <tr>
                        <th class="aw-table-checkbox-wrapper">
                          <p-tableHeaderCheckbox class="aw-table-checkbox"></p-tableHeaderCheckbox>
                        </th>

                        <th pResizableColumn *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }">
                          {{ componentData.componentId + "." + col.field | translate }}
                        </th>
                      </tr>
                    </ng-template>

                    <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                      <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                        <td class="aw-table-checkbox-wrapper">
                          <p-tableCheckbox class="aw-table-checkbox" [value]="rowData"></p-tableCheckbox>
                        </td>

                        <td
                          *ngFor="let col of columns"
                          [ngSwitch]="col.field"
                          [ngStyle]="{ 'text-align': col.alignment }"
                        >
                          <span *ngSwitchDefault> {{ rowData[col.field] }} </span>
                        </td>
                      </tr>
                    </ng-template>
                  </p-table>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Associated Impacts on Item -->
        <div class="grid-row">
          <div #impactAnchor class="grid-cell--12" (click)="selectPageTocEntry('impactAnchor')">
            <div class="grid-cell grid-cell--container" [ngClass]="{ active: isPageTocEntrySelected('impactAnchor') }">
              <div class="grid-cell-header">
                <div class="grid-cell-title-container">
                  <h3 class="grid-cell-title">
                    {{ componentData.componentId + ".impactsAssociatedItem" | translate }} ({{
                      bireImpactItemDisplayed ? bireImpactItemDisplayed.length : 0
                    }})
                  </h3>
                </div>
              </div>

              <div class="section">
                <div class="section-content">
                  <p-table
                    [resizableColumns]="true"
                    #ptableImpactItem
                    class="aw-table2"
                    [columns]="impactsItemTableCols"
                    [value]="bireImpactItemDisplayed"
                    [(selection)]="selectedImpactsItem"
                    [scrollable]="true"
                  >
                    <ng-template pTemplate="emptymessage">
                      <span *ngIf="!isLoadingImpactItemTable"> &nbsp;</span>

                      <div *ngIf="isLoadingImpactItemTable" class="aw-table-loading-indicator">
                        <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                        <div class="lds-hourglass"></div>
                      </div>
                    </ng-template>

                    <ng-template pTemplate="caption">
                      <div class="aw-table-header" [ngClass]="{ 'rows-selected': selectedImpactsItem.length > 0 }">
                        <div class="aw-table-global-filter">
                          <label class="aw-table-global-filter-label">
                            <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                          </label>

                          <input
                            #ptableImpactItemGlobalFilter
                            class="aw-table-global-filter-input"
                            type="text"
                            placeholder="{{ 'table.globalFilterText' | translate }}"
                            (input)="ptableImpactItem.filterGlobal($event.target.value, 'contains')"
                          />
                        </div>

                        <div class="aw-table-actions">
                          <button
                            *ngIf="!isReadOpenMode && selectedImpactsItem.length > 0"
                            type="button"
                            mat-raised-button
                            color="warn"
                            (click)="confirmDeleteImpactItem()"
                          >
                            {{ "global.delete" | translate }}
                          </button>

                          <button
                            *ngIf="selectedImpactsItem.length === 1"
                            type="button"
                            mat-raised-button
                            (click)="openStatusPopupImpactItem()"
                          >
                            {{ componentData.componentId + ".displayStatus" | translate }}
                          </button>

                          <!-- <button
                            *ngIf="!isReadOpenMode && selectedImpactsItem.length === 1"
                            type="button"
                            mat-raised-button
                            (click)="editImpactItem()"
                          >
                            {{ "global.edit" | translate }}
                          </button> -->

                          <button
                            *ngIf="selectedImpactsItem.length === 1"
                            type="button"
                            mat-raised-button
                            (click)="openImpactItem()"
                          >
                            {{ "global.open" | translate }}
                          </button>

                          <button
                            *ngIf="!isReadOpenMode && selectedImpactsItem.length === 0"
                            type="button"
                            mat-raised-button
                            (click)="createImpactItem()"
                          >
                            {{ "global.add" | translate }}
                          </button>
                        </div>
                      </div>
                    </ng-template>

                    <ng-template pTemplate="colgroup" let-columns>
                      <colgroup>
                        <col class="aw-table-checkbox-wrapper" />
                        <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                      </colgroup>
                    </ng-template>

                    <ng-template pTemplate="header" let-columns>
                      <tr>
                        <th class="aw-table-checkbox-wrapper">
                          <p-tableHeaderCheckbox class="aw-table-checkbox"></p-tableHeaderCheckbox>
                        </th>

                        <th pResizableColumn *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }">
                          {{ componentData.componentId + "." + col.field | translate }}
                        </th>
                      </tr>
                    </ng-template>

                    <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                      <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                        <td class="aw-table-checkbox-wrapper">
                          <p-tableCheckbox class="aw-table-checkbox" [value]="rowData"></p-tableCheckbox>
                        </td>

                        <td
                          *ngFor="let col of columns"
                          [ngSwitch]="col.field"
                          [ngStyle]="{ 'text-align': col.alignment }"
                        >
                          <span *ngSwitchDefault> {{ rowData[col.field] }} </span>
                        </td>
                      </tr>
                    </ng-template>
                  </p-table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </mat-tab>

      <!-- Tasks -->
      <mat-tab>
        <ng-template mat-tab-label>
          {{ "global.tasks" | translate }}
        </ng-template>

        <div class="grid-row">
          <div #tasksAnchor class="grid-cell--12" (click)="selectPageTocEntry('tasksAnchor')">
            <div class="grid-cell grid-cell--container" [ngClass]="{ active: isPageTocEntrySelected('tasksAnchor') }">
              <div class="grid-cell-header">
                <div class="grid-cell-title-container">
                  <h3 class="grid-cell-title">
                    {{ "global.tasks" | translate }} ({{ tasksTable ? tasksTable.length : 0 }})
                  </h3>
                </div>
              </div>

              <div class="grid-cell-content">
                <p-table
                  [resizableColumns]="true"
                  #ptableTask
                  class="aw-table2"
                  [columns]="tasksTableCols"
                  [value]="tasksTable"
                  [(selection)]="selectedTask"
                  [scrollable]="true"
                >
                  <ng-template pTemplate="emptymessage">
                    <span *ngIf="!isLoadingTaskTable"> &nbsp;</span>

                    <div *ngIf="isLoadingTaskTable" class="aw-table-loading-indicator">
                      <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                      <div class="lds-hourglass"></div>
                    </div>
                  </ng-template>

                  <ng-template pTemplate="caption">
                    <div class="aw-table-header" [ngClass]="{ 'rows-selected': selectedTask.length > 0 }">
                      <div class="aw-table-global-filter">
                        <label class="aw-table-global-filter-label">
                          <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                        </label>

                        <input
                          #ptableTaskGlobalFilter
                          class="aw-table-global-filter-input"
                          type="text"
                          placeholder="{{ 'table.globalFilterText' | translate }}"
                          (input)="ptableTask.filterGlobal($event.target.value, 'contains')"
                        />
                      </div>
                    </div>
                  </ng-template>

                  <ng-template pTemplate="colgroup" let-columns>
                    <colgroup>
                      <col class="aw-table-checkbox-wrapper" />
                      <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                    </colgroup>
                  </ng-template>

                  <ng-template pTemplate="header" let-columns>
                    <tr>
                      <th class="aw-table-checkbox-wrapper">
                        <p-tableHeaderCheckbox class="aw-table-checkbox"></p-tableHeaderCheckbox>
                      </th>

                      <th pResizableColumn *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }">
                        {{ componentData.componentId + "." + col.field | translate }}
                      </th>
                    </tr>
                  </ng-template>

                  <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                    <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                      <td class="aw-table-checkbox-wrapper">
                        <p-tableCheckbox class="aw-table-checkbox" [value]="rowData"></p-tableCheckbox>
                      </td>

                      <td *ngFor="let col of columns" [ngSwitch]="col.field">
                        <a *ngSwitchCase="'taskCode'" (click)="openTaskCode(rowData)">{{ rowData[col.field] }}</a>
                        <span *ngSwitchDefault> {{ rowData[col.field] }} </span>
                      </td>
                    </tr>
                  </ng-template>
                </p-table>
              </div>
            </div>
          </div>
        </div>
      </mat-tab>

      <!-- Attributes -->
      <mat-tab id="documentsTab">
        <ng-template mat-tab-label>
          <ng-container *ngIf="dynamicAttributesForEvolution && dynamicAttributesForEvolution.length > 0">
            {{ "attributes" | translate }} &amp;
          </ng-container>
          {{ "documents" | translate }}
        </ng-template>

        <div *ngIf="dynamicAttributesForEvolution && dynamicAttributesForEvolution.length > 0" class="grid-row">
          <div id="attributesPanel" class="grid-cell--12">
            <div class="grid-cell grid-cell--container">
              <div class="grid-cell-content grid-cell-content-with-section">
                <aw-dynamic-attributes
                  [attributes]="dynamicAttributesForEvolution"
                  [deleteApi]="productStructureHistoryApi.removeHBireEvolutionAttribute"
                  [history]="dynamicAttributesHistoric"
                  [showHistory]="true"
                  [isReadOpenMode]="isReadOpenMode"
                ></aw-dynamic-attributes>
              </div>
            </div>
          </div>
        </div>

        <div id="documents" class="grid-row">
          <div id="documentsPanel" class="grid-cell--12">
            <div class="grid-cell grid-cell--container">
              <div class="grid-cell-header">
                <div class="grid-cell-title-container">
                  <h3 id="bireDocumentDisplayedTitle" class="grid-cell-title">
                    {{ "global.documents" | translate }} ({{
                      bireDocumentDisplayed ? bireDocumentDisplayed.length : 0
                    }})
                  </h3>
                </div>
              </div>

              <div class="grid-cell-content">
                <p-table
                  id="bireDocumentDisplayed"
                  [resizableColumns]="true"
                  #ptableDocuments
                  class="aw-table2"
                  [columns]="documentsTableCols"
                  [value]="bireDocumentDisplayed"
                  [(selection)]="selectedDocuments"
                  dataKey="docName"
                  [scrollable]="true"
                >
                  <ng-template pTemplate="caption">
                    <div class="aw-table-header" [ngClass]="{ 'rows-selected': selectedDocuments.length > 0 }">
                      <div class="aw-table-global-filter">
                        <label class="aw-table-global-filter-label">
                          <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                        </label>

                        <input
                          #ptableDocumentsGlobalFilter
                          class="aw-table-global-filter-input"
                          type="text"
                          placeholder="{{ 'table.globalFilterText' | translate }}"
                          (input)="ptableDocuments.filterGlobal($event.target.value, 'contains')"
                        />
                      </div>

                      <div class="aw-table-actions">
                        <button
                          id="downloadBireDocumentDisplayed"
                          *ngIf="selectedDocuments.length > 0"
                          type="button"
                          mat-raised-button
                          (click)="downloadFiles()"
                        >
                          {{ "global.download" | translate }}
                        </button>

                        <button
                          id="deleteBireDocumentDisplayed"
                          *ngIf="!isReadOpenMode && selectedDocuments.length > 0"
                          type="button"
                          color="warn"
                          mat-raised-button
                          (click)="deleteSelectedDocuments()"
                        >
                          {{ "global.delete" | translate }}
                        </button>

                        <button
                          id="editBireDocumentDisplayed"
                          *ngIf="!isReadOpenMode && selectedDocuments.length === 1"
                          type="button"
                          mat-raised-button
                          (click)="editDocument()"
                        >
                          {{ "global.edit" | translate }}
                        </button>

                        <button
                          id="openBireDocumentDisplayed"
                          *ngIf="!isReadOpenMode && selectedDocuments.length === 1"
                          type="button"
                          mat-raised-button
                          (click)="openDocument()"
                        >
                          {{ "global.open" | translate }}
                        </button>

                        <button
                          id="addBireDocumentDisplayed"
                          *ngIf="!isReadOpenMode && selectedDocuments.length == 0"
                          type="button"
                          mat-raised-button
                          (click)="addDocuments()"
                        >
                          {{ "global.add" | translate }}
                        </button>
                      </div>
                    </div>
                  </ng-template>

                  <ng-template pTemplate="colgroup" let-columns>
                    <colgroup>
                      <col class="aw-table-checkbox-wrapper" />
                      <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                    </colgroup>
                  </ng-template>

                  <ng-template pTemplate="header" let-columns>
                    <tr>
                      <th class="aw-table-checkbox-wrapper">
                        <p-tableHeaderCheckbox class="aw-table-checkbox"></p-tableHeaderCheckbox>
                      </th>

                      <th pResizableColumn *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }">
                        {{ componentData.componentId + "." + col.field | translate }}
                      </th>
                    </tr>
                  </ng-template>

                  <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                    <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                      <td class="aw-table-checkbox-wrapper">
                        <p-tableCheckbox class="aw-table-checkbox" [value]="rowData"></p-tableCheckbox>
                      </td>

                      <td *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }">
                        <span> {{ rowData[col.field] }} </span>
                      </td>
                    </tr>
                  </ng-template>
                </p-table>
              </div>
            </div>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>

  <aw-sbad-popup-form
    *ngIf="showSbadDialog"
    [(display)]="showSbadDialog"
    [component-data]="dataSb"
    [isReadOnlyForm]="isReadOnlySbadDialog"
    (onCreate)="addNewSbad($event)"
    (onUpdate)="updateSbad($event)"
    [isNewSbad]="isNewSbad"
  ></aw-sbad-popup-form>

  <aw-modifications-popup-form
    *ngIf="showModificationDialog"
    [(display)]="showModificationDialog"
    [component-data]="dataModif"
    [isReadOnlyForm]="isReadOnlyModificationDialog"
    (onCreate)="addNewModification($event)"
    (onUpdate)="updateModification($event)"
    [isNewModification]="isNewModification"
  ></aw-modifications-popup-form>

  <aw-applicabilities-popup-form
    *ngIf="showApplicabilitiesDialog"
    [(display)]="showApplicabilitiesDialog"
    [component-data]="dataAppli"
    [isReadOnlyForm]="isReadOnlyApplicabilityDialog"
    (onCreate)="addNewApplicability($event)"
    (onUpdate)="updateApplicability($event)"
    [isNewApplicability]="isNewApplicability"
  ></aw-applicabilities-popup-form>

  <aw-assets-popup-form
    *ngIf="showAssetDialog"
    [(display)]="showAssetDialog"
    [component-data]="dataAssets"
    [isReadOnlyForm]="isReadOnlyAssetDialog"
    (onCreate)="addNewAsset($event)"
    (onUpdate)="updateConcernedAsset($event)"
    [isNewAsset]="isNewAsset"
  ></aw-assets-popup-form>

  <aw-interdependences-popup-form
    *ngIf="showInterdependanceDialog"
    [(display)]="showInterdependanceDialog"
    [component-data]="dataInterdep"
    [isReadOnlyForm]="isReadOnlyInterdependenceDialog"
    (onCreate)="addNewInterdependence($event)"
    (onUpdate)="updateInterdependence($event)"
    [isNewInterdependence]="isNewInterdependence"
  ></aw-interdependences-popup-form>

  <aw-impacts-evol-popup-form
    *ngIf="showEvolDialog"
    [(display)]="showEvolDialog"
    [component-data]="dataImpactsEvol"
    [isReadOnlyForm]="isReadOnlyImpactEvolDialog"
    (onCreate)="addNewImpactEvol($event)"
    (onUpdate)="updateImpactEvol($event)"
    [isNewImpactsEvol]="isNewImpactEvol"
  ></aw-impacts-evol-popup-form>

  <aw-impacts-popup-form
    *ngIf="showImpactDialog"
    [(display)]="showImpactDialog"
    [component-data]="dataImpacts"
    [isReadOnlyForm]="isReadOnlyImpactDialog"
    (onCreate)="addNewImpact($event)"
    (onUpdate)="updateImpact($event)"
    [isNewImpacts]="isNewImpact"
  ></aw-impacts-popup-form>

  <aw-impacts-item-popup-form
    *ngIf="showItemDialog"
    [(display)]="showItemDialog"
    [component-data]="dataImpactsItem"
    [isReadOnlyForm]="isReadOnlyImpactItemDialog"
    (onCreate)="addNewImpactItem($event)"
    (onUpdate)="updateImpactItem($event)"
    [isNewImpactsItem]="isNewImpactItem"
  ></aw-impacts-item-popup-form>

  <aw-evol-import-popup
    *ngIf="showDocumentDialog"
    [document]="currentDocument"
    [(display)]="showDocumentDialog"
    [isReadOnlyForm]="isReadOnlyDocumentDialog"
    (onValidated)="updateDocument($event)"
  ></aw-evol-import-popup>

  <aw-dialog-status
    *ngIf="displayStatusPopupSb"
    [isObjectTypeOfBireSbDTO]="true"
    [item]="bireSb"
    [itemId]="bireSbId"
    [(display)]="displayStatusPopupSb"
  ></aw-dialog-status>

  <aw-dialog-status
    *ngIf="displayStatusPopupModif"
    [item]="bireModif"
    [itemId]="bireModifId"
    [(display)]="displayStatusPopupModif"
  ></aw-dialog-status>

  <aw-dialog-status
    *ngIf="displayStatusPopupAppli"
    [item]="bireAppli"
    [itemId]="bireAppliId"
    [(display)]="displayStatusPopupAppli"
  ></aw-dialog-status>

  <aw-dialog-status
    *ngIf="displayStatusPopupInterdep"
    [item]="bireInterdep"
    [itemId]="bireInterdepId"
    [(display)]="displayStatusPopupInterdep"
  ></aw-dialog-status>

  <aw-dialog-status
    *ngIf="displayStatusPopupImpact"
    [item]="bireImpact"
    [itemId]="bireImpactId"
    [(display)]="displayStatusPopupImpact"
  ></aw-dialog-status>

  <aw-dialog-status
    *ngIf="displayStatusPopupImpactEvol"
    [item]="bireImpactEvol"
    [itemId]="bireImpactEvolId"
    [(display)]="displayStatusPopupImpactEvol"
  ></aw-dialog-status>

  <aw-dialog-status
    *ngIf="displayStatusPopupImpactItem"
    [item]="bireImpactItem"
    [itemId]="bireImpactItemId"
    [(display)]="displayStatusPopupImpactItem"
  ></aw-dialog-status>

  <aw-status-update-history
    *ngIf="showStatusUpdatesPopup"
    [isObjectTypeOfBireEvolutionDTO]="true"
    [object]="evolution"
    [data]="tableStatusUpdatesData"
    [deleteApi]="deleteApi"
    [(display)]="showStatusUpdatesPopup"
    [keyMap]="updatesKeyMap"
  ></aw-status-update-history>
</div>
