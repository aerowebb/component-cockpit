<a-modal class="aw-modal" [(visible)]="display">
  <a-header>
    <div class="modal-title">{{ getComponentName() + ".titlePopup" | translate }}</div>
  </a-header>

  <a-content>
    <div class="column">
      <div class="form-group" [ngClass]="{ required: !isReadOnlyForm }">
        <label class="form-label">{{ getComponentName() + ".item" | translate }}</label>

        <div class="form-control form-control-with-modal" [ngClass]="{ disabled: isReadOnlyForm || !isEditable }">
          <div class="form-control-data" (click)="searchItems()">
            {{ newEvol.chapter }} <span *ngIf="newEvol.section">- {{ newEvol.section }}</span>
            <span *ngIf="newEvol.subject">- {{ newEvol.subject }}</span>
            <span *ngIf="newEvol.sheet">- {{ newEvol.sheet }}</span>
            <span *ngIf="newEvol.marks">- {{ newEvol.marks }}</span>
          </div>

          <div
            *ngIf="
              newEvol.chapter && newEvol.section && newEvol.subject && newEvol.sheet && newEvol.marks && !isReadOnlyForm
            "
            class="btn-clear-wrapper"
          >
            <i
              class="ui-dropdown-clear-icon pi pi-times aw-icon btn-clear"
              aria-hidden="true"
              (click)="
                newEvol.chapter = undefined;
                newEvol.section = undefined;
                newEvol.subject = undefined;
                newEvol.sheet = undefined;
                newEvol.marks = undefined
              "
            ></i>
          </div>
          <div class="btn-search-wrapper" *ngIf="!isReadOnlyForm">
            <i class="fa fa-fw fa-search aw-icon btn-search" aria-hidden="true" (click)="searchItems()"></i>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">{{ getComponentName() + ".itemNumber" | translate }}</label>

        <div class="form-control">
          <input type="text" class="aw-input" [disabled]="isReadOnlyForm" [(ngModel)]="itemNumber" />
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">{{ getComponentName() + ".group" | translate }}</label>

        <div class="form-control">
          <p-dropdown
            class="aw-dropdown fixed-width"
            [showClear]="true"
            appendTo="body"
            placeholder="&nbsp;"
            [options]="group"
            [disabled]="isReadOnlyForm"
            [(ngModel)]="newEvol.inGroup"
          ></p-dropdown>
        </div>
      </div>

      <div class="form-group" [ngClass]="{ required: !isReadOnlyForm }">
        <label class="form-label">{{ getComponentName() + ".actionType" | translate }}</label>

        <div class="form-control">
          <p-dropdown
            class="aw-dropdown fixed-width"
            [showClear]="true"
            appendTo="body"
            [disabled]="isReadOnlyForm"
            [options]="actionType"
            [(ngModel)]="newEvol.actionTypeCode"
          ></p-dropdown>
        </div>
      </div>
    </div>
  </a-content>

  <a-footer>
    <button *ngIf="isReadOnlyForm" type="button" mat-raised-button (click)="onHide()">
      <span>{{ "global.close" | translate }}</span>
    </button>

    <button *ngIf="!isReadOnlyForm" type="button" mat-raised-button (click)="onHide()">
      <span>{{ "global.cancel" | translate }}</span>
    </button>

    <button
      *ngIf="!isReadOnlyForm"
      type="button"
      mat-raised-button
      color="primary"
      (click)="onValidate()"
      [disabled]="
        newEvol.chapter === undefined ||
        newEvol.chapter === null ||
        newEvol.section === undefined ||
        newEvol.section === null ||
        newEvol.sheet === undefined ||
        newEvol.sheet === null ||
        newEvol.subject === undefined ||
        newEvol.subject === null ||
        newEvol.marks === undefined ||
        newEvol.marks === null ||
        newEvol.actionTypeCode === undefined ||
        newEvol.actionTypeCode === null
      "
    >
      {{ "global.validate" | translate }}
    </button>
  </a-footer>
</a-modal>

<aw-dialog-search-item
  *ngIf="showItemsDialog"
  [(display)]="showItemsDialog"
  (onValidated)="setSelectedItems($event)"
></aw-dialog-search-item>
