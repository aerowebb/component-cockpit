<div class="page-header">
  <div class="page-info">
    <div>
      <div class="page-title">
        {{ "transaction." + componentData.componentId | translate }}
      </div>

      <div class="page-subtitle">
        <div *ngIf="!isCreateOpenMode && componentData && componentData.objectId" class="page-subtitle">
          - {{ serializationService.deserialize(componentData.objectId)["missionCode"] }}
        </div>
      </div>
    </div>
  </div>

  <div class="page-actions">
    <button *ngIf="isReadOpenMode && hasUpdateAccessRight" type="button" mat-raised-button (click)="editMissionFrom()">
      {{ "global.edit" | translate }}
    </button>

    <button
      *ngIf="!isReadOpenMode && !isCreateOpenMode"
      color="warn"
      type="button"
      mat-raised-button
      (click)="cancelMissionFrom()"
    >
      {{ "global.cancel" | translate }}
    </button>

    <button
      *ngIf="!isReadOpenMode"
      class="btn-with-spinner"
      color="primary"
      type="button"
      mat-raised-button
      (click)="saveMissionFrom()"
    >
      <span class="lds-hourglass" *ngIf="showSaveSpinner"></span>
      {{ "global.save" | translate }}
    </button>

    <button
      id="actions"
      mat-icon-button
      class="mat-elevation-z1"
      matTooltip="{{ 'global.showAllActionTooltip' | translate }}"
      matTooltipPosition="above"
      aria-label="Show all actions"
      [matMenuTriggerFor]="actions"
    >
      <mat-icon>more_horiz</mat-icon>
    </button>

    <mat-menu #actions="matMenu">
      <button *ngIf="isReadOpenMode && !isCreateOpenMode" type="button" mat-menu-item (click)="reloadMissionFrom()">
        {{ "global.refresh" | translate }}
      </button>

      <button id="updates" mat-menu-item (click)="openStatusUpdatesPopup()">
        {{ "global.updates" | translate }}
      </button>

      <button id="favorites" mat-menu-item (click)="updateFavoriteState()">
        {{ (isFavoriteEntry ? "page.removeFromFavorites" : "page.addToFavorites") | translate }}
      </button>
    </mat-menu>
  </div>
</div>

<div class="page-wrapper">
  <div class="page-container search-page-container">
    <div class="page-content">
      <mat-tab-group animationDuration="0ms" dynamicHeight>
        <!-- Home -->
        <mat-tab id="homeTab">
          <ng-template mat-tab-label>
            {{ "home" | translate }}
          </ng-template>
          <div class="grid-row">
            <div class="grid-cell--12">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">{{ "page.mainData" | translate }}</h3>
                  </div>
                </div>
                <div class="grid-cell-content">
                  <div class="column">
                    <div class="row">
                      <div class="form-group" [ngClass]="{ required: !isReadOpenMode }">
                        <label class="form-label"> {{ componentData.componentId + ".code" | translate }} </label>

                        <div class="form-control">
                          <input
                            type="text"
                            class="aw-input"
                            maxlength="50"
                            [(ngModel)]="missionFieldData.missionCode"
                            [disabled]="isReadOpenMode || !isCreateOpenMode"
                          />
                        </div>
                      </div>

                      <div class="form-group" [ngClass]="{ required: !isReadOpenMode }">
                        <label class="form-label"> {{ componentData.componentId + ".type" | translate }} </label>

                        <div class="form-control">
                          <p-dropdown
                            appendTo="body"
                            class="aw-dropdown fixed-width"
                            [options]="missionTypeList"
                            [(ngModel)]="missionFieldData.missionType"
                            [showClear]="true"
                            placeholder="&nbsp;"
                            [disabled]="isReadOpenMode"
                          ></p-dropdown>
                        </div>
                      </div>

                      <div class="form-group">
                        <label class="form-label">{{ componentData.componentId + ".number" | translate }} </label>

                        <div class="form-control">
                          <input
                            type="text"
                            class="aw-input"
                            [(ngModel)]="missionFieldData.missionNumber"
                            [disabled]="isReadOpenMode"
                          />
                        </div>
                      </div>
                      <div id="operatorCode" class="form-group">
                        <label class="form-label">
                          {{ getComponentName() + ".operator" | translate }}
                        </label>

                        <div class="form-control">
                          <p-dropdown
                            class="aw-dropdown fixed-width"
                            [options]="flightCustomerList"
                            [(ngModel)]="missionFieldData.customerOperatorCode"
                            [disabled]="isReadOpenMode"
                            [showClear]="true"
                            placeholder="&nbsp;"
                          ></p-dropdown>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="form-group flex--2">
                        <label class="form-label">
                          {{ componentData.componentId + ".missionDescription" | translate }}
                        </label>

                        <div class="form-control">
                          <textarea
                            class="aw-textarea"
                            [rows]="3"
                            pInputTextarea
                            [(ngModel)]="missionFieldData.missionDescription"
                            maxlength="300"
                            [disabled]="isReadOpenMode"
                          ></textarea>
                        </div>
                      </div>

                      <div class="form-group flex--2">
                        <label class="form-label">
                          {{ componentData.componentId + ".missionDetails" | translate }}
                        </label>

                        <div class="form-control">
                          <textarea
                            class="aw-textarea"
                            [rows]="3"
                            pInputTextarea
                            [(ngModel)]="missionFieldData.missionDetails"
                            maxlength="300"
                            [disabled]="isReadOpenMode"
                          ></textarea>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="grid-row">
            <div class="grid-cell--5">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">{{ componentData.componentId + ".locations" | translate }}</h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <div class="section section-locations">
                    <div class="section-content">
                      <div class="row">
                        <div class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".departure" | translate }}
                          </label>

                          <div class="form-control">
                            <p-dropdown
                              appendTo="body"
                              class="aw-dropdown fixed-width"
                              [options]="flightLocationList"
                              [(ngModel)]="missionFieldData.departureLocation"
                              [showClear]="true"
                              placeholder="&nbsp;"
                              [disabled]="isReadOpenMode"
                            ></p-dropdown>
                          </div>
                        </div>

                        <div class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".arrival" | translate }}
                          </label>

                          <div class="form-control">
                            <p-dropdown
                              appendTo="body"
                              class="aw-dropdown fixed-width"
                              [options]="flightLocationList"
                              [(ngModel)]="missionFieldData.arrivalLocation"
                              [showClear]="true"
                              placeholder="&nbsp;"
                              [disabled]="isReadOpenMode"
                            ></p-dropdown>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="form-group flex--2 section-locations">
                          <label class="form-label"> {{ componentData.componentId + ".timeZone" | translate }} </label>

                          <div class="form-control">
                            <p-dropdown
                              appendTo="body"
                              class="aw-dropdown fixed-width"
                              [options]="timeZoneList"
                              [(ngModel)]="selectedTimeZone"
                              [showClear]="true"
                              placeholder="&nbsp;"
                              [disabled]="isReadOpenMode"
                              (onChange)="updateMissionDates()"
                            ></p-dropdown>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="grid-cell--7">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">{{ componentData.componentId + ".schedule" | translate }}</h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <div class="section">
                    <div class="section-content">
                      <div class="row">
                        <div class="form-group">
                          <label class="form-label"> {{ componentData.componentId + ".startDate" | translate }} </label>

                          <div class="form-control">
                            <p-calendar
                              showButtonBar="true"
                              [monthNavigator]="true"
                              [yearNavigator]="true"
                              [yearRange]="sessionService.calendarYearRange"
                              showTime="true"
                              class="aw-calendar"
                              [dateFormat]="sessionService.dateFormatPrimeNG"
                              [locale]="sessionService.calendarFormat"
                              [(ngModel)]="missionFieldData.startDate"
                              [disabled]="isReadOpenMode"
                              (onSelect)="onSelectMissionDate()"
                              (onInput)="onSelectMissionDate()"
                              appendTo="body"
                            ></p-calendar>
                          </div>
                        </div>

                        <div class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".missionDuration" | translate }}
                          </label>

                          <div class="form-control">
                            <input
                              #missionDuration="ngModel"
                              type="text"
                              class="aw-input"
                              [(ngModel)]="missionFieldData.missionDuration"
                              pInputText
                              [pKeyFilter]="inputValidationService.validatorOfNumber()"
                              [pValidateOnly]="true"
                              maxlength="10"
                              (keypress)="maxLengthCheck($event, missionFieldData.missionDuration)"
                              [disabled]="isReadOpenMode"
                            />
                            <p-message
                              *ngIf="missionDuration.invalid && (missionDuration.dirty || missionDuration.touched)"
                              severity="error"
                              [text]="inputValidationService.formatOfNumber()"
                            ></p-message>
                          </div>
                        </div>

                        <div class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".periodicity" | translate }}
                          </label>

                          <div class="form-control">
                            <p-dropdown
                              appendTo="body"
                              class="aw-dropdown fixed-width"
                              [options]="periodicityList"
                              [(ngModel)]="missionFieldData.periodicityType"
                              [showClear]="true"
                              placeholder="&nbsp;"
                              [disabled]="isReadOpenMode"
                            ></p-dropdown>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="form-group">
                          <label class="form-label"> {{ componentData.componentId + ".endDate" | translate }} </label>

                          <div class="form-control">
                            <p-calendar
                              showButtonBar="true"
                              [monthNavigator]="true"
                              [yearNavigator]="true"
                              [yearRange]="sessionService.calendarYearRange"
                              showTime="true"
                              class="aw-calendar"
                              [dateFormat]="sessionService.dateFormatPrimeNG"
                              [locale]="sessionService.calendarFormat"
                              [(ngModel)]="missionFieldData.endDate"
                              [disabled]="isReadOpenMode"
                              (onSelect)="onSelectMissionDate()"
                              (onInput)="onSelectMissionDate()"
                              appendTo="body"
                            ></p-calendar>
                          </div>
                        </div>

                        <div class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".cycleNumber" | translate }}
                          </label>

                          <div class="form-control">
                            <input
                              #cycleNumber="ngModel"
                              type="text"
                              class="aw-input"
                              [(ngModel)]="missionFieldData.cycleNumber"
                              pInputText
                              [pKeyFilter]="inputValidationService.validatorOfNumber()"
                              [pValidateOnly]="true"
                              maxlength="10"
                              (keypress)="maxLengthCheck($event, missionFieldData.cycleNumber)"
                              [disabled]="isReadOpenMode"
                            />
                            <p-message
                              *ngIf="cycleNumber.invalid && (cycleNumber.dirty || cycleNumber.touched)"
                              severity="error"
                              [text]="inputValidationService.formatOfNumber()"
                            ></p-message>
                          </div>
                        </div>

                        <div class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".periodicityLimitDate" | translate }}
                          </label>

                          <div class="form-control">
                            <p-calendar
                              showButtonBar="true"
                              [monthNavigator]="true"
                              [yearNavigator]="true"
                              [yearRange]="sessionService.calendarYearRange"
                              class="aw-calendar"
                              [dateFormat]="sessionService.dateFormatPrimeNG"
                              [locale]="sessionService.calendarFormat"
                              [(ngModel)]="missionFieldData.periodicityLimitDate"
                              [disabled]="isReadOpenMode"
                              appendTo="body"
                            ></p-calendar>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="grid-row">
            <div class="grid-cell--5">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">{{ componentData.componentId + ".operation" | translate }}</h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <div class="section">
                    <div class="section-content">
                      <div class="row">
                        <div class="form-group">
                          <label class="form-label"> {{ componentData.componentId + ".operation" | translate }} </label>

                          <div class="form-control">
                            <p-dropdown
                              appendTo="body"
                              class="aw-dropdown fixed-width"
                              [options]="operationCode"
                              [(ngModel)]="missionFieldData.operationCode"
                              [disabled]="isReadOpenMode"
                              [showClear]="true"
                              placeholder="&nbsp;"
                            ></p-dropdown>
                          </div>
                        </div>

                        <div class="form-group">
                          <label class="form-label">{{
                            componentData.componentId + ".operationalMissionCode" | translate
                          }}</label>

                          <div class="form-control">
                            <p-dropdown
                              appendTo="body"
                              class="aw-dropdown fixed-width"
                              [options]="operationalMissionList"
                              [(ngModel)]="missionFieldData.operationalMissionCode"
                              [showClear]="true"
                              placeholder="&nbsp;"
                              [disabled]="isReadOpenMode"
                            ></p-dropdown>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="grid-cell--7">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">{{ componentData.componentId + ".conditions" | translate }}</h3>
                  </div>
                </div>

                <div class="grid-cell-content grid-cell-content-with-section">
                  <div class="section">
                    <div class="section-content">
                      <div class="row">
                        <div class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".environment" | translate }}
                          </label>

                          <div class="form-control">
                            <textarea
                              class="aw-textarea"
                              [rows]="3"
                              pInputTextarea
                              maxlength="300"
                              [(ngModel)]="missionFieldData.environment"
                              [disabled]="isReadOpenMode"
                            ></textarea>
                          </div>
                        </div>

                        <div class="form-group">
                          <label class="form-label">
                            {{ componentData.componentId + ".missionComment" | translate }}
                          </label>

                          <div class="form-control">
                            <textarea
                              class="aw-textarea"
                              [rows]="3"
                              pInputTextarea
                              maxlength="300"
                              [(ngModel)]="missionFieldData.missionComment"
                              [disabled]="isReadOpenMode"
                            ></textarea>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>
        <mat-tab id="flightsTab">
          <ng-template mat-tab-label>
            {{ "global.flights" | translate }}
          </ng-template>
          <div class="grid-row" *ngIf="!isCreateOpenMode">
            <div class="grid-cell--12">
              <div class="grid-cell grid-cell--container">
                <div class="grid-cell-header">
                  <div class="grid-cell-title-container">
                    <h3 class="grid-cell-title">
                      {{ "global.flights" | translate }} ({{ flightTabTableCols ? flightTableData.length : 0 }})
                    </h3>
                  </div>
                </div>

                <div class="grid-cell-content">
                  <p-table
                    [resizableColumns]="true"
                    #ptableFlight
                    class="aw-table2"
                    [columns]="flightTabTableCols"
                    [value]="flightTableData"
                    [(selection)]="selectedFlights"
                    dataKey="chronoNumber"
                    [scrollable]="true"
                  >
                    <ng-template pTemplate="emptymessage">
                      <span *ngIf="!isLoading"> &nbsp;</span>

                      <div *ngIf="isLoading" class="aw-table-loading-indicator">
                        <div class="loading-message">{{ "table.loadingData" | translate }}</div>
                        <div class="lds-hourglass"></div>
                      </div>
                    </ng-template>

                    <ng-template pTemplate="caption">
                      <div class="aw-table-header" [ngClass]="{ 'rows-selected': selectedFlights.length > 0 }">
                        <div class="aw-table-global-filter">
                          <label class="aw-table-global-filter-label">
                            <i class="fa fa-fw fa-search" aria-hidden="true"></i>
                          </label>

                          <input
                            #ptableFlightGlobalFilter
                            class="aw-table-global-filter-input"
                            type="text"
                            placeholder="{{ 'table.globalFilterText' | translate }}"
                            (input)="ptableFlight.filterGlobal($event.target.value, 'contains')"
                          />
                        </div>

                        <div class="aw-table-actions">
                          <button
                            *ngIf="!isReadOpenMode && selectedFlights.length > 0"
                            type="button"
                            mat-raised-button
                            color="warn"
                            (click)="deleteFlights()"
                          >
                            <span>{{ "global.delete" | translate }}</span>
                          </button>

                          <button
                            *ngIf="!isReadOpenMode && selectedFlights.length === 1 && isFlightEditable()"
                            type="button"
                            mat-raised-button
                            (click)="editFlights()"
                          >
                            <span>{{ "global.edit" | translate }}</span>
                          </button>

                          <button
                            *ngIf="!isReadOpenMode && selectedFlights.length === 0"
                            type="button"
                            mat-raised-button
                            (click)="createFlightData()"
                          >
                            <span>{{ "global.add" | translate }}</span>
                          </button>

                          <button
                            *ngIf="selectedFlights.length > 0"
                            type="button"
                            mat-raised-button
                            (click)="openFlightForm(selectedFlights)"
                          >
                            <span>{{ "global.open" | translate }}</span>
                          </button>
                        </div>
                      </div>
                    </ng-template>

                    <ng-template pTemplate="colgroup" let-columns>
                      <colgroup>
                        <col class="aw-table-checkbox-wrapper" />
                        <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
                        <col class="row-expand-wrapper" />
                        <col class="row-action-wrapper" />
                      </colgroup>
                    </ng-template>

                    <ng-template pTemplate="header" let-columns>
                      <tr>
                        <th class="aw-table-checkbox-wrapper">
                          <p-tableHeaderCheckbox class="aw-table-checkbox"></p-tableHeaderCheckbox>
                        </th>

                        <th
                          pResizableColumn
                          *ngFor="let col of columns"
                          [ngStyle]="{ 'text-align': col.alignment, width: col.width }"
                        >
                          {{ componentData.componentId + "." + col.field | translate }}
                        </th>
                        <th class="row-expand-wrapper"></th>
                        <th class="row-action-wrapper"></th>
                      </tr>
                    </ng-template>

                    <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                      <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                        <td class="aw-table-checkbox-wrapper">
                          <p-tableCheckbox class="aw-table-checkbox" [value]="rowData"></p-tableCheckbox>
                        </td>

                        <td
                          *ngFor="let col of columns"
                          [ngSwitch]="col.field"
                          [ngStyle]="{ 'text-align': col.alignment, width: col.width }"
                        >
                          <span *ngSwitchCase="'startDate'"> {{ rowData[col.field] | date: "yyyy/MM/dd HH:mm" }} </span>
                          <span *ngSwitchCase="'endDate'"> {{ rowData[col.field] | date: "yyyy/MM/dd HH:mm" }} </span>
                          <a *ngSwitchCase="'chronoNumber'" (click)="openFlightForm([rowData])">
                            {{ rowData[col.field] }}
                          </a>
                          <span *ngSwitchDefault> {{ rowData[col.field] }} </span>
                        </td>
                        <td class="row-expand-wrapper" [pRowToggler]="rowData">
                          <i
                            class="fa fa-fw aw-icon aw-icon-with-border"
                            [ngClass]="rowData._expand ? 'fa-minus' : 'fa-plus'"
                            aria-hidden="true"
                            pTooltip="{{ 'global.showTableRowDetails' | translate }}"
                            tooltipPosition="top"
                            (click)="toggleExpandCollapse(rowData)"
                          ></i>
                        </td>
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="rowexpansion" let-rowData let-columns="columns">
                      <tr class="row-expanded" *ngIf="rowData._expand">
                        <td [attr.colspan]="columns.length + 2">
                          <div class="row">
                            <div class="form-group">
                              <label class="form-label">
                                {{ getComponentName() + ".engineStartDate" | translate }}
                              </label>
                              <div class="form-control">
                                <p-calendar
                                  showButtonBar="true"
                                  [monthNavigator]="true"
                                  [yearNavigator]="true"
                                  [yearRange]="sessionService.calendarYearRange"
                                  appendTo="body"
                                  class="aw-calendar"
                                  [dateFormat]="sessionService.dateFormatPrimeNG"
                                  [locale]="sessionService.calendarFormat"
                                  [(ngModel)]="rowData.engineStartDate"
                                  [disabled]="true"
                                ></p-calendar>
                              </div>
                            </div>

                            <div class="form-group">
                              <label class="form-label">
                                {{ getComponentName() + ".engineStopDate" | translate }}
                              </label>

                              <div class="form-control">
                                <p-calendar
                                  showButtonBar="true"
                                  [monthNavigator]="true"
                                  [yearNavigator]="true"
                                  [yearRange]="sessionService.calendarYearRange"
                                  appendTo="body"
                                  class="aw-calendar"
                                  [dateFormat]="sessionService.dateFormatPrimeNG"
                                  [locale]="sessionService.calendarFormat"
                                  [(ngModel)]="rowData.engineStopDate"
                                  [disabled]="true"
                                ></p-calendar>
                              </div>
                            </div>

                            <div class="form-group">
                              <label class="form-label">
                                {{ getComponentName() + ".fuelUsed" | translate }}
                              </label>

                              <div class="form-control">
                                <input class="aw-input" type="text" [(ngModel)]="rowData.fuelUsed" [disabled]="true" />
                              </div>
                            </div>

                            <div class="form-group">
                              <label class="form-label">
                                {{ getComponentName() + ".passengers" | translate }}
                              </label>

                              <div class="form-control">
                                <input
                                  class="aw-input"
                                  type="text"
                                  [(ngModel)]="rowData.passengers"
                                  [disabled]="true"
                                />
                              </div>
                            </div>
                            <div class="form-group">
                              <label class="form-label">
                                {{ getComponentName() + ".shipment" | translate }}
                              </label>

                              <div class="form-control">
                                <input class="aw-input" type="text" [(ngModel)]="rowData.shipment" [disabled]="true" />
                              </div>
                            </div>
                            <div class="form-group">
                              <label class="form-label">
                                {{ getComponentName() + ".pilot" | translate }}
                              </label>

                              <div class="form-control">
                                <input class="aw-input" type="text" [(ngModel)]="rowData.pilot" [disabled]="true" />
                              </div>
                            </div>
                            <div class="form-group">
                              <label class="form-label">
                                {{ getComponentName() + ".copilot" | translate }}
                              </label>

                              <div class="form-control">
                                <input class="aw-input" type="text" [(ngModel)]="rowData.copilot" [disabled]="true" />
                              </div>
                            </div>
                            <div class="form-group">
                              <label class="form-label">
                                {{ getComponentName() + ".dayMission" | translate }}
                              </label>

                              <div class="form-control">
                                <i
                                  *ngIf="rowData['dayMission'] !== null && rowData['dayMission']"
                                  class="fa fa-fw fa-check"
                                  aria-hidden="true"
                                ></i>
                              </div>
                            </div>
                            <div class="form-group">
                              <label class="form-label">
                                {{ getComponentName() + ".nightMission" | translate }}
                              </label>

                              <div class="form-control">
                                <i
                                  *ngIf="rowData['nightMission'] !== null && rowData['nightMission']"
                                  class="fa fa-fw fa-check"
                                  aria-hidden="true"
                                ></i>
                              </div>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </ng-template>
                  </p-table>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>

  <aw-dialog-flights-popup
    *ngIf="showFlightDialog"
    [(display)]="showFlightDialog"
    [isReadOnlyForm]="isReadOnlyFlightDialog"
    (onAdded)="onAddOperation($event)"
  ></aw-dialog-flights-popup>

  <aw-dialog-flights-asset-popup
    *ngIf="showFlightEditDialog"
    [(display)]="showFlightEditDialog"
    [editFlightSelect]="editFlightSelect"
    [isReadOnlyForm]="isReadOnlyFlightEditDialog"
    (onAdded)="onEditOperation($event)"
  ></aw-dialog-flights-asset-popup>

  <aw-dialog-status
    *ngIf="showStatusUpdatesPopup"
    [isStatusEditable]="false"
    [item]="missionFieldData"
    [itemId]="missionFieldData.missionCode"
    [(display)]="showStatusUpdatesPopup"
  >
  </aw-dialog-status>
</div>
