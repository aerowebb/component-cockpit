<a-modal class="aw-modal" [(visible)]="display" [width]="75">
  <a-header>
    <div class="modal-title">{{ getComponentName() + ".title" | translate }}</div>
  </a-header>

  <a-content>
    <div class="section">
      <div class="section-content">
        <div class="row">
          <div class="form-group required">
            <label class="form-label">{{ getComponentName() + ".shipmentType" | translate }}</label>

            <div class="form-control">
              <p-dropdown
                appendTo="body"
                class="aw-dropdown fixed-width"
                placeholder="&nbsp;"
                [options]="dfTypes"
                [showClear]="true"
                [(ngModel)]="selectedDfType"
                (onChange)="onSelectedDfTypeChange()"
              ></p-dropdown>
            </div>
          </div>

          <div class="form-group required">
            <label class="form-label">{{ getComponentName() + ".expectedDate" | translate }}</label>

            <div class="form-control">
              <p-calendar
                appendTo="body"
                class="aw-calendar"
                showButtonBar="true"
                [dateFormat]="sessionService.dateFormatPrimeNG"
                [locale]="sessionService.calendarFormat"
                [(ngModel)]="selectedPlannedDate"
                [monthNavigator]="true"
                [yearNavigator]="true"
                [yearRange]="sessionService.calendarYearRange"
              ></p-calendar>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section">
      <h4 class="section-title">{{ getComponentName() + ".sender" | translate }}</h4>

      <div class="section-content">
        <div class="row">
          <div class="form-group required">
            <label class="form-label">{{ getComponentName() + ".site" | translate }}</label>

            <div class="form-control">
              <p-dropdown
                appendTo="body"
                class="aw-dropdown fixed-width"
                placeholder="&nbsp;"
                [options]="sites"
                [showClear]="true"
                [(ngModel)]="selectedShipperSite"
                (onChange)="onChangeShipperSite()"
              ></p-dropdown>
            </div>
          </div>

          <div class="form-group flex--2" style="height: 47px;">
            <label class="form-label">
              {{ selectedShipperWarehouseCategory | formatSelectOption: warehouseCategories }}
            </label>

            <div class="form-control aw-selectbutton-wrapper aw-selectbutton-with-dropdown">
              <p-selectButton
                [options]="warehouseCategories"
                [(ngModel)]="selectedShipperWarehouseCategory"
                (onChange)="onChangeShipperWarehouseCategory()"
              ></p-selectButton>

              <p-dropdown
                appendTo="body"
                class="aw-dropdown"
                placeholder="&nbsp;"
                [options]="shipperWarehouses"
                [showClear]="true"
                [(ngModel)]="selectedShipperWarehouse"
              ></p-dropdown>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section">
      <h4 class="section-title">{{ getComponentName() + ".recipient" | translate }}</h4>

      <div class="section-content">
        <div class="row" *ngIf="!showPartnerDropdown">
          <div class="form-group required">
            <label class="form-label">{{ getComponentName() + ".site" | translate }}</label>

            <div class="form-control">
              <p-dropdown
                appendTo="body"
                class="aw-dropdown fixed-width"
                placeholder="&nbsp;"
                [options]="sites"
                [showClear]="true"
                [(ngModel)]="selectedRecipientSite"
                (onChange)="onChangeRecipientSite()"
              ></p-dropdown>
            </div>
          </div>

          <div class="form-group flex--2" style="height: 47px;">
            <label class="form-label">
              {{ selectedRecipientWarehouseCategory | formatSelectOption: warehouseCategories }}
            </label>

            <div class="form-control aw-selectbutton-wrapper aw-selectbutton-with-dropdown">
              <p-selectButton
                [options]="warehouseCategories"
                [(ngModel)]="selectedRecipientWarehouseCategory"
                (onChange)="onChangeRecipientWarehouseCategory()"
              ></p-selectButton>

              <p-dropdown
                appendTo="body"
                class="aw-dropdown"
                placeholder="&nbsp;"
                [options]="recipientWarehouses"
                [showClear]="true"
                [(ngModel)]="selectedRecipientWarehouse"
              ></p-dropdown>
            </div>
          </div>
        </div>
        <div class="row" *ngIf="showPartnerDropdown">
          <div class="form-group required">
            <label class="form-label">{{ getComponentName() + ".partner" | translate }}</label>

            <div class="form-control">
              <p-dropdown
                appendTo="body"
                class="aw-dropdown fixed-width"
                placeholder="&nbsp;"
                [options]="businessPartnerList"
                [showClear]="true"
                [(ngModel)]="bidoCustomerReceiver"
              ></p-dropdown>
            </div>
          </div>
          <div class="form-group"></div>
          <div class="form-group"></div>
        </div>
      </div>
    </div>
    <div class="section">
      <h4 class="section-title">{{ getComponentName() + ".package" | translate }}</h4>
      <div class="section-content">
        <div class="column">
          <div class="row">
            <div class="form-group">
              <div class="form-control aw-selectbutton-wrapper">
                <p-selectButton
                  [(ngModel)]="selectedChoiceNewPackage"
                  [options]="newPackageList"
                  (onChange)="resetChoicePackage()"
                ></p-selectButton>
              </div>
            </div>
          </div>
          <div class="row" *ngIf="selectedChoiceNewPackage === component.NEW_PACKAGE">
            <div class="form-group">
              <div class="form-control aw-selectbutton-wrapper">
                <p-selectButton
                  [(ngModel)]="selectedChoice"
                  [options]="choiceList"
                  (onChange)="resetChoice()"
                ></p-selectButton>
              </div>
            </div>

            <div
              class="form-group required"
              *ngIf="selectedChoice === component.ENTER && selectedChoiceNewPackage === component.NEW_PACKAGE"
            >
              <label class="form-label">{{ getComponentName() + ".packageNumber" | translate }}</label>

              <div class="form-control">
                <input type="text" class="aw-input" [(ngModel)]="externalPackageCode" />
              </div>
            </div>
          </div>
          <div class="section" *ngIf="selectedChoiceNewPackage === component.NEW_PACKAGE">
            <div class="row">
              <div class="form-group required">
                <label class="form-label">{{ getComponentName() + ".packageType" | translate }}</label>

                <div class="form-control">
                  <p-dropdown
                    class="aw-dropdown fixed-width"
                    [showClear]="true"
                    placeholder="&nbsp;"
                    [(ngModel)]="selectedPackageType"
                    [options]="packagesTypesList"
                    (onChange)="packageTypeChange()"
                    appendTo="body"
                  ></p-dropdown>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="form-group">
                <label class="form-label">
                  {{ getComponentName() + ".weight" | translate }}
                </label>

                <div class="form-control">
                  <input type="number" class="aw-input" [(ngModel)]="packageInput.weight" />
                </div>
              </div>
              <div class="form-group">
                <label class="form-label">
                  {{ getComponentName() + ".unit" | translate }}
                </label>

                <div class="form-control">
                  <p-dropdown
                    class="aw-dropdown fixed-width"
                    [showClear]="true"
                    placeholder="&nbsp;"
                    [(ngModel)]="packageInput.weightUnit"
                    [options]="unitWeightList"
                    appendTo="body"
                  ></p-dropdown>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="form-group">
                <label class="form-label">
                  {{ getComponentName() + ".length" | translate }}
                </label>

                <div class="form-control">
                  <input type="number" class="aw-input" [disabled]="disableLength" [(ngModel)]="packageInput.length" />
                </div>
              </div>
              <div class="form-group">
                <label class="form-label">
                  {{ getComponentName() + ".unit" | translate }}
                </label>

                <div class="form-control">
                  <p-dropdown
                    class="aw-dropdown fixed-width"
                    [showClear]="true"
                    placeholder="&nbsp;"
                    [(ngModel)]="packageInput.lengthUnit"
                    [options]="unitLengthList"
                    [disabled]="disableLength"
                    appendTo="body"
                  ></p-dropdown>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="form-group">
                <label class="form-label">
                  {{ getComponentName() + ".width" | translate }}
                </label>

                <div class="form-control">
                  <input type="number" class="aw-input" [disabled]="disableWidth" [(ngModel)]="packageInput.width" />
                </div>
              </div>
              <div class="form-group">
                <label class="form-label">
                  {{ getComponentName() + ".unit" | translate }}
                </label>

                <div class="form-control">
                  <p-dropdown
                    class="aw-dropdown fixed-width"
                    [showClear]="true"
                    placeholder="&nbsp;"
                    [(ngModel)]="packageInput.widthUnit"
                    [options]="unitLengthList"
                    [disabled]="disableWidth"
                    appendTo="body"
                  ></p-dropdown>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="form-group">
                <label class="form-label">
                  {{ getComponentName() + ".height" | translate }}
                </label>

                <div class="form-control">
                  <input type="number" class="aw-input" [disabled]="disableHeight" [(ngModel)]="packageInput.height" />
                </div>
              </div>
              <div class="form-group">
                <label class="form-label">
                  {{ getComponentName() + ".unit" | translate }}
                </label>

                <div class="form-control">
                  <p-dropdown
                    class="aw-dropdown fixed-width"
                    [showClear]="true"
                    placeholder="&nbsp;"
                    [(ngModel)]="packageInput.heightUnit"
                    [options]="unitLengthList"
                    [disabled]="disableHeight"
                    appendTo="body"
                  ></p-dropdown>
                </div>
              </div>
            </div>
            <div class="section-content" *ngIf="calculateVolume() && showVolume()">
              <div class="row">
                <div class="form-group">
                  <h3>
                    <span class="bold italic">
                      {{ getComponentName() + ".volume" | translate }}: {{ calculateVolume() }} {{ getVolumnUnit() }}
                      <sup>{{ component.ROOTS_VALUE }}</sup>
                    </span>
                  </h3>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </a-content>

  <a-footer>
    <button mat-raised-button type="button" (click)="closeDialog()">{{ "global.cancel" | translate }}</button>

    <button mat-raised-button type="button" color="primary" [disabled]="!canValidate()" (click)="validate()">
      {{ "global.validate" | translate }}
    </button>
  </a-footer>
</a-modal>
