<div class="grid-row">
  <!-- BREADCRUMB BLOCK-->
  <div class="grid-cell--12 custom-breadcrumb-padding">
    <div class="grid-cell grid-cell--container bread-crumb-custom-cell">
      <div class="grid-cell-content">
        <div class="row">
          <div class="breadcrumbs flex-row">
            <ul id="breadcrumbs-status">
              <li *ngFor="let state of breadcrumbsList" [class.current]="state.title === breadcrumbsSelectedItem.title">
                <div class="statusLabel">
                  <div class="title">{{ state.title }}</div>
                  <div class="subtitle" title="{{ state.subtittle }}">{{ state.subtittle }}</div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- POST PANEL -->
  <div #mainInfoAnchor class="grid-cell--12">
    <div class="grid-cell grid-cell--container">
      <div class="grid-cell-header">
        <div class="grid-cell-title-container">
          <h3 class="grid-cell-title">
            {{ getComponentName() + ".items" | translate }}
          </h3>
        </div>
      </div>

      <div class="grid-cell-content">
        <div class="column">
          <div class="form-group">
            <label class="form-label">{{ getComponentName() + ".pn" | translate }}</label>

            <div class="form-control">
              <input class="aw-input" type="text" disabled [(ngModel)]="item.pn" />
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">{{ getComponentName() + ".designation" | translate }}</label>

            <div class="form-control">
              <input class="aw-input" type="text" disabled [(ngModel)]="item.designation" />
            </div>
          </div>
        </div>
        <div class="column">
          <div class="form-group custom-form">
            <div class="custom-control">
              {{ getComponentName() + ".transferQuantity" | translate }}
              <b class="value-class">{{ item.transferQuantity }}</b>
            </div>
          </div>
          <div class="form-group custom-form">
            <div class="custom-control">
              {{ getComponentName() + ".selectionQuantity" | translate }}
              <b class="value-class">{{ item.selectionQuantity }}</b>
            </div>
          </div>
        </div>
        <div class="column">
          <div class="form-group custom-form">
            <div class="custom-control">
              {{ getComponentName() + ".reserve" | translate }}
              <b class="value-class">{{ item.reserve }}</b>
            </div>
          </div>
          <div class="form-group custom-form">
            <div class="custom-control">
              {{ getComponentName() + ".withdrawn" | translate }}
              <b class="value-class">{{ item.withdrawn }}</b>
            </div>
          </div>
          <div class="form-group custom-form">
            <div class="custom-control">
              {{ getComponentName() + ".sent" | translate }}
              <b class="value-class">{{ item.sent }}</b>
            </div>
          </div>
        </div>
        <div class="column"></div>
      </div>
    </div>
  </div>

  <!-- MATERIAL PANEL  -->
  <div #mainInfoAnchor class="grid-cell--12">
    <div class="grid-cell grid-cell--container">
      <div class="grid-cell-header">
        <div class="grid-cell-title-container">
          <h3 class="grid-cell-title">
            {{ getComponentName() + ".materialsProposed" | translate }} ({{ materialTableDataSource.dataCount }})
          </h3>
        </div>
      </div>

      <div class="grid-cell-content">
        <!-- Counter ROW -->
        <div class="row">
          <div class="form-group">
            <label class="form-label">&nbsp;</label>
            <div class="form-control">
              <label class="form-label">{{ getComponentName() + ".site" | translate }}</label>
              <div class="form-control">
                <p-dropdown
                  class="aw-dropdown fixed-width"
                  placeholder="&nbsp;"
                  [showClear]="true"
                  [options]="siteList"
                  [(ngModel)]="selectedSite"
                ></p-dropdown>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">&nbsp;</label>
            <div class="form-control">
              <label class="form-label">{{ getComponentName() + ".warehouse" | translate }}</label>
              <div class="form-control">
                <p-dropdown
                  class="aw-dropdown fixed-width"
                  placeholder="&nbsp;"
                  [showClear]="true"
                  [options]="warehouseList"
                  [(ngModel)]="selectedWarehouse"
                ></p-dropdown>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">&nbsp;</label>
            <div class="form-control">
              <label class="form-label">{{ getComponentName() + ".date" | translate }}</label>
              <div class="form-control">
                <p-calendar
                  showButtonBar="true"
                  [monthNavigator]="true"
                  [yearNavigator]="true"
                  [yearRange]="sessionService.calendarYearRange"
                  class="aw-calendar"
                  [dateFormat]="sessionService.dateFormatPrimeNG"
                  [locale]="sessionService.calendarFormat"
                  [(ngModel)]="date"
                  appendTo="body"
                  disabled
                ></p-calendar>
              </div>
            </div>
          </div>
          <div class="form-group"></div>
        </div>

        <!-- MATERIAL TABLE -->
        <a-table [dataSource]="materialTableDataSource">
          <ng-template columnDef="article" let-rowData="rowData">
            <a>{{ rowData.article }}</a>
          </ng-template>
          <ng-template columnDef="sn" let-rowData="rowData">
            <a>{{ rowData.sn }}</a>
          </ng-template>
          <ng-template columnDef="status" let-rowData="rowData">
            <div class="code">
              <div class="info">
                <b>{{ rowData["status"] }}</b>
              </div>
              <div class="info">
                <span *ngIf="rowData['statusLabel'] === reserve; then reserveTempate; else otherStatusTemplate"></span>
                <ng-template #reserveTempate
                  ><b class="value-reserve">{{ rowData["statusLabel"] }}</b></ng-template
                >

                <ng-template
                  #otherStatusTemplate
                  *ngIf="
                    !!rowData['statusLabel'] && rowData['statusLabel'].startsWith('Reserved for');
                    then reservedForTemplate
                  "
                >
                </ng-template>
                <ng-template #reservedForTemplate
                  ><b class="value-reserve-for">{{ rowData["statusLabel"] }}</b>
                </ng-template>
                <span
                  *ngIf="
                    !!rowData['statusLabel'] &&
                    rowData['statusLabel'] !== reserve &&
                    !rowData['statusLabel'].startsWith('Reserved for')
                  "
                  >{{ rowData["statusLabel"] }}</span
                >
              </div>
            </div>
          </ng-template>
          <ng-template columnDef="warehouse" let-rowData="rowData">
            <div class="code">
              <div class="info">
                <span class="label-class">{{ getComponentName() + ".site" | translate }}</span>
                <b>{{ rowData["site"] }}</b>
              </div>
              <div class="info">
                <b>{{ rowData["warehouse"] }}</b>
              </div>
            </div>
          </ng-template>
          <ng-template columnDef="localisation" let-rowData="rowData">
            <div class="code">
              <div class="info">
                <span class="label-class">{{ getComponentName() + ".zone" | translate }}</span>
                <b>{{ rowData["zone"] }}</b>
              </div>
              <div class="info">
                <span class="label-class">{{ getComponentName() + ".emp" | translate }}</span>
                <b>{{ rowData["emp"] }}</b>
              </div>
            </div>
          </ng-template>
          <ng-template columnDef="tech" let-rowData="rowData">
            <div class="code">
              <div class="info">
                <span class="label-class">{{ getComponentName() + ".potential" | translate }}</span>
                <b>{{ rowData["potential"] }}</b>
              </div>
              <div class="info">
                <span class="label-class">{{ getComponentName() + ".lapsed" | translate }}</span>
                <b>{{ rowData["lapsed"] }}</b>
              </div>
            </div>
          </ng-template>
          <ng-template columnDef="action" let-rowData="rowData">
            <button
              *ngIf="rowData['statusLabel'] === reserve"
              type="button"
              mat-raised-button
              color="warn"
              class="button-cancel"
              (click)="actionClick(rowData)"
            >
              {{ "global.cancel" | translate }}
            </button>
            <button
              *ngIf="!rowData['statusLabel']"
              type="button"
              mat-raised-button
              class="button-reserve"
              (click)="actionClick(rowData)"
            >
              {{ getComponentName() + ".reserve" | translate }}
            </button>
            <button
              *ngIf="!!rowData['statusLabel'] && rowData['statusLabel'].startsWith('Reserved for')"
              type="button"
              mat-raised-button
              class="button-preempter"
              (click)="actionClick(rowData)"
            >
              {{ getComponentName() + ".preempter" | translate }}
            </button>
          </ng-template>
        </a-table>
      </div>
    </div>
  </div>
</div>
