<a-modal class="aw-modal" [(visible)]="display" [width]="50">
  <a-header>
    <div class="modal-title">
      {{ "global.popinSearchHeader" | translate }} ({{ resultsTable ? resultsTable.length : 0 }})
    </div>
  </a-header>

  <a-content>
    <p-table
      [resizableColumns]="true"
      #ptable
      class="aw-table2"
      [columns]="resultsTableCols"
      [value]="resultsTable"
      [(selection)]="selectedObject"
      selectionMode="single"
      dataKey="ratingCode"
      [scrollable]="true"
      (onRowUnselect)="onRowUnselect()"
    >
      <ng-template pTemplate="emptymessage">
        <span *ngIf="!isLoading"> &nbsp;</span>

        <div *ngIf="isLoading" class="aw-table-loading-indicator">
          <div class="loading-message">{{ "table.loadingData" | translate }}</div>
          <div class="lds-hourglass"></div>
        </div>
      </ng-template>

      <ng-template pTemplate="caption">
        <div class="aw-table-header">
          <div class="aw-table-global-filter">
            <label class="aw-table-global-filter-label">
              <i class="fa fa-fw fa-search" aria-hidden="true"></i>
            </label>

            <input
              #ptableGlobalFilter
              class="aw-table-global-filter-input"
              type="text"
              placeholder="{{ 'table.globalFilterText' | translate }}"
              (input)="ptable.filterGlobal($event.target.value, 'contains')"
            />
          </div>
        </div>
      </ng-template>

      <ng-template pTemplate="colgroup" let-columns>
        <colgroup>
          <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
        </colgroup>
      </ng-template>

      <ng-template pTemplate="header" let-columns>
        <tr>
          <th pResizableColumn *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }">
            {{ getComponentName() + "." + col.field | translate }}
          </th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
        <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
          <td *ngFor="let col of columns" [ngSwitch]="col.field" [ngStyle]="{ 'text-align': col.alignment }">
            <span *ngSwitchCase="'familyCodeStructureType'"> {{ formatFamilyCodeStructureType(rowData) }} </span>

            <span *ngSwitchDefault> {{ rowData[col.field] }} </span>
          </td>
        </tr>
      </ng-template>
    </p-table>
    <!-- </div>
      </div>
    </div> -->
  </a-content>

  <a-footer>
    <button type="button" mat-raised-button (click)="onCancel()">
      <span>{{ "global.cancel" | translate }}</span>
    </button>

    <button type="button" color="primary" mat-raised-button [disabled]="!isOneObjectSelected()" (click)="onValidate()">
      {{ "global.validate" | translate }}
    </button>
  </a-footer>
</a-modal>
