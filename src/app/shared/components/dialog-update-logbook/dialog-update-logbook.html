<a-modal class="aw-modal" [(visible)]="display">
  <a-header>
    <div class="modal-title">{{ getComponentName() + ".title" | translate }} {{woCode}}</div>
  </a-header>

  <a-content>
    <div class="grid-cell-content">
      <p-table
        [resizableColumns]="true"
        #ptableImportReports
        class="aw-table2"
        [columns]="evolutionColumns"
        [value]="logbookEvolutionTableRows"
        [scrollable]="true"
      >
        <ng-template pTemplate="colgroup" let-columns>
          <colgroup>
            <col *ngFor="let col of columns" [ngStyle]="{ width: col.width }" />
          </colgroup>
        </ng-template>

        <ng-template pTemplate="header" let-columns>
          <tr>
            <th pResizableColumn *ngFor="let col of columns" [ngStyle]="{ 'text-align': col.alignment }">
              {{ getComponentName() + "." + col.field | translate }}
            </th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
          <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
            <td *ngFor="let col of columns" [ngSwitch]="col.field" [ngStyle]="{ 'text-align': col.alignment }">
              <div *ngSwitchCase="'availablePnList'">
                <p-dropdown
                  *ngIf="rowData.availablePnList && rowData.availablePnList.length > 0"
                  class="aw-dropdown fixed-width"
                  [options]="rowData.availablePnList"
                  [(ngModel)]="rowData.workOrderEvolutionDTO.newPnCodeSelected"
                  appendTo="body"
                  placeholder="&nbsp;"
                ></p-dropdown>
              </div>
              <div *ngSwitchDefault>
                {{ rowData[col.field] }}
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </a-content>

  <a-footer>
    <button type="button" mat-raised-button (click)="closeDialog()">{{ "global.cancel" | translate }}</button>

    <button type="button" mat-raised-button color="primary" (click)="validate()" [disabled]="!isValid()">
      {{ "global.validate" | translate }}
    </button>
  </a-footer>
</a-modal>
