<i
  *ngIf="isAdd()"
  class="fa fa-fw fa-star-o aw-icon aw-icon-with-border search-criteria-action"
  aria-hidden="true"
  pTooltip="{{ 'ManageSearchCriteriaComponent.createContext' | translate }}"
  tooltipPosition="top"
  [class.disabled]="!canChange"
  (click)="onClickCreateSearchCriteria()"
></i>
<i
  *ngIf="!isAdd()"
  class="fa fa-fw fa-star aw-icon aw-icon-with-border search-criteria-action"
  aria-hidden="true"
  pTooltip="{{ 'ManageSearchCriteriaComponent.updateContext' | translate }}"
  tooltipPosition="top"
  [class.disabled]="!canChange"
  (click)="onClickUpdateSearchCriteria()"
></i>
<i
  class="fa fa-fw fa-cog aw-icon aw-icon-with-border search-criteria-action"
  aria-hidden="true"
  pTooltip="{{ 'ManageSearchCriteriaComponent.contextTooltip' | translate }}"
  tooltipPosition="top"
  [class.disabled]="!canChange"
  (click)="onClickOpenSearchCriteria()"
></i>
<i
  class="fa fa-fw fa-undo aw-icon aw-icon-with-border search-criteria-action"
  aria-hidden="true"
  pTooltip="{{ 'global.reset' | translate }}"
  tooltipPosition="top"
  [class.disabled]="!canChange"
  (click)="onClickResetSearchCriteria()"
></i>

<!-- Form modal -->
<a-modal class="aw-modal" *ngIf="showAddOrUpdateCriteria" [(visible)]="showAddOrUpdateCriteria">
  <a-header>
    <div class="modal-title fixed-size-modal">{{ "ManageSearchCriteriaComponent.modalTitle" | translate }}</div>
  </a-header>

  <a-content>
    <div class="fixed-size-modal">
      <div class="search-dialog-container">
        <div class="row">
          <div class="form-group">
            <label class="form-label">{{ "global.name" | translate }}</label>

            <div class="form-control">
              <input type="text" class="aw-input" [(ngModel)]="name" />
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">{{ "global.public" | translate }}</label>

            <div class="form-control">
              <p-checkbox class="aw-checkbox" binary="true" [(ngModel)]="isPublic"></p-checkbox>
            </div>
          </div>
        </div>
      </div>
    </div>
  </a-content>

  <a-footer>
    <button type="button" mat-raised-button (click)="cancelContext()">
      <span>{{ "global.cancel" | translate }}</span>
    </button>

    <button type="button" mat-raised-button color="primary" (click)="onClickValidAddOrUpdateCriteria()">
      {{ "global.validate" | translate }}
    </button>
  </a-footer>
</a-modal>

<!-- Table modal -->
<a-modal class="aw-modal" *ngIf="showSearchCriteriaModal" [(visible)]="showSearchCriteriaModal">
  <a-header>
    <div class="modal-title fixed-size-modal">{{ "ManageSearchCriteriaComponent.modalTitle" | translate }}</div>
  </a-header>

  <a-content>
    <div class="fixed-size-modal">
      <p-table
        [resizableColumns]="true"
        class="aw-table2"
        [value]="searchCriteriaList"
        selectionMode="single"
        [(selection)]="selectedSearchCriteriaFromTable"
      >
        <ng-template pTemplate="caption">
          <div class="aw-table-header">
            <div class="aw-table-global-filter"></div>

            <div class="aw-table-actions">
              <button
                *ngIf="hasManageAccessRight && visibility.showDelete()"
                type="button"
                mat-raised-button
                color="warn"
                (click)="onClickDeleteContext()"
              >
                {{ "global.delete" | translate }}
              </button>

              <button *ngIf="visibility.showUpdate()" type="button" mat-raised-button (click)="onClickUpdateContext()">
                {{ "global.update" | translate }}
              </button>
            </div>
          </div>
        </ng-template>

        <ng-template pTemplate="header">
          <tr>
            <th>{{ "global.name" | translate }}</th>
            <th>{{ "global.public" | translate }}</th>
            <th>{{ "global.default" | translate }}</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-rowData>
          <tr [pSelectableRow]="rowData">
            <td>{{ rowData.description }}</td>
            <td class="col-center">
              <p-checkbox class="aw-checkbox" binary="true" [(ngModel)]="rowData.public" [disabled]="true"></p-checkbox>
            </td>
            <td class="col-center">
              <i *ngIf="rowData.favorite" class="fa fa-fw fa-star aw-icon" (click)="onClickUnsetFavorite(rowData)"></i>
              <i *ngIf="!rowData.favorite" class="fa fa-fw fa-star-o aw-icon" (click)="onClickSetFavorite(rowData)"></i>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </a-content>

  <a-footer>
    <button type="button" mat-raised-button (click)="showSearchCriteriaModal = false">
      <span>{{ "global.cancel" | translate }}</span>
    </button>

    <button
      type="button"
      mat-raised-button
      (click)="onClickSelectSearchCriteria()"
      [disabled]="!enable.selectSearchCriteria()"
    >
      {{ "global.select" | translate }}
    </button>
  </a-footer>
</a-modal>
