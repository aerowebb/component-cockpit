{"version":3,"sources":["webpack:///./node_modules/primeng/fileupload.js","webpack:///./node_modules/primeng/inputswitch.js","webpack:///./node_modules/primeng/inputtextarea.js","webpack:///./node_modules/primeng/keyfilter.js","webpack:///./node_modules/primeng/message.js","webpack:///./node_modules/primeng/progressbar.js","webpack:///./node_modules/primeng/radiobutton.js","webpack:///./src/app/main/logistics/material-request-management/form/material-request-management-form.component.html","webpack:///./src/app/main/logistics/material-request-management/form/material-request-management-form.component.ts","webpack:///./src/app/main/logistics/material-request-management/form/material-request-management-form.service.ts","webpack:///./src/app/main/logistics/material-request-management/form/popups/change-customer-popup-form/change-customer-popup-form.component.html","webpack:///./src/app/main/logistics/material-request-management/form/popups/change-customer-popup-form/change-customer-popup-form.component.ts","webpack:///./src/app/main/logistics/material-request-management/form/popups/change-warehouse-and-quantity-popup-form/change-warehouse-and-quantity-popup-form.component.html","webpack:///./src/app/main/logistics/material-request-management/form/popups/change-warehouse-and-quantity-popup-form/change-warehouse-and-quantity-popup-form.component.ts","webpack:///./src/app/main/logistics/material-request-management/form/popups/dialog-satisfaction-rate/dialog-satisfaction-rate.component.html","webpack:///./src/app/main/logistics/material-request-management/form/popups/dialog-satisfaction-rate/dialog-satisfaction-rate.component.scss","webpack:///./src/app/main/logistics/material-request-management/form/popups/dialog-satisfaction-rate/dialog-satisfaction-rate.component.ts","webpack:///./src/app/main/logistics/material-request-management/material-request-management.module.ts","webpack:///./src/app/main/logistics/material-request-management/search/material-request-management-search.component.html","webpack:///./src/app/main/logistics/material-request-management/search/material-request-management-search.component.ts","webpack:///./src/app/main/logistics/material-request-management/search/material-request-management-search.service.ts","webpack:///./src/app/main/logistics/material-request-management/shared/popups/dialog-image/dialog-image.component.html","webpack:///./src/app/main/logistics/material-request-management/shared/popups/dialog-image/dialog-image.component.ts","webpack:///./src/app/main/logistics/material-request-management/shared/popups/popup-form.component.scss","webpack:///./src/app/main/logistics/material-request-management/shared/style.scss","webpack:///./src/app/shared/constants/bidt-stock-mvt-constants.ts","webpack:///./src/app/shared/services/file.service.ts","webpack:///./src/app/shared/utils/bido-family-variant-utils.ts","webpack:///./src/app/shared/utils/image-utils.ts","webpack:///./src/app/shared/utils/logistic-utils.ts"],"names":[],"mappings":"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","file":"logistics-material-request-management-material-request-management-module.js","sourcesContent":["/* Shorthand */\n\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./components/fileupload/fileupload\"));","/* Shorthand */\n\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./components/inputswitch/inputswitch\"));","/* Shorthand */\n\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./components/inputtextarea/inputtextarea\"));","/* Shorthand */\n\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./components/keyfilter/keyfilter\"));","/* Shorthand */\n\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./components/message/message\"));","/* Shorthand */\n\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./components/progressbar/progressbar\"));","/* Shorthand */\n\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./components/radiobutton/radiobutton\"));","module.exports = \"<div class=\\\"page-header\\\">\\r\\n  <div class=\\\"page-info\\\">\\r\\n    <div>\\r\\n      <h2 class=\\\"page-title\\\">{{ \\\"transaction.\\\" + componentData.componentId | translate }}</h2>\\r\\n\\r\\n      <div class=\\\"page-subtitle\\\">\\r\\n        <div *ngIf=\\\"subtitle\\\" class=\\\"page-subtitle\\\">- {{ subtitle }}</div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"page-actions\\\">\\r\\n    <button\\r\\n      type=\\\"button\\\"\\r\\n      mat-raised-button\\r\\n      (click)=\\\"onChangeCustomer()\\\"\\r\\n      *ngIf=\\\"isUserHasRight(bidoFunctionTypeConstants.UC_MM_SUPPLIER_CHANGE, bidoFunctionTypeConstants.DEGREE_MANAGE)\\\"\\r\\n    >\\r\\n      {{ getComponentName() + \\\".redirectRequest\\\" | translate }}\\r\\n    </button>\\r\\n\\r\\n    <button\\r\\n      type=\\\"button\\\"\\r\\n      mat-raised-button\\r\\n      (click)=\\\"onChangeSupplier()\\\"\\r\\n      *ngIf=\\\"isUserHasRight(bidoFunctionTypeConstants.UC_MM_SUPPLIER_CHANGE, bidoFunctionTypeConstants.DEGREE_UPDATE)\\\"\\r\\n    >\\r\\n      {{ getComponentName() + \\\".changeSupplier\\\" | translate }}\\r\\n    </button>\\r\\n\\r\\n    <button\\r\\n      mat-icon-button\\r\\n      class=\\\"mat-elevation-z1\\\"\\r\\n      matTooltip=\\\"{{ 'global.showAllActionTooltip' | translate }}\\\"\\r\\n      matTooltipPosition=\\\"above\\\"\\r\\n      aria-label=\\\"Show all actions\\\"\\r\\n      [matMenuTriggerFor]=\\\"actions\\\"\\r\\n    >\\r\\n      <mat-icon>more_horiz</mat-icon>\\r\\n    </button>\\r\\n    <mat-menu #actions=\\\"matMenu\\\">\\r\\n      <button mat-menu-item (click)=\\\"reload()\\\">\\r\\n        {{ \\\"global.refresh\\\" | translate }}\\r\\n      </button>\\r\\n      <!-- <button mat-menu-item (click)=\\\"updateFavoriteState()\\\">\\r\\n        {{ (isFavoriteEntry ? \\\"page.removeFromFavorites\\\" : \\\"page.addToFavorites\\\") | translate }}\\r\\n      </button> -->\\r\\n    </mat-menu>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"page-wrapper\\\">\\r\\n  <div class=\\\"page-container\\\">\\r\\n    <div class=\\\"page-content\\\">\\r\\n      <div class=\\\"grid-row\\\">\\r\\n        <div class=\\\"grid-cell--8\\\">\\r\\n          <div class=\\\"grid-cell grid-cell--container grid-cell-scope  grid-cell-item-structure\\\">\\r\\n            <div class=\\\"grid-cell-header\\\">\\r\\n              <div class=\\\"grid-cell-title-container loading-indicator\\\">\\r\\n                <h3 class=\\\"grid-cell-title\\\">\\r\\n                  {{ getComponentName() + \\\".procurementRequest\\\" | translate }}\\r\\n                </h3>\\r\\n              </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"grid-cell-content grid-cell-content-with-section\\\">\\r\\n              <div class=\\\"section\\\">\\r\\n                <div class=\\\"section-content\\\">\\r\\n                  <div class=\\\"row\\\">\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                      <label class=\\\"form-label\\\">\\r\\n                        {{ getComponentName() + \\\".requestNb\\\" | translate }}\\r\\n                      </label>\\r\\n\\r\\n                      <div class=\\\"form-control\\\">\\r\\n                        <div class=\\\"form-control-generic\\\">\\r\\n                          {{ procurementRequest.procCode }}\\r\\n                        </div>\\r\\n                      </div>\\r\\n                    </div>\\r\\n\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                      <label class=\\\"form-label\\\">\\r\\n                        {{ getComponentName() + \\\".expirationDate\\\" | translate }}\\r\\n                      </label>\\r\\n\\r\\n                      <div class=\\\"form-control\\\">\\r\\n                        <div class=\\\"form-control-generic\\\">\\r\\n                          {{\\r\\n                            procurementRequest.calendarPotential | date: \\\"yyyy/MM/dd\\\":\\\"\\\":translateService.currentLang\\r\\n                          }}\\r\\n                        </div>\\r\\n                      </div>\\r\\n                    </div>\\r\\n\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                      <label class=\\\"form-label\\\">\\r\\n                        {{ \\\"status\\\" | translate }}\\r\\n                      </label>\\r\\n\\r\\n                      <div class=\\\"form-control\\\">\\r\\n                        <div class=\\\"form-control-generic\\\">\\r\\n                          {{ formatStatus(procurementRequest.procStatus) }}\\r\\n                        </div>\\r\\n                      </div>\\r\\n                    </div>\\r\\n\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                      <label class=\\\"form-label\\\">\\r\\n                        {{ getComponentName() + \\\".criticity\\\" | translate }}\\r\\n                      </label>\\r\\n\\r\\n                      <div class=\\\"form-control\\\">\\r\\n                        <div class=\\\"form-control-generic\\\">\\r\\n                          <span\\r\\n                            *ngIf=\\\"\\r\\n                              procurementRequest.criticality === aWPropertiesConstants.LOGISTICAL_CRITICALITY_ROUTINE\\r\\n                            \\\"\\r\\n                            class=\\\"ok\\\"\\r\\n                          >\\r\\n                            {{ componentData.componentId + \\\".routine\\\" | translate }}\\r\\n                          </span>\\r\\n\\r\\n                          <span\\r\\n                            *ngIf=\\\"\\r\\n                              procurementRequest.criticality === aWPropertiesConstants.LOGISTICAL_CRITICALITY_IMMEDIATE\\r\\n                            \\\"\\r\\n                            class=\\\"nok\\\"\\r\\n                          >\\r\\n                            {{ componentData.componentId + \\\".immediate\\\" | translate }}\\r\\n                          </span>\\r\\n\\r\\n                          <span\\r\\n                            *ngIf=\\\"\\r\\n                              procurementRequest.criticality === aWPropertiesConstants.LOGISTICAL_CRITICALITY_URGENT\\r\\n                            \\\"\\r\\n                            class=\\\"warning\\\"\\r\\n                          >\\r\\n                            {{ componentData.componentId + \\\".urgent\\\" | translate }}\\r\\n                          </span>\\r\\n                        </div>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                  </div>\\r\\n\\r\\n                  <div class=\\\"row\\\">\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                      <label class=\\\"form-label\\\">\\r\\n                        {{ getComponentName() + \\\".expectedDate\\\" | translate }}\\r\\n                      </label>\\r\\n\\r\\n                      <div class=\\\"form-control\\\">\\r\\n                        <div class=\\\"form-control-generic\\\">\\r\\n                          {{ procurementRequest.requestedDate | date: \\\"yyyy/MM/dd\\\":\\\"\\\":translateService.currentLang }}\\r\\n                        </div>\\r\\n                      </div>\\r\\n                    </div>\\r\\n\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                      <label class=\\\"form-label\\\">\\r\\n                        {{ getComponentName() + \\\".requestedPotential\\\" | translate }}\\r\\n                      </label>\\r\\n\\r\\n                      <div class=\\\"form-control\\\">\\r\\n                        <div class=\\\"form-control-generic\\\">\\r\\n                          {{ formattedRequestedPotential }} {{ procurementRequest.potentialUnit }}\\r\\n                        </div>\\r\\n                      </div>\\r\\n                    </div>\\r\\n\\r\\n                    <div\\r\\n                      class=\\\"form-group flex--2\\\"\\r\\n                      [ngClass]=\\\"{\\r\\n                        'visibility--hidden':\\r\\n                          procurementRequestItem?.birePn?.traceability !=\\r\\n                            aWPropertiesConstants.PN_TRACEABILITY_BY_BATCH &&\\r\\n                          procurementRequestItem?.birePn?.traceability != aWPropertiesConstants.PN_TRACEABILITY_BY_SN &&\\r\\n                          procurementRequestItem?.birePn?.traceability !=\\r\\n                            aWPropertiesConstants.PN_TRACEABILITY_BY_PACKAGING_BATCH_AND_SN\\r\\n                      }\\\"\\r\\n                    >\\r\\n                      <label class=\\\"form-label\\\"> {{ getComponentName() + \\\".expectedSn\\\" | translate }} </label>\\r\\n\\r\\n                      <div class=\\\"form-control\\\">\\r\\n                        <input\\r\\n                          class=\\\"aw-input\\\"\\r\\n                          name=\\\"value\\\"\\r\\n                          type=\\\"text\\\"\\r\\n                          [disabled]=\\\"true\\\"\\r\\n                          [(ngModel)]=\\\"procurementRequest.procComment\\\"\\r\\n                        />\\r\\n                      </div>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n\\r\\n              <div style=\\\"display: flex; margin-top: 32px;\\\">\\r\\n                <div class=\\\"section\\\" style=\\\"flex-grow: 1; margin-top: 0;\\\">\\r\\n                  <h4 class=\\\"section-title\\\" *ngIf=\\\"isProRecSupplierWarehouse\\\">\\r\\n                    {{ getComponentName() + \\\".shipper\\\" | translate }}\\r\\n                  </h4>\\r\\n                  <h4 class=\\\"section-title\\\" *ngIf=\\\"!isProRecSupplierWarehouse\\\">\\r\\n                    {{ getComponentName() + \\\".itemShipper\\\" | translate }}\\r\\n                  </h4>\\r\\n\\r\\n                  <div class=\\\"section-content\\\">\\r\\n                    <div class=\\\"row\\\">\\r\\n                      <div class=\\\"form-group\\\" *ngIf=\\\"procurementRequest.bidoCustomer\\\">\\r\\n                        <label class=\\\"form-label\\\">{{ getComponentName() + \\\".partner\\\" | translate }}</label>\\r\\n\\r\\n                        <div class=\\\"form-control\\\">\\r\\n                          <div class=\\\"form-control-generic\\\">\\r\\n                            {{ procurementRequest.bidoCustomer.customerName }}\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n\\r\\n                      <div class=\\\"form-group\\\" *ngIf=\\\"procurementRequest.bidtSiteIssue\\\">\\r\\n                        <label class=\\\"form-label\\\">{{ getComponentName() + \\\".site\\\" | translate }}</label>\\r\\n\\r\\n                        <div class=\\\"form-control\\\">\\r\\n                          <div class=\\\"form-control-generic\\\">\\r\\n                            {{ procurementRequest?.bidtSiteIssue?.siteCode }}\\r\\n                            <ng-container *ngIf=\\\"procurementRequest?.bidtSiteIssue?.siteName\\\">\\r\\n                              - {{ procurementRequest?.bidtSiteIssue?.siteName }}\\r\\n                            </ng-container>\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n\\r\\n                      <div class=\\\"form-group\\\" *ngIf=\\\"currentSupplierWarehouse\\\">\\r\\n                        <label class=\\\"form-label\\\">{{ \\\"warehouse\\\" | translate }}</label>\\r\\n\\r\\n                        <div class=\\\"form-control\\\">\\r\\n                          <div class=\\\"form-control-generic\\\">\\r\\n                            {{ currentSupplierWarehouse.whCode }}\\r\\n                            <ng-container *ngIf=\\\"currentSupplierWarehouse.whName\\\">\\r\\n                              - {{ currentSupplierWarehouse.whName }}\\r\\n                            </ng-container>\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                </div>\\r\\n\\r\\n                <div class=\\\"section\\\" style=\\\"flex-grow: 1; margin-top: 0;\\\">\\r\\n                  <h4 class=\\\"section-title\\\">\\r\\n                    {{ componentData.componentId + \\\".recepient\\\" | translate }}\\r\\n                  </h4>\\r\\n\\r\\n                  <div class=\\\"section-content\\\">\\r\\n                    <div class=\\\"row\\\">\\r\\n                      <div class=\\\"form-group\\\">\\r\\n                        <label class=\\\"form-label\\\">\\r\\n                          {{ componentData.componentId + \\\".site\\\" | translate }}\\r\\n                        </label>\\r\\n\\r\\n                        <div class=\\\"form-control\\\">\\r\\n                          <div class=\\\"form-control-generic\\\">\\r\\n                            {{ procurementRequest?.bidtSiteReceipt?.siteCode }}\\r\\n                            <ng-container *ngIf=\\\"procurementRequest?.bidtSiteReceipt?.siteName\\\">\\r\\n                              - {{ procurementRequest?.bidtSiteReceipt?.siteName }}\\r\\n                            </ng-container>\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n\\r\\n                      <div class=\\\"form-group\\\">\\r\\n                        <label class=\\\"form-label\\\">\\r\\n                          {{ componentData.componentId + \\\".warehouseAndWorkshop\\\" | translate }}\\r\\n                        </label>\\r\\n\\r\\n                        <div class=\\\"form-control\\\">\\r\\n                          <div class=\\\"form-control-generic\\\">\\r\\n                            {{ procurementRequest?.bidtWarehouseReceipt?.whCode }}\\r\\n                            <ng-container *ngIf=\\\"procurementRequest?.bidtWarehouseReceipt?.whName\\\">\\r\\n                              - {{ procurementRequest?.bidtWarehouseReceipt?.whName }}\\r\\n                            </ng-container>\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n\\r\\n                      <div class=\\\"form-group\\\" *ngIf=\\\"workPackageAsset\\\">\\r\\n                        <label class=\\\"form-label\\\">\\r\\n                          <ng-container\\r\\n                            *ngIf=\\\"\\r\\n                              workPackageAsset.equipmentFunction == aWPropertiesConstants.FAMILY_FUNCTION_AIRCRAFT_KEY\\r\\n                            \\\"\\r\\n                          >\\r\\n                            {{ \\\"aircraft\\\" | translate }}\\r\\n                          </ng-container>\\r\\n                          <ng-container\\r\\n                            *ngIf=\\\"\\r\\n                              workPackageAsset.equipmentFunction == aWPropertiesConstants.FAMILY_FUNCTION_ENGINE_KEY\\r\\n                            \\\"\\r\\n                          >\\r\\n                            {{ \\\"engine\\\" | translate }}\\r\\n                          </ng-container>\\r\\n                          <ng-container\\r\\n                            *ngIf=\\\"\\r\\n                              workPackageAsset.equipmentFunction !=\\r\\n                                aWPropertiesConstants.FAMILY_FUNCTION_AIRCRAFT_KEY &&\\r\\n                              workPackageAsset.equipmentFunction != aWPropertiesConstants.FAMILY_FUNCTION_ENGINE_KEY\\r\\n                            \\\"\\r\\n                          >\\r\\n                            {{ \\\"equipment\\\" | translate }}\\r\\n                          </ng-container>\\r\\n                        </label>\\r\\n\\r\\n                        <div class=\\\"form-control\\\">\\r\\n                          <div class=\\\"form-control-generic\\\">\\r\\n                            <a (click)=\\\"openWorkPackageAsset()\\\">{{ workPackageAssetName }}</a>\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"grid-cell--4\\\">\\r\\n          <div class=\\\"grid-cell grid-cell--container\\\">\\r\\n            <div class=\\\"grid-cell-header\\\">\\r\\n              <div class=\\\"grid-cell-title-container\\\">\\r\\n                <h3 class=\\\"grid-cell-title\\\">\\r\\n                  {{ getComponentName() + \\\".item\\\" | translate }}\\r\\n                </h3>\\r\\n              </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"grid-cell-content grid-cell-content-with-section\\\">\\r\\n              <div class=\\\"column\\\">\\r\\n                <div class=\\\"row\\\">\\r\\n                  <div class=\\\"column\\\">\\r\\n                    <div class=\\\"row\\\">\\r\\n                      <div class=\\\"form-group\\\">\\r\\n                        <label class=\\\"form-label\\\">\\r\\n                          {{ componentData.componentId + \\\".partNumber\\\" | translate }}\\r\\n                        </label>\\r\\n\\r\\n                        <div class=\\\"form-control\\\">\\r\\n                          <div class=\\\"form-control-generic\\\">\\r\\n                            {{ procurementRequestItem.birePn?.pnCode }}\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n\\r\\n                      <div class=\\\"form-group\\\">\\r\\n                        <label class=\\\"form-label\\\">\\r\\n                          {{ componentData.componentId + \\\".requestedQuantity\\\" | translate }}\\r\\n                        </label>\\r\\n\\r\\n                        <div class=\\\"form-control\\\">\\r\\n                          <div class=\\\"form-control-generic\\\">\\r\\n                            {{ formatQuantity(procurementRequestItem.requestedQuantity) }}\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n                    </div>\\r\\n\\r\\n                    <div class=\\\"row\\\">\\r\\n                      <div class=\\\"form-group\\\">\\r\\n                        <label class=\\\"form-label\\\">\\r\\n                          {{ componentData.componentId + \\\".designation\\\" | translate }}\\r\\n                        </label>\\r\\n\\r\\n                        <div class=\\\"form-control\\\">\\r\\n                          <div class=\\\"form-control-generic\\\">\\r\\n                            {{ procurementRequestItem.birePn?.articleDesignation }}\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                  </div>\\r\\n\\r\\n                  <!-- <div class=\\\"row\\\" *ngIf=\\\"itemIllustration\\\">\\r\\n                    <img [src]=\\\"itemIllustration\\\" class=\\\"img-dimension\\\" />\\r\\n                  </div> -->\\r\\n                </div>\\r\\n\\r\\n                <div class=\\\"section\\\">\\r\\n                  <h4 class=\\\"section-title\\\">\\r\\n                    {{ componentData.componentId + \\\".advancement\\\" | translate }}\\r\\n                  </h4>\\r\\n\\r\\n                  <div class=\\\"section-content\\\">\\r\\n                    <div class=\\\"row\\\" style=\\\"margin-bottom: 8px;\\\">\\r\\n                      <div\\r\\n                        style=\\\"padding: 8px; color: #000; border-radius: 4px; margin-left: 16px;\\\"\\r\\n                        [ngClass]=\\\"{\\r\\n                          'served--nok': servedNb == 0,\\r\\n                          'served--ok':\\r\\n                            servedNb > 0 &&\\r\\n                            isSameQuantity(servedNb.toString(), procurementRequestItem.requestedQuantity),\\r\\n                          'served--warning':\\r\\n                            servedNb > 0 &&\\r\\n                            !isSameQuantity(servedNb.toString(), procurementRequestItem.requestedQuantity)\\r\\n                        }\\\"\\r\\n                      >\\r\\n                        <span *ngIf=\\\"servedNb == 0\\\">\\r\\n                          {{ componentData.componentId + \\\".notServed\\\" | translate }}\\r\\n                        </span>\\r\\n                        <span\\r\\n                          *ngIf=\\\"\\r\\n                            servedNb > 0 &&\\r\\n                            !isSameQuantity(servedNb.toString(), procurementRequestItem.requestedQuantity)\\r\\n                          \\\"\\r\\n                        >\\r\\n                          {{ componentData.componentId + \\\".partiallyServed\\\" | translate }}\\r\\n                        </span>\\r\\n                        <span\\r\\n                          *ngIf=\\\"\\r\\n                            servedNb > 0 &&\\r\\n                            isSameQuantity(servedNb.toString(), procurementRequestItem.requestedQuantity)\\r\\n                          \\\"\\r\\n                        >\\r\\n                          {{ componentData.componentId + \\\".served\\\" | translate }}\\r\\n                        </span>\\r\\n                      </div>\\r\\n                    </div>\\r\\n\\r\\n                    <div class=\\\"row\\\">\\r\\n                      <div class=\\\"form-group flex-row--align-center\\\">\\r\\n                        <div class=\\\"form-control\\\">\\r\\n                          <div class=\\\"form-control-generic\\\" style=\\\"font-size: 3rem; padding-bottom: 1rem;\\\">\\r\\n                            {{ notServedNb }}\\r\\n                          </div>\\r\\n                        </div>\\r\\n                        <label class=\\\"form-label\\\">\\r\\n                          <ng-container\\r\\n                            *ngIf=\\\"\\r\\n                              procurementRequest.procStatus ==\\r\\n                                aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_SIMULATED ||\\r\\n                              procurementRequest.procStatus ==\\r\\n                                aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_PLANNED ||\\r\\n                              procurementRequest.procStatus == aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_DRAFT\\r\\n                            \\\"\\r\\n                          >\\r\\n                            {{ getComponentName() + \\\".notSelected\\\" | translate }}\\r\\n                          </ng-container>\\r\\n                          <ng-container\\r\\n                            *ngIf=\\\"\\r\\n                              procurementRequest.procStatus !=\\r\\n                                aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_SIMULATED &&\\r\\n                              procurementRequest.procStatus !=\\r\\n                                aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_PLANNED &&\\r\\n                              procurementRequest.procStatus != aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_DRAFT\\r\\n                            \\\"\\r\\n                          >\\r\\n                            {{ getComponentName() + \\\".notBooked\\\" | translate }}\\r\\n                          </ng-container>\\r\\n                        </label>\\r\\n                      </div>\\r\\n\\r\\n                      <div class=\\\"form-group flex-row--align-center\\\">\\r\\n                        <div class=\\\"form-control\\\">\\r\\n                          <div class=\\\"form-control-generic\\\" style=\\\"font-size: 3rem; padding-bottom: 1rem\\\">\\r\\n                            {{ bookedNb }}\\r\\n                          </div>\\r\\n                        </div>\\r\\n                        <label class=\\\"form-label\\\">\\r\\n                          <ng-container\\r\\n                            *ngIf=\\\"\\r\\n                              procurementRequest.procStatus ==\\r\\n                                aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_SIMULATED ||\\r\\n                              procurementRequest.procStatus ==\\r\\n                                aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_PLANNED ||\\r\\n                              procurementRequest.procStatus == aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_DRAFT\\r\\n                            \\\"\\r\\n                          >\\r\\n                            {{ getComponentName() + \\\".selected\\\" | translate }}\\r\\n                          </ng-container>\\r\\n                          <ng-container\\r\\n                            *ngIf=\\\"\\r\\n                              procurementRequest.procStatus !=\\r\\n                                aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_SIMULATED &&\\r\\n                              procurementRequest.procStatus !=\\r\\n                                aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_PLANNED &&\\r\\n                              procurementRequest.procStatus != aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_DRAFT\\r\\n                            \\\"\\r\\n                          >\\r\\n                            {{ getComponentName() + \\\".booked\\\" | translate }}\\r\\n                          </ng-container>\\r\\n                        </label>\\r\\n                      </div>\\r\\n\\r\\n                      <div class=\\\"form-group flex-row--align-center\\\">\\r\\n                        <div class=\\\"form-control\\\">\\r\\n                          <div class=\\\"form-control-generic\\\" style=\\\"font-size: 3rem; padding-bottom: 1rem\\\">\\r\\n                            {{ servedNb }}\\r\\n                          </div>\\r\\n                        </div>\\r\\n                        <label class=\\\"form-label\\\">{{ getComponentName() + \\\".served\\\" | translate }}</label>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"grid-row\\\">\\r\\n        <div class=\\\"grid-cell--12\\\">\\r\\n          <div class=\\\"grid-cell grid-cell--container\\\">\\r\\n            <div class=\\\"grid-cell-header\\\">\\r\\n              <div class=\\\"grid-cell-title-container  loading-indicator\\\">\\r\\n                <h3 class=\\\"grid-cell-title\\\">\\r\\n                  {{ getComponentName() + \\\".suggestedAssets\\\" | translate }}\\r\\n                </h3>\\r\\n              </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"grid-cell-content\\\">\\r\\n              <div class=\\\"column\\\">\\r\\n                <div class=\\\"row\\\">\\r\\n                  <div class=\\\"form-group\\\">\\r\\n                    <div class=\\\"form-control aw-selectbutton-wrapper\\\">\\r\\n                      <p-selectButton\\r\\n                        [(ngModel)]=\\\"selectedcandidateAssetCategory\\\"\\r\\n                        [options]=\\\"candidateAssetCategoryList\\\"\\r\\n                        (onChange)=\\\"updateCandidateAssetTableColumns()\\\"\\r\\n                      ></p-selectButton>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                  <div class=\\\"form-group central-right-part\\\">\\r\\n                    <i class=\\\"form-label\\\" *ngIf=\\\"quantityInMovement > 0\\\">\\r\\n                      {{ quantityInMovement | formatNumber }}\\r\\n                      {{ getComponentName() + \\\".quantityInMovement\\\" | translate }}\\r\\n                    </i>\\r\\n                    <button\\r\\n                      type=\\\"button\\\"\\r\\n                      mat-raised-button\\r\\n                      (click)=\\\"openCreateTransferDialog()\\\"\\r\\n                      *ngIf=\\\"selectedcandidateAssetCategory === candidateAssetCategory.GLOBAL && remainingQuantity > 0\\\"\\r\\n                    >\\r\\n                      {{ getComponentName() + \\\".createTransfer\\\" | translate }}\\r\\n                    </button>\\r\\n                  </div>\\r\\n                </div>\\r\\n\\r\\n                <p-table\\r\\n                  [resizableColumns]=\\\"true\\\"\\r\\n                  #ptableResults\\r\\n                  class=\\\"aw-table2\\\"\\r\\n                  [columns]=\\\"materialProposedTableCols\\\"\\r\\n                  [value]=\\\"candidateAssets\\\"\\r\\n                  [scrollable]=\\\"true\\\"\\r\\n                >\\r\\n                  <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n                    <span *ngIf=\\\"!iscandidateAssetsLoading\\\"> &nbsp;</span>\\r\\n\\r\\n                    <div *ngIf=\\\"iscandidateAssetsLoading\\\" class=\\\"aw-table-loading-indicator\\\">\\r\\n                      <div class=\\\"loading-message\\\">{{ \\\"table.loadingData\\\" | translate }}</div>\\r\\n                      <div class=\\\"lds-hourglass\\\"></div>\\r\\n                    </div>\\r\\n                  </ng-template>\\r\\n\\r\\n                  <ng-template pTemplate=\\\"caption\\\">\\r\\n                    <div class=\\\"aw-table-header\\\">\\r\\n                      <div class=\\\"aw-table-global-filter\\\">\\r\\n                        <label class=\\\"aw-table-global-filter-label\\\">\\r\\n                          <i class=\\\"fa fa-fw fa-search\\\" aria-hidden=\\\"true\\\"></i>\\r\\n                        </label>\\r\\n\\r\\n                        <input\\r\\n                          #ptableResultsGlobalFilter\\r\\n                          class=\\\"aw-table-global-filter-input\\\"\\r\\n                          type=\\\"text\\\"\\r\\n                          placeholder=\\\"{{ 'table.globalFilterText' | translate }}\\\"\\r\\n                          (input)=\\\"ptableResults.filterGlobal($event.target.value, 'contains')\\\"\\r\\n                        />\\r\\n                      </div>\\r\\n\\r\\n                      <div class=\\\"table-actions\\\">\\r\\n                        <!-- Temporary until more info pn 3490\\r\\n                          <p-splitButton\\r\\n                          *ngIf=\\\"potentialUnitList && potentialUnitList.length > 0\\\"\\r\\n                          class=\\\"aw-split-btn\\\"\\r\\n                          label=\\\"{{ getComponentName() + '.potentialUnit' | translate }} ({{ potentialUnitSelected }})\\\"\\r\\n                          [model]=\\\"potentialUnitList\\\"\\r\\n                        ></p-splitButton>-->\\r\\n\\r\\n                        <div class=\\\"aw-table-icon-actions\\\" style=\\\"margin-left: 0px;\\\">\\r\\n                          <i\\r\\n                            class=\\\"fa fa-fw fa-filter aw-icon aw-icon-with-border aw-icon-with-overlay\\\"\\r\\n                            aria-hidden=\\\"true\\\"\\r\\n                            [ngClass]=\\\"{ active: filtersVisible }\\\"\\r\\n                            (click)=\\\"opFilters.toggle($event)\\\"\\r\\n                          ></i>\\r\\n                        </div>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                  </ng-template>\\r\\n\\r\\n                  <ng-template pTemplate=\\\"colgroup\\\" let-columns>\\r\\n                    <colgroup>\\r\\n                      <col *ngFor=\\\"let col of columns\\\" [ngStyle]=\\\"{ width: col.width }\\\" />\\r\\n                      <col\\r\\n                        *ngIf=\\\"selectedcandidateAssetCategory != candidateAssetCategory.GLOBAL\\\"\\r\\n                        [ngStyle]=\\\"{ width: '10%' }\\\"\\r\\n                      />\\r\\n                    </colgroup>\\r\\n                  </ng-template>\\r\\n\\r\\n                  <ng-template pTemplate=\\\"header\\\" let-columns>\\r\\n                    <tr>\\r\\n                      <th\\r\\n                        pResizableColumn\\r\\n                        *ngFor=\\\"let col of columns\\\"\\r\\n                        [ngStyle]=\\\"{ 'text-align': col.alignment }\\\"\\r\\n                        [ngSwitch]=\\\"col.field\\\"\\r\\n                      >\\r\\n                        <ng-container *ngSwitchCase=\\\"'sn'\\\">\\r\\n                          <ng-container\\r\\n                            *ngIf=\\\"\\r\\n                              procurementRequestItem?.birePn?.traceability ==\\r\\n                                aWPropertiesConstants.PN_TRACEABILITY_BY_SN ||\\r\\n                              procurementRequestItem?.birePn?.traceability ==\\r\\n                                aWPropertiesConstants.PN_TRACEABILITY_BY_PACKAGING_BATCH_AND_SN\\r\\n                            \\\"\\r\\n                          >\\r\\n                            {{ getComponentName() + \\\".sn\\\" | translate }}\\r\\n                          </ng-container>\\r\\n                          <ng-container\\r\\n                            *ngIf=\\\"\\r\\n                              procurementRequestItem?.birePn?.traceability ==\\r\\n                              aWPropertiesConstants.PN_TRACEABILITY_BY_BATCH\\r\\n                            \\\"\\r\\n                          >\\r\\n                            {{ getComponentName() + \\\".manufacturingBatch\\\" | translate }}\\r\\n                          </ng-container>\\r\\n                        </ng-container>\\r\\n\\r\\n                        <ng-container *ngSwitchDefault>\\r\\n                          {{ getComponentName() + \\\".\\\" + col.field | translate }}\\r\\n                        </ng-container>\\r\\n                      </th>\\r\\n\\r\\n                      <th\\r\\n                        *ngIf=\\\"selectedcandidateAssetCategory != candidateAssetCategory.GLOBAL\\\"\\r\\n                        style=\\\"text-align: center;\\\"\\r\\n                      >\\r\\n                        Action\\r\\n                      </th>\\r\\n                    </tr>\\r\\n                  </ng-template>\\r\\n\\r\\n                  <ng-template pTemplate=\\\"body\\\" let-rowData let-columns=\\\"columns\\\" let-rowIndex=\\\"rowIndex\\\">\\r\\n                    <tr [pSelectableRow]=\\\"rowData\\\" [pSelectableRowIndex]=\\\"rowIndex\\\">\\r\\n                      <td\\r\\n                        *ngFor=\\\"let col of columns\\\"\\r\\n                        [ngSwitch]=\\\"col.field\\\"\\r\\n                        [ngStyle]=\\\"{ 'text-align': col.alignment }\\\"\\r\\n                      >\\r\\n                        <div *ngSwitchCase=\\\"'msn'\\\">\\r\\n                          <div class=\\\"row\\\">\\r\\n                            <a class=\\\"font-bold\\\" (click)=\\\"openEquipment(rowData['topEquipment'])\\\">{{\\r\\n                              rowData[\\\"topEquipment\\\"]?.sn\\r\\n                            }}</a>\\r\\n                          </div>\\r\\n\\r\\n                          <div class=\\\"row\\\">\\r\\n                            {{ formatEquipmentStatus(rowData[\\\"topEquipment\\\"]?.equipmentDesignation) }}\\r\\n                          </div>\\r\\n                        </div>\\r\\n\\r\\n                        <div *ngSwitchCase=\\\"'locationForPicking'\\\">\\r\\n                          {{\\r\\n                            rowData[\\\"currentBidmProject\\\"]\\r\\n                              ? formatSite(rowData[\\\"currentBidmProject\\\"].bireRepairCenterCode)\\r\\n                              : rowData[\\\"topEquipmentLocation\\\"]\\r\\n                          }}\\r\\n                        </div>\\r\\n\\r\\n                        <div *ngSwitchCase=\\\"'material'\\\">\\r\\n                          <div class=\\\"row\\\">\\r\\n                            <a class=\\\"font-bold\\\" (click)=\\\"openPart(rowData)\\\">{{ rowData[\\\"pn\\\"]?.pnCode }}</a>\\r\\n                          </div>\\r\\n\\r\\n                          <div class=\\\"row\\\">\\r\\n                            <span class=\\\"italic\\\">{{ rowData[\\\"equipment\\\"]?.equipmentDesignation }}</span>\\r\\n                          </div>\\r\\n                        </div>\\r\\n\\r\\n                        <div *ngSwitchCase=\\\"'sn'\\\">\\r\\n                          <div class=\\\"row\\\">\\r\\n                            <a\\r\\n                              class=\\\"font-bold\\\"\\r\\n                              (click)=\\\"openEquipment(rowData['equipment'])\\\"\\r\\n                              *ngIf=\\\"rowData['equipment'].sn && !rowData['stockInformation']?.manufacturingBatchNumber\\\"\\r\\n                            >\\r\\n                              {{ rowData[\\\"equipment\\\"]?.sn }}\\r\\n                            </a>\\r\\n                            <a\\r\\n                              class=\\\"bold\\\"\\r\\n                              (click)=\\\"openManufacturingBatch(rowData['stockInformation'].manufacturingBatchNumber)\\\"\\r\\n                              *ngIf=\\\"!rowData['equipment'].sn && rowData['stockInformation']?.manufacturingBatchNumber\\\"\\r\\n                            >\\r\\n                              {{ rowData[\\\"stockInformation\\\"].manufacturingBatchNumber }}\\r\\n                            </a>\\r\\n                          </div>\\r\\n\\r\\n                          <div class=\\\"row\\\" *ngIf=\\\"!rowData['equipment'].batchNumber\\\">\\r\\n                            <span class=\\\"italic\\\">{{\\r\\n                              formatEquipmentStatus(rowData[\\\"equipment\\\"]?.operationalStatus)\\r\\n                            }}</span>\\r\\n                          </div>\\r\\n                        </div>\\r\\n\\r\\n                        <div *ngSwitchCase=\\\"'snBatch'\\\">\\r\\n                          <div class=\\\"row\\\">\\r\\n                            <a\\r\\n                              class=\\\"font-bold\\\"\\r\\n                              (click)=\\\"openEquipment(rowData['equipment'])\\\"\\r\\n                              *ngIf=\\\"rowData['equipment'].sn && !rowData['stockInformation']?.manufacturingBatchNumber\\\"\\r\\n                            >\\r\\n                              {{ rowData[\\\"equipment\\\"]?.sn }}\\r\\n                            </a>\\r\\n                            <a\\r\\n                              class=\\\"bold\\\"\\r\\n                              (click)=\\\"openManufacturingBatch(rowData['stockInformation'].manufacturingBatchNumber)\\\"\\r\\n                              *ngIf=\\\"!rowData['equipment'].sn && rowData['stockInformation']?.manufacturingBatchNumber\\\"\\r\\n                            >\\r\\n                              {{ rowData[\\\"stockInformation\\\"].manufacturingBatchNumber }}\\r\\n                            </a>\\r\\n                          </div>\\r\\n\\r\\n                          <div class=\\\"row\\\" *ngIf=\\\"!rowData['equipment'].batchNumber\\\">\\r\\n                            <span class=\\\"italic\\\">{{\\r\\n                              formatEquipmentStatus(rowData[\\\"equipment\\\"]?.operationalStatus)\\r\\n                            }}</span>\\r\\n                          </div>\\r\\n                        </div>\\r\\n\\r\\n                        <div *ngSwitchCase=\\\"'quantity'\\\">\\r\\n                          {{ rowData[\\\"equipment\\\"]?.quantity | formatNumber }}\\r\\n                          <ng-container *ngIf=\\\"rowData['stockInformation'].stockMvtUnit\\\">\\r\\n                            {{ rowData[\\\"stockInformation\\\"].stockMvtUnit }}\\r\\n                          </ng-container>\\r\\n                        </div>\\r\\n\\r\\n                        <div *ngSwitchCase=\\\"'batch'\\\">\\r\\n                          <div class=\\\"row\\\">\\r\\n                            <a\\r\\n                              class=\\\"font-bold\\\"\\r\\n                              (click)=\\\"\\r\\n                                rowData['equipment']?.sn\\r\\n                                  ? openEquipment(rowData['equipment'])\\r\\n                                  : openBatch(rowData['equipment'].equipmentCode)\\r\\n                              \\\"\\r\\n                              *ngIf=\\\"rowData['equipment']\\\"\\r\\n                            >\\r\\n                              {{ rowData[\\\"equipment\\\"].batchNumber }}\\r\\n                            </a>\\r\\n                          </div>\\r\\n\\r\\n                          <div class=\\\"row\\\" *ngIf=\\\"rowData['equipment'].batchNumber\\\">\\r\\n                            <span class=\\\"italic\\\">{{\\r\\n                              formatEquipmentStatus(rowData[\\\"equipment\\\"]?.operationalStatus)\\r\\n                            }}</span>\\r\\n                          </div>\\r\\n                        </div>\\r\\n\\r\\n                        <div *ngSwitchCase=\\\"'location'\\\">\\r\\n                          <div class=\\\"row\\\" *ngIf=\\\"rowData['siteReceipt']?.siteName\\\">\\r\\n                            <span class=\\\"font-bold\\\">{{ rowData[\\\"siteReceipt\\\"]?.siteName }}</span>\\r\\n                          </div>\\r\\n\\r\\n                          <div class=\\\"row\\\">\\r\\n                            <span class=\\\"italic\\\">{{ rowData[\\\"warehouseReceipt\\\"]?.whName }}</span>\\r\\n                          </div>\\r\\n                        </div>\\r\\n\\r\\n                        <div *ngSwitchCase=\\\"'technicalData'\\\">\\r\\n                          <div class=\\\"row\\\" *ngIf=\\\"rowData['potentialValue']\\\">\\r\\n                            <span style=\\\"width: 5rem;\\\">{{ getComponentName() + \\\".potential\\\" | translate }}</span>\\r\\n                            <span class=\\\"font-bold\\\"\\r\\n                              >{{ formatPotential(rowData[\\\"potentialValue\\\"]) }} {{ rowData[\\\"potentialUnit\\\"] }}</span\\r\\n                            >\\r\\n                          </div>\\r\\n\\r\\n                          <div class=\\\"row\\\" *ngIf=\\\"rowData['calendarPotential']\\\">\\r\\n                            <span style=\\\"width: 5rem;\\\">{{ getComponentName() + \\\".expiration\\\" | translate }}</span>\\r\\n                            <span class=\\\"font-bold\\\">{{\\r\\n                              rowData[\\\"calendarPotential\\\"] | date: \\\"yyyy/MM/dd\\\":\\\"\\\":translateService.currentLang\\r\\n                            }}</span>\\r\\n                          </div>\\r\\n                        </div>\\r\\n\\r\\n                        <div *ngSwitchCase=\\\"'availabilityAtDate'\\\">\\r\\n                          <div class=\\\"row\\\">\\r\\n                            <span *ngIf=\\\"isCandidateAssetServed(rowData)\\\" class=\\\"font-bold\\\">\\r\\n                              {{ getComponentName() + \\\".served\\\" | translate }}\\r\\n                            </span>\\r\\n\\r\\n                            <span\\r\\n                              class=\\\"font-bold\\\"\\r\\n                              [ngClass]=\\\"{\\r\\n                                green:\\r\\n                                  !rowData['bookingProcurementRequest'] ||\\r\\n                                  rowData['bookingProcurementRequest'].id === procurementRequest.id,\\r\\n                                yellow:\\r\\n                                  rowData['bookingProcurementRequest'] &&\\r\\n                                  rowData['bookingProcurementRequest'].id !== procurementRequest.id\\r\\n                              }\\\"\\r\\n                              *ngIf=\\\"isAvailableAtDate(rowData) && !isCandidateAssetServed(rowData)\\\"\\r\\n                            >\\r\\n                              {{ \\\"yes\\\" | translate }}\\r\\n                              <span *ngIf=\\\"rowData['plannedAvailabilityDate']\\\">\\r\\n                                ({{\\r\\n                                  rowData[\\\"plannedAvailabilityDate\\\"]\\r\\n                                    | date: \\\"yyyy/MM/dd\\\":\\\"\\\":translateService.currentLang\\r\\n                                }})\\r\\n                              </span>\\r\\n                            </span>\\r\\n                            <span class=\\\"font-bold red\\\" *ngIf=\\\"!isAvailableAtDate(rowData)\\\">\\r\\n                              {{ \\\"no\\\" | translate }}\\r\\n                              <span *ngIf=\\\"rowData['plannedAvailabilityDate']\\\">\\r\\n                                ({{\\r\\n                                  rowData[\\\"plannedAvailabilityDate\\\"]\\r\\n                                    | date: \\\"yyyy/MM/dd\\\":\\\"\\\":translateService.currentLang\\r\\n                                }})\\r\\n                              </span>\\r\\n                            </span>\\r\\n                          </div>\\r\\n\\r\\n                          <div class=\\\"row\\\">\\r\\n                            <span\\r\\n                              *ngIf=\\\"\\r\\n                                rowData['bookingProcurementRequest'] &&\\r\\n                                rowData['bookingProcurementRequest'].id === procurementRequest.id\\r\\n                              \\\"\\r\\n                              style=\\\"font-style: italic;\\\"\\r\\n                              class=\\\"green\\\"\\r\\n                            >\\r\\n                              <ng-container\\r\\n                                *ngIf=\\\"\\r\\n                                  rowData['bookingProcurementRequest']?.procStatus ==\\r\\n                                    aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_SIMULATED ||\\r\\n                                  rowData['bookingProcurementRequest']?.procStatus ==\\r\\n                                    aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_PLANNED ||\\r\\n                                  rowData['bookingProcurementRequest']?.procStatus ==\\r\\n                                    aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_DRAFT\\r\\n                                \\\"\\r\\n                              >\\r\\n                                {{ getBookedQty(rowData) | formatNumber }}\\r\\n                                {{ getComponentName() + \\\".selectedBy\\\" | translate }}\\r\\n                              </ng-container>\\r\\n                              <ng-container\\r\\n                                *ngIf=\\\"\\r\\n                                  rowData['bookingProcurementRequest']?.procStatus !=\\r\\n                                    aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_SIMULATED &&\\r\\n                                  rowData['bookingProcurementRequest']?.procStatus !=\\r\\n                                    aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_PLANNED &&\\r\\n                                  rowData['bookingProcurementRequest']?.procStatus !=\\r\\n                                    aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_DRAFT\\r\\n                                \\\"\\r\\n                              >\\r\\n                                {{ getBookedQty(rowData) | formatNumber }}\\r\\n                                {{ getComponentName() + \\\".bookedBy\\\" | translate }}\\r\\n                              </ng-container>\\r\\n\\r\\n                              <a (click)=\\\"openTransferOrder(rowData['transferOrder'])\\\">{{\\r\\n                                rowData[\\\"transferOrder\\\"]?.torCode\\r\\n                              }}</a>\\r\\n                            </span>\\r\\n\\r\\n                            <span\\r\\n                              *ngIf=\\\"\\r\\n                                rowData['bookingProcurementRequest'] &&\\r\\n                                rowData['bookingProcurementRequest'].id !== procurementRequest.id &&\\r\\n                                (!rowData['warehouseReceipt'] ||\\r\\n                                  rowData['warehouseReceipt'] !==\\r\\n                                    aWPropertiesConstants.MM_WAREHOUSE_TYPE_DEPLOYEMENT_BATCH)\\r\\n                              \\\"\\r\\n                              style=\\\"font-style: italic;\\\"\\r\\n                              class=\\\"yellow\\\"\\r\\n                            >\\r\\n                              <ng-container\\r\\n                                *ngIf=\\\"\\r\\n                                  rowData['bookingProcurementRequest']?.procStatus ==\\r\\n                                    aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_SIMULATED ||\\r\\n                                  rowData['bookingProcurementRequest']?.procStatus ==\\r\\n                                    aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_PLANNED ||\\r\\n                                  rowData['bookingProcurementRequest']?.procStatus ==\\r\\n                                    aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_DRAFT\\r\\n                                \\\"\\r\\n                              >\\r\\n                                {{ getComponentName() + \\\".selectedFor\\\" | translate }}\\r\\n                              </ng-container>\\r\\n                              <ng-container\\r\\n                                *ngIf=\\\"\\r\\n                                  rowData['bookingProcurementRequest']?.procStatus !=\\r\\n                                    aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_SIMULATED &&\\r\\n                                  rowData['bookingProcurementRequest']?.procStatus !=\\r\\n                                    aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_PLANNED &&\\r\\n                                  rowData['bookingProcurementRequest']?.procStatus !=\\r\\n                                    aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_DRAFT\\r\\n                                \\\"\\r\\n                              >\\r\\n                                {{ getComponentName() + \\\".bookedFor\\\" | translate }}\\r\\n                              </ng-container>\\r\\n\\r\\n                              <a (click)=\\\"openProcurementRequest(rowData['bookingProcurementRequest'])\\\">\\r\\n                                {{ rowData[\\\"bookingProcurementRequest\\\"].procCode }}\\r\\n                              </a>\\r\\n                            </span>\\r\\n\\r\\n                            <span\\r\\n                              *ngIf=\\\"\\r\\n                                rowData['bookingProcurementRequest'] &&\\r\\n                                rowData['bookingProcurementRequest'].id !== procurementRequest.id &&\\r\\n                                rowData['warehouseReceipt'] ===\\r\\n                                  aWPropertiesConstants.MM_WAREHOUSE_TYPE_DEPLOYEMENT_BATCH\\r\\n                              \\\"\\r\\n                              style=\\\"font-style: italic;\\\"\\r\\n                              class=\\\"yellow\\\"\\r\\n                            >\\r\\n                              {{ getComponentName() + \\\".bookedForDeploymentBatch\\\" | translate }}\\r\\n                            </span>\\r\\n                          </div>\\r\\n                        </div>\\r\\n\\r\\n                        <div *ngSwitchCase=\\\"'satisfactionRate'\\\">\\r\\n                          <div class=\\\"row\\\" *ngIf=\\\"!isCandidateAssetServed(rowData)\\\">\\r\\n                            <div style=\\\"width: 100%; cursor: pointer;\\\">\\r\\n                              <p-progressBar\\r\\n                                [ngClass]=\\\"{\\r\\n                                  green: calculateSatisfactionRate(rowData) == 100,\\r\\n                                  yellow: calculateSatisfactionRate(rowData) < 100,\\r\\n                                  red: calculateSatisfactionRate(rowData) < 40\\r\\n                                }\\\"\\r\\n                                [value]=\\\"calculateSatisfactionRate(rowData)\\\"\\r\\n                                (click)=\\\"openSatisfactionRateDetails(rowData)\\\"\\r\\n                              ></p-progressBar>\\r\\n                            </div>\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </td>\\r\\n\\r\\n                      <td\\r\\n                        *ngIf=\\\"selectedcandidateAssetCategory != candidateAssetCategory.GLOBAL\\\"\\r\\n                        style=\\\"text-align: center;\\\"\\r\\n                      >\\r\\n                        <button\\r\\n                          style=\\\"margin: 0 auto\\\"\\r\\n                          type=\\\"button\\\"\\r\\n                          class=\\\"btn-with-spinner\\\"\\r\\n                          mat-raised-button\\r\\n                          (click)=\\\"bookCandidateAsset(rowData)\\\"\\r\\n                          *ngIf=\\\"\\r\\n                            !rowData['bookingProcurementRequest'] &&\\r\\n                            isSelectBtnVisible() &&\\r\\n                            !isCandidateAssetServed(rowData) &&\\r\\n                            selectedcandidateAssetCategory != candidateAssetCategory.PICKING\\r\\n                          \\\"\\r\\n                        >\\r\\n                          <span class=\\\"lds-hourglass\\\" *ngIf=\\\"rowData['_bookCandidateAssetLoading']\\\"></span>\\r\\n                          {{ getComponentName() + \\\".select\\\" | translate }}\\r\\n                        </button>\\r\\n\\r\\n                        <button\\r\\n                          style=\\\"margin: 0 auto\\\"\\r\\n                          type=\\\"button\\\"\\r\\n                          (click)=\\\"cancelBooking(rowData)\\\"\\r\\n                          *ngIf=\\\"\\r\\n                            rowData['bookingProcurementRequest'] &&\\r\\n                            rowData['bookingProcurementRequest'].id == procurementRequest.id &&\\r\\n                            selectedcandidateAssetCategory != candidateAssetCategory.PICKING &&\\r\\n                            isCancelBookingBtnVisible(rowData)\\r\\n                          \\\"\\r\\n                          mat-raised-button\\r\\n                          color=\\\"warn\\\"\\r\\n                        >\\r\\n                          {{ getComponentName() + \\\".cancel\\\" | translate }}\\r\\n                        </button>\\r\\n\\r\\n                        <button\\r\\n                          style=\\\"margin: 0 auto\\\"\\r\\n                          type=\\\"button\\\"\\r\\n                          (click)=\\\"cancelPicking(rowData)\\\"\\r\\n                          *ngIf=\\\"\\r\\n                            rowData['currentBidmProject'] &&\\r\\n                            selectedcandidateAssetCategory == candidateAssetCategory.PICKING\\r\\n                          \\\"\\r\\n                          mat-raised-button\\r\\n                          color=\\\"warn\\\"\\r\\n                        >\\r\\n                          {{ getComponentName() + \\\".cancel\\\" | translate }}\\r\\n                        </button>\\r\\n\\r\\n                        <button\\r\\n                          style=\\\"margin: 0 auto\\\"\\r\\n                          type=\\\"button\\\"\\r\\n                          class=\\\"btn-with-spinner\\\"\\r\\n                          mat-raised-button\\r\\n                          (click)=\\\"pick(rowData)\\\"\\r\\n                          *ngIf=\\\"\\r\\n                            !rowData['currentBidmProject'] &&\\r\\n                            selectedcandidateAssetCategory == candidateAssetCategory.PICKING\\r\\n                          \\\"\\r\\n                        >\\r\\n                          <span class=\\\"lds-hourglass\\\" *ngIf=\\\"saving\\\"></span>\\r\\n                          {{ getComponentName() + \\\".pick\\\" | translate }}\\r\\n                        </button>\\r\\n\\r\\n                        <button\\r\\n                          style=\\\"margin: 0 auto\\\"\\r\\n                          type=\\\"button\\\"\\r\\n                          mat-raised-button\\r\\n                          color=\\\"accent\\\"\\r\\n                          *ngIf=\\\"\\r\\n                            rowData['bookingProcurementRequest'] &&\\r\\n                            rowData['bookingProcurementRequest'].id != procurementRequest.id &&\\r\\n                            (rowData['bookingProcurementRequest'].procStatus ==\\r\\n                              aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_RELEASED ||\\r\\n                              rowData['bookingProcurementRequest'].procStatus ==\\r\\n                                aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_ONGOING) &&\\r\\n                            rowData['_hasPreemptionRight'] &&\\r\\n                            isSelectBtnVisible()\\r\\n                          \\\"\\r\\n                          (click)=\\\"confirmPreemptCandidateAsset(rowData)\\\"\\r\\n                        >\\r\\n                          {{ getComponentName() + \\\".preempter\\\" | translate }}\\r\\n                        </button>\\r\\n\\r\\n                        <button\\r\\n                          style=\\\"margin: 0 auto\\\"\\r\\n                          type=\\\"button\\\"\\r\\n                          mat-raised-button\\r\\n                          *ngIf=\\\"\\r\\n                            rowData['bookingProcurementRequest'] &&\\r\\n                            rowData['bookingProcurementRequest'].id != procurementRequest.id &&\\r\\n                            rowData['bookingProcurementRequest'].procStatus !=\\r\\n                              aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_RELEASED &&\\r\\n                            rowData['bookingProcurementRequest'].procStatus !=\\r\\n                              aWPropertiesConstants.PROCUREMENT_REQUEST_STATUS_ONGOING &&\\r\\n                            isSelectBtnVisible()\\r\\n                          \\\"\\r\\n                          (click)=\\\"preemptCandidateAsset(rowData)\\\"\\r\\n                        >\\r\\n                          {{ getComponentName() + \\\".preempter\\\" | translate }}\\r\\n                        </button>\\r\\n                      </td>\\r\\n                    </tr>\\r\\n                  </ng-template>\\r\\n                </p-table>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <!-- <aw-dialog-image *ngIf=\\\"openImageDialog\\\" [imgSrc]=\\\"dialogImgSrc\\\"></aw-dialog-image> -->\\r\\n  <aw-change-customer-popup-form\\r\\n    [(display)]=\\\"openChangeCustomerDialog\\\"\\r\\n    *ngIf=\\\"openChangeCustomerDialog\\\"\\r\\n    [procurementRequest]=\\\"procurementRequest\\\"\\r\\n  ></aw-change-customer-popup-form>\\r\\n\\r\\n  <aw-dialog-satisfaction-rate\\r\\n    [(display)]=\\\"showSatisfactionRateDialog\\\"\\r\\n    *ngIf=\\\"showSatisfactionRateDialog\\\"\\r\\n    [procurementRequest]=\\\"procurementRequest\\\"\\r\\n    [candidateAsset]=\\\"selectedCandidateAsset\\\"\\r\\n  ></aw-dialog-satisfaction-rate>\\r\\n\\r\\n  <aw-change-warehouse-and-quantity-popup-form\\r\\n    [(display)]=\\\"showChangeSupplierAndQuantityDialog\\\"\\r\\n    *ngIf=\\\"showChangeSupplierAndQuantityDialog\\\"\\r\\n    [procurementRequest]=\\\"procurementRequest\\\"\\r\\n    [procurementRequestItem]=\\\"procurementRequestItem\\\"\\r\\n    [oldQuantity]=\\\"notServedNb\\\"\\r\\n    [totalQuantity]=\\\"notServedNb + bookedNb + servedNb\\\"\\r\\n    (onValidated)=\\\"reload()\\\"\\r\\n  ></aw-change-warehouse-and-quantity-popup-form>\\r\\n\\r\\n  <aw-transfer-order-popup\\r\\n    *ngIf=\\\"showCreateTransferOrderDialog\\\"\\r\\n    [(display)]=\\\"showCreateTransferOrderDialog\\\"\\r\\n    [pn]=\\\"procurementRequestItem.birePn\\\"\\r\\n    [createTransferOrderInput]=\\\"this.createTransferOrderInput\\\"\\r\\n    (onValidate)=\\\"onCreateTransferOrder()\\\"\\r\\n  >\\r\\n  </aw-transfer-order-popup>\\r\\n</div>\\r\\n<p-overlayPanel #opFilters class=\\\"aw-overlay\\\" (onShow)=\\\"filtersVisible = true\\\" (onHide)=\\\"filtersVisible = false\\\">\\r\\n  <div class=\\\"grid-cell-content grid-cell-content-with-section\\\">\\r\\n    <div class=\\\"col\\\">\\r\\n      <div class=\\\"section\\\">\\r\\n        <h4 class=\\\"section-title\\\">{{ getComponentName() + \\\".location\\\" | translate }}</h4>\\r\\n\\r\\n        <div class=\\\"section-content\\\">\\r\\n          <div class=\\\"row\\\">\\r\\n            <div class=\\\"form-group\\\" style=\\\"min-width: 350px;\\\">\\r\\n              <label class=\\\"form-label\\\"> {{ getComponentName() + \\\".site\\\" | translate }} </label>\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <p-dropdown\\r\\n                  class=\\\"aw-dropdown fixed-width\\\"\\r\\n                  placeholder=\\\"&nbsp;\\\"\\r\\n                  [showClear]=\\\"true\\\"\\r\\n                  [(ngModel)]=\\\"searchFilterObject.site\\\"\\r\\n                  [options]=\\\"siteList\\\"\\r\\n                  (onChange)=\\\"loadLocationWarehouses()\\\"\\r\\n                ></p-dropdown>\\r\\n              </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label\\r\\n                class=\\\"form-label\\\"\\r\\n                *ngIf=\\\"locationWarehouseType === aWPropertiesConstants.WAREHOUSE_CATEGORY_WAREHOUSE\\\"\\r\\n              >\\r\\n                {{ componentData.componentId + \\\".warehouse\\\" | translate }}\\r\\n              </label>\\r\\n              <label\\r\\n                class=\\\"form-label\\\"\\r\\n                *ngIf=\\\"locationWarehouseType === aWPropertiesConstants.WAREHOUSE_CATEGORY_WORKSHOP\\\"\\r\\n              >\\r\\n                {{ componentData.componentId + \\\".workshop\\\" | translate }}\\r\\n              </label>\\r\\n\\r\\n              <div class=\\\"form-control \\\">\\r\\n                <p-selectButton\\r\\n                  [options]=\\\"logisticsTypeList\\\"\\r\\n                  [(ngModel)]=\\\"locationWarehouseType\\\"\\r\\n                  (onChange)=\\\"loadLocationWarehouses()\\\"\\r\\n                ></p-selectButton>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\" style=\\\"min-width: 400px;\\\">\\r\\n              <label class=\\\"form-label\\\">&nbsp;</label>\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <p-dropdown\\r\\n                  class=\\\"aw-dropdown fixed-width\\\"\\r\\n                  placeholder=\\\"&nbsp;\\\"\\r\\n                  [showClear]=\\\"true\\\"\\r\\n                  [(ngModel)]=\\\"searchFilterObject.warehouse\\\"\\r\\n                  [options]=\\\"warehouseList\\\"\\r\\n                ></p-dropdown>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"section\\\">\\r\\n        <div class=\\\"section-content\\\">\\r\\n          <div class=\\\"row\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"form-label\\\"> {{ getComponentName() + \\\".snFilter\\\" | translate }} </label>\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <input class=\\\"aw-input\\\" name=\\\"sn\\\" type=\\\"text\\\" [(ngModel)]=\\\"searchFilterObject.sn\\\" />\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"form-label\\\"> {{ getComponentName() + \\\".status\\\" | translate }} </label>\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <p-dropdown\\r\\n                  class=\\\"aw-dropdown fixed-width\\\"\\r\\n                  [options]=\\\"equipmentStatusListFilter\\\"\\r\\n                  [showClear]=\\\"true\\\"\\r\\n                  placeholder=\\\"&nbsp;\\\"\\r\\n                  [(ngModel)]=\\\"searchFilterObject.status\\\"\\r\\n                >\\r\\n                </p-dropdown>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"section\\\">\\r\\n        <h4 class=\\\"section-title\\\">{{ getComponentName() + \\\".satisfactionRate\\\" | translate }}</h4>\\r\\n        <div class=\\\"section-content\\\">\\r\\n          <div class=\\\"form-group\\\">\\r\\n            <div class=\\\"row\\\" style=\\\"padding-bottom: 5px;\\\">\\r\\n              <div class=\\\"flex--2\\\">\\r\\n                <div class=\\\"form-control\\\">\\r\\n                  <label class=\\\"form-label\\\"> {{ getComponentName() + \\\".sameSiteFilter\\\" | translate }} </label>\\r\\n                </div>\\r\\n              </div>\\r\\n              <div class=\\\"flex--1\\\">\\r\\n                <div class=\\\"form-control aw-selectbutton-wrapper\\\">\\r\\n                  <p-selectButton\\r\\n                    [(ngModel)]=\\\"searchFilterObject.sameSite\\\"\\r\\n                    [options]=\\\"satifactionRateStatus\\\"\\r\\n                  ></p-selectButton>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"row\\\" style=\\\"padding-bottom: 5px;\\\">\\r\\n              <div class=\\\"flex--2\\\">\\r\\n                <div class=\\\"form-control\\\">\\r\\n                  <label class=\\\"form-label\\\"> {{ getComponentName() + \\\".bookingStatusFilter\\\" | translate }} </label>\\r\\n                </div>\\r\\n              </div>\\r\\n              <div class=\\\"flex--1\\\">\\r\\n                <div class=\\\"form-control aw-selectbutton-wrapper\\\">\\r\\n                  <p-selectButton\\r\\n                    [(ngModel)]=\\\"searchFilterObject.bookingStatus\\\"\\r\\n                    [options]=\\\"satifactionRateStatus\\\"\\r\\n                  ></p-selectButton>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"row\\\" style=\\\"padding-bottom: 5px;\\\">\\r\\n              <div class=\\\"flex--2\\\">\\r\\n                <div class=\\\"form-control\\\">\\r\\n                  <label class=\\\"form-label\\\"> {{ getComponentName() + \\\".availableAtDateFilter\\\" | translate }} </label>\\r\\n                </div>\\r\\n              </div>\\r\\n              <div class=\\\"flex--1\\\">\\r\\n                <div class=\\\"form-control aw-selectbutton-wrapper\\\">\\r\\n                  <p-selectButton\\r\\n                    [(ngModel)]=\\\"searchFilterObject.availableAtDate\\\"\\r\\n                    [options]=\\\"satifactionRateStatus\\\"\\r\\n                  ></p-selectButton>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"row\\\" style=\\\"padding-bottom: 5px;\\\">\\r\\n              <div class=\\\"flex--2\\\">\\r\\n                <div class=\\\"form-control\\\">\\r\\n                  <label class=\\\"form-label\\\"> {{ getComponentName() + \\\".potentialFilter\\\" | translate }} </label>\\r\\n                </div>\\r\\n              </div>\\r\\n              <div class=\\\"flex--1\\\">\\r\\n                <div class=\\\"form-control aw-selectbutton-wrapper\\\">\\r\\n                  <p-selectButton\\r\\n                    [(ngModel)]=\\\"searchFilterObject.potential\\\"\\r\\n                    [options]=\\\"satifactionRateStatus\\\"\\r\\n                  ></p-selectButton>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"row\\\" style=\\\"padding-bottom: 5px;\\\">\\r\\n              <div class=\\\"flex--2\\\">\\r\\n                <div class=\\\"form-control\\\">\\r\\n                  <label class=\\\"form-label\\\"> {{ getComponentName() + \\\".calendarPotentialFilter\\\" | translate }} </label>\\r\\n                </div>\\r\\n              </div>\\r\\n              <div class=\\\"flex--1\\\">\\r\\n                <div class=\\\"form-control aw-selectbutton-wrapper\\\">\\r\\n                  <p-selectButton\\r\\n                    [(ngModel)]=\\\"searchFilterObject.calendarPotential\\\"\\r\\n                    [options]=\\\"satifactionRateStatus\\\"\\r\\n                  ></p-selectButton>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"row\\\" style=\\\"padding-bottom: 5px;\\\">\\r\\n              <div class=\\\"flex--2\\\">\\r\\n                <div class=\\\"form-control\\\">\\r\\n                  <label class=\\\"form-label\\\">\\r\\n                    {{ getComponentName() + \\\".noUnconfirmedFailureFilter\\\" | translate }}\\r\\n                  </label>\\r\\n                </div>\\r\\n              </div>\\r\\n              <div class=\\\"flex--1\\\">\\r\\n                <div class=\\\"form-control aw-selectbutton-wrapper\\\">\\r\\n                  <p-selectButton\\r\\n                    [(ngModel)]=\\\"searchFilterObject.noUnconfirmedFailure\\\"\\r\\n                    [options]=\\\"satifactionRateStatus\\\"\\r\\n                  ></p-selectButton>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"row action-list\\\" style=\\\"justify-content: flex-end;\\\">\\r\\n      <button type=\\\"button\\\" mat-raised-button (click)=\\\"opFilters.hide(); filtersVisible = false; resetFilters()\\\">\\r\\n        {{ \\\"global.reset\\\" | translate }}\\r\\n      </button>\\r\\n\\r\\n      <button\\r\\n        type=\\\"button\\\"\\r\\n        mat-raised-button\\r\\n        (click)=\\\"opFilters.hide(); filtersVisible = false; filterSearchResult()\\\"\\r\\n        color=\\\"primary\\\"\\r\\n        style=\\\"margin-left: 8px;\\\"\\r\\n      >\\r\\n        {{ \\\"global.filter\\\" | translate }}\\r\\n      </button>\\r\\n    </div>\\r\\n  </div>\\r\\n</p-overlayPanel>\\r\\n\"","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as moment from 'moment';\r\nimport { MenuItem, SelectItem } from 'primeng/api';\r\nimport { Observable, forkJoin, of } from 'rxjs';\r\nimport { concatMap, finalize, map } from 'rxjs/operators';\r\n\r\nimport { AWPropertiesConstants } from '../../../../shared/constants/aw-properties-constants';\r\nimport { BidoFunctionTypeConstants } from '../../../../shared/constants/bido-function-type-constants';\r\nimport { BidtStockMvtConstants } from '../../../../shared/constants/bidt-stock-mvt-constants';\r\nimport { BidtStockMvtTypeConstant } from '../../../../shared/constants/bidt-stock-mvt-type-constants';\r\nimport { ComponentConstants } from '../../../../shared/constants/component-constants';\r\nimport { GenericPropertyConstants } from '../../../../shared/constants/generic-property-constants';\r\nimport { ComponentOpenMode } from '../../../../shared/enums/component-open-mode.enum';\r\nimport { ConfirmationService } from '../../../../shared/services/confirmation.service';\r\nimport { DateService } from '../../../../shared/services/date.service';\r\nimport { FavoriteService } from '../../../../shared/services/favorite.service';\r\nimport { FileService } from '../../../../shared/services/file.service';\r\nimport { LoaderService } from '../../../../shared/services/loader.service';\r\nimport { MessageService } from '../../../../shared/services/message.service';\r\nimport { PropertiesService } from '../../../../shared/services/properties.service';\r\nimport { SerializationService } from '../../../../shared/services/serialization.service';\r\nimport { SessionService } from '../../../../shared/services/session.service';\r\nimport { TabService } from '../../../../shared/services/tab.service';\r\nimport { CalculateRemainingQuantityInput } from '../../../../shared/types/api-input-types/logistic/calculate-remaining-quantity-input';\r\nimport { CalculateProcurementRequestRemainingQuantity } from '../../../../shared/types/api-output-types/calculate-procurement-request-remaining-quantity';\r\nimport { BidoEquipmentDTO } from '../../../../shared/types/api-types/bido-equipment-dto.interface';\r\nimport { BidtProcReqItemDTO } from '../../../../shared/types/api-types/bidt-proc-req-item-dto.interface';\r\nimport { BidtProcurementRequestDTO } from '../../../../shared/types/api-types/bidt-procurement-request-dto.interface';\r\nimport { BidtSiteDTO } from '../../../../shared/types/api-types/bidt-site-dto.interface';\r\nimport { BidtStockMvtDTO } from '../../../../shared/types/api-types/bidt-stock-mvt-dto.interface';\r\nimport { BidtStockMvtIdDTO } from '../../../../shared/types/api-types/bidt-stock-mvt-id-dto.interface';\r\nimport { BidtTransferOrderDTO } from '../../../../shared/types/api-types/bidt-transfer-order-dto.interface';\r\nimport { BidtWarehouseDTO } from '../../../../shared/types/api-types/bidt-warehouse-dto.interface';\r\nimport { BirePnMeasureDTO } from '../../../../shared/types/api-types/bire-pn-measure-dto.interface';\r\nimport { CandidateAssetDTO } from '../../../../shared/types/api-types/candidate-asset-dto.interface';\r\nimport { FormPageComponent } from '../../../../shared/types/form-page-component';\r\nimport { LabelValue } from '../../../../shared/types/label-value.interface';\r\nimport { PageComponentData } from '../../../../shared/types/page-component-data.interface';\r\nimport { TableColumn } from '../../../../shared/types/table-column.interface';\r\nimport { BidoEquipmentUtils } from '../../../../shared/utils/bido-equipment-utils';\r\nimport { ImageUtils } from '../../../../shared/utils/image-utils';\r\nimport { ListUtils } from '../../../../shared/utils/list-utils';\r\nimport { NumberUtils } from '../../../../shared/utils/number-utils';\r\nimport { ObjectUtils } from '../../../../shared/utils/object-utils';\r\nimport { StringUtils } from '../../../../shared/utils/string-utils';\r\nimport { LogisticsService } from '../../logistics.service';\r\nimport { ProcurementRequestSearchService } from '../../procurement-request/search/procurement-request-search.service';\r\nimport { MaterialProposedTableRow } from '../shared/material-proposed-table-row.interface';\r\n\r\nimport { MaterialRequestManagementFormService } from './material-request-management-form.service';\r\n\r\ninterface SearchFilterInput {\r\n  status?: string;\r\n  site?: number;\r\n  warehouse?: number;\r\n  sn?: string;\r\n  sameSite?: SatisfactoryRateFilterState;\r\n  availableAtDate?: SatisfactoryRateFilterState;\r\n  potential?: SatisfactoryRateFilterState;\r\n  calendarPotential?: SatisfactoryRateFilterState;\r\n  bookingStatus?: SatisfactoryRateFilterState;\r\n  noUnconfirmedFailure?: SatisfactoryRateFilterState;\r\n}\r\n\r\nexport interface CreateTransferOrderInput {\r\n  procurmentRequest: BidtProcurementRequestDTO;\r\n  procReqItem: BidtProcReqItemDTO;\r\n  notServedQuantity: number;\r\n}\r\n\r\nexport enum CandidateAssetCategory {\r\n  GLOBAL,\r\n  LOCAL,\r\n  PICKING,\r\n  WAREHOUSE\r\n}\r\n\r\nexport enum SatisfactoryRateFilterState {\r\n  UNDEFINED,\r\n  YES,\r\n  NO\r\n}\r\n\r\n@Component({\r\n  selector: 'aw-material-request-management-form',\r\n  styleUrls: ['../shared/style.scss'],\r\n  templateUrl: './material-request-management-form.component.html'\r\n})\r\nexport class MaterialRequestManagementFormComponent extends FormPageComponent<PageComponentData> implements OnInit {\r\n  public readonly CRITICITY_GREEN = 'green';\r\n  public readonly CRITICITY_RED = 'red';\r\n  public readonly CRITICITY_YELLOW = 'yellow';\r\n\r\n  public readonly aWPropertiesConstants: typeof AWPropertiesConstants;\r\n  public readonly componentOpenMode: typeof ComponentOpenMode;\r\n  public readonly candidateAssetCategory: typeof CandidateAssetCategory;\r\n  public readonly bidoFunctionTypeConstants: typeof BidoFunctionTypeConstants;\r\n\r\n  public procurementRequest: BidtProcurementRequestDTO;\r\n  public procurementRequestItem: BidtProcReqItemDTO;\r\n  public servedNb: number;\r\n  public bookedNb: number;\r\n  public notServedNb: number;\r\n\r\n  public subtitle: string;\r\n  public searchFilterObject: SearchFilterInput;\r\n  public materialProposedTableCols: TableColumn[];\r\n  public materialProposedTable: MaterialProposedTableRow[];\r\n  public statusList: SelectItem[];\r\n  public siteList: SelectItem[];\r\n  public warehouseList: SelectItem[];\r\n  public openChangeCustomerDialog: boolean;\r\n  public dataSupplier: object;\r\n  public openImageDialog: boolean;\r\n  public filtersVisible: boolean;\r\n  public logisticsTypeList: SelectItem[];\r\n  public locationWarehouseType: string | undefined;\r\n  public satifactionRateStatus: SelectItem[];\r\n\r\n  public candidateAssetCategoryList: SelectItem[];\r\n  public selectedcandidateAssetCategory: CandidateAssetCategory;\r\n  public itemIllustration: SafeResourceUrl;\r\n  public potentialUnitList: MenuItem[];\r\n  public potentialUnitSelected: string;\r\n\r\n  public equipmentStatusList: LabelValue<string>[];\r\n  public equipmentStatusListFilter: LabelValue<string>[];\r\n\r\n  public candidateAssetsSrc: CandidateAssetDTO[];\r\n  public candidateAssets: CandidateAssetDTO[];\r\n  public selectedCandidateAsset: CandidateAssetDTO | undefined;\r\n  public iscandidateAssetsLoading: boolean;\r\n  public saving: boolean;\r\n\r\n  private sites: BidtSiteDTO[];\r\n\r\n  public showSatisfactionRateDialog: boolean;\r\n\r\n  public formattedRequestedPotential: string;\r\n\r\n  public isLoading: boolean;\r\n\r\n  public workPackageAsset: BidoEquipmentDTO | undefined;\r\n  public workPackageAssetName: string;\r\n\r\n  private servedStockMvts: BidtStockMvtDTO[];\r\n\r\n  public showChangeSupplierAndQuantityDialog: boolean;\r\n\r\n  public currentSupplierWarehouse: BidtWarehouseDTO;\r\n  public isProRecSupplierWarehouse: boolean;\r\n\r\n  // transfer order popup variables\r\n  public showCreateTransferOrderDialog: boolean;\r\n  public createTransferOrderInput: CreateTransferOrderInput;\r\n  public quantityInMovement: number;\r\n  public remainingQuantity: number;\r\n\r\n  /* HTML references ***********************************************************/\r\n\r\n  @ViewChild('resultsContainerAnchor')\r\n  public resultsContainerAnchor: ElementRef;\r\n\r\n  /* ***************************************************************************/\r\n\r\n  public constructor(\r\n    favoriteService: FavoriteService,\r\n    loaderService: LoaderService,\r\n    messageService: MessageService,\r\n    serializationService: SerializationService,\r\n    tabService: TabService,\r\n    public sessionService: SessionService,\r\n    public dateService: DateService,\r\n    public translateService: TranslateService,\r\n    private readonly confirmationService: ConfirmationService,\r\n    private readonly domSanitizer: DomSanitizer,\r\n    private readonly fileService: FileService,\r\n    private readonly logisticsService: LogisticsService,\r\n    private readonly propertiesService: PropertiesService,\r\n    private readonly materialRequestManagementFormService: MaterialRequestManagementFormService,\r\n    private readonly procurementRequestSearchService: ProcurementRequestSearchService\r\n  ) {\r\n    super(ComponentOpenMode.Read, favoriteService, loaderService, messageService, serializationService, tabService);\r\n\r\n    this.aWPropertiesConstants = AWPropertiesConstants;\r\n    this.componentOpenMode = ComponentOpenMode;\r\n    this.candidateAssetCategory = CandidateAssetCategory;\r\n    this.bidoFunctionTypeConstants = BidoFunctionTypeConstants;\r\n\r\n    this.init();\r\n    this.initMaterialProposedTableCols();\r\n\r\n    this.materialRequestManagementFormService.findAllSite().subscribe((sites) => {\r\n      this.sites = sites;\r\n    });\r\n\r\n    this.propertiesService.getValue(GenericPropertyConstants.PROCUREMENT_REQUEST_STATUS_MAP).subscribe((statusList) => {\r\n      this.statusList = ListUtils.orEmpty(statusList).sort((s1, s2) => s1.label.localeCompare(s2.label));\r\n    });\r\n\r\n    this.propertiesService.getValue(GenericPropertyConstants.OPERATIONAL_STATUS_MAP).subscribe((statusList) => {\r\n      this.equipmentStatusList = ListUtils.orEmpty(statusList).sort((s1, s2) => s1.label.localeCompare(s2.label));\r\n    });\r\n\r\n    this.materialRequestManagementFormService.getOperationalStatusMap(' ').subscribe((statusList) => {\r\n      this.equipmentStatusListFilter = ListUtils.orEmpty(statusList).sort((s1, s2) => s1.label.localeCompare(s2.label));\r\n    });\r\n\r\n    this.procurementRequestSearchService.getWarehouseCategoryMap().subscribe((res) => {\r\n      if (res && res.length) {\r\n        this.logisticsTypeList = res.sort((s1, s2) => s1.value.localeCompare(s2.value));\r\n        this.locationWarehouseType = this.logisticsTypeList[0].value;\r\n      }\r\n    });\r\n\r\n    this.procurementRequestSearchService.findAllBireSite().subscribe({\r\n      next: (sites) => {\r\n        this.siteList = ListUtils.orEmpty(sites)\r\n          .filter((site) => !!site.siteId && !StringUtils.isNullOrEmpty(site.siteName))\r\n          .map((site) => {\r\n            return {\r\n              label: `${site.siteCode} - ${site.siteName}`,\r\n              value: site.siteId as number\r\n            };\r\n          })\r\n          .sort((s1, s2) => s1.label.localeCompare(s2.label));\r\n      }\r\n    });\r\n    const localLevelKey = this.getTranslateKey('localLevel');\r\n    const globalLevelKey = this.getTranslateKey('globalLevel');\r\n    const pickingKey = this.getTranslateKey('pickingOnAircraft');\r\n    const warehouseLevelKey = this.getTranslateKey('warehouseLevel');\r\n    const yesKey = this.getTranslateKey('yes');\r\n    const noKey = this.getTranslateKey('no');\r\n    const undefinedKey = this.getTranslateKey('undefined');\r\n    this.translateService\r\n      .get([localLevelKey, globalLevelKey, pickingKey, warehouseLevelKey, yesKey, noKey, undefinedKey])\r\n      .subscribe({\r\n        next: (results: { [key: string]: string }) => {\r\n          const localLevelLabel = !!results ? results[localLevelKey] : 'Local';\r\n          const globalLevelLabel = !!results ? results[globalLevelKey] : 'Global';\r\n          const pickingLabel = !!results ? results[pickingKey] : 'Picking On Aircraft';\r\n          const warehouseLevelLabel = !!results ? results[warehouseLevelKey] : 'Warehouse';\r\n          this.candidateAssetCategoryList = [\r\n            { label: warehouseLevelLabel, value: CandidateAssetCategory.WAREHOUSE },\r\n            { label: localLevelLabel, value: CandidateAssetCategory.LOCAL },\r\n            { label: globalLevelLabel, value: CandidateAssetCategory.GLOBAL },\r\n            { label: pickingLabel, value: CandidateAssetCategory.PICKING }\r\n          ];\r\n          const yesLabel = !!results ? results[yesKey] : 'Yes';\r\n          const noLabel = !!results ? results[noKey] : 'No';\r\n          const undefinedLabel = !!results ? results[undefinedKey] : 'Undefined';\r\n          this.satifactionRateStatus = [\r\n            { label: undefinedLabel, value: SatisfactoryRateFilterState.UNDEFINED },\r\n            { label: yesLabel, value: SatisfactoryRateFilterState.YES },\r\n            { label: noLabel, value: SatisfactoryRateFilterState.NO }\r\n          ];\r\n        }\r\n      });\r\n  }\r\n\r\n  public getComponentName(): string {\r\n    return ComponentConstants.LOG_MATERIAL_REQUEST_MANAGEMENT_FORM;\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n    super.ngOnInit();\r\n\r\n    this.updateOpenMode(this.componentData.openMode);\r\n\r\n    this.load();\r\n  }\r\n\r\n  public reload(): void {\r\n    this.load();\r\n  }\r\n\r\n  private load(): void {\r\n    if (!this.isCreateOpenMode && this.componentData.objectId) {\r\n      const { prId, prItemId } = this.serializationService.deserialize(this.componentData.objectId) as {\r\n        prId: number;\r\n        prItemId: number;\r\n      };\r\n\r\n      this.logisticsService.findProcurementRequestByIdWithAllObjects({ id: prId }).subscribe((procurementRequest) => {\r\n        const matchingProcurementRequestItem = ListUtils.orEmpty(procurementRequest.bidtProcReqItems).find(\r\n          (procurementRequestItem) => procurementRequestItem.id === prItemId\r\n        );\r\n\r\n        if (matchingProcurementRequestItem) {\r\n          this.procurementRequest = procurementRequest;\r\n          this.procurementRequestItem = matchingProcurementRequestItem;\r\n\r\n          this.subtitle = StringUtils.orEmpty(procurementRequest.procCode);\r\n\r\n          this.displayComponentContext(this.isCreateOpenMode ? 'tab.createMode' : this.subtitle, this.isCreateOpenMode);\r\n\r\n          if (this.procurementRequestItem.birePn) {\r\n            this.logisticsService\r\n              .findBirePnMeasuresByPnCode({\r\n                pnCode: this.procurementRequestItem.birePn.pnCode as string\r\n              })\r\n              .subscribe((pnMeasures) => {\r\n                this.setPotentialUnitList(pnMeasures);\r\n                this.loadCandidateAssets();\r\n              });\r\n          }\r\n\r\n          this.loadItemIllustration(this.procurementRequestItem);\r\n        }\r\n\r\n        if (this.procurementRequest.requestedPotential) {\r\n          this.formattedRequestedPotential = NumberUtils.roundNumber(\r\n            NumberUtils.fromString(this.procurementRequest.requestedPotential),\r\n            2\r\n          ).toString();\r\n        }\r\n\r\n        if (this.procurementRequest.bidmWorkOrder && this.procurementRequest.bidmWorkOrder.projectId) {\r\n          this.logisticsService\r\n            .findWorkPackage(this.procurementRequest.bidmWorkOrder.projectId)\r\n            .pipe(\r\n              concatMap((workPackage) =>\r\n                workPackage.assetCode\r\n                  ? this.logisticsService.findEquipment({ equipmentCode: workPackage.assetCode })\r\n                  : of(undefined)\r\n              )\r\n            )\r\n            .subscribe((workPackageAsset) => {\r\n              this.workPackageAsset = workPackageAsset;\r\n              this.workPackageAssetName = BidoEquipmentUtils.createAssetRepresentation(workPackageAsset);\r\n            });\r\n        }\r\n\r\n        this.isProRecSupplierWarehouse = true;\r\n        if (this.procurementRequestItem.bidtWarehouseId !== null && !!this.procurementRequestItem.bidtWarehouseId) {\r\n          this.logisticsService.getWarehouseById(this.procurementRequestItem.bidtWarehouseId).subscribe({\r\n            next: (warehouse: BidtWarehouseDTO) => {\r\n              this.currentSupplierWarehouse = warehouse;\r\n              this.isProRecSupplierWarehouse = false;\r\n            }\r\n          });\r\n        } else if (!!this.procurementRequest.bidtWarehouseIssue) {\r\n          this.currentSupplierWarehouse = this.procurementRequest.bidtWarehouseIssue;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  public openEquipment(equipment?: BidoEquipmentDTO): void {\r\n    if (equipment) {\r\n      const componentId =\r\n        equipment.equipmentFunction === AWPropertiesConstants.ITEM_FAMILY_CODE_AIRCRAFT_KEY\r\n          ? ComponentConstants.FLE_AIRCRAFT_FORM\r\n          : equipment.equipmentFunction === AWPropertiesConstants.ITEM_FAMILY_CODE_ENGINE_KEY\r\n          ? ComponentConstants.FLE_ENGINE_FORM\r\n          : ComponentConstants.FLE_EQUIPMENT_FORM;\r\n      const data: PageComponentData = {\r\n        componentId,\r\n        id: this.tabService.generateId(),\r\n        objectId: this.serializationService.serialize({ equipmentCode: equipment.equipmentCode }),\r\n        openMode: ComponentOpenMode.Read\r\n      };\r\n      const labelKey = 'transaction.' + data.componentId;\r\n      this.tabService.open(this.tabService.create(data, labelKey, true));\r\n    }\r\n  }\r\n\r\n  public openManufacturingBatch(manufacturingBatchNumber: string | undefined): void {\r\n    const data: PageComponentData = {\r\n      id: this.tabService.generateId(),\r\n      componentId: ComponentConstants.LOG_MANUFACTURING_BATCH_FORM,\r\n      objectId: this.serializationService.serialize({ customerCode: manufacturingBatchNumber }),\r\n      openMode: ComponentOpenMode.Read\r\n    };\r\n    const labelKey = 'transaction.' + data.componentId;\r\n\r\n    this.tabService.open(this.tabService.create(data, labelKey, true));\r\n  }\r\n\r\n  public openPart(candidateAsset: CandidateAssetDTO): void {\r\n    if (candidateAsset.pn) {\r\n      const data: PageComponentData = {\r\n        componentId: ComponentConstants.ENG_PART_NUMBER_FORM,\r\n        id: this.tabService.generateId(),\r\n        objectId: candidateAsset.pn.pnCode,\r\n        openMode: ComponentOpenMode.Read\r\n      };\r\n      const labelKey = 'transaction.' + data.componentId;\r\n      this.tabService.open(this.tabService.create(data, labelKey, true));\r\n    }\r\n  }\r\n\r\n  private calculateSituation(): void {\r\n    const stockMvts = ListUtils.orEmpty(this.procurementRequestItem.workshopEntries).filter(\r\n      (stockMvt) => stockMvt.stockMvtWay === BidtStockMvtConstants.MVT_WAY_CREDIT\r\n    );\r\n    this.servedStockMvts = stockMvts.filter(\r\n      (stockMvt) => stockMvt.mvtStatus === AWPropertiesConstants.MM_MVT_STATUS_EXECUTED_KEY\r\n    );\r\n    this.servedNb = this.servedStockMvts\r\n      .map((stockMvt) => (stockMvt.stockMvtQuantity ? Number(stockMvt.stockMvtQuantity) : 0))\r\n      .reduce((acc, x) => acc + x, 0);\r\n\r\n    this.bookedNb = this.candidateAssets\r\n      .map((candidateAsset) => this.getBookedQty(candidateAsset))\r\n      .map((qty) => (StringUtils.isNullOrEmpty(qty) ? 0 : Number(qty)))\r\n      .reduce((acc, x) => acc + x, 0);\r\n\r\n    if (!StringUtils.isNullOrEmpty(this.procurementRequestItem.requestedQuantity)) {\r\n      this.notServedNb = Math.max(\r\n        0,\r\n        NumberUtils.fromString(this.procurementRequestItem.requestedQuantity as string) - this.servedNb - this.bookedNb\r\n      );\r\n    }\r\n  }\r\n\r\n  private loadPreemptionRight(candidateAsset: CandidateAssetDTO): void {\r\n    if (candidateAsset.stockInformation && candidateAsset.stockInformation.siteId) {\r\n      this.materialRequestManagementFormService\r\n        .findSiteById(candidateAsset.stockInformation.siteId)\r\n        .pipe(\r\n          concatMap((site) =>\r\n            this.materialRequestManagementFormService.hasDisplayRights({\r\n              useCaseCode: BidoFunctionTypeConstants.UC_MM_PREEMPTION,\r\n              functionCode: site.siteCode\r\n            })\r\n          )\r\n        )\r\n        .subscribe({\r\n          next: (hasPreemptionRight) => {\r\n            candidateAsset._hasPreemptionRight = hasPreemptionRight;\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  private loadCandidateAssets(): void {\r\n    this.iscandidateAssetsLoading = true;\r\n    this.candidateAssetsSrc = [];\r\n    this.candidateAssets = [];\r\n    this.resetFilters();\r\n\r\n    if (this.selectedcandidateAssetCategory === CandidateAssetCategory.WAREHOUSE) {\r\n      const searchCandidateWarehouse$ = this.logisticsService.searchWarehouseCandidateAssets({\r\n        bidtProcurementRequest: { ...this.procurementRequest, potentialUnit: this.potentialUnitSelected },\r\n        bidtProcReqItem: this.procurementRequestItem\r\n      });\r\n      const inputRemainigQuantity: CalculateRemainingQuantityInput = {\r\n        bidtProcReqItemDTO: this.procurementRequestItem,\r\n        notServedQuantity: this.notServedNb\r\n      };\r\n      const calculateRemaining$ = this.logisticsService.calculateRemainingQuantity(inputRemainigQuantity);\r\n\r\n      forkJoin([searchCandidateWarehouse$, calculateRemaining$]).subscribe({\r\n        next: ([searchCandidateWarehouse, calculateRemaining]) => {\r\n          this.candidateAssetsSrc = this.sortCandidateAssets(searchCandidateWarehouse);\r\n          this.candidateAssetsSrc.forEach((candidateAsset) => {\r\n            this.loadPreemptionRight(candidateAsset);\r\n          });\r\n          this.candidateAssets = [...this.candidateAssetsSrc];\r\n          this.calculateSituation();\r\n          this.calculateRemainingQuantity(calculateRemaining);\r\n          this.iscandidateAssetsLoading = false;\r\n        }\r\n      });\r\n    } else if (this.selectedcandidateAssetCategory === CandidateAssetCategory.LOCAL) {\r\n      const searchCandidateLocal$ = this.logisticsService.searchLocalCandidateAssets({\r\n        bidtProcurementRequest: { ...this.procurementRequest, potentialUnit: this.potentialUnitSelected },\r\n        bidtProcReqItem: this.procurementRequestItem\r\n      });\r\n      const inputRemainigQuantity: CalculateRemainingQuantityInput = {\r\n        bidtProcReqItemDTO: this.procurementRequestItem,\r\n        notServedQuantity: this.notServedNb\r\n      };\r\n      const calculateRemaining$ = this.logisticsService.calculateRemainingQuantity(inputRemainigQuantity);\r\n\r\n      forkJoin([searchCandidateLocal$, calculateRemaining$]).subscribe({\r\n        next: ([searchCandidateLocal, calculateRemaining]) => {\r\n          this.candidateAssetsSrc = this.sortCandidateAssets(searchCandidateLocal);\r\n          this.candidateAssetsSrc.forEach((candidateAsset) => {\r\n            this.loadPreemptionRight(candidateAsset);\r\n          });\r\n          this.candidateAssets = [...this.candidateAssetsSrc];\r\n          this.calculateSituation();\r\n          this.calculateRemainingQuantity(calculateRemaining);\r\n          this.iscandidateAssetsLoading = false;\r\n        }\r\n      });\r\n    } else if (this.selectedcandidateAssetCategory === CandidateAssetCategory.GLOBAL) {\r\n      const searchCandidateGlobal$ = this.logisticsService.searchGlobalCandidateAssets({\r\n        bidtProcurementRequest: { ...this.procurementRequest, potentialUnit: this.potentialUnitSelected },\r\n        bidtProcReqItem: this.procurementRequestItem\r\n      });\r\n      const inputRemainigQuantity: CalculateRemainingQuantityInput = {\r\n        bidtProcReqItemDTO: this.procurementRequestItem,\r\n        notServedQuantity: this.notServedNb\r\n      };\r\n      const calculateRemaining$ = this.logisticsService.calculateRemainingQuantity(inputRemainigQuantity);\r\n\r\n      forkJoin([searchCandidateGlobal$, calculateRemaining$]).subscribe({\r\n        next: ([searchCandidateGlobal, calculateRemaining]) => {\r\n          this.candidateAssetsSrc = this.sortCandidateAssets(searchCandidateGlobal);\r\n          this.candidateAssetsSrc.forEach((candidateAsset) => {\r\n            this.loadPreemptionRight(candidateAsset);\r\n          });\r\n          this.candidateAssets = [...this.candidateAssetsSrc];\r\n          this.calculateSituation();\r\n          this.calculateRemainingQuantity(calculateRemaining);\r\n          this.iscandidateAssetsLoading = false;\r\n        }\r\n      });\r\n    } else {\r\n      const searchCandidateCanibalism$ = this.logisticsService.searchCandidateAssetsForCannibalism({\r\n        bidtProcurementRequest: { ...this.procurementRequest, potentialUnit: this.potentialUnitSelected },\r\n        bidtProcReqItem: this.procurementRequestItem\r\n      });\r\n      const inputRemainigQuantity: CalculateRemainingQuantityInput = {\r\n        bidtProcReqItemDTO: this.procurementRequestItem,\r\n        notServedQuantity: this.notServedNb\r\n      };\r\n      const calculateRemaining$ = this.logisticsService.calculateRemainingQuantity(inputRemainigQuantity);\r\n\r\n      forkJoin([searchCandidateCanibalism$, calculateRemaining$]).subscribe({\r\n        next: ([searchCandidateCanibalism, calculateRemaining]) => {\r\n          this.candidateAssetsSrc = this.sortCandidateAssets(searchCandidateCanibalism);\r\n          this.candidateAssets = [...this.candidateAssetsSrc];\r\n          this.calculateSituation();\r\n          this.calculateRemainingQuantity(calculateRemaining);\r\n          this.iscandidateAssetsLoading = false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  public calculateRemainingQuantity(calculateRemaining: CalculateProcurementRequestRemainingQuantity): void {\r\n    this.quantityInMovement = calculateRemaining.quantityInMovement;\r\n    this.remainingQuantity = calculateRemaining.remainingQuantity;\r\n    this.createTransferOrderInput = {\r\n      procurmentRequest: this.procurementRequest,\r\n      procReqItem: this.procurementRequestItem,\r\n      notServedQuantity: this.remainingQuantity\r\n    };\r\n  }\r\n\r\n  private sortCandidateAssets(candidateAssets: CandidateAssetDTO[]): CandidateAssetDTO[] {\r\n    return candidateAssets.sort((c1, c2) => {\r\n      if (this.isCandidateAssetServed(c1) && !this.isCandidateAssetServed(c2)) {\r\n        return -1;\r\n      } else if (!this.isCandidateAssetServed(c1) && this.isCandidateAssetServed(c2)) {\r\n        return 1;\r\n      } else {\r\n        if (\r\n          c1.bookingProcurementRequest &&\r\n          c1.bookingProcurementRequest.id === this.procurementRequest.id &&\r\n          !(c2.bookingProcurementRequest && c2.bookingProcurementRequest.id === this.procurementRequest.id)\r\n        ) {\r\n          return -1;\r\n        } else if (\r\n          c2.bookingProcurementRequest &&\r\n          c2.bookingProcurementRequest.id === this.procurementRequest.id &&\r\n          !(c1.bookingProcurementRequest && c1.bookingProcurementRequest.id === this.procurementRequest.id)\r\n        ) {\r\n          return 1;\r\n        } else {\r\n          const r1 = this.calculateSatisfactionRate(c1);\r\n          const r2 = this.calculateSatisfactionRate(c2);\r\n\r\n          if (r1 > r2) {\r\n            return -1;\r\n          } else if (r1 < r2) {\r\n            return 1;\r\n          } else {\r\n            const e1 = c1.equipment ? StringUtils.orEmpty(c1.equipment.sn) : '';\r\n            const e2 = c2.equipment ? StringUtils.orEmpty(c2.equipment.sn) : '';\r\n\r\n            return e1.localeCompare(e2);\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  private loadItemIllustration(procurementRequestItem: BidtProcReqItemDTO): void {\r\n    if (procurementRequestItem.birePn && !StringUtils.isNullOrEmpty(procurementRequestItem.birePn.pnCode)) {\r\n      this.fileService.findBireDocItemByPnCode(procurementRequestItem.birePn.pnCode as string).subscribe({\r\n        next: (docItem) => {\r\n          if (\r\n            docItem &&\r\n            docItem.bireDocumentDTO &&\r\n            ObjectUtils.isDefined(docItem.bireDocumentDTO.docFile) &&\r\n            !StringUtils.isNullOrEmpty(docItem.bireDocumentDTO.docType)\r\n          ) {\r\n            this.itemIllustration = this.domSanitizer.bypassSecurityTrustResourceUrl(\r\n              `${ImageUtils.getBase64Prefix(docItem.bireDocumentDTO.docType)}${docItem.bireDocumentDTO.docFile}`\r\n            );\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private init() {\r\n    this.formattedRequestedPotential = '';\r\n    this.selectedCandidateAsset = undefined;\r\n    this.procurementRequest = {};\r\n    this.procurementRequestItem = {};\r\n    this.selectedcandidateAssetCategory = CandidateAssetCategory.WAREHOUSE;\r\n    this.potentialUnitList = [];\r\n    this.candidateAssetsSrc = [];\r\n    this.candidateAssets = [];\r\n    this.equipmentStatusList = [];\r\n    this.statusList = [];\r\n    this.servedNb = 0;\r\n    this.bookedNb = 0;\r\n    this.notServedNb = 0;\r\n    this.iscandidateAssetsLoading = false;\r\n    this.servedStockMvts = [];\r\n    this.satifactionRateStatus = [];\r\n    this.showCreateTransferOrderDialog = false;\r\n\r\n    this.workPackageAsset = undefined;\r\n    this.workPackageAssetName = '';\r\n\r\n    this.searchFilterObject = {};\r\n    this.searchFilterObject.sameSite = -1;\r\n    this.searchFilterObject.availableAtDate = -1;\r\n    this.searchFilterObject.potential = -1;\r\n    this.searchFilterObject.calendarPotential = -1;\r\n    this.searchFilterObject.bookingStatus = -1;\r\n    this.searchFilterObject.noUnconfirmedFailure = -1;\r\n    this.clearTables();\r\n    this.materialProposedTableCols = [];\r\n    this.siteList = [];\r\n    this.warehouseList = [];\r\n    this.logisticsTypeList = [];\r\n\r\n    this.showChangeSupplierAndQuantityDialog = false;\r\n  }\r\n\r\n  private initMaterialProposedTableCols(): void {\r\n    this.materialProposedTableCols = this.getCandidateAssetTableColumnsForLocalCategory();\r\n  }\r\n\r\n  private getCandidateAssetTableColumnsForPickingCategory(): TableColumn[] {\r\n    return [\r\n      { field: 'material', alignment: 'left', width: '15%' },\r\n      { field: 'snBatch', alignment: 'left', width: '12.5%' },\r\n      { field: 'msn', alignment: 'left', width: '15%' },\r\n      { field: 'locationForPicking', alignment: 'left', width: '17.5%' },\r\n      { field: 'technicalData', alignment: 'left', width: '15%' },\r\n      { field: 'availabilityAtDate', alignment: 'left', width: '15%' },\r\n      { field: 'satisfactionRate', alignment: 'left', width: '10%' }\r\n    ];\r\n  }\r\n\r\n  private getCandidateAssetTableColumnsForLocalCategory(): TableColumn[] {\r\n    return [\r\n      { field: 'material', alignment: 'left', width: '15%' },\r\n      { field: 'batch', alignment: 'left', width: '12.5%' },\r\n      { field: 'sn', alignment: 'left', width: '15%' },\r\n      { field: 'quantity', alignment: 'right', width: '5%' },\r\n      { field: 'location', alignment: 'left', width: '15%' },\r\n      { field: 'technicalData', alignment: 'left', width: '12.5%' },\r\n      { field: 'availabilityAtDate', alignment: 'left', width: '15%' },\r\n      { field: 'satisfactionRate', alignment: 'left', width: '10%' }\r\n    ];\r\n  }\r\n\r\n  private clearTables(): void {\r\n    this.materialProposedTable = [];\r\n  }\r\n\r\n  public onChangeCustomer() {\r\n    this.openChangeCustomerDialog = true;\r\n  }\r\n\r\n  public resetFilters() {\r\n    this.searchFilterObject.status = undefined;\r\n    this.searchFilterObject.sn = undefined;\r\n    this.searchFilterObject.site = undefined;\r\n    this.searchFilterObject.warehouse = undefined;\r\n    this.searchFilterObject.sameSite = SatisfactoryRateFilterState.UNDEFINED;\r\n    this.searchFilterObject.availableAtDate = SatisfactoryRateFilterState.UNDEFINED;\r\n    this.searchFilterObject.potential = SatisfactoryRateFilterState.UNDEFINED;\r\n    this.searchFilterObject.calendarPotential = SatisfactoryRateFilterState.UNDEFINED;\r\n    this.searchFilterObject.bookingStatus = SatisfactoryRateFilterState.UNDEFINED;\r\n    this.searchFilterObject.noUnconfirmedFailure = SatisfactoryRateFilterState.UNDEFINED;\r\n    this.warehouseList = [];\r\n    this.locationWarehouseType = this.logisticsTypeList[0].value as string;\r\n    this.candidateAssets = [...this.candidateAssetsSrc];\r\n  }\r\n\r\n  public filterSearchResult() {\r\n    this.candidateAssets = this.candidateAssetsSrc.filter((elt) => {\r\n      return (\r\n        this.statusFilterCriteria(elt) &&\r\n        this.snFilterCriteria(elt) &&\r\n        this.siteFilterCriteria(elt) &&\r\n        this.warehouseFilterCriteria(elt) &&\r\n        this.satifactoryRateSameSiteFilterCriteria(elt) &&\r\n        this.satisfactoryRateAvailableAtDateCriteria(elt) &&\r\n        this.satisfactoryRatePotentialCriteria(elt) &&\r\n        this.satisfactoryRateCalendarPotentialCriteria(elt) &&\r\n        this.statifactoryRateBookingStatusCriteria(elt) &&\r\n        this.satisfactoryRateNoUnconfirmedFailureCriteria(elt)\r\n      );\r\n    });\r\n  }\r\n\r\n  private statusFilterCriteria(elt: CandidateAssetDTO): boolean {\r\n    return (\r\n      !this.searchFilterObject.status ||\r\n      (!!elt.equipment && elt.equipment.operationalStatus === this.searchFilterObject.status)\r\n    );\r\n  }\r\n\r\n  private snFilterCriteria(elt: CandidateAssetDTO): boolean {\r\n    return (\r\n      !this.searchFilterObject.sn ||\r\n      (!!elt.equipment &&\r\n        !!elt.equipment.sn &&\r\n        elt.equipment.sn.toUpperCase().includes(this.searchFilterObject.sn.toUpperCase()))\r\n    );\r\n  }\r\n\r\n  private siteFilterCriteria(elt: CandidateAssetDTO): boolean {\r\n    return (\r\n      !this.searchFilterObject.site || (!!elt.siteReceipt && elt.siteReceipt.siteId === this.searchFilterObject.site)\r\n    );\r\n  }\r\n\r\n  private warehouseFilterCriteria(elt: CandidateAssetDTO): boolean {\r\n    return (\r\n      !this.searchFilterObject.warehouse ||\r\n      (!!elt.warehouseReceipt && elt.warehouseReceipt.wareHouseId === this.searchFilterObject.warehouse)\r\n    );\r\n  }\r\n\r\n  private satifactoryRateSameSiteFilterCriteria(elt: CandidateAssetDTO): boolean {\r\n    return (\r\n      this.searchFilterObject.sameSite === SatisfactoryRateFilterState.UNDEFINED || // UNDEFINED\r\n      (this.searchFilterObject.sameSite === SatisfactoryRateFilterState.YES && // YES\r\n        !!elt.siteReceipt &&\r\n        !!this.procurementRequest.bidtSiteReceipt &&\r\n        elt.siteReceipt.siteId === this.procurementRequest.bidtSiteReceipt.siteId) ||\r\n      (this.searchFilterObject.sameSite === SatisfactoryRateFilterState.NO && // NO\r\n        !(\r\n          !!elt.siteReceipt &&\r\n          !!this.procurementRequest.bidtSiteReceipt &&\r\n          elt.siteReceipt.siteId === this.procurementRequest.bidtSiteReceipt.siteId\r\n        ))\r\n    );\r\n  }\r\n\r\n  private satisfactoryRateAvailableAtDateCriteria(elt: CandidateAssetDTO): boolean {\r\n    return (\r\n      this.searchFilterObject.availableAtDate === SatisfactoryRateFilterState.UNDEFINED || // UNDEFINED\r\n      (this.searchFilterObject.availableAtDate === SatisfactoryRateFilterState.YES && // YES\r\n        !ObjectUtils.isDefined(elt.plannedAvailabilityDate)) ||\r\n      (this.searchFilterObject.availableAtDate === SatisfactoryRateFilterState.NO && // NO\r\n        ObjectUtils.isDefined(elt.plannedAvailabilityDate))\r\n    );\r\n  }\r\n\r\n  private satisfactoryRatePotentialCriteria(elt: CandidateAssetDTO): boolean {\r\n    return (\r\n      this.searchFilterObject.potential === SatisfactoryRateFilterState.UNDEFINED || // UNDEFINED\r\n      (this.searchFilterObject.potential === SatisfactoryRateFilterState.YES && // YES\r\n        ((!this.procurementRequest.requestedPotential &&\r\n          (!elt.potentialValue || NumberUtils.fromString(elt.potentialValue) > 0)) ||\r\n          (!!elt.potentialValue &&\r\n            !!this.procurementRequest.requestedPotential &&\r\n            NumberUtils.fromString(elt.potentialValue) >\r\n              NumberUtils.fromString(this.procurementRequest.requestedPotential)))) ||\r\n      (this.searchFilterObject.potential === SatisfactoryRateFilterState.NO && // NO\r\n        !(\r\n          (!this.procurementRequest.requestedPotential &&\r\n            (!elt.potentialValue || NumberUtils.fromString(elt.potentialValue) > 0)) ||\r\n          (!!elt.potentialValue &&\r\n            !!this.procurementRequest.requestedPotential &&\r\n            NumberUtils.fromString(elt.potentialValue) >\r\n              NumberUtils.fromString(this.procurementRequest.requestedPotential))\r\n        ))\r\n    );\r\n  }\r\n\r\n  private satisfactoryRateCalendarPotentialCriteria(elt: CandidateAssetDTO): boolean {\r\n    return (\r\n      this.searchFilterObject.calendarPotential === SatisfactoryRateFilterState.UNDEFINED || // UNDEFIND\r\n      (this.searchFilterObject.calendarPotential === SatisfactoryRateFilterState.YES && // YES\r\n        ((!!this.procurementRequest.requestedDate &&\r\n          !!this.procurementRequest.calendarPotential &&\r\n          !!elt.calendarPotential &&\r\n          moment(elt.calendarPotential).isAfter(moment(this.procurementRequest.calendarPotential))) ||\r\n          !(\r\n            !!this.procurementRequest.requestedDate &&\r\n            !!this.procurementRequest.calendarPotential &&\r\n            !!elt.calendarPotential\r\n          ))) ||\r\n      (this.searchFilterObject.calendarPotential === SatisfactoryRateFilterState.NO && // NO\r\n        !(\r\n          (!!this.procurementRequest.requestedDate &&\r\n            !!this.procurementRequest.calendarPotential &&\r\n            !!elt.calendarPotential &&\r\n            moment(elt.calendarPotential).isAfter(moment(this.procurementRequest.calendarPotential))) ||\r\n          !(\r\n            !!this.procurementRequest.requestedDate &&\r\n            !!this.procurementRequest.calendarPotential &&\r\n            !!elt.calendarPotential\r\n          )\r\n        ))\r\n    );\r\n  }\r\n\r\n  private statifactoryRateBookingStatusCriteria(elt: CandidateAssetDTO): boolean {\r\n    return (\r\n      this.searchFilterObject.bookingStatus === SatisfactoryRateFilterState.UNDEFINED || // UNDEFINED\r\n      (this.searchFilterObject.bookingStatus === SatisfactoryRateFilterState.YES && // YES\r\n        (!ObjectUtils.isDefined(elt.bookingProcurementRequest) ||\r\n          (!!elt.bookingProcurementRequest && elt.bookingProcurementRequest.id === this.procurementRequest.id))) ||\r\n      (this.searchFilterObject.bookingStatus === SatisfactoryRateFilterState.NO && // NO\r\n        !(\r\n          !ObjectUtils.isDefined(elt.bookingProcurementRequest) ||\r\n          (!!elt.bookingProcurementRequest && elt.bookingProcurementRequest.id === this.procurementRequest.id)\r\n        ))\r\n    );\r\n  }\r\n\r\n  private satisfactoryRateNoUnconfirmedFailureCriteria(elt: CandidateAssetDTO): boolean {\r\n    return (\r\n      this.searchFilterObject.noUnconfirmedFailure === SatisfactoryRateFilterState.UNDEFINED || // UNDEFINED\r\n      (this.searchFilterObject.noUnconfirmedFailure === SatisfactoryRateFilterState.YES && // YES\r\n        !ObjectUtils.isDefined(elt.unconfirmedFailure)) ||\r\n      (this.searchFilterObject.noUnconfirmedFailure === SatisfactoryRateFilterState.NO && // NO\r\n        ObjectUtils.isDefined(elt.unconfirmedFailure))\r\n    );\r\n  }\r\n\r\n  public onGoBack() {\r\n    const openMode: ComponentOpenMode = ComponentOpenMode.Read;\r\n    const data: PageComponentData = {\r\n      id: this.tabService.generateId(),\r\n      componentId: ComponentConstants.LOG_MATERIAL_REQUEST_MANAGEMENT_SEARCH,\r\n      openMode\r\n    };\r\n\r\n    const labelKey = 'transaction.' + data.componentId;\r\n    this.tabService.open(this.tabService.create(data, labelKey, true));\r\n  }\r\n\r\n  public deleteMaterial(rowData: MaterialProposedTableRow): void {\r\n    const criteriaInput: BidtStockMvtIdDTO = {\r\n      id: Number(rowData.id)\r\n    };\r\n    this.logisticsService.deleteMaterial(criteriaInput).subscribe((results) => {\r\n      // Todo depend on response\r\n    });\r\n  }\r\n\r\n  public formatEquipmentStatus(statusValue: string | undefined): string {\r\n    const matchingStatus = this.equipmentStatusList.find((status) => status.value === statusValue);\r\n\r\n    return matchingStatus ? StringUtils.orEmpty(matchingStatus.label) : '';\r\n  }\r\n\r\n  public formatStatus(statusValue: string | undefined): string {\r\n    const matchingStatus = this.statusList.find((status) => status.value === statusValue);\r\n\r\n    return matchingStatus ? StringUtils.orEmpty(matchingStatus.label) : '';\r\n  }\r\n\r\n  public formatQuantity(quantity: string | undefined): string {\r\n    return quantity ? NumberUtils.roundNumber(NumberUtils.fromString(quantity), 2).toString() : '';\r\n  }\r\n\r\n  public formatPotential(potential: string | undefined): string {\r\n    return potential ? NumberUtils.roundNumber(NumberUtils.fromString(potential), 2).toString() : '';\r\n  }\r\n\r\n  public updateCandidateAssetTableColumns(): void {\r\n    this.materialProposedTableCols =\r\n      this.selectedcandidateAssetCategory === CandidateAssetCategory.PICKING\r\n        ? this.getCandidateAssetTableColumnsForPickingCategory()\r\n        : this.getCandidateAssetTableColumnsForLocalCategory();\r\n\r\n    this.loadCandidateAssets();\r\n  }\r\n\r\n  public isAvailableAtDate(candidateAsset: CandidateAssetDTO): boolean {\r\n    return !ObjectUtils.isDefined(candidateAsset.plannedAvailabilityDate);\r\n  }\r\n\r\n  public calculateSatisfactionRate(candidateAsset: CandidateAssetDTO): number {\r\n    const rates: number[] = [];\r\n    const rate = (value: boolean) => {\r\n      rates.push(value ? 1 : 0);\r\n    };\r\n\r\n    // Availability at date\r\n    rate(this.isAvailableAtDate(candidateAsset));\r\n\r\n    // Not booked by another procurement request\r\n    rate(\r\n      !ObjectUtils.isDefined(candidateAsset.bookingProcurementRequest) ||\r\n        (candidateAsset.bookingProcurementRequest as BidtProcurementRequestDTO).id === this.procurementRequest.id\r\n    );\r\n\r\n    // Potential\r\n    rate(\r\n      !this.procurementRequest.requestedPotential ||\r\n        (!!candidateAsset.potentialValue &&\r\n          NumberUtils.fromString(candidateAsset.potentialValue) >=\r\n            NumberUtils.fromString(this.procurementRequest.requestedPotential))\r\n    );\r\n\r\n    // Same site\r\n    rate(\r\n      !!candidateAsset.siteReceipt &&\r\n        !!this.procurementRequest.bidtSiteReceipt &&\r\n        candidateAsset.siteReceipt.siteId === this.procurementRequest.bidtSiteReceipt.siteId\r\n    );\r\n\r\n    // No Unconfirmed Failure\r\n    rate(!ObjectUtils.isDefined(candidateAsset.unconfirmedFailure));\r\n\r\n    // Calendar potential\r\n    if (!candidateAsset.calendarPotential) {\r\n      rate(true);\r\n    } else {\r\n      rate(\r\n        moment(candidateAsset.calendarPotential).isAfter(\r\n          moment(this.procurementRequest.calendarPotential || this.procurementRequest.requestedDate)\r\n        )\r\n      );\r\n    }\r\n\r\n    // tslint:disable-next-line:no-magic-numbers\r\n    return NumberUtils.roundNumber((rates.filter((value) => value === 1).length / rates.length) * 100, 0);\r\n  }\r\n\r\n  private setPotentialUnitList(pnMeasures: BirePnMeasureDTO[] | undefined): void {\r\n    this.potentialUnitList = ListUtils.orEmpty(pnMeasures)\r\n      .map((pnMeasure) => pnMeasure.counterCode)\r\n      .filter((counterCode) => !!counterCode)\r\n      .sort((c1, c2) => (c1 as string).localeCompare(c2 as string))\r\n      .map((counterCode) => {\r\n        return {\r\n          label: counterCode,\r\n          command: () => {\r\n            this.potentialUnitSelected = counterCode as string;\r\n            this.loadCandidateAssets();\r\n          }\r\n        };\r\n      });\r\n\r\n    if (this.potentialUnitList.length > 0) {\r\n      this.potentialUnitSelected = this.potentialUnitList[0].label as string;\r\n    }\r\n  }\r\n\r\n  public formatSite(siteCode: string | undefined): string {\r\n    const matchingSite = this.sites.find((site) => site.siteCode === siteCode);\r\n\r\n    return matchingSite ? StringUtils.orEmpty(matchingSite.siteName) : '';\r\n  }\r\n\r\n  public pick(rowData: CandidateAssetDTO): void {\r\n    this.saving = true;\r\n\r\n    this.logisticsService\r\n      .cannibalizeAsset({\r\n        bidtProcReqItem: this.procurementRequestItem,\r\n        candidateAsset: rowData,\r\n        requestedDate: this.procurementRequest.requestedDate as Date\r\n      })\r\n      .pipe(\r\n        finalize(() => {\r\n          this.saving = false;\r\n        })\r\n      )\r\n      .subscribe(() => {\r\n        this.reload();\r\n      });\r\n  }\r\n\r\n  public openSatisfactionRateDetails(candidateAsset: CandidateAssetDTO): void {\r\n    this.selectedCandidateAsset = candidateAsset;\r\n    this.showSatisfactionRateDialog = true;\r\n  }\r\n\r\n  public isSameQuantity(qt1?: string, qt2?: string): boolean {\r\n    return this.formatQuantity(qt1) === this.formatQuantity(qt2);\r\n  }\r\n\r\n  public openProcurementRequest(procurementRequest?: BidtProcurementRequestDTO): void {\r\n    if (procurementRequest) {\r\n      const data: PageComponentData = {\r\n        id: this.tabService.generateId(),\r\n        componentId: ComponentConstants.LOG_PROCUREMENT_REQUEST_FORM,\r\n        objectId: this.serializationService.serialize({ id: procurementRequest.id }),\r\n        openMode: ComponentOpenMode.Read\r\n      };\r\n      const labelKey = 'transaction.' + data.componentId;\r\n      this.tabService.open(this.tabService.create(data, labelKey, true));\r\n    }\r\n  }\r\n\r\n  public openTransferOrder(transferOrder?: BidtTransferOrderDTO) {\r\n    if (transferOrder) {\r\n      const data: PageComponentData = {\r\n        id: this.tabService.generateId(),\r\n        componentId: ComponentConstants.LOG_TRANSFER_ORDER_FORM,\r\n        objectId: this.serializationService.serialize(transferOrder.id),\r\n        openMode: ComponentOpenMode.Read\r\n      };\r\n      const labelKey = 'transaction.' + data.componentId;\r\n      this.tabService.open(this.tabService.create(data, labelKey, true));\r\n    }\r\n  }\r\n\r\n  public cancelBooking(rowData: CandidateAssetDTO): void {\r\n    if (rowData.equipment) {\r\n      this.logisticsService.isAssetBooked(rowData.equipment).subscribe({\r\n        next: (stockMvt) => {\r\n          if (stockMvt) {\r\n            this.logisticsService.cancelBookedAsset(stockMvt).subscribe({\r\n              next: () => {\r\n                this.reload();\r\n              }\r\n            });\r\n          } else {\r\n            this.messageService.showErrorMessage('errorOnCancelBookedAsset');\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  public cancelPicking(rowData: CandidateAssetDTO): void {\r\n    if (rowData.currentBidmProject && rowData.currentBidmProject.projectId) {\r\n      this.logisticsService.removeBidmProject({ projectId: rowData.currentBidmProject.projectId }).subscribe(() => {\r\n        this.messageService.showSuccessMessage(this.getTranslateKey('successOnCancelPicking'));\r\n        this.reload();\r\n      });\r\n    }\r\n  }\r\n\r\n  public openBatch(code: string) {\r\n    const data: PageComponentData = {\r\n      id: this.tabService.generateId(),\r\n      componentId: ComponentConstants.LOG_PACKAGING_BATCH_FORM,\r\n      openMode: ComponentOpenMode.Read\r\n    };\r\n\r\n    data.objectId = code;\r\n\r\n    const labelKey = 'transaction.' + data.componentId;\r\n\r\n    this.tabService.open(this.tabService.create(data, labelKey, true));\r\n  }\r\n\r\n  public isSelectBtnVisible(): boolean {\r\n    const procurementRequestQty = this.procurementRequestItem.requestedQuantity\r\n      ? NumberUtils.fromString(this.procurementRequestItem.requestedQuantity)\r\n      : undefined;\r\n\r\n    return (\r\n      ObjectUtils.isDefined(procurementRequestQty) && this.bookedNb + this.servedNb < (procurementRequestQty as number)\r\n    );\r\n  }\r\n\r\n  public bookCandidateAsset(candidateAsset: CandidateAssetDTO): void {\r\n    if (candidateAsset.equipment) {\r\n      candidateAsset._bookCandidateAssetLoading = true;\r\n\r\n      const quantity = candidateAsset.equipment.sn\r\n        ? '1'\r\n        : this.procurementRequest.procType === AWPropertiesConstants.PROCUREMENT_REQUEST_TYPE_STOCK_LEVELING ||\r\n          this.procurementRequest.procType === AWPropertiesConstants.PROCUREMENT_REQUEST_TYPE_DEPLOYEMENT_BATCH\r\n        ? (candidateAsset.equipment.quantity || 0).toString()\r\n        : Math.min(this.notServedNb, candidateAsset.equipment.quantity || 0).toString();\r\n\r\n      this.logisticsService\r\n        .bookCandidateAsset({ quantity, candidateAsset, bidtProcReqItem: this.procurementRequestItem })\r\n        .pipe(\r\n          finalize(() => {\r\n            candidateAsset._bookCandidateAssetLoading = false;\r\n          })\r\n        )\r\n        .subscribe({\r\n          next: () => {\r\n            this.reload();\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  public confirmPreemptCandidateAsset(candidateAsset: CandidateAssetDTO): void {\r\n    this.confirmationService.confirm({\r\n      messageKey: this.getTranslateKey('confirmPreempt'),\r\n      accept: () => {\r\n        this.preemptCandidateAsset(candidateAsset);\r\n      }\r\n    });\r\n  }\r\n\r\n  public preemptCandidateAsset(candidateAsset: CandidateAssetDTO): void {\r\n    if (candidateAsset.equipment) {\r\n      candidateAsset._bookCandidateAssetLoading = true;\r\n\r\n      const quantity = candidateAsset.equipment.sn\r\n        ? '1'\r\n        : Math.min(this.notServedNb, candidateAsset.equipment.quantity || 0).toString();\r\n\r\n      this.logisticsService\r\n        .preemptCandidateAsset({ quantity, candidateAsset, bidtProcReqItem: this.procurementRequestItem })\r\n        .pipe(\r\n          finalize(() => {\r\n            candidateAsset._bookCandidateAssetLoading = false;\r\n          })\r\n        )\r\n        .subscribe({\r\n          next: () => {\r\n            this.reload();\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  public openWorkPackageAsset(): void {\r\n    if (this.workPackageAsset) {\r\n      let componentId: string;\r\n      if (this.workPackageAsset.equipmentFunction === AWPropertiesConstants.ITEM_FAMILY_CODE_AIRCRAFT_KEY) {\r\n        componentId = ComponentConstants.FLE_AIRCRAFT_FORM;\r\n      } else if (this.workPackageAsset.equipmentFunction === AWPropertiesConstants.ITEM_FAMILY_CODE_ENGINE_KEY) {\r\n        componentId = ComponentConstants.FLE_ENGINE_FORM;\r\n      } else {\r\n        componentId = ComponentConstants.FLE_EQUIPMENT_FORM;\r\n      }\r\n\r\n      const data: PageComponentData = {\r\n        componentId,\r\n        id: this.tabService.generateId(),\r\n        objectId: this.serializationService.serialize({\r\n          equipmentCode: this.workPackageAsset.equipmentCode\r\n        }),\r\n        openMode: ComponentOpenMode.Read\r\n      };\r\n      const labelKey = 'transaction.' + data.componentId;\r\n\r\n      this.tabService.open(this.tabService.create(data, labelKey, true));\r\n    }\r\n  }\r\n\r\n  public isCancelBookingBtnVisible(candidateAsset: CandidateAssetDTO): boolean {\r\n    return (\r\n      !!candidateAsset.equipment &&\r\n      !!candidateAsset.transferOrder &&\r\n      !!candidateAsset.transferOrder.bidtTorItems &&\r\n      !!candidateAsset.transferOrder.bidtTorItems\r\n        .filter((torItem) => torItem && torItem.pickingMovements)\r\n        .map((torItem) => torItem.pickingMovements as BidtStockMvtDTO[])\r\n        .reduce((acc, x) => acc.concat(x))\r\n        .some(\r\n          (stockMvt) =>\r\n            (candidateAsset.equipment as BidoEquipmentDTO).sn === stockMvt.stockMvtSn &&\r\n            (candidateAsset.equipment as BidoEquipmentDTO).batchNumber === stockMvt.stockMvtBatchNumber &&\r\n            (stockMvt.bidtStockMvtTypeId === BidtStockMvtTypeConstant.PICKING ||\r\n              stockMvt.bidtStockMvtTypeId === BidtStockMvtTypeConstant.CROSS_DOCKING) &&\r\n            stockMvt.mvtStatus !== AWPropertiesConstants.MM_MVT_STATUS_EXECUTED_KEY &&\r\n            stockMvt.mvtStatus !== AWPropertiesConstants.MM_MVT_STATUS_ON_GOING_KEY\r\n        )\r\n    );\r\n  }\r\n\r\n  public isCandidateAssetServed(candidateAsset: CandidateAssetDTO): boolean {\r\n    return (\r\n      !!candidateAsset.equipment &&\r\n      this.servedStockMvts.some(\r\n        (servedStockMvt) =>\r\n          servedStockMvt.stockMvtSn === (candidateAsset.equipment as BidoEquipmentDTO).sn &&\r\n          servedStockMvt.stockMvtBatchNumber === (candidateAsset.equipment as BidoEquipmentDTO).batchNumber\r\n      )\r\n    );\r\n  }\r\n\r\n  public loadLocationWarehouses(): void {\r\n    this.searchFilterObject.warehouse = undefined;\r\n    this.warehouseList = [];\r\n\r\n    if (!!this.searchFilterObject.site && this.locationWarehouseType) {\r\n      this.loadWareHouses(this.searchFilterObject.site, this.locationWarehouseType).subscribe({\r\n        next: (warehouses) => {\r\n          this.warehouseList = warehouses;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private loadWareHouses(siteId: number, warehouseCategory: string): Observable<LabelValue<number>[]> {\r\n    return this.procurementRequestSearchService.getWarehousesBySiteId(siteId).pipe(\r\n      map((warehouses) => {\r\n        return warehouses\r\n          .filter(\r\n            (warehouse) =>\r\n              !!warehouse.whCode &&\r\n              !!warehouse.whName &&\r\n              !!warehouse.whCategory &&\r\n              warehouseCategory === warehouse.whCategory\r\n          )\r\n          .map((warehouse) => {\r\n            return {\r\n              label: `${warehouse.whCode} - ${warehouse.whName}`,\r\n              value: warehouse.wareHouseId as number\r\n            };\r\n          })\r\n          .sort((s1, s2) => s1.label.localeCompare(s2.label));\r\n      })\r\n    );\r\n  }\r\n\r\n  public getBookedQty(candidateAsset: CandidateAssetDTO): string {\r\n    if (candidateAsset.transferOrder && candidateAsset.transferOrder.bidtTorItems) {\r\n      const matchingStockMvt = candidateAsset.transferOrder.bidtTorItems\r\n        .filter((torItem) => torItem && torItem.pickingMovements)\r\n        .map((torItem) => torItem.pickingMovements as BidtStockMvtDTO[])\r\n        .reduce((acc, x) => acc.concat(x))\r\n        .find(\r\n          (stockMvt) =>\r\n            (candidateAsset.equipment as BidoEquipmentDTO).sn === stockMvt.stockMvtSn &&\r\n            (candidateAsset.equipment as BidoEquipmentDTO).batchNumber === stockMvt.stockMvtBatchNumber &&\r\n            (stockMvt.bidtStockMvtTypeId === BidtStockMvtTypeConstant.PICKING ||\r\n              stockMvt.bidtStockMvtTypeId === BidtStockMvtTypeConstant.CROSS_DOCKING)\r\n        );\r\n\r\n      if (matchingStockMvt) {\r\n        return StringUtils.orEmpty(matchingStockMvt.stockMvtQuantity);\r\n      }\r\n    }\r\n\r\n    return '';\r\n  }\r\n\r\n  public onChangeSupplier(): void {\r\n    this.showChangeSupplierAndQuantityDialog = true;\r\n  }\r\n\r\n  public isUserHasRight(right: string, degree: number) {\r\n    return this.sessionService.hasUserRightByUseCase(right, degree);\r\n  }\r\n\r\n  public onCreateTransferOrder(): void {\r\n    this.reload();\r\n  }\r\n\r\n  public openCreateTransferDialog(): void {\r\n    this.showCreateTransferOrderDialog = true;\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { BidoCustomerDTO } from '../../../../../../generated_files/api-types/bido-customer-dto.interface';\r\nimport { BidtSiteApi } from '../../../../shared/api/bidt-site.api';\r\nimport { BidtWarehouseApi } from '../../../../shared/api/bidt-warehouse.api';\r\nimport { FleetManagementApi } from '../../../../shared/api/fleet-management.api';\r\nimport { ProductStructureManagementApi } from '../../../../shared/api/product-structure-management.api';\r\nimport { UserProfileBusinessApi } from '../../../../shared/api/user-profile-business.api';\r\nimport { AbstractAwHttpService } from '../../../../shared/http/abstract-aw-http';\r\nimport { AppConfigService } from '../../../../shared/services/app-config.service';\r\nimport { AccessRightQueryDTO } from '../../../../shared/types/api-types/access-right-query-dto.interface';\r\nimport { BidtSiteDTO } from '../../../../shared/types/api-types/bidt-site-dto.interface';\r\nimport { BidtWarehouseDTO } from '../../../../shared/types/api-types/bidt-warehouse-dto.interface';\r\nimport { SearchResultsDTO } from '../../../../shared/types/api-types/search-results-dto.interface';\r\nimport { LabelValue } from '../../../../shared/types/label-value.interface';\r\nimport { MaterialProposedTableRow } from '../shared/material-proposed-table-row.interface';\r\n\r\n@Injectable()\r\nexport class MaterialRequestManagementFormService extends AbstractAwHttpService {\r\n  public constructor(\r\n    http: HttpClient,\r\n    appConfigService: AppConfigService,\r\n    private readonly bidtSiteApi: BidtSiteApi,\r\n    private readonly userProfileBusinessApi: UserProfileBusinessApi,\r\n    private readonly productStructureManagementApi: ProductStructureManagementApi,\r\n    private readonly fleetManagementApi: FleetManagementApi,\r\n    private readonly bidtWarehouseApi: BidtWarehouseApi\r\n  ) {\r\n    super(http, appConfigService);\r\n  }\r\n\r\n  /**************************************************************************\r\n   * User profile business api\r\n   *************************************************************************/\r\n\r\n  public hasDisplayRights(input: AccessRightQueryDTO): Observable<boolean> {\r\n    return super.post<AccessRightQueryDTO, boolean>(this.userProfileBusinessApi.hasDisplayRights, input);\r\n  }\r\n\r\n  /**************************************************************************\r\n   * Bidt site api\r\n   *************************************************************************/\r\n\r\n  public findAllSite(): Observable<BidtSiteDTO[]> {\r\n    return super.post<void, BidtSiteDTO[]>(this.bidtSiteApi.getSites);\r\n  }\r\n\r\n  public findSiteById(input: string): Observable<BidtSiteDTO> {\r\n    return super.post<string, BidtSiteDTO>(this.bidtSiteApi.getById, input);\r\n  }\r\n\r\n  /**************************************************************************\r\n   * Bidt warehouse api\r\n   *************************************************************************/\r\n\r\n  public getWarehousesBySiteId(siteId: number): Observable<BidtWarehouseDTO[]> {\r\n    return super.post<number, BidtWarehouseDTO[]>(this.bidtWarehouseApi.findBySiteId, siteId);\r\n  }\r\n\r\n  /**************************************************************************\r\n   * search requested material api\r\n   *************************************************************************/\r\n  public findProposedMaterials(partNumber?: string): Observable<SearchResultsDTO<MaterialProposedTableRow>> {\r\n    const simpleObservable = new Observable<SearchResultsDTO<MaterialProposedTableRow>>((observer) => {\r\n      const partNumber2 = partNumber === '70720041-00' ? '70720041-10' : '303-086-103-1';\r\n\r\n      const searchResult: SearchResultsDTO<MaterialProposedTableRow> = {\r\n        list: [\r\n          {\r\n            sn: '69871',\r\n            pn: partNumber,\r\n            designation: '### DESIGNATION DU P/N ###',\r\n            site: 'Monte-de-Marsan',\r\n            warehouse: 'DRSU',\r\n            location: 'B523',\r\n            responsible: 'DMA6',\r\n            potential: '600 FH',\r\n            expiration: '90 Jours',\r\n            satisfactionRate: 100,\r\n            status: 'Disponible',\r\n            satisfactionColor: 'green',\r\n            buttonName: 'cancel'\r\n          },\r\n          {\r\n            sn: '54789',\r\n            pn: partNumber2,\r\n            designation: '### DESIGNATION DU P/N ###',\r\n            site: 'Toulouse',\r\n            warehouse: 'DRSU',\r\n            location: 'Transit',\r\n            responsible: 'DMA6',\r\n            potential: '500 FH',\r\n            expiration: '60 Jours',\r\n            satisfactionRate: 60,\r\n            status: 'Disponible',\r\n            message: 'Reserve pour DA S4000301',\r\n            satisfactionColor: 'yellow',\r\n            interchangebility: partNumber === '70720041-00' ? 'Two-Ways' : 'One-Way',\r\n            buttonName: 'book'\r\n          },\r\n          {\r\n            sn: '66399',\r\n            pn: partNumber,\r\n            designation: '### DESIGNATION DU P/N ###',\r\n            site: 'Saint Dizier',\r\n            warehouse: 'Ateller A',\r\n            location: 'Transit',\r\n            responsible: 'DMA6',\r\n            potential: '250 FH',\r\n            expiration: '72 Jours',\r\n            satisfactionRate: 40,\r\n            status: 'En attente de reparation',\r\n            message: 'Disporible a partir du 29/08/2019',\r\n            satisfactionColor: 'yellow',\r\n            buttonName: 'book'\r\n          },\r\n          {\r\n            sn: '66389',\r\n            pn: partNumber,\r\n            designation: '### DESIGNATION DU P/N ###',\r\n            site: 'Saint Dizier',\r\n            warehouse: 'Ateller A',\r\n            location: 'Transit',\r\n            responsible: 'DMA6',\r\n            potential: '250 FH',\r\n            expiration: '72 Jours',\r\n            satisfactionRate: 20,\r\n            status: 'En attente de reparation',\r\n            message: 'Disporible a partir du 01/09/2019',\r\n            satisfactionColor: 'red',\r\n            buttonName: 'preempter'\r\n          }\r\n        ],\r\n        moreResults: false\r\n      };\r\n      // observable execution\r\n      observer.next(searchResult);\r\n      observer.complete();\r\n    });\r\n\r\n    return simpleObservable;\r\n  }\r\n\r\n  public getOperationalStatusMap(input: string): Observable<LabelValue<string>[]> {\r\n    return super.post<string, LabelValue<string>[]>(\r\n      this.productStructureManagementApi.initializeOperationalStatusList,\r\n      input\r\n    );\r\n  }\r\n\r\n  public findAllBidoCustomer(): Observable<BidoCustomerDTO[]> {\r\n    return super.post<void, BidoCustomerDTO[]>(this.fleetManagementApi.findAllBidoCustomer);\r\n  }\r\n}\r\n","module.exports = \"<a-modal class=\\\"aw-modal\\\" [(visible)]=\\\"display\\\">\\r\\n  <a-header>\\r\\n    <div class=\\\"modal-title\\\">{{ getComponentName() + \\\".writeRequest\\\" | translate }}</div>\\r\\n  </a-header>\\r\\n\\r\\n  <a-content>\\r\\n    <ng-container>\\r\\n      <div class=\\\"section\\\">\\r\\n        <h4 class=\\\"section-title\\\">\\r\\n          {{ getComponentName() + \\\".currentSupplier\\\" | translate }}\\r\\n        </h4>\\r\\n        <div class=\\\"section-content\\\">\\r\\n          <div class=\\\"row\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"form-label\\\">\\r\\n                {{ getComponentName() + \\\".site\\\" | translate }}\\r\\n              </label>\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <div class=\\\"form-control-generic\\\" *ngIf=\\\"procurementRequest.bidtSiteIssue\\\">\\r\\n                  {{ procurementRequest?.bidtSiteIssue?.siteCode }}\\r\\n                  <ng-container *ngIf=\\\"procurementRequest?.bidtSiteIssue?.siteName\\\">\\r\\n                    - {{ procurementRequest?.bidtSiteIssue?.siteName }}\\r\\n                  </ng-container>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"form-label\\\">\\r\\n                {{ getComponentName() + \\\".warehouse\\\" | translate }}\\r\\n              </label>\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <div class=\\\"form-control-generic\\\" *ngIf=\\\"procurementRequest.bidtWarehouseIssue\\\">\\r\\n                  {{ procurementRequest?.bidtWarehouseIssue?.whCode }}\\r\\n                  <ng-container *ngIf=\\\"procurementRequest?.bidtWarehouseIssue?.whName\\\">\\r\\n                    - {{ procurementRequest?.bidtWarehouseIssue?.whName }}\\r\\n                  </ng-container>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n          <div class=\\\"row\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"form-label\\\">{{ getComponentName() + \\\".partner\\\" | translate }}</label>\\r\\n\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <div class=\\\"form-control-generic\\\" *ngIf=\\\"procurementRequest.bidoCustomer\\\">\\r\\n                  {{ procurementRequest.bidoCustomer.customerName }}\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"section\\\">\\r\\n        <h4 class=\\\"section-title\\\">\\r\\n          {{ getComponentName() + \\\".newSupplier\\\" | translate }}\\r\\n        </h4>\\r\\n        <div class=\\\"section-content\\\">\\r\\n          <div class=\\\"row\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"form-label\\\"> {{ getComponentName() + \\\".partner\\\" | translate }} </label>\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <p-dropdown\\r\\n                  class=\\\"aw-dropdown fixed-width\\\"\\r\\n                  [options]=\\\"customers\\\"\\r\\n                  [showClear]=\\\"true\\\"\\r\\n                  placeholder=\\\"&nbsp;\\\"\\r\\n                  [(ngModel)]=\\\"newCustomer\\\"\\r\\n                  appendTo=\\\"body\\\"\\r\\n                >\\r\\n                </p-dropdown>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </ng-container>\\r\\n  </a-content>\\r\\n\\r\\n  <a-footer>\\r\\n    <button type=\\\"button\\\" mat-raised-button (click)=\\\"cancel()\\\">\\r\\n      <span>{{ \\\"global.cancel\\\" | translate }}</span>\\r\\n    </button>\\r\\n\\r\\n    <button type=\\\"button\\\" color=\\\"primary\\\" mat-raised-button (click)=\\\"validate()\\\">\\r\\n      {{ \\\"global.validate\\\" | translate }}\\r\\n    </button>\\r\\n  </a-footer>\\r\\n</a-modal>\\r\\n\"","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\n\r\nimport { BidoCustomerDTO } from '../../../../../../../../generated_files/api-types/bido-customer-dto.interface';\r\nimport { ComponentOpenMode } from '../../../../../../shared/enums/component-open-mode.enum';\r\nimport { InputValidationService } from '../../../../../../shared/services/input-validation.service';\r\nimport { MessageService } from '../../../../../../shared/services/message.service';\r\nimport { PropertiesService } from '../../../../../../shared/services/properties.service';\r\nimport { SessionService } from '../../../../../../shared/services/session.service';\r\nimport { BidtProcurementRequestDTO } from '../../../../../../shared/types/api-types/bidt-procurement-request-dto.interface';\r\nimport { DialogComponent } from '../../../../../../shared/types/dialog-component';\r\nimport { LabelValue } from '../../../../../../shared/types/label-value.interface';\r\nimport { LogisticsService } from '../../../../logistics.service';\r\nimport { MaterialRequestManagementFormService } from '../../material-request-management-form.service';\r\n\r\n@Component({\r\n  selector: 'aw-change-customer-popup-form',\r\n  templateUrl: './change-customer-popup-form.component.html'\r\n})\r\nexport class ChangeCustomerPopupFormComponent extends DialogComponent implements OnInit {\r\n  @Input()\r\n  public procurementRequest: BidtProcurementRequestDTO;\r\n  @Output()\r\n  public onValidated: EventEmitter<BidoCustomerDTO>;\r\n\r\n  public customers: LabelValue<BidoCustomerDTO>[];\r\n  public newCustomer: BidoCustomerDTO;\r\n\r\n  public constructor(\r\n    public inputValidationService: InputValidationService,\r\n    public messageService: MessageService,\r\n    public sessionService: SessionService,\r\n    public propertiesService: PropertiesService,\r\n    private readonly materialRequestManagementFormService: MaterialRequestManagementFormService,\r\n    private readonly logisticsService: LogisticsService\r\n  ) {\r\n    super(ComponentOpenMode.Read, 'ChangeCustomerPopupFormComponent');\r\n    this.onValidated = new EventEmitter<BidoCustomerDTO>();\r\n    this.displayChange = new EventEmitter<boolean>();\r\n  }\r\n\r\n  public ngOnInit() {\r\n    this.updateOpenMode(this.openMode);\r\n    this.newCustomer = {};\r\n    if (!this.procurementRequest) {\r\n      this.procurementRequest = {};\r\n    }\r\n\r\n    this.customers = [];\r\n    this.materialRequestManagementFormService.findAllBidoCustomer().subscribe((customers: BidoCustomerDTO[]) => {\r\n      customers.forEach((customer: BidoCustomerDTO) => {\r\n        if (customer.isOwner && customer.customerCode) {\r\n          this.customers.push({\r\n            label:\r\n              (customer.customerCode as string) +\r\n              (customer.customerName ? ' - ' + (customer.customerName as string) : ''),\r\n            value: customer\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  public validate(): void {\r\n    if (this.newCustomer) {\r\n      this.procurementRequest.bidoCustomer = this.newCustomer;\r\n      this.procurementRequest.bidoCustomerCustomerCode = this.newCustomer.customerCode;\r\n      this.procurementRequest.bidoCustomerMandant = this.newCustomer.customerMandant;\r\n      this.logisticsService.addOrUpdateProcurementRequest(this.procurementRequest).subscribe({\r\n        next: (procurementRequest) => {\r\n          this.onValidated.emit(this.newCustomer);\r\n          this.cancel();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  public cancel(): void {\r\n    this.display = false;\r\n  }\r\n}\r\n","module.exports = \"<a-modal class=\\\"aw-modal\\\" [(visible)]=\\\"display\\\" [width]=\\\"50\\\">\\r\\n  <a-header>\\r\\n    <div class=\\\"modal-title\\\">{{ getComponentName() + \\\".changeSupplier\\\" | translate }}</div>\\r\\n  </a-header>\\r\\n\\r\\n  <a-content>\\r\\n    <ng-container>\\r\\n      <div class=\\\"section\\\">\\r\\n        <h4 class=\\\"section-title\\\">\\r\\n          {{ getComponentName() + \\\".currentSupplier\\\" | translate }}\\r\\n        </h4>\\r\\n        <div class=\\\"section-content\\\">\\r\\n          <div class=\\\"row\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"form-label\\\">\\r\\n                {{ getComponentName() + \\\".site\\\" | translate }}\\r\\n              </label>\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <div class=\\\"form-control-generic\\\" *ngIf=\\\"procurementRequest.bidtSiteIssue\\\">\\r\\n                  {{ procurementRequest?.bidtSiteIssue?.siteCode }}\\r\\n                  <ng-container *ngIf=\\\"procurementRequest?.bidtSiteIssue?.siteName\\\">\\r\\n                    - {{ procurementRequest?.bidtSiteIssue?.siteName }}\\r\\n                  </ng-container>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"form-label\\\">\\r\\n                {{ getComponentName() + \\\".workshop\\\" | translate }}\\r\\n              </label>\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <div class=\\\"form-control-generic\\\" *ngIf=\\\"currentSupplierWarehouse\\\">\\r\\n                  {{ currentSupplierWarehouse.whCode }}\\r\\n                  <ng-container *ngIf=\\\"currentSupplierWarehouse.whName\\\">\\r\\n                    - {{ currentSupplierWarehouse.whName }}\\r\\n                  </ng-container>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"section\\\">\\r\\n        <h4 class=\\\"section-title\\\">\\r\\n          {{ getComponentName() + \\\".newSupplier\\\" | translate }}\\r\\n        </h4>\\r\\n        <div class=\\\"section-content\\\">\\r\\n          <div class=\\\"row\\\">\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"form-label\\\">\\r\\n                {{ getComponentName() + \\\".site\\\" | translate }}\\r\\n              </label>\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <div class=\\\"form-control-generic\\\" *ngIf=\\\"procurementRequest.bidtSiteIssue\\\">\\r\\n                  {{ procurementRequest?.bidtSiteIssue?.siteCode }}\\r\\n                  <ng-container *ngIf=\\\"procurementRequest?.bidtSiteIssue?.siteName\\\">\\r\\n                    - {{ procurementRequest?.bidtSiteIssue?.siteName }}\\r\\n                  </ng-container>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"form-group required\\\">\\r\\n              <label class=\\\"form-label\\\">\\r\\n                {{ getComponentName() + \\\".workshop\\\" | translate }}\\r\\n              </label>\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <p-dropdown\\r\\n                  class=\\\"aw-dropdown fixed-width\\\"\\r\\n                  [options]=\\\"warehouses\\\"\\r\\n                  [showClear]=\\\"true\\\"\\r\\n                  placeholder=\\\"&nbsp;\\\"\\r\\n                  [(ngModel)]=\\\"newWarehouse\\\"\\r\\n                  appendTo=\\\"body\\\"\\r\\n                ></p-dropdown>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"section\\\">\\r\\n        <h4 class=\\\"section-title\\\">\\r\\n          {{ getComponentName() + \\\".quantity\\\" | translate }}\\r\\n        </h4>\\r\\n        <div class=\\\"section-content\\\">\\r\\n          <div class=\\\"row\\\">\\r\\n            <div class=\\\"form-group required\\\">\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <input type=\\\"number\\\" name=\\\"quantity\\\" class=\\\"aw-input\\\" [(ngModel)]=\\\"newQuantity\\\" />\\r\\n              </div>\\r\\n              <span style=\\\"padding-left: 15px; color: red;\\\" *ngIf=\\\"newQuantity > oldQuantity\\\">\\r\\n                {{ getComponentName() + \\\".quantityErrorMessage\\\" | translate }}\\r\\n              </span>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </ng-container>\\r\\n  </a-content>\\r\\n\\r\\n  <a-footer>\\r\\n    <button type=\\\"button\\\" mat-raised-button (click)=\\\"cancel()\\\">\\r\\n      <span>{{ \\\"global.cancel\\\" | translate }}</span>\\r\\n    </button>\\r\\n\\r\\n    <button\\r\\n      type=\\\"button\\\"\\r\\n      color=\\\"primary\\\"\\r\\n      mat-raised-button\\r\\n      (click)=\\\"validate()\\\"\\r\\n      [disabled]=\\\"!newQuantity || !(newQuantity > 0) || newQuantity > oldQuantity || !newWarehouse\\\"\\r\\n    >\\r\\n      {{ \\\"global.validate\\\" | translate }}\\r\\n    </button>\\r\\n  </a-footer>\\r\\n</a-modal>\\r\\n\"","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\n\r\nimport { AWPropertiesConstants } from '../../../../../../shared/constants/aw-properties-constants';\r\nimport { ComponentOpenMode } from '../../../../../../shared/enums/component-open-mode.enum';\r\nimport { InputValidationService } from '../../../../../../shared/services/input-validation.service';\r\nimport { MessageService } from '../../../../../../shared/services/message.service';\r\nimport { PropertiesService } from '../../../../../../shared/services/properties.service';\r\nimport { SessionService } from '../../../../../../shared/services/session.service';\r\nimport { CreateProcurementRequestInput } from '../../../../../../shared/types/api-input-types/logistic/create-procurement-request-input.interface';\r\nimport { BidtProcReqItemDTO } from '../../../../../../shared/types/api-types/bidt-proc-req-item-dto.interface';\r\nimport { BidtProcurementRequestDTO } from '../../../../../../shared/types/api-types/bidt-procurement-request-dto.interface';\r\nimport { BidtWarehouseDTO } from '../../../../../../shared/types/api-types/bidt-warehouse-dto.interface';\r\nimport { DialogComponent } from '../../../../../../shared/types/dialog-component';\r\nimport { LabelValue } from '../../../../../../shared/types/label-value.interface';\r\nimport { LogisticsService } from '../../../../logistics.service';\r\nimport { MaterialRequestManagementFormService } from '../../material-request-management-form.service';\r\n\r\n@Component({\r\n  selector: 'aw-change-warehouse-and-quantity-popup-form',\r\n  templateUrl: './change-warehouse-and-quantity-popup-form.component.html'\r\n})\r\nexport class ChangeWarehouseAndQuantityPopupFormComponent extends DialogComponent implements OnInit {\r\n  @Input()\r\n  public procurementRequest: BidtProcurementRequestDTO;\r\n  @Input()\r\n  public procurementRequestItem: BidtProcReqItemDTO;\r\n  @Input()\r\n  public oldQuantity: number;\r\n  @Input()\r\n  public totalQuantity: number;\r\n  @Output()\r\n  public onValidated: EventEmitter<void>;\r\n\r\n  public currentSupplierWarehouse: BidtWarehouseDTO;\r\n  public warehouses: LabelValue<BidtWarehouseDTO>[];\r\n  public newWarehouse: BidtWarehouseDTO | undefined;\r\n\r\n  public newQuantity: number;\r\n\r\n  public constructor(\r\n    public inputValidationService: InputValidationService,\r\n    public messageService: MessageService,\r\n    public sessionService: SessionService,\r\n    public propertiesService: PropertiesService,\r\n    private readonly materialRequestManagementFormService: MaterialRequestManagementFormService,\r\n    private readonly logisticsService: LogisticsService\r\n  ) {\r\n    super(ComponentOpenMode.Read, 'ChangeWarehouseAndQuantityPopupFormComponent');\r\n    this.onValidated = new EventEmitter<void>();\r\n    this.displayChange = new EventEmitter<boolean>();\r\n  }\r\n\r\n  public ngOnInit() {\r\n    this.updateOpenMode(this.openMode);\r\n    this.newQuantity = this.oldQuantity;\r\n    this.warehouses = [];\r\n    this.sessionService.getUserSiteId().subscribe({\r\n      next: (site) => {\r\n        if (site && !!site.siteId) {\r\n          this.materialRequestManagementFormService\r\n            .getWarehousesBySiteId(site.siteId)\r\n            .subscribe((warehousesList: BidtWarehouseDTO[]) => {\r\n              this.warehouses = warehousesList\r\n                .filter(\r\n                  (warehouse: BidtWarehouseDTO) =>\r\n                    !!warehouse.whCode &&\r\n                    !!warehouse.whName &&\r\n                    !!warehouse.whCategory &&\r\n                    warehouse.whCategory === AWPropertiesConstants.WAREHOUSE_CATEGORY_WAREHOUSE\r\n                )\r\n                .map((warehouse) => {\r\n                  return {\r\n                    label: `${warehouse.whCode} - ${warehouse.whName}`,\r\n                    value: warehouse\r\n                  };\r\n                })\r\n                .sort((s1, s2) => s1.label.localeCompare(s2.label));\r\n            });\r\n        }\r\n      }\r\n    });\r\n    if (this.procurementRequestItem.bidtWarehouseId === null && !!this.procurementRequest.bidtWarehouseIssue) {\r\n      this.currentSupplierWarehouse = this.procurementRequest.bidtWarehouseIssue;\r\n    } else if (!!this.procurementRequestItem.bidtWarehouseId) {\r\n      this.logisticsService.getWarehouseById(this.procurementRequestItem.bidtWarehouseId).subscribe({\r\n        next: (warehouse: BidtWarehouseDTO) => {\r\n          this.currentSupplierWarehouse = warehouse;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  public validate(): void {\r\n    if (this.totalQuantity === this.newQuantity) {\r\n      // maj warehouse procurement\r\n      if (!!this.newWarehouse) {\r\n        if (this.procurementRequestItem.bidtWarehouseId === null) {\r\n          this.procurementRequest.bidtWarehouseByBidtWarehouseIssueId = this.newWarehouse.wareHouseId as number;\r\n          this.procurementRequest.bidtWarehouseIssue = this.newWarehouse;\r\n          this.logisticsService.addOrUpdateProcurementRequest(this.procurementRequest).subscribe({\r\n            next: () => {\r\n              this.onValidated.emit();\r\n              this.messageService.showSuccessMessage(this.getTranslateKey('successOnChangeSupplier'));\r\n              this.cancel();\r\n            }\r\n          });\r\n        } else {\r\n          this.procurementRequestItem.bidtWarehouseId = this.newWarehouse.wareHouseId as number;\r\n          this.logisticsService.addOrUpdateItem(this.procurementRequestItem).subscribe({\r\n            next: () => {\r\n              this.onValidated.emit();\r\n              this.messageService.showSuccessMessage(this.getTranslateKey('successOnChangeSupplier'));\r\n              this.cancel();\r\n            }\r\n          });\r\n        }\r\n      }\r\n    } else if (this.totalQuantity > this.newQuantity) {\r\n      // update current item quantity (remove)\r\n      const newQty: number = Number(this.procurementRequestItem.requestedQuantity) - this.newQuantity;\r\n      this.logisticsService\r\n        .updateProcurementRequestItemQuantity({\r\n          itemId: this.procurementRequestItem.id as number,\r\n          newQuantity: newQty.toString(),\r\n          oldQuantity: this.procurementRequestItem.requestedQuantity as string\r\n        })\r\n        .subscribe({\r\n          next: () => {\r\n            // create item proc with warehouse data and new quanti\r\n            if (!!this.procurementRequestItem.birePnPnCode) {\r\n              const input: CreateProcurementRequestInput = {\r\n                bidtProcurementRequest: this.procurementRequest,\r\n                pnCode: this.procurementRequestItem.birePnPnCode,\r\n                quantity: this.newQuantity.toString()\r\n              };\r\n              this.logisticsService.createProcurementRequestItem(input).subscribe((newItem: BidtProcReqItemDTO) => {\r\n                if (!!this.newWarehouse) {\r\n                  newItem.bidtWarehouseId = this.newWarehouse.wareHouseId as number;\r\n                  this.logisticsService.addOrUpdateItem(newItem).subscribe({\r\n                    next: () => {\r\n                      this.onValidated.emit();\r\n                      this.messageService.showSuccessMessage(\r\n                        this.getTranslateKey('successOnChangeSupplierAndQuantity')\r\n                      );\r\n                      this.cancel();\r\n                    }\r\n                  });\r\n                }\r\n              });\r\n            }\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  public cancel(): void {\r\n    this.display = false;\r\n  }\r\n}\r\n","module.exports = \"<a-modal class=\\\"aw-modal\\\" [(visible)]=\\\"display\\\" [width]=\\\"45\\\">\\r\\n  <a-header>\\r\\n    <div class=\\\"modal-title\\\">\\r\\n      {{ getComponentName() + \\\".satisfactionRateDetails\\\" | translate }}\\r\\n\\r\\n      <div style=\\\"margin: 0 auto; width: 8rem;\\\">\\r\\n        <p-progressBar\\r\\n          [ngClass]=\\\"{\\r\\n            green: calculateSatisfactionRate() == 100,\\r\\n            yellow: calculateSatisfactionRate() < 100,\\r\\n            red: calculateSatisfactionRate() < 40\\r\\n          }\\\"\\r\\n          [value]=\\\"calculateSatisfactionRate()\\\"\\r\\n        ></p-progressBar>\\r\\n      </div>\\r\\n    </div>\\r\\n  </a-header>\\r\\n\\r\\n  <a-content>\\r\\n    <div class=\\\"column\\\">\\r\\n      <div class=\\\"row\\\" style=\\\"font-size: 1rem; font-weight: bold;\\\">\\r\\n        {{ getComponentName() + \\\".intro\\\" | translate }}\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"row\\\">\\r\\n        <span>{{ getComponentName() + \\\".sameSite\\\" | translate }}</span>\\r\\n        <div class=\\\"criteria-value ok\\\" *ngIf=\\\"sameSite\\\">{{ \\\"yes\\\" | translate }}</div>\\r\\n        <div class=\\\"criteria-value nok\\\" *ngIf=\\\"!sameSite\\\">{{ \\\"no\\\" | translate }}</div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"row\\\">\\r\\n        <span>{{ getComponentName() + \\\".bookingStatus\\\" | translate }}</span>\\r\\n        <div class=\\\"criteria-value ok\\\" *ngIf=\\\"bookingStatus\\\">{{ \\\"yes\\\" | translate }}</div>\\r\\n        <div class=\\\"criteria-value nok\\\" *ngIf=\\\"!bookingStatus\\\">{{ \\\"no\\\" | translate }}</div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"row\\\">\\r\\n        <span>{{ getComponentName() + \\\".availableAtDate\\\" | translate }}</span>\\r\\n        <div class=\\\"criteria-value ok\\\" *ngIf=\\\"availableAtDate\\\">{{ \\\"yes\\\" | translate }}</div>\\r\\n        <div class=\\\"criteria-value nok\\\" *ngIf=\\\"!availableAtDate\\\">{{ \\\"no\\\" | translate }}</div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"row\\\">\\r\\n        <span>{{ getComponentName() + \\\".potential\\\" | translate }}</span>\\r\\n        <div class=\\\"criteria-value ok\\\" *ngIf=\\\"potential\\\">{{ \\\"yes\\\" | translate }}</div>\\r\\n        <div class=\\\"criteria-value nok\\\" *ngIf=\\\"!potential\\\">{{ \\\"no\\\" | translate }}</div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"row\\\">\\r\\n        <span>{{ getComponentName() + \\\".calendarPotential\\\" | translate }}</span>\\r\\n        <div class=\\\"criteria-value ok\\\" *ngIf=\\\"calendarPotential\\\">{{ \\\"yes\\\" | translate }}</div>\\r\\n        <div class=\\\"criteria-value nok\\\" *ngIf=\\\"!calendarPotential\\\">{{ \\\"no\\\" | translate }}</div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"row\\\">\\r\\n        <span>{{ getComponentName() + \\\".noUnconfirmedFailure\\\" | translate }}</span>\\r\\n        <div class=\\\"criteria-value ok\\\" *ngIf=\\\"noUnconfirmedFailure\\\">{{ \\\"yes\\\" | translate }}</div>\\r\\n        <div class=\\\"criteria-value nok\\\" *ngIf=\\\"!noUnconfirmedFailure\\\">{{ \\\"no\\\" | translate }}</div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </a-content>\\r\\n\\r\\n  <a-footer>\\r\\n    <button type=\\\"button\\\" mat-raised-button (click)=\\\"closeDialog()\\\">\\r\\n      {{ \\\"global.close\\\" | translate }}\\r\\n    </button>\\r\\n  </a-footer>\\r\\n</a-modal>\\r\\n\"","module.exports = \":host .row {\\n  margin: 0.5rem 0; }\\n\\n:host .row > span {\\n  min-width: 40em;\\n  max-width: 40em;\\n  width: 40rem; }\\n\\n:host .criteria-value {\\n  width: 6rem;\\n  border-radius: 3px;\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n  justify-content: center; }\\n\\n:host .criteria-value.ok {\\n    background-color: #4caf50; }\\n\\n:host .criteria-value.nok {\\n    background-color: #f6685e; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWFpbi9sb2dpc3RpY3MvbWF0ZXJpYWwtcmVxdWVzdC1tYW5hZ2VtZW50L2Zvcm0vcG9wdXBzL2RpYWxvZy1zYXRpc2ZhY3Rpb24tcmF0ZS9EOlxcUHJvZmlsZXNcXGFwcmFkaGFuXFxEZXNrdG9wXFxBZXJvd2ViYlxcUFJPSkVDVFNcXGZyb250ZW5kX2Flcm93ZWJiL3NyY1xcYXBwXFxtYWluXFxsb2dpc3RpY3NcXG1hdGVyaWFsLXJlcXVlc3QtbWFuYWdlbWVudFxcZm9ybVxccG9wdXBzXFxkaWFsb2ctc2F0aXNmYWN0aW9uLXJhdGVcXGRpYWxvZy1zYXRpc2ZhY3Rpb24tcmF0ZS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvbWFpbi9sb2dpc3RpY3MvbWF0ZXJpYWwtcmVxdWVzdC1tYW5hZ2VtZW50L2Zvcm0vcG9wdXBzL2RpYWxvZy1zYXRpc2ZhY3Rpb24tcmF0ZS9EOlxcUHJvZmlsZXNcXGFwcmFkaGFuXFxEZXNrdG9wXFxBZXJvd2ViYlxcUFJPSkVDVFNcXGZyb250ZW5kX2Flcm93ZWJiL3NyY1xcc3R5bGVzXFxfY29uc3RhbnRzLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUE7RUFFSSxnQkFBZ0IsRUFBQTs7QUFGcEI7RUFNSSxlQUFlO0VBQ2YsZUFBZTtFQUNmLFlBQVksRUFBQTs7QUFSaEI7RUFZSSxXQUFXO0VBQ1gsa0JBQWtCO0VBQ2xCLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsbUJBQW1CO0VBQ25CLHVCQUF1QixFQUFBOztBQWpCM0I7SUFvQk0seUJDRGdCLEVBQUE7O0FEbkJ0QjtJQXdCTSx5QkNGYyxFQUFBIiwiZmlsZSI6InNyYy9hcHAvbWFpbi9sb2dpc3RpY3MvbWF0ZXJpYWwtcmVxdWVzdC1tYW5hZ2VtZW50L2Zvcm0vcG9wdXBzL2RpYWxvZy1zYXRpc2ZhY3Rpb24tcmF0ZS9kaWFsb2ctc2F0aXNmYWN0aW9uLXJhdGUuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwiY29uc3RhbnRzXCI7XHJcblxyXG46aG9zdCB7XHJcbiAgLnJvdyB7XHJcbiAgICBtYXJnaW46IDAuNXJlbSAwO1xyXG4gIH1cclxuXHJcbiAgLnJvdyA+IHNwYW4ge1xyXG4gICAgbWluLXdpZHRoOiA0MGVtO1xyXG4gICAgbWF4LXdpZHRoOiA0MGVtO1xyXG4gICAgd2lkdGg6IDQwcmVtO1xyXG4gIH1cclxuXHJcbiAgLmNyaXRlcmlhLXZhbHVlIHtcclxuICAgIHdpZHRoOiA2cmVtO1xyXG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcblxyXG4gICAgJi5vayB7XHJcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICRncmVlbi1saWdodDE7XHJcbiAgICB9XHJcblxyXG4gICAgJi5ub2sge1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkcmVkLWxpZ2h0MTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiJHByaW1hcnktYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcclxuJHNlY29uZGFyeS1iYWNrZ3JvdW5kLWNvbG9yOiAjZjBmMGYwO1xyXG4kcHJpbWFyeS10ZXh0LWNvbG9yOiAjMDAwO1xyXG4kc2Vjb25kYXJ5LXRleHQtY29sb3I6ICM1OTU5NTk7XHJcbiRhY2NlbnQtY29sb3I6ICMwMTU3OWI7XHJcblxyXG4kYm9keS1iYWNrZ3JvdW5kLWNvbG9yOiAjZThlYmVkO1xyXG4kdG9wYmFyLWNvbG9yOiAjZmFmYWZhO1xyXG5cclxuLy8gJHByaW1hcnktYmFja2dyb3VuZC1jb2xvcjogIzFlMWUxZTtcclxuLy8gJHNlY29uZGFyeS1iYWNrZ3JvdW5kLWNvbG9yOiAjMzMzMzMzO1xyXG4vLyAkcHJpbWFyeS10ZXh0LWNvbG9yOiAjZThlOGU4O1xyXG4vLyAkc2Vjb25kYXJ5LXRleHQtY29sb3I6ICNmZmY7XHJcbi8vICRhY2NlbnQtY29sb3I6ICM5Y2RjZmU7XHJcblxyXG4kYm9yZGVyLWNvbG9yOiAkc2Vjb25kYXJ5LXRleHQtY29sb3I7XHJcbiRib3JkZXItY29sb3ItLWRpc2FibGVkOiB0cmFuc3BhcmVudDtcclxuJGJvcmRlci1jb2xvci0tZm9jdXM6ICRhY2NlbnQtY29sb3I7XHJcbiRib3JkZXItY29sb3ItLWhvdmVyOiAjMWExYTFhO1xyXG5cclxuJGdyZWVuLWRhcmsxOiAjMjc2MzJhO1xyXG4kZ3JlZW4tbGlnaHQxOiAjNGNhZjUwO1xyXG4kb3JhbmdlOiAjZmZjMTA3O1xyXG4kcmVkLWRhcmsxOiAjYTgyNTI1O1xyXG4kcmVkLWxpZ2h0MTogI2Y2Njg1ZTtcclxuJGJsdWUtbGlnaHQxOiAjYjhkMGU4O1xyXG4kYmx1ZS1kYXJrMTogIzAwNmVhOTtcclxuJGdyZXkxOiAjYzhkNGQ2O1xyXG4keWVsbG93MTogI2RkZGYwMDtcclxuXHJcbiRjcml0aWNhbC12YWx1ZS1kYXJrOiAjZmJhNjQzOyAvLyBUT0RPOiByZW1vdmUgaXRcclxuJGNyaXRpY2FsLXZhbHVlLWxpZ2h0OiAjZmVjYzhlOyAvLyBUT0RPOiByZW1vdmUgaXRcclxuJGNhbGVuZGFyLXllbGxvdzogI2VmZWZiMDsgLy8gVE9ETzogcmVtb3ZlIGl0XHJcbiRiYWQtdmFsdWUtZGFyazogI2ZmNjc1ODsgLy8gVE9ETzogcmVtb3ZlIGl0XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4kYm9yZGVyLXJhZGl1czogNHB4O1xyXG4kYm9yZGVyLXN0eWxlOiBzb2xpZDtcclxuJGJvcmRlci13aWR0aDogMXB4O1xyXG4kZm9udC1mYW1pbHk6IFwiTGF0b0xhdGluV2ViXCI7XHJcbiRmb250LXNpemU6IDAuODc1cmVtO1xyXG4kZm9udC13ZWlnaHQ6IDQwMDtcclxuJGxpbmUtaGVpZ2h0OiAxLjQyODU3MTQyOTtcclxuJG1hcmdpbi12YWx1ZTogOHB4O1xyXG4kcGFnZS1tYXgtd2lkdGg6IDEzNjZweDtcclxuJGF0dHJpYnV0ZXMtY29sdW1uLXdpZHRoLTQ6IDQ7XHJcbiRhdHRyaWJ1dGVzLWNvbHVtbi13aWR0aC0zOiAzO1xyXG4kYXR0cmlidXRlcy1jb2x1bW4td2lkdGgtMjogMjtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiRsZWZ0LXNpZGViYXItd2lkdGgtLWNvbGxhcHNlZDogNTBweDtcclxuJGxlZnQtc2lkZWJhci13aWR0aC0tZXhwYW5kZWQ6IDIyMHB4O1xyXG4kcmlnaHQtc2lkZWJhci13aWR0aC0tY29sbGFwc2VkOiA1MHB4O1xyXG4kcmlnaHQtc2lkZWJhci13aWR0aC0tZXhwYW5kZWQ6IDIyMHB4O1xyXG4kdG9wYmFyLWhlaWdodDogNDBweDtcclxuJG1haW5iYXItYm9yZGVyLWNvbG9yOiBkYXJrZW4oJHNlY29uZGFyeS1iYWNrZ3JvdW5kLWNvbG9yLCA1JSk7XHJcbiRtYWluYmFyLWJvcmRlci13aWR0aDogMnB4O1xyXG4kcGFnZS1oZWFkZXItaGVpZ2h0OiA1LjVyZW07XHJcbiRmb3JtLWNvbnRyb2wtaGVpZ2h0OiAyLjVyZW07XHJcbiRjaGVja2JveC1oZWlnaHQ6IDEuMjVyZW07XHJcbiRyYWRpb2J1dHRvbi1oZWlnaHQ6IDEuMjVyZW07XHJcbiJdfQ== */\"","import { Component, Input } from '@angular/core';\r\nimport * as moment from 'moment';\r\n\r\nimport { ComponentOpenMode } from '../../../../../../shared/enums/component-open-mode.enum';\r\nimport { BidtProcurementRequestDTO } from '../../../../../../shared/types/api-types/bidt-procurement-request-dto.interface';\r\nimport { CandidateAssetDTO } from '../../../../../../shared/types/api-types/candidate-asset-dto.interface';\r\nimport { DialogComponent } from '../../../../../../shared/types/dialog-component';\r\nimport { NumberUtils } from '../../../../../../shared/utils/number-utils';\r\nimport { ObjectUtils } from '../../../../../../shared/utils/object-utils';\r\n\r\n@Component({\r\n  selector: 'aw-dialog-satisfaction-rate',\r\n  styleUrls: ['./dialog-satisfaction-rate.component.scss', '../../../shared/style.scss'],\r\n  templateUrl: './dialog-satisfaction-rate.component.html'\r\n})\r\nexport class DialogSatisfactionRateComponent extends DialogComponent {\r\n  @Input()\r\n  public candidateAsset: CandidateAssetDTO;\r\n\r\n  @Input()\r\n  public procurementRequest: BidtProcurementRequestDTO;\r\n\r\n  public sameSite: boolean;\r\n  public availableAtDate: boolean;\r\n  public potential: boolean;\r\n  public calendarPotential: boolean;\r\n  public bookingStatus: boolean;\r\n  public noUnconfirmedFailure: boolean;\r\n\r\n  public constructor() {\r\n    super(ComponentOpenMode.Read, 'DialogSatisfactionRateComponent');\r\n\r\n    this.candidateAsset = {};\r\n    this.procurementRequest = {};\r\n  }\r\n\r\n  public isAvailableAtDate(): boolean {\r\n    return !ObjectUtils.isDefined(this.candidateAsset.plannedAvailabilityDate);\r\n  }\r\n\r\n  public calculateSatisfactionRate(): number {\r\n    const rates: number[] = [];\r\n    const rate = (value: boolean) => {\r\n      rates.push(value ? 1 : 0);\r\n    };\r\n\r\n    // Availability at date\r\n    this.availableAtDate = this.isAvailableAtDate();\r\n    rate(this.availableAtDate);\r\n\r\n    // Not booked by another procurement request\r\n    this.bookingStatus =\r\n      !ObjectUtils.isDefined(this.candidateAsset.bookingProcurementRequest) ||\r\n      (this.candidateAsset.bookingProcurementRequest as BidtProcurementRequestDTO).id === this.procurementRequest.id;\r\n    rate(this.bookingStatus);\r\n\r\n    // Potential\r\n    this.potential =\r\n      !this.procurementRequest.requestedPotential ||\r\n      (!!this.candidateAsset.potentialValue &&\r\n        NumberUtils.fromString(this.candidateAsset.potentialValue) >=\r\n          NumberUtils.fromString(this.procurementRequest.requestedPotential));\r\n    rate(this.potential);\r\n\r\n    // Same site\r\n    this.sameSite =\r\n      !!this.candidateAsset.siteReceipt &&\r\n      !!this.procurementRequest.bidtSiteReceipt &&\r\n      this.candidateAsset.siteReceipt.siteId === this.procurementRequest.bidtSiteReceipt.siteId;\r\n    rate(this.sameSite);\r\n\r\n    // No Unconfirmed Failure\r\n    this.noUnconfirmedFailure = !ObjectUtils.isDefined(this.candidateAsset.unconfirmedFailure);\r\n    rate(this.noUnconfirmedFailure);\r\n\r\n    // Calendar potential\r\n    if (!this.candidateAsset.calendarPotential) {\r\n      this.calendarPotential = true;\r\n    } else {\r\n      this.calendarPotential = moment(this.candidateAsset.calendarPotential).isAfter(\r\n        moment(this.procurementRequest.calendarPotential || this.procurementRequest.requestedDate)\r\n      );\r\n    }\r\n    rate(this.calendarPotential);\r\n\r\n    // tslint:disable-next-line:no-magic-numbers\r\n    return NumberUtils.roundNumber((rates.filter((value) => value === 1).length / rates.length) * 100, 0);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CalendarModule } from 'primeng/calendar';\r\nimport { CheckboxModule } from 'primeng/checkbox';\r\nimport { DropdownModule } from 'primeng/dropdown';\r\nimport { FileUploadModule } from 'primeng/fileupload';\r\nimport { InputTextareaModule } from 'primeng/inputtextarea';\r\nimport { KeyFilterModule } from 'primeng/keyfilter';\r\nimport { MessageModule } from 'primeng/message';\r\nimport { OverlayPanelModule } from 'primeng/overlaypanel';\r\nimport { InputSwitchModule } from 'primeng/primeng';\r\nimport { ProgressBarModule } from 'primeng/progressbar';\r\nimport { RadioButtonModule } from 'primeng/radiobutton';\r\nimport { SelectButtonModule } from 'primeng/selectbutton';\r\nimport { SplitButtonModule } from 'primeng/splitbutton';\r\nimport { TableModule } from 'primeng/table';\r\nimport { TooltipModule } from 'primeng/tooltip';\r\nimport { TriStateCheckboxModule } from 'primeng/tristatecheckbox';\r\n\r\nimport { AngularCommonSharedModule } from '../../../shared/angular-common-shared.module';\r\nimport { AngularGenericTemplatesSharedModule } from '../../../shared/angular-generic-templates-shared-module';\r\nimport { AppCommonSharedModule } from '../../../shared/app-common-shared.module';\r\nimport { ManageSearchCriteriaModule } from '../../../shared/components/manage-search-criteria/manage-search-criteria.module';\r\nimport { ModalModule } from '../../../shared/components/modal/modal.module';\r\nimport { FileService } from '../../../shared/services/file.service';\r\nimport { DynamicComponentLoaderModule } from '../../dynamic-component-loader/dynamic-component-loader.module';\r\nimport { ProcurementRequestSearchService } from '../procurement-request/search/procurement-request-search.service';\r\nimport { TransferOrderPopupModule } from '../transfer-order/search/transfer-order-popup/transfer-order-popup.module';\r\nimport { TransferOrderService } from '../transfer-order/shared/transfer-order-service';\r\n\r\nimport { MaterialRequestManagementFormComponent } from './form/material-request-management-form.component';\r\nimport { MaterialRequestManagementFormService } from './form/material-request-management-form.service';\r\nimport { ChangeCustomerPopupFormComponent } from './form/popups/change-customer-popup-form/change-customer-popup-form.component';\r\nimport { ChangeWarehouseAndQuantityPopupFormComponent } from './form/popups/change-warehouse-and-quantity-popup-form/change-warehouse-and-quantity-popup-form.component';\r\nimport { DialogSatisfactionRateComponent } from './form/popups/dialog-satisfaction-rate/dialog-satisfaction-rate.component';\r\nimport { MaterialRequestManagementSearchComponent } from './search/material-request-management-search.component';\r\nimport { MaterialRequestManagementSearchService } from './search/material-request-management-search.service';\r\nimport { DialogImageComponent } from './shared/popups/dialog-image/dialog-image.component';\r\n\r\n/******************************************************************************\r\n * Modules\r\n *************************************************************************** */\r\n\r\nconst EXTERNAL_MODULES = [\r\n  CalendarModule,\r\n  CheckboxModule,\r\n  DropdownModule,\r\n  FileUploadModule,\r\n  InputTextareaModule,\r\n  InputSwitchModule,\r\n  TableModule,\r\n  TooltipModule,\r\n  KeyFilterModule,\r\n  MessageModule,\r\n  OverlayPanelModule,\r\n  ProgressBarModule,\r\n  RadioButtonModule,\r\n  SelectButtonModule,\r\n  SplitButtonModule,\r\n  TriStateCheckboxModule\r\n];\r\n\r\nconst INTERNAL_MODULES = [ModalModule, TransferOrderPopupModule];\r\n\r\n/******************************************************************************\r\n * Components\r\n *************************************************************************** */\r\n\r\nconst COMPONENTS = [\r\n  DialogImageComponent,\r\n  ChangeCustomerPopupFormComponent,\r\n  ChangeWarehouseAndQuantityPopupFormComponent,\r\n  DialogSatisfactionRateComponent\r\n];\r\n\r\nconst DYNAMIC_COMPONENTS = [MaterialRequestManagementSearchComponent, MaterialRequestManagementFormComponent];\r\n\r\n/******************************************************************************\r\n * Services\r\n *************************************************************************** */\r\n\r\nconst SERVICES = [\r\n  MaterialRequestManagementSearchService,\r\n  MaterialRequestManagementFormService,\r\n  FileService,\r\n  ProcurementRequestSearchService,\r\n  TransferOrderService\r\n];\r\n\r\n@NgModule({\r\n  declarations: [...COMPONENTS, ...DYNAMIC_COMPONENTS],\r\n  imports: [\r\n    AngularCommonSharedModule,\r\n    AngularGenericTemplatesSharedModule,\r\n    AppCommonSharedModule,\r\n    DynamicComponentLoaderModule.forChild(DYNAMIC_COMPONENTS),\r\n    ManageSearchCriteriaModule,\r\n    ...EXTERNAL_MODULES,\r\n    ...INTERNAL_MODULES\r\n  ],\r\n  providers: [...SERVICES]\r\n})\r\nexport class MaterialRequestManagementModule {}\r\n","module.exports = \"<div class=\\\"page-header-container\\\">\\r\\n  <div class=\\\"page-context\\\">\\r\\n    <div class=\\\"page-title-container\\\">\\r\\n      <div class=\\\"page-title\\\">\\r\\n        {{ \\\"transaction.\\\" + componentData.componentId | translate }}\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"page-secondary-actions\\\">\\r\\n        <i\\r\\n          class=\\\"fa fa-fw aw-icon aw-icon-with-border\\\"\\r\\n          [ngClass]=\\\"{ 'fa-star': isFavoriteEntry, 'fa-star-o': !isFavoriteEntry }\\\"\\r\\n          aria-hidden=\\\"true\\\"\\r\\n          (click)=\\\"updateFavoriteState()\\\"\\r\\n          pTooltip=\\\"{{ 'page.' + (isFavoriteEntry ? 'removeFromFavorites' : 'addToFavorites') | translate }}\\\"\\r\\n          tooltipPosition=\\\"bottom\\\"\\r\\n        ></i>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"page-subtitle-container\\\">\\r\\n      <div class=\\\"page-subtitle\\\">\\r\\n        {{ \\\"page.searchPage\\\" | translate }}\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"page-primary-actions\\\">\\r\\n    <button type=\\\"button\\\" mat-raised-button (click)=\\\"openNewMaterialRequestSearch()\\\">\\r\\n      {{ componentData.componentId + \\\".newSearch\\\" | translate }}\\r\\n    </button>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"page-wrapper\\\">\\r\\n  <div class=\\\"page-container search-page-container\\\">\\r\\n    <div class=\\\"page-content\\\">\\r\\n      <div class=\\\"grid-row\\\" *ngIf=\\\"showSearchPanel\\\">\\r\\n        <div class=\\\"grid-cell--12\\\">\\r\\n          <div class=\\\"grid-cell grid-cell--container\\\">\\r\\n            <div class=\\\"grid-cell-header\\\">\\r\\n              <div class=\\\"grid-cell-title-container\\\">\\r\\n                <h3 class=\\\"grid-cell-title\\\">{{ \\\"global.search\\\" | translate }}</h3>\\r\\n              </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"grid-cell-content\\\">\\r\\n              <div class=\\\"column\\\">\\r\\n                <div class=\\\"row search-criteria-header\\\">\\r\\n                  <aw-manage-search-criteria\\r\\n                    [componentId]=\\\"SEARCH_CRITERIA_ID\\\"\\r\\n                    (onSelected)=\\\"loadSearchCriteria($event)\\\"\\r\\n                    (onSavedAsked)=\\\"saveSearchCriteriaAsked()\\\"\\r\\n                    [objectFromPage]=\\\"criteriaToSave\\\"\\r\\n                    [canChange]=\\\"!hasBeenCalculated\\\"\\r\\n                  ></aw-manage-search-criteria>\\r\\n                </div>\\r\\n                <div class=\\\"row\\\">\\r\\n                  <div class=\\\"grid-cell--12\\\">\\r\\n                    <div class=\\\"grid-cell-content grid-cell-content-with-section\\\">\\r\\n                      <div class=\\\"section\\\">\\r\\n                        <h4 class=\\\"section-title\\\">\\r\\n                          {{ componentData.componentId + \\\".supplier\\\" | translate }}\\r\\n                        </h4>\\r\\n                        <div class=\\\"section-content\\\">\\r\\n                          <div class=\\\"row\\\">\\r\\n                            <div class=\\\"form-group required\\\">\\r\\n                              <label class=\\\"form-label\\\">\\r\\n                                {{ componentData.componentId + \\\".site\\\" | translate }}\\r\\n                              </label>\\r\\n                              <div class=\\\"form-control\\\">\\r\\n                                <p-dropdown\\r\\n                                  class=\\\"aw-dropdown fixed-width\\\"\\r\\n                                  [options]=\\\"materialRequestSites\\\"\\r\\n                                  [showClear]=\\\"true\\\"\\r\\n                                  placeholder=\\\"&nbsp;\\\"\\r\\n                                  [(ngModel)]=\\\"searchObject.siteId\\\"\\r\\n                                  (onChange)=\\\"loadWarehouses()\\\"\\r\\n                                ></p-dropdown>\\r\\n                              </div>\\r\\n                            </div>\\r\\n\\r\\n                            <div class=\\\"form-group required\\\">\\r\\n                              <label class=\\\"form-label\\\">\\r\\n                                {{ componentData.componentId + \\\".warehouseWorkCenter\\\" | translate }}\\r\\n                              </label>\\r\\n                              <div class=\\\"form-control\\\">\\r\\n                                <p-dropdown\\r\\n                                  class=\\\"aw-dropdown fixed-width\\\"\\r\\n                                  [options]=\\\"materialRequestWorkCenters\\\"\\r\\n                                  [showClear]=\\\"true\\\"\\r\\n                                  placeholder=\\\"&nbsp;\\\"\\r\\n                                  [(ngModel)]=\\\"searchObject.warehouseId\\\"\\r\\n                                >\\r\\n                                </p-dropdown>\\r\\n                              </div>\\r\\n                            </div>\\r\\n\\r\\n                            <div class=\\\"form-group required\\\">\\r\\n                              <label class=\\\"form-label\\\">\\r\\n                                {{ componentData.componentId + \\\".partner\\\" | translate }}\\r\\n                              </label>\\r\\n                              <div class=\\\"form-control\\\">\\r\\n                                <p-dropdown\\r\\n                                  class=\\\"aw-dropdown fixed-width\\\"\\r\\n                                  [options]=\\\"materialRequestPartners\\\"\\r\\n                                  [showClear]=\\\"true\\\"\\r\\n                                  placeholder=\\\"&nbsp;\\\"\\r\\n                                  [(ngModel)]=\\\"searchObject.partnerId\\\"\\r\\n                                >\\r\\n                                </p-dropdown>\\r\\n                              </div>\\r\\n                            </div>\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n\\r\\n                      <div class=\\\"section\\\">\\r\\n                        <h4 class=\\\"section-title\\\">\\r\\n                          {{ componentData.componentId + \\\".criticity\\\" | translate }}\\r\\n                        </h4>\\r\\n                        <div class=\\\"section-content\\\">\\r\\n                          <div class=\\\"row\\\">\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                              <div class=\\\"form-control\\\">\\r\\n                                <p-selectButton\\r\\n                                  [options]=\\\"materialRequestSelectItemList\\\"\\r\\n                                  [(ngModel)]=\\\"searchObject.criticity\\\"\\r\\n                                ></p-selectButton>\\r\\n                              </div>\\r\\n                            </div>\\r\\n\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                              <label class=\\\"form-label\\\">\\r\\n                                {{ componentData.componentId + \\\".desiredDate\\\" | translate }}\\r\\n                              </label>\\r\\n                              <div class=\\\"form-control\\\">\\r\\n                                <p-calendar\\r\\n                                  showButtonBar=\\\"true\\\"\\r\\n                                  [monthNavigator]=\\\"true\\\"\\r\\n                                  [yearNavigator]=\\\"true\\\"\\r\\n                                  [yearRange]=\\\"sessionService.calendarYearRange\\\"\\r\\n                                  class=\\\"aw-calendar\\\"\\r\\n                                  [dateFormat]=\\\"sessionService.dateFormatPrimeNG\\\"\\r\\n                                  [locale]=\\\"sessionService.calendarFormat\\\"\\r\\n                                  [readonlyInput]=\\\"true\\\"\\r\\n                                  [(ngModel)]=\\\"searchObject.desiredDate\\\"\\r\\n                                >\\r\\n                                </p-calendar>\\r\\n                              </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"form-group\\\"></div>\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                </div>\\r\\n\\r\\n                <div class=\\\"row search-criteria-footer\\\">\\r\\n                  <div class=\\\"search-actions\\\">\\r\\n                    <button\\r\\n                      type=\\\"button\\\"\\r\\n                      mat-raised-button\\r\\n                      (click)=\\\"search()\\\"\\r\\n                      color=\\\"primary\\\"\\r\\n                      appKeyPress\\r\\n                      [keyCode]=\\\"'Enter'\\\"\\r\\n                      (keyPress)=\\\"search()\\\"\\r\\n                    >\\r\\n                      {{ \\\"global.toSearch\\\" | translate }}\\r\\n                    </button>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"grid-row\\\">\\r\\n        <div class=\\\"grid-cell--12\\\">\\r\\n          <div #resultsContainerAnchor class=\\\"grid-cell grid-cell--container\\\">\\r\\n            <div class=\\\"grid-cell-header\\\">\\r\\n              <div class=\\\"grid-cell-title-container\\\">\\r\\n                <h3 class=\\\"grid-cell-title\\\">\\r\\n                  {{ componentData.componentId + \\\".materialRequest\\\" | translate }} ({{\\r\\n                    materialRequestTable ? materialRequestTable.length : 0\\r\\n                  }})\\r\\n                </h3>\\r\\n              </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"grid-cell-content\\\">\\r\\n              <p-table\\r\\n                [resizableColumns]=\\\"true\\\"\\r\\n                #ptableResults\\r\\n                class=\\\"aw-table2\\\"\\r\\n                [columns]=\\\"materialRequestTableCols\\\"\\r\\n                [value]=\\\"materialRequestTable\\\"\\r\\n                [(selection)]=\\\"selectedMaterialRequests\\\"\\r\\n                [scrollable]=\\\"true\\\"\\r\\n              >\\r\\n                <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n                  <span *ngIf=\\\"!isLoading\\\"> &nbsp;</span>\\r\\n\\r\\n                  <div *ngIf=\\\"isLoading\\\" class=\\\"aw-table-loading-indicator\\\">\\r\\n                    <div class=\\\"loading-message\\\">{{ \\\"table.loadingData\\\" | translate }}</div>\\r\\n                    <div class=\\\"lds-hourglass\\\"></div>\\r\\n                  </div>\\r\\n                </ng-template>\\r\\n\\r\\n                <ng-template pTemplate=\\\"caption\\\">\\r\\n                  <div class=\\\"aw-table-header\\\">\\r\\n                    <div class=\\\"aw-table-icon-actions\\\" style=\\\"margin-left: 0px;\\\">\\r\\n                      <i\\r\\n                        class=\\\"fa fa-fw fa-filter aw-icon aw-icon-with-border aw-icon-with-overlay\\\"\\r\\n                        aria-hidden=\\\"true\\\"\\r\\n                        pTooltip=\\\"{{\\r\\n                          getComponentName() + (filtersVisible ? '.hideFilters' : '.showFilters') | translate\\r\\n                        }}\\\"\\r\\n                        tooltipPosition=\\\"top\\\"\\r\\n                        [ngClass]=\\\"{ active: filtersVisible }\\\"\\r\\n                        (click)=\\\"opFilters.toggle($event)\\\"\\r\\n                      ></i>\\r\\n                    </div>\\r\\n                    <div class=\\\"aw-table-global-filter\\\">\\r\\n                      <label class=\\\"aw-table-global-filter-label\\\">\\r\\n                        <i class=\\\"fa fa-fw fa-search\\\" aria-hidden=\\\"true\\\"></i>\\r\\n                      </label>\\r\\n\\r\\n                      <input\\r\\n                        #ptableResultsGlobalFilter\\r\\n                        class=\\\"aw-table-global-filter-input\\\"\\r\\n                        type=\\\"text\\\"\\r\\n                        placeholder=\\\"{{ 'table.globalFilterText' | translate }}\\\"\\r\\n                        (input)=\\\"ptableResults.filterGlobal($event.target.value, 'contains')\\\"\\r\\n                      />\\r\\n                    </div>\\r\\n                  </div>\\r\\n                </ng-template>\\r\\n\\r\\n                <ng-template pTemplate=\\\"colgroup\\\" let-columns>\\r\\n                  <colgroup>\\r\\n                    <col *ngFor=\\\"let col of columns\\\" [ngStyle]=\\\"{ width: col.width }\\\" />\\r\\n                    <col [ngStyle]=\\\"{ width: '10%' }\\\" />\\r\\n                  </colgroup>\\r\\n                </ng-template>\\r\\n\\r\\n                <ng-template pTemplate=\\\"header\\\" let-columns>\\r\\n                  <tr>\\r\\n                    <th pResizableColumn *ngFor=\\\"let col of columns\\\" [ngStyle]=\\\"{ 'text-align': col.alignment }\\\">\\r\\n                      {{ componentData.componentId + \\\".\\\" + col.field | translate }}\\r\\n                    </th>\\r\\n                    <th></th>\\r\\n                  </tr>\\r\\n                </ng-template>\\r\\n\\r\\n                <ng-template pTemplate=\\\"body\\\" let-rowData let-columns=\\\"columns\\\" let-rowIndex=\\\"rowIndex\\\">\\r\\n                  <tr [pSelectableRow]=\\\"rowData\\\" [pSelectableRowIndex]=\\\"rowIndex\\\">\\r\\n                    <td *ngFor=\\\"let col of columns\\\" [ngSwitch]=\\\"col.field\\\" [ngStyle]=\\\"{ 'text-align': col.alignment }\\\">\\r\\n                      <div *ngSwitchCase=\\\"'illustration'\\\" class=\\\"flex--1 item-structure-node-image\\\">\\r\\n                        <img [src]=\\\"rowData[col.field]\\\" class=\\\"img-dimension\\\" />\\r\\n                      </div>\\r\\n                      <div *ngSwitchCase=\\\"'references'\\\">\\r\\n                        <div class=\\\"row\\\">\\r\\n                          <div class=\\\"flex--2 font-bold\\\">\\r\\n                            <a>{{ rowData[\\\"sn\\\"] }}</a>\\r\\n                          </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"row\\\">\\r\\n                          <div class=\\\"flex--2\\\">{{ componentData.componentId + \\\".createdBy\\\" | translate }}</div>\\r\\n                          <div class=\\\"flex--2\\\">\\r\\n                            <a>{{ rowData[\\\"createdBy\\\"] }}</a>\\r\\n                          </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"row\\\">\\r\\n                          <div class=\\\"flex--2\\\">{{ componentData.componentId + \\\".createdOn\\\" | translate }}</div>\\r\\n                          <div class=\\\"flex--2 font-bold\\\">{{ rowData[\\\"createdOn\\\"] }}</div>\\r\\n                        </div>\\r\\n                        <div class=\\\"row\\\">\\r\\n                          <div class=\\\"flex--2\\\">{{ componentData.componentId + \\\".origin\\\" | translate }}</div>\\r\\n                          <div class=\\\"flex--2 font-bold\\\">{{ rowData[\\\"origin\\\"] }}</div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n                      <div *ngSwitchCase=\\\"'item'\\\">\\r\\n                        <div class=\\\"row\\\">\\r\\n                          <div class=\\\"flex--2\\\">{{ componentData.componentId + \\\".pn\\\" | translate }}</div>\\r\\n                          <div class=\\\"flex--2 font-bold\\\">\\r\\n                            <a>{{ rowData[\\\"pn\\\"] }}</a>\\r\\n                          </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"row\\\">\\r\\n                          <div class=\\\"flex--2\\\">{{ rowData[\\\"designation\\\"] }}</div>\\r\\n                        </div>\\r\\n                        <div class=\\\"row\\\">\\r\\n                          <div class=\\\"flex--2\\\">{{ componentData.componentId + \\\".quantity\\\" | translate }}</div>\\r\\n                          <div class=\\\"flex--2 font-bold\\\">{{ rowData[\\\"quantity\\\"] }}</div>\\r\\n                        </div>\\r\\n                        <div class=\\\"row\\\">\\r\\n                          <div class=\\\"flex--2\\\">{{ componentData.componentId + \\\".desiredPotential\\\" | translate }}</div>\\r\\n                          <div class=\\\"flex--2 font-bold\\\">\\r\\n                            {{ rowData[\\\"desiredPotential\\\"] + \\\" \\\" + rowData[\\\"potentialUnit\\\"] }}\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n                      <div *ngSwitchCase=\\\"'recepient'\\\">\\r\\n                        <div class=\\\"row\\\">\\r\\n                          <div class=\\\"flex--2\\\">{{ componentData.componentId + \\\".site\\\" | translate }}</div>\\r\\n                          <div class=\\\"flex--2 font-bold\\\">{{ rowData[\\\"site\\\"] }}</div>\\r\\n                        </div>\\r\\n                        <div class=\\\"row\\\">\\r\\n                          <div class=\\\"flex--2\\\">{{ componentData.componentId + \\\".warehouse\\\" | translate }}</div>\\r\\n                          <div class=\\\"flex--2 font-bold\\\">{{ rowData[\\\"warehouse\\\"] }}</div>\\r\\n                        </div>\\r\\n                        <div class=\\\"row\\\">\\r\\n                          <div class=\\\"flex--2\\\">{{ componentData.componentId + \\\".desiredOn\\\" | translate }}</div>\\r\\n                          <div class=\\\"flex--2 font-bold\\\">{{ rowData[\\\"desiredOn\\\"] }}</div>\\r\\n                        </div>\\r\\n                        <div class=\\\"row\\\">\\r\\n                          <div class=\\\"flex--2\\\">{{ componentData.componentId + \\\".criticity\\\" | translate }}</div>\\r\\n                          <div class=\\\"flex--2\\\">\\r\\n                            <span style=\\\"text-align: center;\\\">\\r\\n                              <span *ngIf=\\\"rowData['criticity'] === 'green'\\\" class=\\\"ok\\\">\\r\\n                                {{ componentData.componentId + \\\".routine\\\" | translate }}\\r\\n                              </span>\\r\\n\\r\\n                              <span *ngIf=\\\"rowData['criticity'] === 'red'\\\" class=\\\"nok\\\">\\r\\n                                {{ componentData.componentId + \\\".immediate\\\" | translate }}\\r\\n                              </span>\\r\\n\\r\\n                              <span *ngIf=\\\"rowData['criticity'] === 'yellow'\\\" class=\\\"warning\\\">\\r\\n                                {{ componentData.componentId + \\\".urgent\\\" | translate }}\\r\\n                              </span>\\r\\n                            </span>\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n                      <div *ngSwitchCase=\\\"'situation'\\\">\\r\\n                        <div class=\\\"row\\\">\\r\\n                          <div class=\\\"flex--2\\\">{{ componentData.componentId + \\\".status\\\" | translate }}</div>\\r\\n                          <div class=\\\"flex--2 font-bold\\\">{{ rowData[\\\"status\\\"] }}</div>\\r\\n                        </div>\\r\\n                        <div class=\\\"row\\\">\\r\\n                          <div class=\\\"flex--2\\\">{{ componentData.componentId + \\\".progress\\\" | translate }}</div>\\r\\n                          <div class=\\\"flex--2 font-bold\\\">{{ rowData[\\\"progress\\\"] }}</div>\\r\\n                        </div>\\r\\n                        <div class=\\\"row\\\">\\r\\n                          <div class=\\\"flex--2\\\">{{ componentData.componentId + \\\".served\\\" | translate }}</div>\\r\\n                          <div class=\\\"flex--2 font-bold\\\">{{ rowData[\\\"served\\\"] }}</div>\\r\\n                        </div>\\r\\n                        <div class=\\\"row\\\">\\r\\n                          <div class=\\\"flex--2\\\">{{ componentData.componentId + \\\".booked\\\" | translate }}</div>\\r\\n                          <div class=\\\"flex--2 font-bold\\\">{{ rowData[\\\"booked\\\"] }}</div>\\r\\n                        </div>\\r\\n                        <div class=\\\"row\\\">\\r\\n                          <div class=\\\"flex--2\\\">{{ componentData.componentId + \\\".notBooked\\\" | translate }}</div>\\r\\n                          <div class=\\\"flex--2 font-bold\\\">{{ rowData[\\\"notBooked\\\"] }}</div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n                      <div *ngSwitchDefault>{{ rowData[col.field] }}</div>\\r\\n                    </td>\\r\\n                    <td>\\r\\n                      <button type=\\\"button\\\" mat-raised-button (click)=\\\"manageMaterialRequest(rowData)\\\">\\r\\n                        {{ componentData.componentId + \\\".manage\\\" | translate }}\\r\\n                      </button>\\r\\n                    </td>\\r\\n                  </tr>\\r\\n                </ng-template>\\r\\n              </p-table>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <p-overlayPanel #opFilters class=\\\"aw-overlay\\\" (onShow)=\\\"filtersVisible = true\\\" (onHide)=\\\"filtersVisible = false\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"form-group flex--1\\\">\\r\\n        <div class=\\\"form-control\\\">\\r\\n          <label class=\\\"form-label\\\"> {{ getComponentName() + \\\".criticity\\\" | translate }} </label>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"form-group flex--2\\\">\\r\\n        <div class=\\\"form-control\\\">\\r\\n          <p-selectButton\\r\\n            [options]=\\\"filterCriticityList\\\"\\r\\n            multiple=\\\"multiple\\\"\\r\\n            [(ngModel)]=\\\"searchFilterObject.criticity\\\"\\r\\n          >\\r\\n          </p-selectButton>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"form-group flex--1\\\">\\r\\n        <div class=\\\"form-control\\\">\\r\\n          <label class=\\\"form-label\\\"> {{ getComponentName() + \\\".status\\\" | translate }} </label>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"form-group flex--2\\\">\\r\\n        <div class=\\\"form-control\\\">\\r\\n          <p-selectButton [options]=\\\"filterStatusList\\\" multiple=\\\"multiple\\\" [(ngModel)]=\\\"searchFilterObject.status\\\">\\r\\n          </p-selectButton>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"form-group flex--1\\\">\\r\\n        <div class=\\\"form-control\\\">\\r\\n          <label class=\\\"form-label\\\"> {{ getComponentName() + \\\".progress\\\" | translate }} </label>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"form-group flex--2\\\">\\r\\n        <div class=\\\"form-control\\\">\\r\\n          <p-selectButton [options]=\\\"filterProgressList\\\" multiple=\\\"multiple\\\" [(ngModel)]=\\\"searchFilterObject.progress\\\">\\r\\n          </p-selectButton>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"form-group flex--1\\\">\\r\\n        <div class=\\\"form-control\\\">\\r\\n          <label class=\\\"form-label\\\"> {{ getComponentName() + \\\".origin\\\" | translate }} </label>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"form-group flex--2\\\">\\r\\n        <div class=\\\"form-control\\\">\\r\\n          <p-selectButton [options]=\\\"filterOriginList\\\" multiple=\\\"multiple\\\" [(ngModel)]=\\\"searchFilterObject.origin\\\">\\r\\n          </p-selectButton>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"row\\\">\\r\\n      <div class=\\\"form-group flex--1\\\">\\r\\n        <label class=\\\"form-label\\\"> {{ getComponentName() + \\\".desiredDate\\\" | translate }} </label>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"form-group  flex--1\\\">\\r\\n        <div class=\\\"form-control\\\">\\r\\n          <p-dropdown\\r\\n            class=\\\"aw-dropdown fixed-width\\\"\\r\\n            [options]=\\\"filterDesiredDateOptions\\\"\\r\\n            [showClear]=\\\"true\\\"\\r\\n            placeholder=\\\"&nbsp;\\\"\\r\\n            [(ngModel)]=\\\"searchFilterObject.desiredOption\\\"\\r\\n          >\\r\\n          </p-dropdown>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"form-group  flex--1\\\">\\r\\n        <div class=\\\"form-control\\\">\\r\\n          <p-calendar\\r\\n            showButtonBar=\\\"true\\\"\\r\\n            [monthNavigator]=\\\"true\\\"\\r\\n            [yearNavigator]=\\\"true\\\"\\r\\n            [yearRange]=\\\"sessionService.calendarYearRange\\\"\\r\\n            class=\\\"aw-calendar\\\"\\r\\n            [dateFormat]=\\\"sessionService.dateFormatPrimeNG\\\"\\r\\n            [locale]=\\\"sessionService.calendarFormat\\\"\\r\\n            [(ngModel)]=\\\"searchFilterObject.desiredDate\\\"\\r\\n          ></p-calendar>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"row action-list\\\">\\r\\n      <button type=\\\"button\\\" mat-raised-button (click)=\\\"resetFilters()\\\">\\r\\n        {{ \\\"global.reset\\\" | translate }}\\r\\n      </button>\\r\\n\\r\\n      <button type=\\\"button\\\" mat-raised-button (click)=\\\"filterSearchResult()\\\">\\r\\n        {{ \\\"global.filter\\\" | translate }}\\r\\n      </button>\\r\\n    </div>\\r\\n  </p-overlayPanel>\\r\\n</div>\\r\\n\"","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { SelectItem } from 'primeng/api';\r\n\r\nimport { ISearchCriteria } from '../../../../shared/components/manage-search-criteria/search-criteria.interface';\r\nimport { AppConstants } from '../../../../shared/constants/app-constants';\r\nimport { ComponentConstants } from '../../../../shared/constants/component-constants';\r\nimport { ComponentOpenMode } from '../../../../shared/enums/component-open-mode.enum';\r\nimport { DateService } from '../../../../shared/services/date.service';\r\nimport { FavoriteService } from '../../../../shared/services/favorite.service';\r\nimport { LoaderService } from '../../../../shared/services/loader.service';\r\nimport { MessageService } from '../../../../shared/services/message.service';\r\nimport { SerializationService } from '../../../../shared/services/serialization.service';\r\nimport { SessionService } from '../../../../shared/services/session.service';\r\nimport { TabService } from '../../../../shared/services/tab.service';\r\nimport { BidtWarehouseDTO } from '../../../../shared/types/api-types/bidt-warehouse-dto.interface';\r\nimport { PageComponent } from '../../../../shared/types/page-component';\r\nimport { PageComponentData } from '../../../../shared/types/page-component-data.interface';\r\nimport { TableColumn } from '../../../../shared/types/table-column.interface';\r\nimport { ListUtils } from '../../../../shared/utils/list-utils';\r\nimport { ObjectUtils } from '../../../../shared/utils/object-utils';\r\nimport { StringUtils } from '../../../../shared/utils/string-utils';\r\nimport { MaterialRequestInput } from '../shared/material-request-input.interface';\r\nimport { MaterialRequestTableRow } from '../shared/material-request-table-row.interface';\r\n\r\nimport { MaterialRequestManagementSearchService } from './material-request-management-search.service';\r\n\r\ninterface SearchFilterInput {\r\n  criticity?: string[];\r\n  progress?: string[];\r\n  status?: string[];\r\n  origin?: string[];\r\n  desiredOption?: string;\r\n  desiredDate?: Date;\r\n}\r\n\r\n@Component({\r\n  selector: 'aw-material-request-management-search',\r\n  styleUrls: ['../shared/style.scss'],\r\n  templateUrl: './material-request-management-search.component.html'\r\n})\r\nexport class MaterialRequestManagementSearchComponent extends PageComponent<PageComponentData> implements OnInit {\r\n  public subtitle: string;\r\n  public searchObject: MaterialRequestInput;\r\n  public searchFilterObject: SearchFilterInput;\r\n  public criteriaName: string | undefined;\r\n  public criteriaToSave: MaterialRequestInput;\r\n\r\n  public readonly componentOpenMode: typeof ComponentOpenMode;\r\n  public materialRequestSites: SelectItem[];\r\n  public materialRequestWorkCenters: SelectItem[];\r\n  public materialRequestPartners: SelectItem[];\r\n  public materialRequestSelectItemList: SelectItem[];\r\n  public materialRequestTableCols: TableColumn[];\r\n  public materialRequestTable: MaterialRequestTableRow[];\r\n  public selectedMaterialRequests: MaterialRequestTableRow[];\r\n  public filterCriticityList: SelectItem[];\r\n  public filterOriginList: SelectItem[];\r\n  public filterStatusList: SelectItem[];\r\n  public filterProgressList: SelectItem[];\r\n  public filterDesiredDateOptions: SelectItem[];\r\n\r\n  public isLoading: boolean;\r\n  public hasBeenCalculated: boolean;\r\n  public filtersVisible: boolean;\r\n  public showSearchPanel: boolean;\r\n  public readonly SEARCH_CRITERIA_ID: string = AppConstants.GOODS_MOVEMENT_SEARCH_CRITERIA_ID;\r\n  /* HTML references ***********************************************************/\r\n\r\n  @ViewChild('resultsContainerAnchor')\r\n  public resultsContainerAnchor: ElementRef;\r\n\r\n  /* ***************************************************************************/\r\n\r\n  public constructor(\r\n    favoriteService: FavoriteService,\r\n    loaderService: LoaderService,\r\n    messageService: MessageService,\r\n    serializationService: SerializationService,\r\n    tabService: TabService,\r\n    public sessionService: SessionService,\r\n    public dateService: DateService,\r\n    public translateService: TranslateService,\r\n    private readonly materialRequestManagementSearchService: MaterialRequestManagementSearchService\r\n  ) {\r\n    super(ComponentOpenMode.Write, favoriteService, loaderService, messageService, serializationService, tabService);\r\n\r\n    this.componentOpenMode = ComponentOpenMode;\r\n    this.init();\r\n    this.initSearchTableCols();\r\n    this.loadSites();\r\n    this.loadWarehouses();\r\n    this.loadPartners();\r\n    this.loadCriticityList();\r\n    this.loadFilterLists();\r\n  }\r\n\r\n  public getComponentName(): string {\r\n    return ComponentConstants.LOG_MATERIAL_REQUEST_MANAGEMENT_SEARCH;\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n    super.ngOnInit();\r\n\r\n    this.displayComponentContext('global.search', true);\r\n  }\r\n\r\n  private init() {\r\n    this.clearResultTable();\r\n    this.resetSearchCriteria();\r\n\r\n    this.materialRequestSites = [];\r\n    this.materialRequestWorkCenters = [];\r\n    this.materialRequestPartners = [];\r\n    this.materialRequestSelectItemList = [];\r\n    this.materialRequestTableCols = [];\r\n    this.showSearchPanel = true;\r\n  }\r\n\r\n  private initSearchTableCols(): void {\r\n    this.materialRequestTableCols = [\r\n      { field: 'references', alignment: 'left', width: '20%' },\r\n      { field: 'item', alignment: 'left', width: '20%' },\r\n      { field: 'recepient', alignment: 'left', width: '20%' },\r\n      { field: 'situation', alignment: 'left', width: '20%' },\r\n      { field: 'illustration', alignment: 'left', width: '20%' }\r\n    ];\r\n  }\r\n\r\n  private clearResultTable(): void {\r\n    this.materialRequestTable = [];\r\n    this.selectedMaterialRequests = [];\r\n  }\r\n\r\n  public resetSearchCriteria(): void {\r\n    this.criteriaName = undefined;\r\n    this.searchObject = { criticity: 'all' };\r\n    this.searchFilterObject = {\r\n      criticity: [],\r\n      origin: [],\r\n      progress: [],\r\n      status: []\r\n    };\r\n  }\r\n\r\n  public loadSites() {\r\n    this.materialRequestSites = [];\r\n    this.materialRequestManagementSearchService.findAllSiteList().subscribe({\r\n      next: (siteList) => {\r\n        this.materialRequestSites = ListUtils.orEmpty(siteList)\r\n          .filter((site) => ObjectUtils.isDefined(site.siteId))\r\n          .map((site) => {\r\n            return {\r\n              label: StringUtils.isNullOrEmpty(site.siteName) ? site.siteCode : `${site.siteCode} - ${site.siteName}`,\r\n              value: site.siteId\r\n            };\r\n          });\r\n      }\r\n    });\r\n  }\r\n\r\n  public loadWarehouses() {\r\n    this.materialRequestWorkCenters = [];\r\n    if (this.searchObject && this.searchObject.siteId) {\r\n      this.materialRequestManagementSearchService.findWarehouseListBySite(this.searchObject.siteId).subscribe({\r\n        next: (results) => {\r\n          this.populateWarehouseList(results);\r\n        }\r\n      });\r\n    } else {\r\n      this.materialRequestManagementSearchService.findAllWarehouseList().subscribe({\r\n        next: (results) => {\r\n          this.populateWarehouseList(results);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  public loadPartners() {\r\n    this.materialRequestPartners = [];\r\n  }\r\n\r\n  public loadCriticityList() {\r\n    this.materialRequestSelectItemList = [\r\n      { label: `${this.translateService.instant(this.getTranslateKey('all'))}`, value: 'all' },\r\n      { label: `${this.translateService.instant(this.getTranslateKey('routine'))}`, value: 'routine' },\r\n      { label: `${this.translateService.instant(this.getTranslateKey('urgent'))}`, value: 'urgent' },\r\n      { label: `${this.translateService.instant(this.getTranslateKey('immediate'))}`, value: 'immediate' }\r\n    ];\r\n  }\r\n\r\n  public loadFilterLists() {\r\n    this.filterCriticityList = [\r\n      { label: `${this.translateService.instant(this.getTranslateKey('routine'))}`, value: 'routine' },\r\n      { label: `${this.translateService.instant(this.getTranslateKey('urgent'))}`, value: 'urgent' },\r\n      { label: `${this.translateService.instant(this.getTranslateKey('immediate'))}`, value: 'immediate' }\r\n    ];\r\n    this.filterStatusList = [\r\n      { label: `${this.translateService.instant(this.getTranslateKey('routine'))}`, value: 'routine' },\r\n      { label: `${this.translateService.instant(this.getTranslateKey('urgent'))}`, value: 'urgent' },\r\n      { label: `${this.translateService.instant(this.getTranslateKey('immediate'))}`, value: 'immediate' }\r\n    ];\r\n    this.filterOriginList = [\r\n      { label: `${this.translateService.instant(this.getTranslateKey('routine'))}`, value: 'routine' },\r\n      { label: `${this.translateService.instant(this.getTranslateKey('urgent'))}`, value: 'urgent' },\r\n      { label: `${this.translateService.instant(this.getTranslateKey('immediate'))}`, value: 'immediate' }\r\n    ];\r\n    this.filterProgressList = [\r\n      { label: `${this.translateService.instant(this.getTranslateKey('routine'))}`, value: 'routine' },\r\n      { label: `${this.translateService.instant(this.getTranslateKey('urgent'))}`, value: 'urgent' },\r\n      { label: `${this.translateService.instant(this.getTranslateKey('immediate'))}`, value: 'immediate' }\r\n    ];\r\n    this.filterDesiredDateOptions = [];\r\n  }\r\n\r\n  public search() {\r\n    this.materialRequestTable = [];\r\n    this.materialRequestManagementSearchService.findMaterialsRequested(this.searchObject).subscribe((result) => {\r\n      if (result) {\r\n        this.materialRequestTable = result.list;\r\n        this.showSearchPanel = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  public manageMaterialRequest(rowData: MaterialRequestTableRow) {\r\n    const openMode: ComponentOpenMode = ComponentOpenMode.Write;\r\n    const data: PageComponentData = {\r\n      id: this.tabService.generateId(),\r\n      componentId: ComponentConstants.LOG_MATERIAL_REQUEST_MANAGEMENT_FORM,\r\n      openMode\r\n    };\r\n    if (!!rowData) {\r\n      data.objectId = this.serializationService.serialize(rowData);\r\n    }\r\n    const labelKey = 'transaction.' + data.componentId;\r\n    this.tabService.open(this.tabService.create(data, labelKey, true));\r\n  }\r\n\r\n  public openNewMaterialRequestSearch() {\r\n    const openMode: ComponentOpenMode = ComponentOpenMode.Write;\r\n    const data: PageComponentData = {\r\n      id: this.tabService.generateId(),\r\n      componentId: ComponentConstants.LOG_MATERIAL_REQUEST_MANAGEMENT_SEARCH,\r\n      openMode\r\n    };\r\n\r\n    const labelKey = 'transaction.' + data.componentId;\r\n    this.tabService.open(this.tabService.create(data, labelKey, true));\r\n  }\r\n\r\n  private populateWarehouseList(warehouseList: BidtWarehouseDTO[]): void {\r\n    this.materialRequestWorkCenters = ListUtils.orEmpty(warehouseList)\r\n      .filter((warehouse) => ObjectUtils.isDefined(warehouse.whCode))\r\n      .map((warehouse) => {\r\n        return {\r\n          label: StringUtils.isNullOrEmpty(warehouse.whName)\r\n            ? warehouse.whCode\r\n            : `${warehouse.whCode} - ${warehouse.whName}`,\r\n          value: warehouse.wareHouseId\r\n        };\r\n      });\r\n  }\r\n\r\n  public saveSearchCriteriaAsked(): void {\r\n    const criteriaToSave: MaterialRequestInput = this.searchObject;\r\n    this.criteriaToSave = criteriaToSave;\r\n  }\r\n\r\n  public loadSearchCriteria(event: ISearchCriteria): void {\r\n    const criteria = event.criteria as MaterialRequestInput;\r\n    if (!criteria) {\r\n      this.resetSearchCriteria();\r\n\r\n      return;\r\n    }\r\n    // do not load criteria first time if we come from another page\r\n    if (!this.componentData.objectId) {\r\n      this.criteriaName = event.name;\r\n      this.searchObject = criteria || {};\r\n    } else {\r\n      this.componentData.objectId = undefined;\r\n    }\r\n    this.search();\r\n  }\r\n\r\n  public resetFilters() {\r\n    //\r\n  }\r\n\r\n  public filterSearchResult() {\r\n    //\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { BidtSiteApi } from '../../../../shared/api/bidt-site.api';\r\nimport { BidtWarehouseApi } from '../../../../shared/api/bidt-warehouse.api';\r\nimport { AbstractAwHttpService } from '../../../../shared/http/abstract-aw-http';\r\nimport { AppConfigService } from '../../../../shared/services/app-config.service';\r\nimport { BidtSiteDTO } from '../../../../shared/types/api-types/bidt-site-dto.interface';\r\nimport { BidtWarehouseDTO } from '../../../../shared/types/api-types/bidt-warehouse-dto.interface';\r\nimport { SearchResultsDTO } from '../../../../shared/types/api-types/search-results-dto.interface';\r\nimport { MaterialRequestInput } from '../shared/material-request-input.interface';\r\nimport { MaterialRequestOutput } from '../shared/material-request-output.interface';\r\n\r\n@Injectable()\r\nexport class MaterialRequestManagementSearchService extends AbstractAwHttpService {\r\n  public constructor(\r\n    http: HttpClient,\r\n    appConfigService: AppConfigService,\r\n    private readonly bidtWarehouseApi: BidtWarehouseApi,\r\n    private readonly bidtSiteApi: BidtSiteApi\r\n  ) {\r\n    super(http, appConfigService);\r\n  }\r\n\r\n  /**************************************************************************\r\n   * Bidt site api\r\n   *************************************************************************/\r\n\r\n  public findAllSiteList(): Observable<BidtSiteDTO[]> {\r\n    return super.post<void, BidtSiteDTO[]>(this.bidtSiteApi.findSiteByUseCaseCode);\r\n  }\r\n\r\n  public findAllSite(): Observable<BidtSiteDTO[]> {\r\n    return super.post<void, BidtSiteDTO[]>(this.bidtSiteApi.getSites);\r\n  }\r\n\r\n  /**************************************************************************\r\n   * Bidt warehouse api\r\n   *************************************************************************/\r\n\r\n  public findAllWarehouseList(): Observable<BidtWarehouseDTO[]> {\r\n    return super.post<void, BidtWarehouseDTO[]>(this.bidtWarehouseApi.findAll);\r\n  }\r\n\r\n  public findWarehouseListBySite(input: string): Observable<BidtWarehouseDTO[]> {\r\n    return super.post<string, BidtWarehouseDTO[]>(this.bidtWarehouseApi.findBySiteId, input);\r\n  }\r\n\r\n  /**************************************************************************\r\n   * search requested material api\r\n   *************************************************************************/\r\n  public findMaterialsRequested(input: MaterialRequestInput): Observable<SearchResultsDTO<MaterialRequestOutput>> {\r\n    const simpleObservable = new Observable<SearchResultsDTO<MaterialRequestOutput>>((observer) => {\r\n      const searchResult: SearchResultsDTO<MaterialRequestOutput> = {\r\n        list: [\r\n          {\r\n            illustration: 'assets/img/illustration-1.jpg',\r\n            sn: 'S4000307',\r\n            createdBy: 'TO201792',\r\n            createdOn: '27/08/2019',\r\n            origin: 'Order de Travail',\r\n            pn: '303-086-103-0',\r\n            designation: '### DESIGNATION DU P/N ###',\r\n            quantity: '3',\r\n            desiredPotential: '450',\r\n            potentialUnit: 'FH',\r\n            site: 'Monte-de-Marsan',\r\n            warehouse: 'Ateller A',\r\n            desiredOn: '30/08/2019',\r\n            criticity: 'red',\r\n            status: 'Lance',\r\n            progress: 'Servi partiellement',\r\n            served: '1',\r\n            booked: '1',\r\n            notBooked: '1'\r\n          },\r\n          {\r\n            illustration: 'assets/img/illustration-2.jpg',\r\n            sn: 'S4000992',\r\n            createdBy: 'TO137901',\r\n            createdOn: '17/08/2019',\r\n            origin: 'Order de Travail',\r\n            pn: '303-722-001-0',\r\n            designation: '### DESIGNATION DU P/N ###',\r\n            quantity: '1',\r\n            desiredPotential: '200',\r\n            potentialUnit: 'FH',\r\n            site: 'Toulouse',\r\n            warehouse: 'DRSU',\r\n            desiredOn: '14/09/2019',\r\n            criticity: 'yellow',\r\n            status: 'Brouillon',\r\n            progress: 'Non Servi',\r\n            served: '0',\r\n            booked: '0',\r\n            notBooked: '1'\r\n          },\r\n          {\r\n            illustration: 'assets/img/illustration-3.png',\r\n            sn: 'S4000901',\r\n            createdBy: 'TO137901',\r\n            createdOn: '17/08/2019',\r\n            origin: 'Lot de Deploiement',\r\n            pn: '70720041-00',\r\n            designation: 'APU',\r\n            quantity: '28',\r\n            desiredPotential: '260',\r\n            potentialUnit: 'FH',\r\n            site: 'Monte-de-Marsan',\r\n            warehouse: 'DRSU',\r\n            desiredOn: '11/09/2019',\r\n            criticity: 'green',\r\n            status: 'Lance',\r\n            progress: 'Non Servi',\r\n            served: '0',\r\n            booked: '6',\r\n            notBooked: '22'\r\n          }\r\n        ],\r\n        moreResults: false\r\n      };\r\n      // observable execution\r\n      observer.next(searchResult);\r\n      observer.complete();\r\n    });\r\n\r\n    return simpleObservable;\r\n  }\r\n}\r\n","module.exports = \"<a-modal class=\\\"aw-modal\\\" [(visible)]=\\\"display\\\">\\r\\n  <a-header>\\r\\n    <div class=\\\"modal-title\\\">{{ getComponentName() + \\\".title\\\" | translate }}</div>\\r\\n  </a-header>\\r\\n\\r\\n  <a-content>\\r\\n    <div class=\\\"illustration\\\">\\r\\n      <img [src]=\\\"imgSrc\\\" />\\r\\n    </div>\\r\\n  </a-content>\\r\\n\\r\\n  <a-footer>\\r\\n    <button type=\\\"button\\\" mat-raised-button (click)=\\\"closeDialog()\\\">\\r\\n      <span>{{ \\\"global.close\\\" | translate }}</span>\\r\\n    </button>\\r\\n  </a-footer>\\r\\n</a-modal>\\r\\n\"","import { Component, EventEmitter, Input, OnInit } from '@angular/core';\r\nimport { SafeResourceUrl } from '@angular/platform-browser';\r\n\r\nimport { ComponentOpenMode } from '../../../../../../shared/enums/component-open-mode.enum';\r\nimport { DialogComponent } from '../../../../../../shared/types/dialog-component';\r\n\r\n@Component({\r\n  selector: 'aw-dialog-image',\r\n  templateUrl: './dialog-image.component.html',\r\n  styleUrls: ['../popup-form.component.scss']\r\n})\r\nexport class DialogImageComponent extends DialogComponent implements OnInit {\r\n  @Input()\r\n  public imgSrc: SafeResourceUrl;\r\n\r\n  public constructor(\r\n  ) {\r\n    super(ComponentOpenMode.Read, 'DialogImageComponent');\r\n    this.displayChange = new EventEmitter<boolean>();\r\n  }\r\n\r\n  public ngOnInit() {\r\n    this.updateOpenMode(this.openMode);\r\n  }\r\n\r\n  public getTypeName(): string {\r\n    return 'DialogImageComponent';\r\n  }\r\n\r\n  public cancel(): void {\r\n    this.display = false;\r\n  }\r\n}\r\n","module.exports = \":host .item-textbox {\\n  width: 5rem; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWFpbi9sb2dpc3RpY3MvbWF0ZXJpYWwtcmVxdWVzdC1tYW5hZ2VtZW50L3NoYXJlZC9wb3B1cHMvRDpcXFByb2ZpbGVzXFxhcHJhZGhhblxcRGVza3RvcFxcQWVyb3dlYmJcXFBST0pFQ1RTXFxmcm9udGVuZF9hZXJvd2ViYi9zcmNcXGFwcFxcbWFpblxcbG9naXN0aWNzXFxtYXRlcmlhbC1yZXF1ZXN0LW1hbmFnZW1lbnRcXHNoYXJlZFxccG9wdXBzXFxwb3B1cC1mb3JtLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUksV0FBVyxFQUFBIiwiZmlsZSI6InNyYy9hcHAvbWFpbi9sb2dpc3RpY3MvbWF0ZXJpYWwtcmVxdWVzdC1tYW5hZ2VtZW50L3NoYXJlZC9wb3B1cHMvcG9wdXAtZm9ybS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcclxuICAuaXRlbS10ZXh0Ym94IHtcclxuICAgIHdpZHRoOiA1cmVtO1xyXG4gIH1cclxufVxyXG4iXX0= */\"","module.exports = \":host .served--nok {\\n  background-color: #f6685e !important; }\\n\\n:host .served--ok {\\n  background-color: #4caf50 !important; }\\n\\n:host .served--warning {\\n  background-color: #ffc107 !important; }\\n\\n:host ul {\\n  margin: 0;\\n  padding: 0;\\n  list-style: none; }\\n\\n:host .message {\\n  color: #01579b;\\n  font-size: 1rem;\\n  text-align: center;\\n  width: 100%; }\\n\\n:host .materials {\\n  width: 100%; }\\n\\n:host .warehouse {\\n  width: 100%; }\\n\\n:host .snBatch {\\n  width: 100%; }\\n\\n:host .ok {\\n  background-color: #4caf50 !important;\\n  padding: 0.2em; }\\n\\n:host .warning {\\n  background-color: #ffc107 !important;\\n  padding: 0.2em; }\\n\\n:host .nok {\\n  background-color: #f6685e !important;\\n  padding: 0.2em; }\\n\\n:host .font-ok {\\n  color: #4caf50 !important; }\\n\\n:host .font-warning {\\n  color: #ffc107 !important; }\\n\\n:host .font-nok {\\n  color: #f6685e !important; }\\n\\n:host .font-bold {\\n  font-weight: bold; }\\n\\n:host .font-italic {\\n  font-style: italic; }\\n\\n:host .select-box .arrow::after {\\n  content: \\\"\\\";\\n  position: absolute;\\n  top: 50%;\\n  margin-top: -1.5em;\\n  border-top: 1.5em solid transparent;\\n  border-bottom: 1.5em solid transparent;\\n  border-left: 0.7em solid #01579b;\\n  right: -0.45em; }\\n\\n:host .breadcrumbs {\\n  padding: 0px !important; }\\n\\n:host .breadcrumbs-container {\\n  background-color: transparent !important;\\n  border-color: transparent !important;\\n  box-shadow: none !important;\\n  padding: 8px 8px 0px 8px !important; }\\n\\n:host .breadcrumbs-navigation {\\n  overflow: hidden;\\n  display: flex; }\\n\\n:host .breadcrumbs-navigation li {\\n  float: left;\\n  margin: 0 10px 0 0px; }\\n\\n:host .breadcrumbs-navigation .current {\\n  float: left;\\n  margin: 0 25px 0 15px; }\\n\\n:host .breadcrumbs-navigation .breadcrumbs-labels {\\n  background-color: #01579b;\\n  padding-right: 0.5rem;\\n  float: left;\\n  text-decoration: none;\\n  position: relative;\\n  white-space: nowrap;\\n  color: #fff;\\n  font-size: 20px;\\n  padding-bottom: 6px;\\n  padding-top: 7px; }\\n\\n:host .breadcrumbs-navigation .breadcrumbs-labels .title {\\n    font-weight: bold;\\n    font-size: 20px; }\\n\\n:host .breadcrumbs-navigation .breadcrumbs-labels .subtitle {\\n    font-weight: initial;\\n    font-style: italic;\\n    font-size: 15px; }\\n\\n:host .breadcrumbs-navigation .current .breadcrumbs-labels {\\n  background: #01579b; }\\n\\n:host .breadcrumbs-navigation .current .breadcrumbs-labels .title {\\n    font-weight: bold;\\n    font-size: 20px; }\\n\\n:host .breadcrumbs-navigation .current .breadcrumbs-labels .subtitle {\\n    font-weight: initial;\\n    font-style: italic;\\n    font-size: 15px; }\\n\\n:host .breadcrumbs-navigation .breadcrumbs-labels::before {\\n  content: \\\"\\\";\\n  position: absolute;\\n  top: 49%;\\n  margin-top: -1.5em;\\n  border-width: 1.5em 0 1.6em 1em;\\n  border-style: solid;\\n  border-color: #ddd #ddd #ddd #ddd;\\n  left: -1em; }\\n\\n:host .breadcrumbs-navigation .current .breadcrumbs-labels::before {\\n  border-color: #01579b #01579b #01579b #01579b; }\\n\\n:host .breadcrumbs-navigation .breadcrumbs-labels::after {\\n  content: \\\"\\\";\\n  position: absolute;\\n  top: 50%;\\n  margin-top: -1.5em;\\n  border-top: 1.5em solid transparent;\\n  border-bottom: 1.5em solid transparent;\\n  border-left: 1em solid #01579b;\\n  right: -1em; }\\n\\n:host .breadcrumbs-navigation .current .breadcrumbs-labels::after {\\n  border-left-color: #01579b; }\\n\\n:host .breadcrumbs-navigation .current .breadcrumbs-labels {\\n  color: white;\\n  font-weight: bold;\\n  font-size: 20px;\\n  padding-bottom: 6px;\\n  padding-top: 7px; }\\n\\n:host .breadcrumbs-navigation .current::after,\\n:host .breadcrumbs-navigation .current::before {\\n  content: normal; }\\n\\n:host .section-without-margin {\\n  margin-left: 0px !important;\\n  margin-bottom: 1rem !important; }\\n\\n:host .col-width-20 {\\n  width: 20% !important; }\\n\\n:host ::ng-deep .red .ui-progressbar .ui-progressbar-value {\\n  border: 0 none;\\n  margin: 0;\\n  background: #f6685e !important; }\\n\\n:host ::ng-deep .yellow .ui-progressbar .ui-progressbar-value {\\n  border: 0 none;\\n  margin: 0;\\n  background: #ffc107 !important; }\\n\\n:host ::ng-deep .green .ui-progressbar .ui-progressbar-value {\\n  border: 0 none;\\n  margin: 0;\\n  background: #4caf50 !important; }\\n\\n:host span.green {\\n  color: #4caf50 !important; }\\n\\n:host span.red {\\n  color: #f6685e !important; }\\n\\n:host span.yellow {\\n  color: #ffc107 !important; }\\n\\n:host .img-dimension {\\n  height: 10rem; }\\n\\n:host .central-right-part {\\n  display: block !important;\\n  text-align: right; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWFpbi9sb2dpc3RpY3MvbWF0ZXJpYWwtcmVxdWVzdC1tYW5hZ2VtZW50L3NoYXJlZC9EOlxcUHJvZmlsZXNcXGFwcmFkaGFuXFxEZXNrdG9wXFxBZXJvd2ViYlxcUFJPSkVDVFNcXGZyb250ZW5kX2Flcm93ZWJiL3NyY1xcYXBwXFxtYWluXFxsb2dpc3RpY3NcXG1hdGVyaWFsLXJlcXVlc3QtbWFuYWdlbWVudFxcc2hhcmVkXFxzdHlsZS5zY3NzIiwic3JjL2FwcC9tYWluL2xvZ2lzdGljcy9tYXRlcmlhbC1yZXF1ZXN0LW1hbmFnZW1lbnQvc2hhcmVkL0Q6XFxQcm9maWxlc1xcYXByYWRoYW5cXERlc2t0b3BcXEFlcm93ZWJiXFxQUk9KRUNUU1xcZnJvbnRlbmRfYWVyb3dlYmIvc3JjXFxzdHlsZXNcXF9jb25zdGFudHMuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQTtFQUVJLG9DQUF3QyxFQUFBOztBQUY1QztFQU1JLG9DQUEwQyxFQUFBOztBQU45QztFQVVJLG9DQUFvQyxFQUFBOztBQVZ4QztFQWNJLFNBQVM7RUFDVCxVQUFVO0VBQ1YsZ0JBQWdCLEVBQUE7O0FBaEJwQjtFQW9CSSxjQUFjO0VBQ2QsZUFBZTtFQUNmLGtCQUFrQjtFQUNsQixXQUFXLEVBQUE7O0FBdkJmO0VBMkJJLFdBQVcsRUFBQTs7QUEzQmY7RUErQkksV0FBVyxFQUFBOztBQS9CZjtFQW1DSSxXQUFXLEVBQUE7O0FBbkNmO0VBdUNJLG9DQUEwQztFQUMxQyxjQUFjLEVBQUE7O0FBeENsQjtFQTRDSSxvQ0FBb0M7RUFDcEMsY0FBYyxFQUFBOztBQTdDbEI7RUFpREksb0NBQXdDO0VBQ3hDLGNBQWMsRUFBQTs7QUFsRGxCO0VBc0RJLHlCQUErQixFQUFBOztBQXREbkM7RUEwREkseUJBQXlCLEVBQUE7O0FBMUQ3QjtFQThESSx5QkFBNkIsRUFBQTs7QUE5RGpDO0VBa0VJLGlCQUFpQixFQUFBOztBQWxFckI7RUFzRUksa0JBQWtCLEVBQUE7O0FBdEV0QjtFQTBFSSxXQUFXO0VBQ1gsa0JBQWtCO0VBQ2xCLFFBQVE7RUFDUixrQkFBa0I7RUFDbEIsbUNBQW1DO0VBQ25DLHNDQUFzQztFQUN0QyxnQ0FBZ0M7RUFDaEMsY0FBYyxFQUFBOztBQWpGbEI7RUFxRkksdUJBQXVCLEVBQUE7O0FBckYzQjtFQXlGSSx3Q0FBd0M7RUFDeEMsb0NBQW9DO0VBQ3BDLDJCQUEyQjtFQUMzQixtQ0FBbUMsRUFBQTs7QUE1RnZDO0VBZ0dJLGdCQUFnQjtFQUNoQixhQUFhLEVBQUE7O0FBakdqQjtFQXFHSSxXQUFXO0VBQ1gsb0JBQW9CLEVBQUE7O0FBdEd4QjtFQTBHSSxXQUFXO0VBQ1gscUJBQXFCLEVBQUE7O0FBM0d6QjtFQStHSSx5QkFBeUI7RUFDekIscUJBQXFCO0VBQ3JCLFdBQVc7RUFDWCxxQkFBcUI7RUFDckIsa0JBQWtCO0VBQ2xCLG1CQUFtQjtFQUNuQixXQUFXO0VBQ1gsZUFBZTtFQUNmLG1CQUFtQjtFQUNuQixnQkFBZ0IsRUFBQTs7QUF4SHBCO0lBMkhNLGlCQUFpQjtJQUNqQixlQUFlLEVBQUE7O0FBNUhyQjtJQWdJTSxvQkFBb0I7SUFDcEIsa0JBQWtCO0lBQ2xCLGVBQWUsRUFBQTs7QUFsSXJCO0VBdUlJLG1CQ3RJa0IsRUFBQTs7QUREdEI7SUF5SU0saUJBQWlCO0lBQ2pCLGVBQWUsRUFBQTs7QUExSXJCO0lBOElNLG9CQUFvQjtJQUNwQixrQkFBa0I7SUFDbEIsZUFBZSxFQUFBOztBQWhKckI7RUFxSkksV0FBVztFQUNYLGtCQUFrQjtFQUNsQixRQUFRO0VBQ1Isa0JBQWtCO0VBQ2xCLCtCQUErQjtFQUMvQixtQkFBbUI7RUFDbkIsaUNBQWlDO0VBQ2pDLFVBQVUsRUFBQTs7QUE1SmQ7RUFnS0ksNkNDL0prQixFQUFBOztBRER0QjtFQXFLSSxXQUFXO0VBQ1gsa0JBQWtCO0VBQ2xCLFFBQVE7RUFDUixrQkFBa0I7RUFDbEIsbUNBQW1DO0VBQ25DLHNDQUFzQztFQUN0Qyw4QkFBOEI7RUFDOUIsV0FBVyxFQUFBOztBQTVLZjtFQWdMSSwwQkMvS2tCLEVBQUE7O0FERHRCO0VBb0xJLFlBQVk7RUFDWixpQkFBaUI7RUFDakIsZUFBZTtFQUNmLG1CQUFtQjtFQUNuQixnQkFBZ0IsRUFBQTs7QUF4THBCOztFQTZMSSxlQUFlLEVBQUE7O0FBN0xuQjtFQWlNSSwyQkFBMkI7RUFDM0IsOEJBQThCLEVBQUE7O0FBbE1sQztFQXNNSSxxQkFBcUIsRUFBQTs7QUF0TXpCO0VBNE1RLGNBQWM7RUFDZCxTQUFTO0VBQ1QsOEJBQWtDLEVBQUE7O0FBOU0xQztFQXNOUSxjQUFjO0VBQ2QsU0FBUztFQUNULDhCQUE4QixFQUFBOztBQXhOdEM7RUFnT1EsY0FBYztFQUNkLFNBQVM7RUFDVCw4QkFBb0MsRUFBQTs7QUFsTzVDO0VBeU9NLHlCQUErQixFQUFBOztBQXpPckM7RUE2T00seUJBQTZCLEVBQUE7O0FBN09uQztFQWlQTSx5QkFBeUIsRUFBQTs7QUFqUC9CO0VBc1BJLGFBQWEsRUFBQTs7QUF0UGpCO0VBMFBJLHlCQUF5QjtFQUN6QixpQkFBaUIsRUFBQSIsImZpbGUiOiJzcmMvYXBwL21haW4vbG9naXN0aWNzL21hdGVyaWFsLXJlcXVlc3QtbWFuYWdlbWVudC9zaGFyZWQvc3R5bGUuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgXCJjb25zdGFudHNcIjtcclxuQGltcG9ydCBcIm1peGluc1wiO1xyXG5cclxuOmhvc3Qge1xyXG4gIC5zZXJ2ZWQtLW5vayB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkcmVkLWxpZ2h0MSAhaW1wb3J0YW50O1xyXG4gIH1cclxuXHJcbiAgLnNlcnZlZC0tb2sge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogJGdyZWVuLWxpZ2h0MSAhaW1wb3J0YW50O1xyXG4gIH1cclxuXHJcbiAgLnNlcnZlZC0td2FybmluZyB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkb3JhbmdlICFpbXBvcnRhbnQ7XHJcbiAgfVxyXG5cclxuICB1bCB7XHJcbiAgICBtYXJnaW46IDA7XHJcbiAgICBwYWRkaW5nOiAwO1xyXG4gICAgbGlzdC1zdHlsZTogbm9uZTtcclxuICB9XHJcblxyXG4gIC5tZXNzYWdlIHtcclxuICAgIGNvbG9yOiAjMDE1NzliO1xyXG4gICAgZm9udC1zaXplOiAxcmVtO1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgfVxyXG5cclxuICAubWF0ZXJpYWxzIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gIH1cclxuXHJcbiAgLndhcmVob3VzZSB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICB9XHJcblxyXG4gIC5zbkJhdGNoIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gIH1cclxuXHJcbiAgLm9rIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICRncmVlbi1saWdodDEgIWltcG9ydGFudDtcclxuICAgIHBhZGRpbmc6IDAuMmVtO1xyXG4gIH1cclxuXHJcbiAgLndhcm5pbmcge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogJG9yYW5nZSAhaW1wb3J0YW50O1xyXG4gICAgcGFkZGluZzogMC4yZW07XHJcbiAgfVxyXG5cclxuICAubm9rIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICRyZWQtbGlnaHQxICFpbXBvcnRhbnQ7XHJcbiAgICBwYWRkaW5nOiAwLjJlbTtcclxuICB9XHJcblxyXG4gIC5mb250LW9rIHtcclxuICAgIGNvbG9yOiAkZ3JlZW4tbGlnaHQxICFpbXBvcnRhbnQ7XHJcbiAgfVxyXG5cclxuICAuZm9udC13YXJuaW5nIHtcclxuICAgIGNvbG9yOiAkb3JhbmdlICFpbXBvcnRhbnQ7XHJcbiAgfVxyXG5cclxuICAuZm9udC1ub2sge1xyXG4gICAgY29sb3I6ICRyZWQtbGlnaHQxICFpbXBvcnRhbnQ7XHJcbiAgfVxyXG5cclxuICAuZm9udC1ib2xkIHtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIH1cclxuXHJcbiAgLmZvbnQtaXRhbGljIHtcclxuICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcclxuICB9XHJcblxyXG4gIC5zZWxlY3QtYm94IC5hcnJvdzo6YWZ0ZXIge1xyXG4gICAgY29udGVudDogXCJcIjtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIHRvcDogNTAlO1xyXG4gICAgbWFyZ2luLXRvcDogLTEuNWVtO1xyXG4gICAgYm9yZGVyLXRvcDogMS41ZW0gc29saWQgdHJhbnNwYXJlbnQ7XHJcbiAgICBib3JkZXItYm90dG9tOiAxLjVlbSBzb2xpZCB0cmFuc3BhcmVudDtcclxuICAgIGJvcmRlci1sZWZ0OiAwLjdlbSBzb2xpZCAjMDE1NzliO1xyXG4gICAgcmlnaHQ6IC0wLjQ1ZW07XHJcbiAgfVxyXG5cclxuICAuYnJlYWRjcnVtYnMge1xyXG4gICAgcGFkZGluZzogMHB4ICFpbXBvcnRhbnQ7XHJcbiAgfVxyXG5cclxuICAuYnJlYWRjcnVtYnMtY29udGFpbmVyIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XHJcbiAgICBib3JkZXItY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XHJcbiAgICBib3gtc2hhZG93OiBub25lICFpbXBvcnRhbnQ7XHJcbiAgICBwYWRkaW5nOiA4cHggOHB4IDBweCA4cHggIWltcG9ydGFudDtcclxuICB9XHJcblxyXG4gIC5icmVhZGNydW1icy1uYXZpZ2F0aW9uIHtcclxuICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gIH1cclxuXHJcbiAgLmJyZWFkY3J1bWJzLW5hdmlnYXRpb24gbGkge1xyXG4gICAgZmxvYXQ6IGxlZnQ7XHJcbiAgICBtYXJnaW46IDAgMTBweCAwIDBweDtcclxuICB9XHJcblxyXG4gIC5icmVhZGNydW1icy1uYXZpZ2F0aW9uIC5jdXJyZW50IHtcclxuICAgIGZsb2F0OiBsZWZ0O1xyXG4gICAgbWFyZ2luOiAwIDI1cHggMCAxNXB4O1xyXG4gIH1cclxuXHJcbiAgLmJyZWFkY3J1bWJzLW5hdmlnYXRpb24gLmJyZWFkY3J1bWJzLWxhYmVscyB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDE1NzliO1xyXG4gICAgcGFkZGluZy1yaWdodDogMC41cmVtO1xyXG4gICAgZmxvYXQ6IGxlZnQ7XHJcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XHJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG4gICAgY29sb3I6ICNmZmY7XHJcbiAgICBmb250LXNpemU6IDIwcHg7XHJcbiAgICBwYWRkaW5nLWJvdHRvbTogNnB4O1xyXG4gICAgcGFkZGluZy10b3A6IDdweDtcclxuXHJcbiAgICAudGl0bGUge1xyXG4gICAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgICAgZm9udC1zaXplOiAyMHB4O1xyXG4gICAgfVxyXG5cclxuICAgIC5zdWJ0aXRsZSB7XHJcbiAgICAgIGZvbnQtd2VpZ2h0OiBpbml0aWFsO1xyXG4gICAgICBmb250LXN0eWxlOiBpdGFsaWM7XHJcbiAgICAgIGZvbnQtc2l6ZTogMTVweDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC5icmVhZGNydW1icy1uYXZpZ2F0aW9uIC5jdXJyZW50IC5icmVhZGNydW1icy1sYWJlbHMge1xyXG4gICAgYmFja2dyb3VuZDogJGFjY2VudC1jb2xvcjtcclxuICAgIC50aXRsZSB7XHJcbiAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gICAgICBmb250LXNpemU6IDIwcHg7XHJcbiAgICB9XHJcblxyXG4gICAgLnN1YnRpdGxlIHtcclxuICAgICAgZm9udC13ZWlnaHQ6IGluaXRpYWw7XHJcbiAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcclxuICAgICAgZm9udC1zaXplOiAxNXB4O1xyXG4gICAgfVxyXG4gIH1cclxuICAvLyBhcnJvd1xyXG4gIC5icmVhZGNydW1icy1uYXZpZ2F0aW9uIC5icmVhZGNydW1icy1sYWJlbHM6OmJlZm9yZSB7XHJcbiAgICBjb250ZW50OiBcIlwiO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgdG9wOiA0OSU7XHJcbiAgICBtYXJnaW4tdG9wOiAtMS41ZW07XHJcbiAgICBib3JkZXItd2lkdGg6IDEuNWVtIDAgMS42ZW0gMWVtO1xyXG4gICAgYm9yZGVyLXN0eWxlOiBzb2xpZDtcclxuICAgIGJvcmRlci1jb2xvcjogI2RkZCAjZGRkICNkZGQgI2RkZDtcclxuICAgIGxlZnQ6IC0xZW07XHJcbiAgfVxyXG5cclxuICAuYnJlYWRjcnVtYnMtbmF2aWdhdGlvbiAuY3VycmVudCAuYnJlYWRjcnVtYnMtbGFiZWxzOjpiZWZvcmUge1xyXG4gICAgYm9yZGVyLWNvbG9yOiAkYWNjZW50LWNvbG9yICRhY2NlbnQtY29sb3IgJGFjY2VudC1jb2xvciAkYWNjZW50LWNvbG9yO1xyXG4gIH1cclxuXHJcbiAgLy9hcnJvd1xyXG4gIC5icmVhZGNydW1icy1uYXZpZ2F0aW9uIC5icmVhZGNydW1icy1sYWJlbHM6OmFmdGVyIHtcclxuICAgIGNvbnRlbnQ6IFwiXCI7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICB0b3A6IDUwJTtcclxuICAgIG1hcmdpbi10b3A6IC0xLjVlbTtcclxuICAgIGJvcmRlci10b3A6IDEuNWVtIHNvbGlkIHRyYW5zcGFyZW50O1xyXG4gICAgYm9yZGVyLWJvdHRvbTogMS41ZW0gc29saWQgdHJhbnNwYXJlbnQ7XHJcbiAgICBib3JkZXItbGVmdDogMWVtIHNvbGlkICMwMTU3OWI7XHJcbiAgICByaWdodDogLTFlbTtcclxuICB9XHJcblxyXG4gIC5icmVhZGNydW1icy1uYXZpZ2F0aW9uIC5jdXJyZW50IC5icmVhZGNydW1icy1sYWJlbHM6OmFmdGVyIHtcclxuICAgIGJvcmRlci1sZWZ0LWNvbG9yOiAkYWNjZW50LWNvbG9yO1xyXG4gIH1cclxuXHJcbiAgLmJyZWFkY3J1bWJzLW5hdmlnYXRpb24gLmN1cnJlbnQgLmJyZWFkY3J1bWJzLWxhYmVscyB7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBmb250LXdlaWdodDogYm9sZDtcclxuICAgIGZvbnQtc2l6ZTogMjBweDtcclxuICAgIHBhZGRpbmctYm90dG9tOiA2cHg7XHJcbiAgICBwYWRkaW5nLXRvcDogN3B4O1xyXG4gIH1cclxuXHJcbiAgLmJyZWFkY3J1bWJzLW5hdmlnYXRpb24gLmN1cnJlbnQ6OmFmdGVyLFxyXG4gIC5icmVhZGNydW1icy1uYXZpZ2F0aW9uIC5jdXJyZW50OjpiZWZvcmUge1xyXG4gICAgY29udGVudDogbm9ybWFsO1xyXG4gIH1cclxuXHJcbiAgLnNlY3Rpb24td2l0aG91dC1tYXJnaW4ge1xyXG4gICAgbWFyZ2luLWxlZnQ6IDBweCAhaW1wb3J0YW50O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMXJlbSAhaW1wb3J0YW50O1xyXG4gIH1cclxuXHJcbiAgLmNvbC13aWR0aC0yMCB7XHJcbiAgICB3aWR0aDogMjAlICFpbXBvcnRhbnQ7XHJcbiAgfVxyXG5cclxuICA6Om5nLWRlZXAgLnJlZCB7XHJcbiAgICAudWktcHJvZ3Jlc3NiYXIge1xyXG4gICAgICAudWktcHJvZ3Jlc3NiYXItdmFsdWUge1xyXG4gICAgICAgIGJvcmRlcjogMCBub25lO1xyXG4gICAgICAgIG1hcmdpbjogMDtcclxuICAgICAgICBiYWNrZ3JvdW5kOiAkcmVkLWxpZ2h0MSAhaW1wb3J0YW50O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICA6Om5nLWRlZXAgLnllbGxvdyB7XHJcbiAgICAudWktcHJvZ3Jlc3NiYXIge1xyXG4gICAgICAudWktcHJvZ3Jlc3NiYXItdmFsdWUge1xyXG4gICAgICAgIGJvcmRlcjogMCBub25lO1xyXG4gICAgICAgIG1hcmdpbjogMDtcclxuICAgICAgICBiYWNrZ3JvdW5kOiAkb3JhbmdlICFpbXBvcnRhbnQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIDo6bmctZGVlcCAuZ3JlZW4ge1xyXG4gICAgLnVpLXByb2dyZXNzYmFyIHtcclxuICAgICAgLnVpLXByb2dyZXNzYmFyLXZhbHVlIHtcclxuICAgICAgICBib3JkZXI6IDAgbm9uZTtcclxuICAgICAgICBtYXJnaW46IDA7XHJcbiAgICAgICAgYmFja2dyb3VuZDogJGdyZWVuLWxpZ2h0MSAhaW1wb3J0YW50O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzcGFuIHtcclxuICAgICYuZ3JlZW4ge1xyXG4gICAgICBjb2xvcjogJGdyZWVuLWxpZ2h0MSAhaW1wb3J0YW50O1xyXG4gICAgfVxyXG5cclxuICAgICYucmVkIHtcclxuICAgICAgY29sb3I6ICRyZWQtbGlnaHQxICFpbXBvcnRhbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgJi55ZWxsb3cge1xyXG4gICAgICBjb2xvcjogJG9yYW5nZSAhaW1wb3J0YW50O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLmltZy1kaW1lbnNpb24ge1xyXG4gICAgaGVpZ2h0OiAxMHJlbTtcclxuICB9XHJcblxyXG4gIC5jZW50cmFsLXJpZ2h0LXBhcnQge1xyXG4gICAgZGlzcGxheTogYmxvY2sgIWltcG9ydGFudDtcclxuICAgIHRleHQtYWxpZ246IHJpZ2h0O1xyXG4gIH1cclxufVxyXG4iLCIkcHJpbWFyeS1iYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xyXG4kc2Vjb25kYXJ5LWJhY2tncm91bmQtY29sb3I6ICNmMGYwZjA7XHJcbiRwcmltYXJ5LXRleHQtY29sb3I6ICMwMDA7XHJcbiRzZWNvbmRhcnktdGV4dC1jb2xvcjogIzU5NTk1OTtcclxuJGFjY2VudC1jb2xvcjogIzAxNTc5YjtcclxuXHJcbiRib2R5LWJhY2tncm91bmQtY29sb3I6ICNlOGViZWQ7XHJcbiR0b3BiYXItY29sb3I6ICNmYWZhZmE7XHJcblxyXG4vLyAkcHJpbWFyeS1iYWNrZ3JvdW5kLWNvbG9yOiAjMWUxZTFlO1xyXG4vLyAkc2Vjb25kYXJ5LWJhY2tncm91bmQtY29sb3I6ICMzMzMzMzM7XHJcbi8vICRwcmltYXJ5LXRleHQtY29sb3I6ICNlOGU4ZTg7XHJcbi8vICRzZWNvbmRhcnktdGV4dC1jb2xvcjogI2ZmZjtcclxuLy8gJGFjY2VudC1jb2xvcjogIzljZGNmZTtcclxuXHJcbiRib3JkZXItY29sb3I6ICRzZWNvbmRhcnktdGV4dC1jb2xvcjtcclxuJGJvcmRlci1jb2xvci0tZGlzYWJsZWQ6IHRyYW5zcGFyZW50O1xyXG4kYm9yZGVyLWNvbG9yLS1mb2N1czogJGFjY2VudC1jb2xvcjtcclxuJGJvcmRlci1jb2xvci0taG92ZXI6ICMxYTFhMWE7XHJcblxyXG4kZ3JlZW4tZGFyazE6ICMyNzYzMmE7XHJcbiRncmVlbi1saWdodDE6ICM0Y2FmNTA7XHJcbiRvcmFuZ2U6ICNmZmMxMDc7XHJcbiRyZWQtZGFyazE6ICNhODI1MjU7XHJcbiRyZWQtbGlnaHQxOiAjZjY2ODVlO1xyXG4kYmx1ZS1saWdodDE6ICNiOGQwZTg7XHJcbiRibHVlLWRhcmsxOiAjMDA2ZWE5O1xyXG4kZ3JleTE6ICNjOGQ0ZDY7XHJcbiR5ZWxsb3cxOiAjZGRkZjAwO1xyXG5cclxuJGNyaXRpY2FsLXZhbHVlLWRhcms6ICNmYmE2NDM7IC8vIFRPRE86IHJlbW92ZSBpdFxyXG4kY3JpdGljYWwtdmFsdWUtbGlnaHQ6ICNmZWNjOGU7IC8vIFRPRE86IHJlbW92ZSBpdFxyXG4kY2FsZW5kYXIteWVsbG93OiAjZWZlZmIwOyAvLyBUT0RPOiByZW1vdmUgaXRcclxuJGJhZC12YWx1ZS1kYXJrOiAjZmY2NzU4OyAvLyBUT0RPOiByZW1vdmUgaXRcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiRib3JkZXItcmFkaXVzOiA0cHg7XHJcbiRib3JkZXItc3R5bGU6IHNvbGlkO1xyXG4kYm9yZGVyLXdpZHRoOiAxcHg7XHJcbiRmb250LWZhbWlseTogXCJMYXRvTGF0aW5XZWJcIjtcclxuJGZvbnQtc2l6ZTogMC44NzVyZW07XHJcbiRmb250LXdlaWdodDogNDAwO1xyXG4kbGluZS1oZWlnaHQ6IDEuNDI4NTcxNDI5O1xyXG4kbWFyZ2luLXZhbHVlOiA4cHg7XHJcbiRwYWdlLW1heC13aWR0aDogMTM2NnB4O1xyXG4kYXR0cmlidXRlcy1jb2x1bW4td2lkdGgtNDogNDtcclxuJGF0dHJpYnV0ZXMtY29sdW1uLXdpZHRoLTM6IDM7XHJcbiRhdHRyaWJ1dGVzLWNvbHVtbi13aWR0aC0yOiAyO1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuJGxlZnQtc2lkZWJhci13aWR0aC0tY29sbGFwc2VkOiA1MHB4O1xyXG4kbGVmdC1zaWRlYmFyLXdpZHRoLS1leHBhbmRlZDogMjIwcHg7XHJcbiRyaWdodC1zaWRlYmFyLXdpZHRoLS1jb2xsYXBzZWQ6IDUwcHg7XHJcbiRyaWdodC1zaWRlYmFyLXdpZHRoLS1leHBhbmRlZDogMjIwcHg7XHJcbiR0b3BiYXItaGVpZ2h0OiA0MHB4O1xyXG4kbWFpbmJhci1ib3JkZXItY29sb3I6IGRhcmtlbigkc2Vjb25kYXJ5LWJhY2tncm91bmQtY29sb3IsIDUlKTtcclxuJG1haW5iYXItYm9yZGVyLXdpZHRoOiAycHg7XHJcbiRwYWdlLWhlYWRlci1oZWlnaHQ6IDUuNXJlbTtcclxuJGZvcm0tY29udHJvbC1oZWlnaHQ6IDIuNXJlbTtcclxuJGNoZWNrYm94LWhlaWdodDogMS4yNXJlbTtcclxuJHJhZGlvYnV0dG9uLWhlaWdodDogMS4yNXJlbTtcclxuIl19 */\"","export class BidtStockMvtConstants {\r\n  public static readonly MVT_WAY_CREDIT: string = 'C';\r\n\r\n  public static readonly MVT_WAY_DEBIT: string = 'D';\r\n\r\n  public static readonly MVT_WAY_TRANSFER: string = 'T';\r\n\r\n  public static readonly MVT_RECONDITIONING: string = 'MVT_RECONDITIONING';\r\n\r\n  public static readonly MVT_RELATED_FL: string = 'MVT_RELATED_FL';\r\n\r\n  public static readonly MVT_STORAGE_COUNTER_RESET = 'MVT_STORAGE_COUNTER_RESET';\r\n\r\n  public static readonly MVT_STATUS_STEP_WAY_BEFORE_TRANSFERT = 0;\r\n  public static readonly MVT_STATUS_STEP_WAY_TRANSFERT = 1;\r\n  public static readonly MVT_STATUS_STEP_WAY_DEBIT = 2;\r\n  public static readonly MVT_STATUS_STEP_WAY_CREDIT = 3;\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { DocumentApi } from '../api/document.api';\r\nimport { ProductStructureManagementApi } from '../api/product-structure-management.api';\r\nimport { AbstractAwHttpService } from '../http/abstract-aw-http';\r\nimport { BidoBireDocumentDTO } from '../types/api-types/bido-bire-documentdto';\r\nimport { BidoBireWrapperId } from '../types/api-types/bido-bire-wrapper-id';\r\nimport { BidoEquipmentDTO } from '../types/api-types/bido-equipment-dto.interface';\r\nimport { BireDocItemDTO } from '../types/api-types/bire-doc-item-dto.interface';\r\nimport { BireItemDTOId } from '../types/api-types/bire-item-dto-id.interface';\r\nimport { ImageUtils } from '../utils/image-utils';\r\n\r\nimport { AppConfigService } from './app-config.service';\r\n\r\n@Injectable()\r\nexport class FileService extends AbstractAwHttpService {\r\n  public constructor(http: HttpClient,\r\n                     appConfigService: AppConfigService,\r\n                     private readonly domSanitizer: DomSanitizer,\r\n                     private readonly productStructureManagementApi: ProductStructureManagementApi,\r\n                     private readonly documentApi : DocumentApi\r\n  ) {\r\n    super(http, appConfigService);\r\n  }\r\n\r\n  public findIllustration(bireItemDtoId: BireItemDTOId | undefined, bidoEquipementDTO: BidoEquipmentDTO)\r\n    : Observable<BidoBireDocumentDTO> {\r\n    const bidoBireId : BidoBireWrapperId = {\r\n      bidoEquipmentDTOId: {equipmentCode: bidoEquipementDTO.equipmentCode},\r\n      bireItemDTOId: bireItemDtoId,\r\n      sn: bidoEquipementDTO.sn\r\n    };\r\n\r\n    return super.post<BidoBireWrapperId, BidoBireDocumentDTO>(\r\n      this.documentApi.findBidoBireDoc, bidoBireId);\r\n  }\r\n\r\n  public findBireDocItemByPnCode(input: string): Observable<BireDocItemDTO | undefined> {\r\n    return super.post<string, BireDocItemDTO | undefined>(\r\n      this.productStructureManagementApi.findBireDocItemByPnCode,\r\n      input\r\n    );\r\n  }\r\n\r\n  public sanitizeAndGetBase64Prefix(illustrationDocument: BidoBireDocumentDTO) : SafeResourceUrl {\r\n    return this.domSanitizer.bypassSecurityTrustResourceUrl(\r\n      `${ImageUtils.getBase64Prefix(illustrationDocument.docType)}${illustrationDocument.docFile}`);\r\n  }\r\n}\r\n","import { StringUtils } from '../../shared/utils/string-utils';\r\n\r\nexport class BidoFamilyVariantUtils {\r\n  public static buildFamilyVariantCode(\r\n    familyCode: string | undefined,\r\n    variantCode: string | undefined\r\n  ): string | undefined {\r\n    if (StringUtils.isNullOrEmpty(familyCode) || StringUtils.isNullOrEmpty(variantCode)) {\r\n      return undefined;\r\n    } else {\r\n      return `${familyCode}-${variantCode}`;\r\n    }\r\n  }\r\n\r\n  public static getFamilyCodeFromFamilyVariantCode(familyVariantCode: string | undefined): string | undefined {\r\n    return !!familyVariantCode && familyVariantCode.indexOf('-') > -1\r\n      ? familyVariantCode.substring(0, familyVariantCode.indexOf('-'))\r\n      : undefined;\r\n  }\r\n\r\n  public static getVariantCodeFromFamilyVariantCode(familyVariantCode: string | undefined): string | undefined {\r\n    return !!familyVariantCode && familyVariantCode.indexOf('-') > -1\r\n      ? familyVariantCode.substring(familyVariantCode.indexOf('-') + 1)\r\n      : undefined;\r\n  }\r\n}\r\n","import { StringUtils } from './string-utils';\r\n\r\nexport class ImageUtils {\r\n  private static readonly JPG_BASE64_ID = 'jpg';\r\n  private static readonly PNG_BASE64_ID = 'png';\r\n\r\n  private static readonly JPG_EXTENSION_LIST = ['jpeg', 'jpg'];\r\n  private static readonly PNG_EXTENSION_LIST = ['png'];\r\n\r\n  public static getBase64Prefix(extension: string | undefined): string {\r\n    let formattedExtension = '';\r\n    if (this.isJpg(extension)) {\r\n      formattedExtension = ImageUtils.JPG_BASE64_ID;\r\n    } else if (this.isPng(extension)) {\r\n      formattedExtension = ImageUtils.PNG_BASE64_ID;\r\n    }\r\n\r\n    return StringUtils.isEmpty(formattedExtension) ? '' : `data:image/${formattedExtension};base64,`;\r\n  }\r\n\r\n  public static isJpg(extension: string | undefined): boolean {\r\n    return this.isFormatMatching(extension, ImageUtils.JPG_EXTENSION_LIST);\r\n  }\r\n\r\n  public static isPng(extension: string | undefined): boolean {\r\n    return this.isFormatMatching(extension, ImageUtils.PNG_EXTENSION_LIST);\r\n  }\r\n\r\n  private static isFormatMatching(extension: string | undefined, validExtensionList: string[]): boolean {\r\n    if (StringUtils.isNullOrEmpty(extension)) {\r\n      return false;\r\n    } else {\r\n      const extensionToCheck = (extension as string).toLowerCase();\r\n\r\n      return validExtensionList.some((elt) => elt === extensionToCheck);\r\n    }\r\n  }\r\n}\r\n","import * as moment from 'moment';\r\n\r\nimport { AWPropertiesConstants } from '../constants/aw-properties-constants';\r\nimport { BidtStockMvtConstants } from '../constants/bidt-stock-mvt-constants';\r\nimport { BidtProcReqItemDTO } from '../types/api-types/bidt-proc-req-item-dto.interface';\r\nimport { BidtProcurementRequestDTO } from '../types/api-types/bidt-procurement-request-dto.interface';\r\nimport { BidtStockMvtDTO } from '../types/api-types/bidt-stock-mvt-dto.interface';\r\nimport { BidtTorItemDTO } from '../types/api-types/bidt-tor-item-dto.interface';\r\nimport { LabelValue } from '../types/label-value.interface';\r\n\r\nimport { ListUtils } from './list-utils';\r\nimport { NumberUtils } from './number-utils';\r\nimport { StringUtils } from './string-utils';\r\n\r\nexport interface ProcurementRequestItemRow {\r\n  obj: BidtProcReqItemDTO;\r\n  allNb: number;\r\n  servedNb: number;\r\n  bookedNb: number;\r\n  notBookedNb: number;\r\n  warehouseName: string | undefined;\r\n  siteName: string | undefined;\r\n}\r\n\r\nexport interface ProcurementRequestReverseItemRow {\r\n  obj: BidtTorItemDTO;\r\n  allNb: number;\r\n  reversedNb: number;\r\n  notReversedNb: number;\r\n  warehouseReceiptName: string | undefined;\r\n  siteReceiptName: string | undefined;\r\n  warehouseIssueName: string | undefined;\r\n  siteIssueName: string | undefined;\r\n}\r\n\r\nexport interface ServerdAndBookedIndicators {\r\n  bookedNb: number;\r\n  notBookedNb: number;\r\n  isServed: boolean;\r\n  servedNb: number;\r\n}\r\n\r\nexport class LogisticalUtils {\r\n  public static sortCriticities(criticities: LabelValue<string>[]): LabelValue<string>[] {\r\n    return criticities.sort((c1, _c2) => {\r\n      if (c1.value === AWPropertiesConstants.LOGISTICAL_CRITICALITY_ROUTINE) {\r\n        return -1;\r\n      } else if (c1.value === AWPropertiesConstants.LOGISTICAL_CRITICALITY_IMMEDIATE) {\r\n        return 1;\r\n      }\r\n\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  public static getServedIndicators(\r\n    procurementRequest: BidtProcurementRequestDTO\r\n  ): ServerdAndBookedIndicators | undefined {\r\n    if (procurementRequest.bidtWarehouseReceipt && procurementRequest.bidtWarehouseReceipt.whCategory) {\r\n      const procurementRequestItems = this.buildProcurementRequestItemsRows(procurementRequest);\r\n\r\n      return this.computeProcurementRequestProgress(procurementRequestItems);\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  public static buildProcurementRequestItemsRows(procurementRequest: BidtProcurementRequestDTO) {\r\n    return ListUtils.orEmpty(procurementRequest.bidtProcReqItems)\r\n      .map((bidtProcReqItem) => this.buildProcurementRequestItemRow(bidtProcReqItem))\r\n      .sort((x, y) => {\r\n        if (x.obj.statusDate && y.obj.statusDate) {\r\n          return moment(x.obj.statusDate).isBefore(y.obj.statusDate) ? -1 : 1;\r\n        } else if (x.obj.statusDate) {\r\n          return -1;\r\n        } else {\r\n          return 1;\r\n        }\r\n      });\r\n  }\r\n\r\n  public static buildProcurementRequestItemRow(procurementRequestItem: BidtProcReqItemDTO): ProcurementRequestItemRow {\r\n    const progress = this.computeProcurementRequestItemProgress(\r\n      procurementRequestItem.workshopEntries,\r\n      procurementRequestItem.requestedQuantity\r\n    );\r\n\r\n    return {\r\n      obj: procurementRequestItem,\r\n      allNb: progress.allNb,\r\n      servedNb: progress.servedNb,\r\n      bookedNb: progress.bookedNb,\r\n      notBookedNb: progress.notBookedNb,\r\n      warehouseName: undefined,\r\n      siteName: undefined\r\n    };\r\n  }\r\n\r\n  public static computeProcurementRequestReverseItemProgress(\r\n    stockMvts: BidtStockMvtDTO[] | undefined\r\n  ): { allNb: number; reversedNb: number; notReversedNb: number } {\r\n    const filteredStockMvts = ListUtils.orEmpty(stockMvts).filter(\r\n      (stockMvt) => stockMvt.stockMvtWay === BidtStockMvtConstants.MVT_WAY_CREDIT\r\n    );\r\n    const reversedStockMvts = filteredStockMvts.filter(\r\n      (stockMvt) => stockMvt.mvtStatus === AWPropertiesConstants.MM_MVT_STATUS_EXECUTED_KEY\r\n    );\r\n\r\n    const allNb = filteredStockMvts\r\n      .map((stockMvt) => (stockMvt.stockMvtQuantity ? Number(stockMvt.stockMvtQuantity) : 0))\r\n      .reduce((acc, x) => acc + x, 0);\r\n    const reversedNb = reversedStockMvts\r\n      .map((stockMvt) => (stockMvt.stockMvtQuantity ? Number(stockMvt.stockMvtQuantity) : 0))\r\n      .reduce((acc, x) => acc + x, 0);\r\n    const notReversedNb = allNb - reversedNb;\r\n\r\n    return { allNb, reversedNb, notReversedNb };\r\n  }\r\n\r\n  public static computeProcurementRequestItemProgress(\r\n    stockMvts: BidtStockMvtDTO[] | undefined,\r\n    requestedQuantity: string | undefined\r\n  ): { allNb: number; bookedNb: number; notBookedNb: number; servedNb: number } {\r\n    const filteredStockMvts = ListUtils.orEmpty(stockMvts).filter(\r\n      (stockMvt) => stockMvt.stockMvtWay === BidtStockMvtConstants.MVT_WAY_CREDIT\r\n    );\r\n    const servedStockMvts = filteredStockMvts.filter(\r\n      (stockMvt) => stockMvt.mvtStatus === AWPropertiesConstants.MM_MVT_STATUS_EXECUTED_KEY\r\n    );\r\n    const servedNb = servedStockMvts\r\n      .map((stockMvt) => (stockMvt.stockMvtQuantity ? Number(stockMvt.stockMvtQuantity) : 0))\r\n      .reduce((acc, x) => acc + x, 0);\r\n    const bookedNb = filteredStockMvts\r\n      .filter(\r\n        (stockMvt) =>\r\n          stockMvt.mvtStatus !== AWPropertiesConstants.MM_MVT_STATUS_EXECUTED_KEY &&\r\n          stockMvt.mvtStatus !== AWPropertiesConstants.MM_MVT_STATUS_CANCELED_KEY &&\r\n          (!StringUtils.isNullOrEmpty(stockMvt.stockMvtSn) || !StringUtils.isNullOrEmpty(stockMvt.stockMvtBatchNumber))\r\n      )\r\n      .map((stockMvt) => (stockMvt.stockMvtQuantity ? Number(stockMvt.stockMvtQuantity) : 0))\r\n      .reduce((acc, x) => acc + x, 0);\r\n\r\n    const notServedNb = StringUtils.isNullOrEmpty(requestedQuantity)\r\n      ? 0\r\n      : Math.max(0, NumberUtils.fromString(requestedQuantity as string) - servedNb - bookedNb);\r\n\r\n    return { allNb: filteredStockMvts.length, bookedNb, notBookedNb: notServedNb, servedNb };\r\n  }\r\n\r\n  public static computeProcurementRequestProgress(\r\n    procurementRequestItems: ProcurementRequestItemRow[]\r\n  ): ServerdAndBookedIndicators {\r\n    const procurementRequestQuantity = ListUtils.orEmpty(procurementRequestItems)\r\n      .map((e) => e.obj.requestedQuantity)\r\n      .filter((quantity) => !StringUtils.isNullOrEmpty(quantity))\r\n      .map((quantity) => NumberUtils.fromString(quantity as string))\r\n      .reduce((acc, x) => acc + x, 0);\r\n    const procurementRequestProgress = ListUtils.orEmpty(procurementRequestItems).reduce(\r\n      (a, b) => {\r\n        return {\r\n          bookedNb: a.bookedNb + b.bookedNb,\r\n          notBookedNb: a.notBookedNb + b.notBookedNb,\r\n          servedNb: a.servedNb + b.servedNb\r\n        };\r\n      },\r\n      {\r\n        bookedNb: 0,\r\n        notBookedNb: 0,\r\n        servedNb: 0\r\n      }\r\n    );\r\n\r\n    return {\r\n      bookedNb: procurementRequestProgress.bookedNb,\r\n      notBookedNb: procurementRequestProgress.notBookedNb,\r\n      isServed: procurementRequestProgress.servedNb === procurementRequestQuantity,\r\n      servedNb: procurementRequestProgress.servedNb\r\n    };\r\n  }\r\n\r\n  public static isReversedTransfer(mvts: BidtStockMvtDTO[]): boolean {\r\n    return mvts.some(\r\n      (mvt) =>\r\n        mvt.stockMvtWay === BidtStockMvtConstants.MVT_WAY_CREDIT &&\r\n        mvt.mvtStatus === AWPropertiesConstants.MM_MVT_STATUS_EXECUTED_KEY\r\n    );\r\n  }\r\n\r\n  public static isReversingTransfer(mvts: BidtStockMvtDTO[]): boolean {\r\n    return (\r\n      mvts.some(\r\n        (mvt) =>\r\n          mvt.stockMvtWay === BidtStockMvtConstants.MVT_WAY_DEBIT &&\r\n          mvt.mvtStatus === AWPropertiesConstants.MM_MVT_STATUS_EXECUTED_KEY\r\n      ) &&\r\n      mvts.some(\r\n        (mvt) =>\r\n          mvt.stockMvtWay === BidtStockMvtConstants.MVT_WAY_CREDIT &&\r\n          mvt.mvtStatus !== AWPropertiesConstants.MM_MVT_STATUS_EXECUTED_KEY\r\n      )\r\n    );\r\n  }\r\n\r\n  public static isExecutingTransfer(mvts: BidtStockMvtDTO[]): boolean {\r\n    return (\r\n      !mvts.some(\r\n        (mvt) =>\r\n          mvt.stockMvtWay === BidtStockMvtConstants.MVT_WAY_DEBIT &&\r\n          mvt.mvtStatus === AWPropertiesConstants.MM_MVT_STATUS_EXECUTED_KEY\r\n      ) &&\r\n      !mvts.some(\r\n        (mvt) =>\r\n          mvt.stockMvtWay === BidtStockMvtConstants.MVT_WAY_CREDIT &&\r\n          mvt.mvtStatus === AWPropertiesConstants.MM_MVT_STATUS_EXECUTED_KEY\r\n      )\r\n    );\r\n  }\r\n\r\n  public static isWaitingTransfer(mvts: BidtStockMvtDTO[]): boolean {\r\n    return mvts.some(\r\n      (mvt) =>\r\n        mvt.stockMvtWay === BidtStockMvtConstants.MVT_WAY_TRANSFER &&\r\n        mvt.mvtStatus !== AWPropertiesConstants.MM_MVT_STATUS_EXECUTED_KEY\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":""}