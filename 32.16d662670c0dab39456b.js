(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"5aGG":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){}return e.ICON_GREEN="9",e.ICON_RED="10",e.ICON_YELLOW="11",e.ICON_NONE="12",e.CUSTOMIZATION_STATUS_NONE="0",e.CUSTOMIZATION_STATUS_OK_ASSUMED="10",e.CUSTOMIZATION_STATUS_OK_CUSTOMIZED="11",e.CUSTOMIZATION_STATUS_WARNING_NO_ALTERNATIVE="21",e.ICON_GREEN_LIGHT_CODE="0",e.ICON_RED_LIGHT_CODE="1",e.ICON_YELLOW_LIGHT_CODE="2",e.ICON_NONE_LIGHT_CODE="3",e.ICON_EQUIPMENT_CODE="5",e.ICON_GREEN_ROUND_CODE="6",e.ICON_ITEM_CODE="4",e.ICON_YELLOW_TRIANGLE_CODE="7",e.ICON_RED_SQUARE_CODE="8",e.ICON_GREEN_LED_CODE="9",e.ICON_YELLOW_LED_CODE="11",e.ICON_RED_LED_CODE="10",e.ICON_NONE_LED_CODE="12",e.OME_CHECK_EQUIPMENT_MISSING="MISSING",e.OME_CHECK_EQUIPMENT_TO_REMOVE="REMOVE",e.OME_CHECK_EQUIPMENT_TO_REPLACE="REPLACE",e.OME_CHECK_CORRECTIVE_ACTION_SUGGESTED="SUGGESTED",e.OME_CHECK_CORRECTIVE_ACTION_VALIDATED="VALIDATED",e.OME_CHECK_CORRECTIVE_ACTION_ON_GOING="ON_GOING",e}()},BJsZ:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){}return e.RECEIPT=10,e.STORAGE=11,e.LOCATION_CHANGE=12,e.QUARANTINE=13,e.CROSS_DOCKING=18,e.PICKING=19,e.SHIPMENT=20,e.BATCH_SPLITTING_PLUS=22,e.BATCH_SPLITTING_MINUS=23,e.INVENTORY_CORRECTION_PLUS=24,e.INVENTORY_CORRECTION_MINUS=25,e.WORKSHOP_ENTRY=30,e.INSTALLATION=40,e.REMOVAL=50,e.WORKSHOP_ISSUE=60,e}()},Rufw:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("mrSG"),l=n("2WpN"),i=n("nOye"),a=n("qYLG"),o=n("xbox"),u=n("LCkZ"),s=(n("enDq"),function(e){function t(t){var n=e.call(this,a.a.Read)||this;return n.procurementRequestsTableService=t,n.init(),n}return Object(r.__extends)(t,e),Object.defineProperty(t.prototype,"workOrder",{set:function(e){e&&(this.bidmWorkOrder=e,this.loadProcurementRequestAndQuantity())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"workPackages",{set:function(e){u.a.isNullOrEmpty(e)||(this.workPackageDTOIdsTab=e.map(function(e){return{projectId:e.projectId}}),this.loadProcurementRequestAndQuantity())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"workPackageIds",{set:function(e){u.a.isNullOrEmpty(e)||(this.workPackageDTOIdsTab=e.map(function(e){return{projectId:e}}),this.loadProcurementRequestAndQuantity())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"procurementRequests",{set:function(e){u.a.isNullOrEmpty(e)||(this.procurementRequestsTab=e,this.loadProcurementRequestAndQuantity())},enumerable:!0,configurable:!0}),t.prototype.getComponentName=function(){return i.a.MAI_MATERIAL_AVAILABILITY_INDICATORS},t.prototype.init=function(){this.isLoadingProcurementRequestData=!1,this.materialAvailabilityIndicators={nbProcReqItemsOk:0,nbProcReqItemsNOk:0,nbProcReqItemsWarning:0}},t.prototype.loadProcurementRequestAndQuantity=function(){var e=this;u.a.isNullOrEmpty(this.procurementRequestsTab)?(this.isLoadingProcurementRequestData=!0,this.procurementRequestsTableService.findProcReqItemsAndStockQuantityIndicators(this.bidmWorkOrder,this.workPackageDTOIdsTab).pipe(Object(l.a)(function(){return e.isLoadingProcurementRequestData=!1})).subscribe(function(t){e.computeMaterialAvailabilityIndicators(t)})):this.computeMaterialAvailabilityIndicators(this.procurementRequestsTab)},t.prototype.computeMaterialAvailabilityIndicators=function(e){var t=0,n=0,r=0;e.forEach(function(e){e.procReqItemsAndQtyIndicatorsDTO&&e.procReqItemsAndQtyIndicatorsDTO.forEach(function(e){e.ok?t++:e.nok?n++:e.warning&&r++})}),this.materialAvailabilityIndicators={nbProcReqItemsOk:t,nbProcReqItemsNOk:n,nbProcReqItemsWarning:r}},t.prototype.isConfStockOk=function(){return 0===this.materialAvailabilityIndicators.nbProcReqItemsNOk&&0===this.materialAvailabilityIndicators.nbProcReqItemsWarning&&this.materialAvailabilityIndicators.nbProcReqItemsOk>0},t.prototype.isConStockfWarning=function(){return 0===this.materialAvailabilityIndicators.nbProcReqItemsNOk&&this.materialAvailabilityIndicators.nbProcReqItemsWarning>0},t.prototype.isConfStockNok=function(){return this.materialAvailabilityIndicators.nbProcReqItemsNOk>0},t}(o.a))},Xrm1:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n("1bHX"),n("3/N/"),n("a4ce"),n("dLo5"),n("NGzr"),n("JDd4"),n("LK8B"),n("Tcav"),n("9aqM"),n("8YFm"),n("r5xa"),n("CqHe"),n("3CNd"),n("Cbii"),n("8kBh"),n("7kpW"),n("Rufw"),n("j6K3"),n("enDq");var r=function(){return function(){}}()},a4ce:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("66nc"))},enDq:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("mrSG"),l=(n("CqHe"),n("3CNd"),n("Cbii"),n("nOye")),i=n("OovH"),a=(n("2XxF"),function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)}),o=function(e){function t(t,n,r,i,a,o){var u=e.call(this,t,n)||this;return u.procurementRequestApi=r,u.aMProjectManagementApi=i,u.aircraftMaintenanceApi=a,u.translateService=o,u.componentName=l.a.MAI_PROCUREMENT_REQUESTS_TABLE,u}return Object(r.__extends)(t,e),t.prototype.findProcReqItemsAndStockQuantityIndicators=function(t,n){var r={};return t&&(r={workOrdersIds:[{woId:t.woId,projectId:t.projectId}]}),n&&n.length>0&&(r=a({},r,{workPackagesIds:n})),e.prototype.post.call(this,this.procurementRequestApi.findProcurementRequestStockQuantityIndicators,r)},t.prototype.findBidmProject=function(t){return e.prototype.post.call(this,this.aMProjectManagementApi.findBidmProject,t)},t.prototype.calculateWorkOrderStatus=function(t){return e.prototype.post.call(this,this.aircraftMaintenanceApi.calculateWorkOrderStatus,t)},t}(i.a)},j6K3:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n("mrSG"),l=n("CcnG"),i=n("VNr4"),a=n("67Y/"),o=n("0ko2"),u=n("ag2f"),s=n("J6gT"),c=n("BJsZ"),d=n("nOye"),p=n("UYhe"),m=n("qYLG"),f=(n("v1eH"),n("UOq0"),n("mZtN"),n("60Vt"),n("xbox")),R=n("LCkZ"),b=n("+It2"),g=n("x3i7"),I=n("tZza"),v=n("8jAZ"),O=(n("hFGf"),n("enDq"),function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)}),E=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,l,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(o){l={error:o}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a},S=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(E(arguments[t]));return e},h=function(e){function t(n,r,i,a,o,u,s){var c=e.call(this,m.a.Write)||this;return c.serializationService=n,c.tabService=r,c.sessionService=i,c.logisticsService=a,c.propertiesService=o,c.translateService=u,c.procurementRequestsTableService=s,c.stockMvtTableFiltersVisible=!1,c.okKey=1,c.warningKey=2,c.nOkKey=3,c.defaultRequestManagementKey="requestManagement",c.component=t,c.askParentRefresh=new l.EventEmitter,c}return Object(r.__extends)(t,e),Object.defineProperty(t.prototype,"workOrder",{set:function(e){e&&(this.bidmWorkOrderFromInput=e,this.bidmWorkOrder=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"workPackages",{set:function(e){R.a.isNullOrEmpty(e)||(this.workPackageDTOIdsFromInput=e.map(function(e){return{projectId:e.projectId}})),this.loadData()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"workPackageIds",{set:function(e){R.a.isNullOrEmpty(e)||(this.workPackageDTOIdsFromInput=e.map(function(e){return{projectId:e}})),this.loadData()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"procurementRequests",{set:function(e){e&&(this.procurementRequestsFromInput=e),this.loadData()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"requestManagementKey",{set:function(e){e&&this.initRequestManagementLabel(e)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.init()},t.prototype.init=function(){this.initRequestManagementLabel(void 0),this.askParentRefresh=new l.EventEmitter,this.originalProcReqRow=[],this.procReqItemFiltersAvailabilityList=[],this.awPropertiesConstants=u.a,this.initProcurementRequestsTableDataSource()},t.prototype.initRequestManagementLabel=function(e){var t=this,n=this.defaultRequestManagementKey;e&&(n=e);var r=this.getTranslateKey(n);this.translateService.get([r]).subscribe(function(e){t.requestManagementLabel=""+e[r]})},t.prototype.loadData=function(){this.procReqItemFiltersAvailabilityList=[],this.selectedProcReqFilterStatusValue=void 0,this.selectedProcReqFilterWPValue=-1,this.loadProcurementStatusMap(),this.loadProcurementTypeMap(),this.loadProcurementRequestAndQuantity(),this.setStockMvtTableFiltersAvailabilityList()},t.prototype.getComponentName=function(){return d.a.MAI_PROCUREMENT_REQUESTS_TABLE},t.prototype.loadProcurementStatusMap=function(){var e=this;this.procurementRequestStatusList=[],this.propertiesService.getValue(p.a.PROCUREMENT_REQUEST_STATUS_MAP).subscribe(function(t){e.procurementRequestStatusList=t,e.procReqItemStatusList=t})},t.prototype.loadProcurementTypeMap=function(){var e=this;this.procurementRequestTypes=[],this.propertiesService.getValue(p.a.PROCUREMENT_REQUEST_TYPE_MAP).subscribe(function(t){e.procurementRequestTypes=t})},t.prototype.getProcurementRequestAndQuantityAsObservable=function(e,t){return this.procurementRequestsTableService.findProcReqItemsAndStockQuantityIndicators(e,t)},t.prototype.loadProcurementRequestAndQuantity=function(){var e=this;R.a.isNullOrEmpty(this.procurementRequestsFromInput)?this.workPackageDTOIdsFromInput&&this.procurementRequestsTableService.findProcReqItemsAndStockQuantityIndicators(void 0,this.workPackageDTOIdsFromInput).subscribe(function(t){e.procurementRequestsFromInput=t,e.loadDataOnProcReqReception(t)}):this.loadDataOnProcReqReception(this.procurementRequestsFromInput)},t.prototype.loadDataOnProcReqReception=function(e){var t=this;this.procReqItemsTableDataSource.deleteDataSelection(),this.procReqItemsTableDataSource.setData([]),e.forEach(function(e){var n=t.createProcReqItemRow(e);t.procReqItemsTableDataSource.addData(n),t.setWPfiltersList()})},t.prototype.createProcReqItemRow=function(e){var t=this,n=0,r=0;if(!R.a.isNullOrEmpty(e.procReqItemsAndQtyIndicatorsDTO)){var l=e.procReqItemsAndQtyIndicatorsDTO[0].workshopEntries;l&&(n=l.filter(function(t){return t.mvtStatus===u.a.MM_MVT_STATUS_EXECUTED_KEY&&(t.bidtStockMvtTypeId===c.a.RECEIPT&&e.bidtWarehouseReceipt.whCategory===u.a.WAREHOUSE_CATEGORY_WAREHOUSE||t.bidtStockMvtTypeId===c.a.WORKSHOP_ENTRY&&e.bidtWarehouseReceipt.whCategory===u.a.WAREHOUSE_CATEGORY_WORKSHOP)}).filter(function(e){return e.stockMvtQuantity}).map(function(e){return g.a.fromString(e.stockMvtQuantity)}).reduce(function(e,t){return e+t},0),r=l.filter(function(t){return t.mvtStatus!==u.a.MM_MVT_STATUS_EXECUTED_KEY&&t.mvtStatus!==u.a.MM_MVT_STATUS_CANCELED_KEY&&(t.stockMvtSn||t.stockMvtBatchNumber)&&(t.bidtStockMvtTypeId===c.a.RECEIPT&&e.bidtWarehouseReceipt.whCategory===u.a.WAREHOUSE_CATEGORY_WAREHOUSE||t.bidtStockMvtTypeId===c.a.WORKSHOP_ENTRY&&e.bidtWarehouseReceipt.whCategory===u.a.WAREHOUSE_CATEGORY_WORKSHOP)}).filter(function(e){return e.stockMvtQuantity}).map(function(e){return g.a.fromString(e.stockMvtQuantity)}).reduce(function(e,t){return e+t},0))}var a=e.procReqItemsAndQtyIndicatorsDTO;e.bidtProcReqItems=a;var o=O({},e,a),s=b.a.getServedIndicators(o);return e.procReqItemsAndQtyIndicatorsDTO.map(function(l){var a={procurementRequestId:e.id,id:l.id,procurementRequest:e.procCode,procurementRequestDescription:e.procType,referenceDocument:e.bidmWorkOrder?e.bidmWorkOrder.woCode:"",referenceDocumentDesc:e.bidmWorkOrder?e.bidmWorkOrder.woDescription:"",recepient:e.bidtSiteReceipt?e.bidtSiteReceipt.siteName:"",recepientDesc:e.bidtWarehouseReceipt?e.bidtWarehouseReceipt.whName:"",status:e.procStatus,statusDesc:e.requestedDate,expectedOn:e.requestedDate,criticity:e.criticality,servedMaterial:n,reservedMaterial:r,servedNb:s?s.servedNb:0,isServed:!!s&&s.isServed,materials:l.birePn?l.birePn.pnCode:void 0,materialsDesc:l.birePn?l.birePn.articleDesignation:void 0,requestedQuantity:l.requestedQuantity?g.a.roundNumber(g.a.fromString(l.requestedQuantity),2).toString():"",notReversedNb:0,reversedNb:0,bidtProcReqItem:l,_obj:e},o=b.a.buildProcurementRequestItemsRows(a._obj).map(function(e){return e.obj.id}).map(function(e){return t.logisticsService.findTransferOrdersByCriteria({transferOrder:{bidtProcReqItemId:e},transferOrderStatusExcluded:[]})});if(Object(i.a)(o).subscribe(function(e){var n=e.reduce(function(e,t){return e.concat(t)},[]).map(function(e){return e.bidtTransferOrder}).filter(function(e){return e.bidtTorItems&&e.bidtTorItems.length>0}).map(function(e){return e.bidtTorItems.map(function(t){return{transferOrder:e,torItem:t}})}).reduce(function(e,t){return e.concat(t)},[]).map(function(e){var t=e.transferOrder,n=e.torItem,r=b.a.computeProcurementRequestReverseItemProgress(n.pickingMovements);return{obj:n,allNb:r.allNb,reversedNb:r.reversedNb,notReversedNb:r.notReversedNb,warehouseName:t.bidtWarehouseIssue?t.bidtWarehouseIssue.whName:void 0,siteName:t.bidtSiteIssue?t.bidtSiteIssue.siteName:void 0}}),r=0,l=0;n.forEach(function(e){r+=e.reversedNb,l+=e.notReversedNb}),a.notReversedNb=l,a.reversedNb=r;var i=t.procReqItemsTableDataSource.dataSrc.find(function(e){return e.id===a.id});i&&t.procReqItemsTableDataSource.replaceData(i,a)}),u.a.PROCUREMENT_REQUEST_STATUS_CLOSED!==e.procStatus){var c=t.getTranslateKey("quantityQ");t.translateService.get([c]).subscribe(function(e){a=O({},a,{availableQuantity:e[c]+" = "+l.availableQuantity,ok:l.ok,nok:l.nok,warning:l.warning})})}return t.originalProcReqRow.push(a),a})},Object.defineProperty(t.prototype,"enableOpenProcurementOnAdd",{get:function(){return 0===this.procReqItemsTableDataSource.dataSelectionCount&&!!this.bidmWorkOrderFromInput&&!this.statusState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableOpenProcurementOnEdit",{get:function(){if(this.procReqItemsTableDataSource.hasDataSelection){var e=this.procReqItemsTableDataSource.dataSelection[0]._obj;return 1===this.procReqItemsTableDataSource.dataSelectionCount&&!!e.bidmWorkOrder&&e.procStatus!==u.a.PROCUREMENT_REQUEST_STATUS_CANCELED&&!this.isReadOpenMode}return!1},enumerable:!0,configurable:!0}),t.prototype.openProcurementRequestDialog=function(){var e=this;if(1===this.procReqItemsTableDataSource.dataSelectionCount){var t=this.procReqItemsTableDataSource.dataSelection[0]._obj;this.bidmWorkOrder=t.bidmWorkOrder,this.woStatus=this.bidmWorkOrder.calculatedStatus,this.bidmProjectDTO=t.projectDTO,this.showProcurementRequestDialog=!0}else 0===this.procReqItemsTableDataSource.dataSelectionCount&&(this.bidmWorkOrder=this.bidmWorkOrderFromInput,this.procurementRequestsTableService.calculateWorkOrderStatus({workOrderData:this.bidmWorkOrderFromInput,fromLineMaintenance:!1}).subscribe(function(t){e.woStatus=t.workOrderDetail.status,e.procurementRequestsTableService.findBidmProject(e.bidmWorkOrderFromInput.projectId).subscribe(function(t){e.bidmProjectDTO=t,e.showProcurementRequestDialog=!0})}))},t.prototype.getStatusLabel=function(e){var t=this.procurementRequestStatusList.find(function(t){return t.value===e});return t?v.a.orEmpty(t.label):""},t.prototype.openProcurementDetails=function(e){var t={id:this.tabService.generateId(),componentId:d.a.LOG_PROCUREMENT_REQUEST_FORM,objectId:e&&e.procurementRequest?this.serializationService.serialize({id:e._obj.id}):void 0,openMode:m.a.Read};this.tabService.open(this.tabService.create(t,"transaction."+t.componentId,!0))},t.prototype.isDeleteButtonVisible=function(){var e=this;return this.procReqItemsTableDataSource.hasDataSelection&&this.procReqItemsTableDataSource.dataSelection.reduce(function(t,n){return t&&e.isDeletableRow(n)},!0)&&!this.statusState},t.prototype.isDeletableRow=function(e){return!(e._obj.procStatus!==u.a.PROCUREMENT_REQUEST_STATUS_DRAFT&&e._obj.procStatus!==u.a.PROCUREMENT_REQUEST_STATUS_CANCELED||!this.sessionService.loggedUser||e._obj.statusUser!==this.sessionService.loggedUser.login||this.isReadOpenMode)},t.prototype.deleteProcurementRequest=function(){var e=this;Object(i.a)(this.procReqItemsTableDataSource.dataSelection.map(function(t){return e.logisticsService.deleteProcurementRequest(t.procurementRequestId)})).subscribe(function(){e.procReqItemsTableDataSource.deleteDataSelection()})},t.prototype.isCancelButtonVisible=function(){var e=this;return this.procReqItemsTableDataSource.hasDataSelection&&this.procReqItemsTableDataSource.dataSelection.reduce(function(t,n){return t&&e.isCancelableRow(n)},!0)},t.prototype.isCancelableRow=function(e){return(e._obj.procStatus===u.a.PROCUREMENT_REQUEST_STATUS_SIMULATED||e._obj.procStatus===u.a.PROCUREMENT_REQUEST_STATUS_PLANNED||e._obj.procStatus===u.a.PROCUREMENT_REQUEST_STATUS_RELEASED)&&this.sessionService.hasUserRightByUseCase(s.a.UC_MM_PROCUREMENT,s.a.DEGREE_MANAGE)},t.prototype.cancelProcurementRequest=function(){var e=this;Object(i.a)(this.procReqItemsTableDataSource.dataSelection.map(function(t){return e.logisticsService.cancelProcurementRequest(t.procurementRequestId)})).subscribe(function(){e.procReqItemsTableDataSource.dataSelection.map(function(t){return e.findProcurementRequestById(t.procurementRequestId)}).forEach(function(e){e.procStatus=u.a.PROCUREMENT_REQUEST_STATUS_CANCELED}),e.procReqItemsTableDataSource.deleteDataSelection(),e.loadProcurementRequestAndQuantity()})},t.prototype.findProcurementRequestById=function(e){return this.procurementRequestsFromInput.find(function(t){return t.id===e})},t.prototype.initProcurementRequestsTableDataSource=function(){this.procReqItemsTableDataSource=new o.b({allowMultiSelect:!0,columns:[{field:"procurementRequest",translateKey:this.getTranslateKey("procurementRequest"),alignment:o.a.LEFT,width:"13%"},{field:"recepient",translateKey:this.getTranslateKey("recepient"),alignment:o.a.LEFT,width:"11%"},{field:"materials",translateKey:this.getTranslateKey("materials"),alignment:o.a.LEFT,width:"20%"},{field:"requestedQuantity",translateKey:this.getTranslateKey("requestedQuantity"),alignment:o.a.RIGHT,width:"5%"},{field:"status",translateKey:this.getTranslateKey("status"),alignment:o.a.LEFT,width:"9%"},{field:"expectedOn",translateKey:this.getTranslateKey("expectedOn"),alignment:o.a.LEFT,width:"8%"},{field:"criticity",translateKey:this.getTranslateKey("criticity"),alignment:o.a.LEFT,width:"8%"},{field:"progress",translateKey:this.getTranslateKey("advancement"),alignment:o.a.LEFT,width:"18%"},{field:"availableQuantity",translateKey:this.getTranslateKey("availableQuantity"),alignment:o.a.CENTER,width:"8%"}],data:[]})},t.prototype.openPart=function(e){if(e.materials){var t={componentId:d.a.ENG_PART_NUMBER_FORM,id:this.tabService.generateId(),objectId:e.materials,openMode:m.a.Read};this.tabService.open(this.tabService.create(t,"transaction."+t.componentId,!0))}},t.prototype.openProcurementManagmentPage=function(){if(1===this.procReqItemsTableDataSource.dataSelectionCount&&this.procReqItemsTableDataSource.dataSelection[0]._obj.procReqItemsAndQtyIndicatorsDTO){var e={id:this.tabService.generateId(),componentId:d.a.LOG_MATERIAL_REQUEST_MANAGEMENT_FORM,openMode:m.a.Write,objectId:this.serializationService.serialize({prId:this.procReqItemsTableDataSource.dataSelection[0]._obj.id,prItemId:this.procReqItemsTableDataSource.dataSelection[0]._obj.procReqItemsAndQtyIndicatorsDTO[0].id})};this.tabService.open(this.tabService.create(e,"transaction."+e.componentId,!0))}},t.prototype.setWPfiltersList=function(){var e=this,t=this.getTranslateKey("wp"),n=this.getTranslateKey("msn");this.wpFiltersList=[],this.translateService.get([t,n]).subscribe(function(r){e.originalProcReqRow.forEach(function(l){var i=l._obj.projectDTO;l._obj.procReqItemsAndQtyIndicatorsDTO.forEach(function(){var a={label:r[t]+" n\xb0"+i.projectNumber,value:l.procurementRequestId};i.aircraftMsn&&(a={label:a.label+" | "+r[n]+" "+i.aircraftMsn,value:a.value});var o=e.wpFiltersList.find(function(e){return e.value=a.value});I.a.isDefined(o)||(e.wpFiltersList=S(e.wpFiltersList,[a]))})})})},t.prototype.setStockMvtTableFiltersAvailabilityList=function(){var e=this,t=this.getTranslateKey("ok"),n=this.getTranslateKey("warning"),r=this.getTranslateKey("nok");this.translateService.get([t,n,r]).pipe(Object(a.a)(function(l){return[{label:l[t],value:e.okKey},{label:l[n],value:e.warningKey},{label:l[r],value:e.nOkKey}]})).subscribe(function(t){e.filtersAvailabilityDefaultList=t,e.procReqItemFiltersAvailabilityList=[e.okKey,e.warningKey,e.nOkKey]})},t.prototype.filterStockMvtTableByCriteria=function(){var e=this,t=[];this.procReqItemFiltersAvailabilityList&&this.procReqItemFiltersAvailabilityList.forEach(function(n){n===e.okKey&&(t=S(t,e.originalProcReqRow.filter(function(e){return e.ok}))),n===e.warningKey&&(t=S(t,e.originalProcReqRow.filter(function(e){return e.warning}))),n===e.nOkKey&&(t=S(t,e.originalProcReqRow.filter(function(e){return e.nok})))}),this.selectedProcReqFilterWPValue&&(t=this.originalProcReqRow.filter(function(t){return e.selectedProcReqFilterWPValue===t.procurementRequestId})),this.selectedProcReqFilterStatusValue&&(t=this.originalProcReqRow.filter(function(t){return e.selectedProcReqFilterStatusValue===t._obj.procStatus})),t=t.reduce(function(e,t){return e.every(function(e){return e.id!==t.id})?S(e,[t]):e},[]),this.procReqItemsTableDataSource.setData(t)},t.prototype.setStockMvtTableFiltersVisible=function(){this.stockMvtTableFiltersVisible=!this.stockMvtTableFiltersVisible},t.prototype.onUpdateProcurementRequest=function(e){this.askParentRefresh.emit()},t}(f.a)},"n/sh":function(e,t,n){"use strict";var r=n("CcnG"),l=n("Ip0R"),i=n("gIcY"),a=n("A7o+");n("Rufw"),n("enDq"),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return R});var o=r["\u0275crt"]({encapsulation:0,styles:[[".material-availability.section[_ngcontent-%COMP%]{flex-grow:1;text-align:center}.material-availability.row[_ngcontent-%COMP%]{flex-wrap:nowrap!important}.material-availability[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{flex:1;padding:0}.ready-only-field[_ngcontent-%COMP%]{padding:8px 0}.material-availability[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:center}.material-availability[_ngcontent-%COMP%]   .ok[_ngcontent-%COMP%]{background-color:#4caf50!important}.material-availability[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{background-color:#ffc107!important}.material-availability[_ngcontent-%COMP%]   .nok[_ngcontent-%COMP%]{background-color:#f6685e!important}"]],data:{}});function u(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,0,"div",[["class","outgoing-conf-lds-hourglass lds-hourglass"]],null,null,null,null,null))],null,null)}function s(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,7,"input",[["class","aw-input"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,i=e.component;return"input"===t&&(l=!1!==r["\u0275nov"](e,3)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==r["\u0275nov"](e,3).onTouched()&&l),"compositionstart"===t&&(l=!1!==r["\u0275nov"](e,3)._compositionStart()&&l),"compositionend"===t&&(l=!1!==r["\u0275nov"](e,3)._compositionEnd(n.target.value)&&l),"ngModelChange"===t&&(l=!1!==(i.materialAvailabilityIndicators.nbProcReqItemsOk=n)&&l),l},null,null)),r["\u0275did"](1,278528,null,0,l.NgClass,[r.IterableDiffers,r.KeyValueDiffers,r.ElementRef,r.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r["\u0275pod"](2,{ok:0}),r["\u0275did"](3,16384,null,0,i.DefaultValueAccessor,[r.Renderer2,r.ElementRef,[2,i.COMPOSITION_BUFFER_MODE]],null,null),r["\u0275prd"](1024,null,i.NG_VALUE_ACCESSOR,function(e){return[e]},[i.DefaultValueAccessor]),r["\u0275did"](5,671744,null,0,i.NgModel,[[8,null],[8,null],[8,null],[6,i.NG_VALUE_ACCESSOR]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,i.NgControl,null,[i.NgModel]),r["\u0275did"](7,16384,null,0,i.NgControlStatus,[[4,i.NgControl]],null,null)],function(e,t){var n=t.component,r=e(t,2,0,n.isConfStockOk());e(t,1,0,"aw-input",r),e(t,5,0,!0,n.materialAvailabilityIndicators.nbProcReqItemsOk)},function(e,t){e(t,0,0,r["\u0275nov"](t,7).ngClassUntouched,r["\u0275nov"](t,7).ngClassTouched,r["\u0275nov"](t,7).ngClassPristine,r["\u0275nov"](t,7).ngClassDirty,r["\u0275nov"](t,7).ngClassValid,r["\u0275nov"](t,7).ngClassInvalid,r["\u0275nov"](t,7).ngClassPending)})}function c(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,0,"div",[["class","outgoing-conf-lds-hourglass lds-hourglass"]],null,null,null,null,null))],null,null)}function d(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,7,"input",[["class","aw-input"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,i=e.component;return"input"===t&&(l=!1!==r["\u0275nov"](e,3)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==r["\u0275nov"](e,3).onTouched()&&l),"compositionstart"===t&&(l=!1!==r["\u0275nov"](e,3)._compositionStart()&&l),"compositionend"===t&&(l=!1!==r["\u0275nov"](e,3)._compositionEnd(n.target.value)&&l),"ngModelChange"===t&&(l=!1!==(i.materialAvailabilityIndicators.nbProcReqItemsWarning=n)&&l),l},null,null)),r["\u0275did"](1,278528,null,0,l.NgClass,[r.IterableDiffers,r.KeyValueDiffers,r.ElementRef,r.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r["\u0275pod"](2,{warning:0}),r["\u0275did"](3,16384,null,0,i.DefaultValueAccessor,[r.Renderer2,r.ElementRef,[2,i.COMPOSITION_BUFFER_MODE]],null,null),r["\u0275prd"](1024,null,i.NG_VALUE_ACCESSOR,function(e){return[e]},[i.DefaultValueAccessor]),r["\u0275did"](5,671744,null,0,i.NgModel,[[8,null],[8,null],[8,null],[6,i.NG_VALUE_ACCESSOR]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,i.NgControl,null,[i.NgModel]),r["\u0275did"](7,16384,null,0,i.NgControlStatus,[[4,i.NgControl]],null,null)],function(e,t){var n=t.component,r=e(t,2,0,n.isConStockfWarning());e(t,1,0,"aw-input",r),e(t,5,0,!0,n.materialAvailabilityIndicators.nbProcReqItemsWarning)},function(e,t){e(t,0,0,r["\u0275nov"](t,7).ngClassUntouched,r["\u0275nov"](t,7).ngClassTouched,r["\u0275nov"](t,7).ngClassPristine,r["\u0275nov"](t,7).ngClassDirty,r["\u0275nov"](t,7).ngClassValid,r["\u0275nov"](t,7).ngClassInvalid,r["\u0275nov"](t,7).ngClassPending)})}function p(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,0,"div",[["class","outgoing-conf-lds-hourglass lds-hourglass"]],null,null,null,null,null))],null,null)}function m(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,7,"input",[["class","aw-input"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,i=e.component;return"input"===t&&(l=!1!==r["\u0275nov"](e,3)._handleInput(n.target.value)&&l),"blur"===t&&(l=!1!==r["\u0275nov"](e,3).onTouched()&&l),"compositionstart"===t&&(l=!1!==r["\u0275nov"](e,3)._compositionStart()&&l),"compositionend"===t&&(l=!1!==r["\u0275nov"](e,3)._compositionEnd(n.target.value)&&l),"ngModelChange"===t&&(l=!1!==(i.materialAvailabilityIndicators.nbProcReqItemsNOk=n)&&l),l},null,null)),r["\u0275did"](1,278528,null,0,l.NgClass,[r.IterableDiffers,r.KeyValueDiffers,r.ElementRef,r.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r["\u0275pod"](2,{nok:0}),r["\u0275did"](3,16384,null,0,i.DefaultValueAccessor,[r.Renderer2,r.ElementRef,[2,i.COMPOSITION_BUFFER_MODE]],null,null),r["\u0275prd"](1024,null,i.NG_VALUE_ACCESSOR,function(e){return[e]},[i.DefaultValueAccessor]),r["\u0275did"](5,671744,null,0,i.NgModel,[[8,null],[8,null],[8,null],[6,i.NG_VALUE_ACCESSOR]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),r["\u0275prd"](2048,null,i.NgControl,null,[i.NgModel]),r["\u0275did"](7,16384,null,0,i.NgControlStatus,[[4,i.NgControl]],null,null)],function(e,t){var n=t.component,r=e(t,2,0,n.isConfStockNok());e(t,1,0,"aw-input",r),e(t,5,0,!0,n.materialAvailabilityIndicators.nbProcReqItemsNOk)},function(e,t){e(t,0,0,r["\u0275nov"](t,7).ngClassUntouched,r["\u0275nov"](t,7).ngClassTouched,r["\u0275nov"](t,7).ngClassPristine,r["\u0275nov"](t,7).ngClassDirty,r["\u0275nov"](t,7).ngClassValid,r["\u0275nov"](t,7).ngClassInvalid,r["\u0275nov"](t,7).ngClassPending)})}function f(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,31,"div",[["class","row"]],null,null,null,null,null)),(e()(),r["\u0275eld"](1,0,null,null,30,"div",[["class","section material-availability grid-cell-content"]],null,null,null,null,null)),(e()(),r["\u0275eld"](2,0,null,null,29,"div",[["class","section-content"]],null,null,null,null,null)),(e()(),r["\u0275eld"](3,0,null,null,28,"div",[["class","row"]],null,null,null,null,null)),(e()(),r["\u0275eld"](4,0,null,null,27,"div",[["class","row material-availability"]],null,null,null,null,null)),(e()(),r["\u0275eld"](5,0,null,null,8,"div",[["class","form-group"],["id","ok"]],null,null,null,null,null)),(e()(),r["\u0275eld"](6,0,null,null,2,"label",[["class","form-label"]],null,null,null,null,null)),(e()(),r["\u0275ted"](7,null,[" "," "])),r["\u0275pid"](131072,a.i,[a.j,r.ChangeDetectorRef]),(e()(),r["\u0275eld"](9,0,null,null,4,"div",[["class","form-control ready-only-field"]],null,null,null,null,null)),(e()(),r["\u0275and"](16777216,null,null,1,null,u)),r["\u0275did"](11,16384,null,0,l.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["\u0275and"](16777216,null,null,1,null,s)),r["\u0275did"](13,16384,null,0,l.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["\u0275eld"](14,0,null,null,8,"div",[["class","form-group"],["id","warning"]],null,null,null,null,null)),(e()(),r["\u0275eld"](15,0,null,null,2,"label",[["class","form-label"]],null,null,null,null,null)),(e()(),r["\u0275ted"](16,null,[" "," "])),r["\u0275pid"](131072,a.i,[a.j,r.ChangeDetectorRef]),(e()(),r["\u0275eld"](18,0,null,null,4,"div",[["class","form-control ready-only-field"]],null,null,null,null,null)),(e()(),r["\u0275and"](16777216,null,null,1,null,c)),r["\u0275did"](20,16384,null,0,l.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["\u0275and"](16777216,null,null,1,null,d)),r["\u0275did"](22,16384,null,0,l.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["\u0275eld"](23,0,null,null,8,"div",[["class","form-group"],["id","nok"]],null,null,null,null,null)),(e()(),r["\u0275eld"](24,0,null,null,2,"label",[["class","form-label"]],null,null,null,null,null)),(e()(),r["\u0275ted"](25,null,[" "," "])),r["\u0275pid"](131072,a.i,[a.j,r.ChangeDetectorRef]),(e()(),r["\u0275eld"](27,0,null,null,4,"div",[["class","form-control ready-only-field"]],null,null,null,null,null)),(e()(),r["\u0275and"](16777216,null,null,1,null,p)),r["\u0275did"](29,16384,null,0,l.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["\u0275and"](16777216,null,null,1,null,m)),r["\u0275did"](31,16384,null,0,l.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,11,0,n.isLoadingProcurementRequestData),e(t,13,0,!n.isLoadingProcurementRequestData),e(t,20,0,n.isLoadingProcurementRequestData),e(t,22,0,!n.isLoadingProcurementRequestData),e(t,29,0,n.isLoadingProcurementRequestData),e(t,31,0,!n.isLoadingProcurementRequestData)},function(e,t){var n=t.component;e(t,7,0,r["\u0275unv"](t,7,0,r["\u0275nov"](t,8).transform(n.getComponentName()+".ok"))),e(t,16,0,r["\u0275unv"](t,16,0,r["\u0275nov"](t,17).transform(n.getComponentName()+".warning"))),e(t,25,0,r["\u0275unv"](t,25,0,r["\u0275nov"](t,26).transform(n.getComponentName()+".nok")))})}function R(e){return r["\u0275vid"](0,[r["\u0275qud"](402653184,1,{pageEltRef:0}),r["\u0275qud"](671088640,2,{dropdownList:1}),r["\u0275qud"](671088640,3,{checkboxList:1}),r["\u0275qud"](671088640,4,{checkboxElementRefList:1}),r["\u0275qud"](671088640,5,{calendarList:1}),r["\u0275qud"](671088640,6,{menuItemElementRefList:1}),r["\u0275qud"](671088640,7,{tabList:1}),r["\u0275qud"](671088640,8,{tabElementRefList:1}),r["\u0275qud"](671088640,9,{tabGroupList:1}),(e()(),r["\u0275eld"](9,0,null,null,7,"div",[["class","grid-cell grid-cell--container"]],null,null,null,null,null)),(e()(),r["\u0275eld"](10,0,null,null,4,"div",[["class","grid-cell-header"]],null,null,null,null,null)),(e()(),r["\u0275eld"](11,0,null,null,3,"div",[["class","grid-cell-title-container"]],null,null,null,null,null)),(e()(),r["\u0275eld"](12,0,null,null,2,"h3",[["class","grid-cell-title"]],null,null,null,null,null)),(e()(),r["\u0275ted"](13,null,[" "," "])),r["\u0275pid"](131072,a.i,[a.j,r.ChangeDetectorRef]),(e()(),r["\u0275and"](16777216,null,null,1,null,f)),r["\u0275did"](16,16384,null,0,l.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,16,0,!t.component.isCreateOpenMode)},function(e,t){var n=t.component;e(t,13,0,r["\u0275unv"](t,13,0,r["\u0275nov"](t,14).transform(n.getComponentName()+".materialAvailability")))})}}}]);