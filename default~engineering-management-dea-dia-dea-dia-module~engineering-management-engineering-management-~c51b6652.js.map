{"version":3,"sources":["webpack:///./src/app/main/engineering-management/dea-dia/dialog-bire-document/dialog-bire-doc-pug.component.html","webpack:///./src/app/main/engineering-management/dea-dia/dialog-bire-document/dialog-bire-doc-pug.component.scss","webpack:///./src/app/main/engineering-management/dea-dia/dialog-bire-document/dialog-bire-doc-pug.component.ts","webpack:///./src/app/main/engineering-management/dea-dia/dialog-bire-document/dialog-bire-doc-pug.module.ts"],"names":[],"mappings":"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","file":"default~engineering-management-dea-dia-dea-dia-module~engineering-management-engineering-management-~c51b6652.js","sourcesContent":["module.exports = \"<a-modal class=\\\"aw-modal\\\" [(visible)]=\\\"display\\\">\\r\\n  <a-header>\\r\\n    <div class=\\\"modal-title\\\">{{ componentId + \\\".title\\\" | translate }}</div>\\r\\n  </a-header>\\r\\n\\r\\n  <a-content>\\r\\n    <div class=\\\"column\\\">\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"form-group\\\">\\r\\n          <label class=\\\"form-label\\\">{{ componentId + \\\".docName\\\" | translate }}</label>\\r\\n\\r\\n          <div class=\\\"form-control form-control-with-modal\\\">\\r\\n            <input\\r\\n              *ngIf=\\\"!!document\\\"\\r\\n              class=\\\"aw-input\\\"\\r\\n              type=\\\"text\\\"\\r\\n              [(ngModel)]=\\\"bireDocumentDto.docName\\\"\\r\\n              [disabled]=\\\"isReadOnlyForm || (!bireDocumentDto.docName && !bireDocumentDto.docFile)\\\"\\r\\n            />\\r\\n            <div\\r\\n              *ngIf=\\\"!isReadOnlyForm && !bireDocumentDto.docName && !bireDocumentDto.docFile\\\"\\r\\n              class=\\\"btn-file-upload-wrapper\\\"\\r\\n            >\\r\\n              <p-fileUpload\\r\\n                #fileUploader\\r\\n                class=\\\"aw-fileupload\\\"\\r\\n                name=\\\"document[]\\\"\\r\\n                customUpload=\\\"true\\\"\\r\\n                mode=\\\"basic\\\"\\r\\n                auto=\\\"true\\\"\\r\\n                chooseLabel=\\\"\\\"\\r\\n                (uploadHandler)=\\\"uploadDocument($event, fileUploader)\\\"\\r\\n              ></p-fileUpload>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"form-group\\\">\\r\\n          <label class=\\\"form-label\\\">{{ componentId + \\\".docSource\\\" | translate }}</label>\\r\\n\\r\\n          <div class=\\\"form-control\\\">\\r\\n            <input class=\\\"aw-input\\\" type=\\\"text\\\" [(ngModel)]=\\\"bireDocumentDto.docSource\\\" [disabled]=\\\"isReadOnlyForm\\\" />\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"form-group\\\">\\r\\n          <label class=\\\"form-label\\\">{{ componentId + \\\".docPublicationDate\\\" | translate }}</label>\\r\\n\\r\\n          <div class=\\\"form-control\\\">\\r\\n            <p-calendar\\r\\n              showButtonBar=\\\"true\\\"\\r\\n              [monthNavigator]=\\\"true\\\"\\r\\n              [yearNavigator]=\\\"true\\\"\\r\\n              [yearRange]=\\\"sessionService.calendarYearRange\\\"\\r\\n              class=\\\"aw-calendar\\\"\\r\\n              [dateFormat]=\\\"sessionService.dateFormatPrimeNG\\\"\\r\\n              [locale]=\\\"sessionService.calendarFormat\\\"\\r\\n              [(ngModel)]=\\\"bireDocumentDto.docPublicationDate\\\"\\r\\n              [disabled]=\\\"isReadOnlyForm\\\"\\r\\n              appendTo=\\\"body\\\"\\r\\n            ></p-calendar>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"row\\\">\\r\\n        <div class=\\\"form-group\\\">\\r\\n          <label class=\\\"form-label\\\">{{ componentId + \\\".docDescription\\\" | translate }}</label>\\r\\n\\r\\n          <div class=\\\"form-control\\\">\\r\\n            <textarea\\r\\n              class=\\\"aw-textarea\\\"\\r\\n              [rows]=\\\"3\\\"\\r\\n              pInputTextarea\\r\\n              [(ngModel)]=\\\"bireDocumentDto.docDescription\\\"\\r\\n              [disabled]=\\\"isReadOnlyForm\\\"\\r\\n            ></textarea>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </a-content>\\r\\n\\r\\n  <a-footer>\\r\\n    <button *ngIf=\\\"isReadOnlyForm\\\" type=\\\"button\\\" mat-raised-button (click)=\\\"cancel()\\\">\\r\\n      <span>{{ \\\"global.close\\\" | translate }}</span>\\r\\n    </button>\\r\\n\\r\\n    <button *ngIf=\\\"!isReadOnlyForm\\\" type=\\\"button\\\" mat-raised-button (click)=\\\"cancel()\\\">\\r\\n      <span>{{ \\\"global.cancel\\\" | translate }}</span>\\r\\n    </button>\\r\\n\\r\\n    <button *ngIf=\\\"!isReadOnlyForm\\\" color=\\\"primary\\\" type=\\\"button\\\" mat-raised-button (click)=\\\"validate()\\\">\\r\\n      {{ \\\"global.validate\\\" | translate }}\\r\\n    </button>\\r\\n  </a-footer>\\r\\n</a-modal>\\r\\n\"","module.exports = \":host ::ng-deep .form-control.form-control-with-modal input.aw-input {\\n  border-bottom-width: 0 !important; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWFpbi9lbmdpbmVlcmluZy1tYW5hZ2VtZW50L2RlYS1kaWEvZGlhbG9nLWJpcmUtZG9jdW1lbnQvRDpcXFByb2ZpbGVzXFxhcHJhZGhhblxcRGVza3RvcFxcQWVyb3dlYmJcXFBST0pFQ1RTXFxmcm9udGVuZF9hZXJvd2ViYi9zcmNcXGFwcFxcbWFpblxcZW5naW5lZXJpbmctbWFuYWdlbWVudFxcZGVhLWRpYVxcZGlhbG9nLWJpcmUtZG9jdW1lbnRcXGRpYWxvZy1iaXJlLWRvYy1wdWcuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFHTSxpQ0FBaUMsRUFBQSIsImZpbGUiOiJzcmMvYXBwL21haW4vZW5naW5lZXJpbmctbWFuYWdlbWVudC9kZWEtZGlhL2RpYWxvZy1iaXJlLWRvY3VtZW50L2RpYWxvZy1iaXJlLWRvYy1wdWcuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XHJcbiAgOjpuZy1kZWVwIC5mb3JtLWNvbnRyb2wuZm9ybS1jb250cm9sLXdpdGgtbW9kYWwge1xyXG4gICAgaW5wdXQuYXctaW5wdXQge1xyXG4gICAgICBib3JkZXItYm90dG9tLXdpZHRoOiAwICFpbXBvcnRhbnQ7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ== */\"","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FileUpload } from 'primeng/fileupload';\r\n\r\nimport { GenericPropertyConstants } from '../../../../shared/constants/generic-property-constants';\r\nimport { MessageService } from '../../../../shared/services/message.service';\r\nimport { PropertiesService } from '../../../../shared/services/properties.service';\r\nimport { SessionService } from '../../../../shared/services/session.service';\r\nimport { BireDocPugDTO } from '../../../../shared/types/api-output-types/product-structure-management/bire-doc-pug-dto.interface';\r\nimport { BireDocumentDTO } from '../../../../shared/types/api-types/bire-document-dto.interface';\r\nimport { LabelValue } from '../../../../shared/types/label-value.interface';\r\nimport { FileUtils } from '../../../../shared/utils/file-utils';\r\n\r\n@Component({\r\n  selector: 'aw-dialog-bire-doc-pug',\r\n  templateUrl: './dialog-bire-doc-pug.component.html',\r\n  styleUrls: ['./dialog-bire-doc-pug.component.scss']\r\n})\r\nexport class DialogBireDocPugComponent implements OnInit {\r\n  @Input()\r\n  public get display() {\r\n    return this.displayValue;\r\n  }\r\n  public set display(displayValue) {\r\n    this.displayValue = displayValue;\r\n    this.displayChange.emit(this.displayValue);\r\n  }\r\n\r\n  @Output() public displayChange: EventEmitter<boolean>;\r\n\r\n  @Input() public document: BireDocPugDTO;\r\n\r\n  @Input() public isReadOnlyForm: boolean;\r\n  @Output() public onValidated: EventEmitter<BireDocPugDTO>;\r\n\r\n  public readonly componentId: string;\r\n\r\n  public bireDocumentDto: BireDocumentDTO;\r\n\r\n  public displayValue: boolean;\r\n  public types: LabelValue<string>[];\r\n\r\n  public constructor(\r\n    public readonly sessionService: SessionService,\r\n    private readonly messageService: MessageService,\r\n    private readonly propertiesService: PropertiesService\r\n  ) {\r\n    this.componentId = 'DialogDocumentComponent';\r\n\r\n    this.displayChange = new EventEmitter<boolean>();\r\n    this.onValidated = new EventEmitter<BireDocPugDTO>();\r\n\r\n    this.loadTypes();\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n    if (!this.document) {\r\n      this.document = {};\r\n      this.document.bireDocumentDto = this.bireDocumentDto = {};\r\n    } else {\r\n      this.document = { ...this.document };\r\n      if (!!this.document.bireDocumentDto) {\r\n        this.bireDocumentDto = this.document.bireDocumentDto;\r\n      }\r\n    }\r\n  }\r\n\r\n  public cancel(): void {\r\n    this.display = false;\r\n  }\r\n\r\n  public validate(): void {\r\n    this.document.bireDocumentDto = this.bireDocumentDto;\r\n    this.onValidated.emit(this.document);\r\n    this.display = false;\r\n  }\r\n\r\n  private loadTypes(): void {\r\n    this.propertiesService.getValue(GenericPropertyConstants.DOC_PARTNER_CATEGORY_MAP).subscribe(\r\n      (results) => {\r\n        this.types = results || [];\r\n      },\r\n      () => {\r\n        this.messageService.showErrorMessage(this.componentId + '.errorOnGetTypes');\r\n      }\r\n    );\r\n  }\r\n\r\n  public uploadDocument(event: { files: File[] }, fileUploader: FileUpload): void {\r\n    if (event.files) {\r\n      const file: File = event.files[0];\r\n      FileUtils.getFileContentAsBase64(file, (fileContent) => {\r\n        if (fileContent && !!this.document && !!this.document.bireDocumentDto) {\r\n          this.document.bireDocumentDto.docFile = fileContent;\r\n          this.document.bireDocumentDto.docName = file.name;\r\n          this.document.bireDocumentDto.docPublicationDate = new Date();\r\n        }\r\n      });\r\n\r\n      fileUploader.clear();\r\n    }\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CalendarModule } from 'primeng/calendar';\r\nimport { FileUploadModule } from 'primeng/fileupload';\r\nimport { InputTextareaModule } from 'primeng/inputtextarea';\r\nimport { TableModule } from 'primeng/table';\r\n\r\nimport { AngularCommonSharedModule } from '../../../../shared/angular-common-shared.module';\r\nimport { AngularGenericTemplatesSharedModule } from '../../../../shared/angular-generic-templates-shared-module';\r\nimport { AppCommonSharedModule } from '../../../../shared/app-common-shared.module';\r\nimport { ModalModule } from '../../../../shared/components/modal/modal.module';\r\n\r\nimport { DialogBireDocPugComponent } from './dialog-bire-doc-pug.component';\r\n\r\n/******************************************************************************\r\n * Modules\r\n *************************************************************************** */\r\n\r\nconst EXTERNAL_MODULES = [CalendarModule, InputTextareaModule, TableModule, FileUploadModule];\r\n\r\nconst INTERNAL_MODULES = [ModalModule];\r\n\r\n/******************************************************************************\r\n * Components\r\n *************************************************************************** */\r\n\r\nconst COMPONENTS = [DialogBireDocPugComponent];\r\n\r\n@NgModule({\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n  imports: [\r\n    AngularCommonSharedModule,\r\n    AngularGenericTemplatesSharedModule,\r\n    AppCommonSharedModule,\r\n    ...EXTERNAL_MODULES,\r\n    ...INTERNAL_MODULES\r\n  ]\r\n})\r\nexport class DialogBireDocPugModule {}\r\n"],"sourceRoot":""}