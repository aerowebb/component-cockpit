{"version":3,"sources":["webpack:///./node_modules/file-saver/dist/FileSaver.min.js","webpack:///./src/app/modules/purchase-contract/utils/table-data-source-with-history.ts","webpack:///./src/app/shared/utils/file-utils.ts"],"names":[],"mappings":"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","file":"default~engineering-management-dea-dia-dea-dia-module~engineering-management-engineering-management-~42d801af.js","sourcesContent":["(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(b,c,d){var e=new XMLHttpRequest;e.open(\"GET\",b),e.responseType=\"blob\",e.onload=function(){a(e.response,c,d)},e.onerror=function(){console.error(\"could not download file\")},e.send()}function d(a){var b=new XMLHttpRequest;return b.open(\"HEAD\",a,!1),b.send(),200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(a,b,d,e){if(e=e||open(\"\",\"_blank\"),e&&(e.document.title=e.document.body.innerText=\"downloading...\"),\"string\"==typeof a)return c(a,b,d);var g=\"application/octet-stream\"===a.type,h=/constructor/i.test(f.HTMLElement)||f.safari,i=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((i||g&&h)&&\"object\"==typeof FileReader){var j=new FileReader;j.onloadend=function(){var a=j.result;a=i?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),e?e.location.href=a:location=a,e=null},j.readAsDataURL(a)}else{var k=f.URL||f.webkitURL,l=k.createObjectURL(a);e?e.location=l:location.href=l,e=null,setTimeout(function(){k.revokeObjectURL(l)},4E4)}});f.saveAs=a.saveAs=a,\"undefined\"!=typeof module&&(module.exports=a)});\n\n//# sourceMappingURL=FileSaver.min.js.map","import { Type } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\nimport {\r\n  Column,\r\n  ColumnWithFilter,\r\n  ColumnWithSort,\r\n  DataWithCheck,\r\n  DataWithId,\r\n  TableDataSource\r\n} from '../../../shared/components/table/table-data-source';\r\nimport { ComponentConstants } from '../../../shared/constants/component-constants';\r\nimport { MessageService } from '../../../shared/services/message.service';\r\nimport { ServiceLocator } from '../../../shared/utils/service-locator';\r\nimport { ListModificationsDTO } from '../dtos/list-modifications-dto.interface';\r\n\r\nexport class TableDataSourceWithHistory<T> extends TableDataSource<T> {\r\n  private addedList: (T & DataWithCheck & DataWithId)[];\r\n  private updatedList: (T & DataWithCheck & DataWithId)[];\r\n  private deletedList: (T & DataWithCheck & DataWithId)[];\r\n  private readonly allowUniqueValue: boolean;\r\n  private readonly propertiesWitchIdentifyData: string[];\r\n  private readonly errorOnAddedDuplicateDefaultKey: string =\r\n    'TableDataSourceWithHistoryComponent.errorOnAddedDuplicate';\r\n  private readonly errorOnUpdatedDuplicateDefaultKey: string =\r\n    'TableDataSourceWithHistoryComponent.errorOnUpdatedDuplicate';\r\n  private readonly errorOnAddedDuplicate: string;\r\n  private readonly errorOnUpdatedDuplicate: string;\r\n  private readonly _messageService: MessageService;\r\n  private readonly _translateService: TranslateService;\r\n  public constructor({\r\n    columns,\r\n    allowMultiSelect,\r\n    allowResizableColumns,\r\n    data,\r\n    enablePaginator,\r\n    enableSelection,\r\n    itemsPerPage,\r\n    customGlobalFilter,\r\n    customSort,\r\n    allowUniqueValue,\r\n    propertiesWitchIdentifyData,\r\n    errorOnAddedDuplicate,\r\n    errorOnUpdatedDuplicate\r\n  }: {\r\n    columns: (Column & ColumnWithFilter & ColumnWithSort)[];\r\n    allowMultiSelect?: boolean;\r\n    allowResizableColumns?: boolean;\r\n    data?: T[];\r\n    enablePaginator?: boolean;\r\n    enableSelection?: boolean;\r\n    itemsPerPage?: number;\r\n    customGlobalFilter?: (currentData: T, globalSearchText: string | undefined) => boolean;\r\n    customSort?: (data1: T, data2: T, field: string) => number;\r\n    allowUniqueValue?: boolean;\r\n    propertiesWitchIdentifyData?: string[];\r\n    errorOnAddedDuplicate?: string;\r\n    errorOnUpdatedDuplicate?: string;\r\n  }) {\r\n    super({\r\n      columns,\r\n      allowMultiSelect,\r\n      allowResizableColumns,\r\n      data,\r\n      enablePaginator,\r\n      enableSelection,\r\n      itemsPerPage,\r\n      customGlobalFilter,\r\n      customSort\r\n    });\r\n    this.allowUniqueValue = typeof allowUniqueValue === 'undefined' ? true : allowUniqueValue;\r\n    this.propertiesWitchIdentifyData = !!propertiesWitchIdentifyData ? propertiesWitchIdentifyData : [];\r\n    this.errorOnAddedDuplicate = !!errorOnAddedDuplicate ? errorOnAddedDuplicate : this.errorOnAddedDuplicateDefaultKey;\r\n    this.errorOnUpdatedDuplicate = !!errorOnUpdatedDuplicate\r\n      ? errorOnUpdatedDuplicate\r\n      : this.errorOnUpdatedDuplicateDefaultKey;\r\n    this._messageService = ServiceLocator.injector.get<MessageService>(MessageService as Type<MessageService>);\r\n    this._translateService = ServiceLocator.injector.get<TranslateService>(TranslateService as Type<TranslateService>);\r\n    this.clearHistory();\r\n  }\r\n\r\n  public getComponentName(): string {\r\n    return ComponentConstants.PCT_TABLE_DATA_SOURCE_WITH_HISTORY;\r\n  }\r\n\r\n  public setData(newData: T[]): void {\r\n    super.setData(newData);\r\n    this.clearHistory();\r\n  }\r\n\r\n  // DO NOT USE FOR THE INIT LOAD TABLE, prefer setData() instead or the added, deletedList will be corromped\r\n  public addData(dataToAdd: T[]): (T & DataWithCheck & DataWithId)[] {\r\n    let addedData;\r\n    if (this.allowUniqueValue) {\r\n      dataToAdd.forEach((entity) => {\r\n        if (!this.existEqualsDatas(entity)) {\r\n          addedData = this.addAndReturnData([entity]);\r\n          addedData.forEach((elt) => this.addedList.push(elt));\r\n        } else {\r\n          this._translateService\r\n            .get(this.errorOnAddedDuplicate, { data: entity })\r\n            .subscribe((result) => this._messageService.showErrorMessage(result));\r\n        }\r\n      });\r\n    } else {\r\n      addedData = this.addAndReturnData(dataToAdd);\r\n      addedData.forEach((elt) => this.addedList.push(elt));\r\n    }\r\n\r\n    return addedData;\r\n  }\r\n\r\n  private addAndReturnData(dataToAdd: T[]): (T & DataWithCheck & DataWithId)[] {\r\n    super.addData(dataToAdd);\r\n    const returnedDatas: (T & DataWithCheck & DataWithId)[] = [];\r\n    dataToAdd.forEach((entity) => {\r\n      const data = this.getEqualsDatas(entity);\r\n      if (!!data) {\r\n        returnedDatas.push(data);\r\n      }\r\n    });\r\n\r\n    return returnedDatas;\r\n  }\r\n\r\n  protected getTranslateKey(key: string, componentName?: string): string {\r\n    return `${componentName || this.getComponentName()}.${key}`;\r\n  }\r\n\r\n  public replaceData(dataToRemove: T & DataWithCheck & DataWithId, dataToAdd: T): T & DataWithCheck & DataWithId {\r\n    let updateData;\r\n    if (this.allowUniqueValue) {\r\n      if (!this.existEqualsDatas(dataToAdd, dataToRemove._id)) {\r\n        updateData = this.updateData(dataToRemove, dataToAdd);\r\n      } else {\r\n        this._translateService\r\n          .get(this.errorOnUpdatedDuplicate, { data: dataToAdd })\r\n          .subscribe((result) => this._messageService.showErrorMessage(result));\r\n      }\r\n    } else {\r\n      updateData = this.updateData(dataToRemove, dataToAdd);\r\n    }\r\n\r\n    return updateData;\r\n  }\r\n\r\n  private updateData(dataToRemove: T & DataWithCheck & DataWithId, dataToAdd: T): T & DataWithCheck & DataWithId {\r\n    const replacedData = this.replaceAndReturnData(dataToRemove, dataToAdd);\r\n\r\n    this.markAsReplaced(dataToRemove, replacedData);\r\n    this.dataSelection = [];\r\n\r\n    return replacedData;\r\n  }\r\n\r\n  private markAsReplaced(\r\n    dataToRemove: T & DataWithCheck & DataWithId,\r\n    replacedData: T & DataWithCheck & DataWithId\r\n  ): void {\r\n    const indexOfAddedElt = this.indexOf(this.addedList, dataToRemove);\r\n    if (indexOfAddedElt !== -1) {\r\n      this.addedList.splice(indexOfAddedElt, 1, replacedData);\r\n    } else {\r\n      const indexOfUpdatedElt = this.indexOf(this.updatedList, dataToRemove);\r\n      if (indexOfUpdatedElt !== -1) {\r\n        this.updatedList.splice(indexOfUpdatedElt, 1, replacedData);\r\n      } else {\r\n        this.updatedList.push(replacedData);\r\n      }\r\n    }\r\n  }\r\n\r\n  public markAsUpdated(data: T & DataWithCheck & DataWithId): void {\r\n    this.markAsReplaced(data, data);\r\n  }\r\n\r\n  private replaceAndReturnData(\r\n    dataToRemove: T & DataWithCheck & DataWithId,\r\n    dataToAdd: T\r\n  ): T & DataWithCheck & DataWithId {\r\n    super.replaceData(dataToRemove, dataToAdd);\r\n\r\n    return this.getEqualsDatas(dataToAdd);\r\n  }\r\n\r\n  public deleteData(dataToDelete: (T & DataWithCheck & DataWithId)[]): void {\r\n    dataToDelete.forEach((entity) => {\r\n      const indexOfAddedElt = this.indexOf(this.addedList, entity);\r\n      const indexOfUpdatedElt = this.indexOf(this.updatedList, entity);\r\n      if (indexOfAddedElt !== -1) {\r\n        this.addedList.splice(indexOfAddedElt, 1);\r\n      } else if (indexOfUpdatedElt !== -1) {\r\n        this.updatedList.splice(indexOfUpdatedElt, 1);\r\n        this.deletedList.push(entity);\r\n      } else {\r\n        this.deletedList.push(entity);\r\n      }\r\n    });\r\n    super.deleteData(dataToDelete);\r\n  }\r\n\r\n  public deleteDataSelection(): void {\r\n    this.dataSelection.forEach((elt) => this.deleteData([elt]));\r\n    this.dataSelection = [];\r\n  }\r\n\r\n  public indexOf(list: (T & DataWithCheck & DataWithId)[], entity: T): number {\r\n    if (!!list && list.length > 0) {\r\n      return list.findIndex((elt) => this.equals(entity, elt));\r\n    } else {\r\n      return -1;\r\n    }\r\n  }\r\n\r\n  public getEqualsDatas(toFind: T, idToIgnore?: string): T & DataWithCheck & DataWithId {\r\n    let returnedData;\r\n    const equalsData = this.dataSrc.filter((elt) => elt._id !== idToIgnore && this.equals(toFind, elt));\r\n    if (!!equalsData && equalsData.length > 0) {\r\n      returnedData = equalsData[0];\r\n    }\r\n\r\n    return returnedData;\r\n  }\r\n\r\n  public existEqualsDatas(toFind: T, idToIgnore?: string): boolean {\r\n    return !!this.getEqualsDatas(toFind, idToIgnore);\r\n  }\r\n\r\n  public equals(toFind: T, entity: T & DataWithCheck & DataWithId): boolean {\r\n    if (!entity || !toFind) {\r\n      return false;\r\n    }\r\n    let propertiesWitchIdentifyData: string[];\r\n    if (!!this.propertiesWitchIdentifyData && this.propertiesWitchIdentifyData.length > 0) {\r\n      propertiesWitchIdentifyData = this.propertiesWitchIdentifyData;\r\n    } else {\r\n      propertiesWitchIdentifyData = Object.keys(toFind).filter((keyOfT) => Object.keys(entity).includes(keyOfT));\r\n    }\r\n    for (let i = 0; i < propertiesWitchIdentifyData.length; i++) {\r\n      const property = propertiesWitchIdentifyData[i];\r\n      if (toFind[property] !== entity[property]) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  private dataSanizer(data: T & DataWithId & DataWithCheck): T {\r\n    const sanitizedData = { ...data };\r\n    delete sanitizedData._checked;\r\n    delete sanitizedData._id;\r\n\r\n    return sanitizedData;\r\n  }\r\n\r\n  public clearHistory() {\r\n    this.addedList = [];\r\n    this.updatedList = [];\r\n    this.deletedList = [];\r\n  }\r\n\r\n  public getDeletedList(): T[] {\r\n    return this.deletedList.map(this.dataSanizer);\r\n  }\r\n\r\n  public getUpdatedList(): T[] {\r\n    return this.updatedList.map(this.dataSanizer);\r\n  }\r\n\r\n  public getAddedList(): T[] {\r\n    return this.addedList.map(this.dataSanizer);\r\n  }\r\n\r\n  public toListModifications(): ListModificationsDTO<T> {\r\n    return {\r\n      addedList: this.getAddedList(),\r\n      updatedList: this.getUpdatedList(),\r\n      deletedList: this.getDeletedList()\r\n    };\r\n  }\r\n\r\n  public mapListModifications<R>(rowTransformer: (row: T) => R): ListModificationsDTO<R> {\r\n    return {\r\n      addedList: this.getAddedList().map(rowTransformer),\r\n      updatedList: this.getUpdatedList().map(rowTransformer),\r\n      deletedList: this.getDeletedList().map(rowTransformer)\r\n    };\r\n  }\r\n\r\n  public tableDataSourceHasBeenModified(): boolean {\r\n    return !(\r\n      (!this.addedList || (!!this.addedList && this.addedList.length === 0)) &&\r\n      (!this.updatedList || (!!this.updatedList && this.updatedList.length === 0)) &&\r\n      (!this.deletedList || (!!this.deletedList && this.deletedList.length === 0))\r\n    );\r\n  }\r\n}\r\n","import * as FileSaver from 'file-saver';\r\n\r\nimport { NumberUtils } from './number-utils';\r\n\r\nexport class FileUtils {\r\n  public static readonly KIBIOCTET: number = 1024;\r\n  public static readonly KILOOCTET: number = 1000;\r\n\r\n  public static downloadFile(file: Uint8Array | undefined, fileName: string | undefined): void {\r\n    if (!!file && !!fileName) {\r\n      const byteCharacters = atob(file.toString());\r\n      const byteNumbers = new Array(byteCharacters.length);\r\n      for (let i = 0; i < byteCharacters.length; i++) {\r\n        byteNumbers[i] = byteCharacters.charCodeAt(i);\r\n      }\r\n\r\n      FileSaver.saveAs(new Blob([new Uint8Array(byteNumbers)]), fileName);\r\n    }\r\n  }\r\n\r\n  public static getExtension(fileName: string | undefined): string {\r\n    return !!fileName && fileName.includes('.') ? fileName.substring(fileName.lastIndexOf('.') + 1) : '';\r\n  }\r\n\r\n  public static getFileContentAsBase64(file: File | undefined, callback: (fileContent: Uint8Array) => void): void {\r\n    if (!!file) {\r\n      const reader: FileReader = new FileReader();\r\n      reader.onloadend = () => {\r\n        let fileContent: any = reader.result; // tslint:disable-line:no-any\r\n        fileContent = fileContent.substring((fileContent.indexOf(',') as number) + 1); // Remove data:*/*;base64,\r\n        callback(fileContent);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  }\r\n\r\n  public static getFormattedSize(size: number | undefined): string {\r\n    if (!!size) {\r\n      return size / FileUtils.KILOOCTET < FileUtils.KILOOCTET\r\n        ? `${NumberUtils.roundNumber(size / FileUtils.KILOOCTET)} Ko`\r\n        : `${NumberUtils.roundNumber(size / FileUtils.KILOOCTET / FileUtils.KILOOCTET)} Mo`;\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}