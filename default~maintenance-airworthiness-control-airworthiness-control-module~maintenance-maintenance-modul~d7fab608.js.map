{"version":3,"sources":["webpack:///./src/app/main/maintenance/work-package/form/popups/dialog-work-order-edition/dialog-work-order-edition.component.html","webpack:///./src/app/main/maintenance/work-package/form/popups/dialog-work-order-edition/dialog-work-order-edition.component.scss","webpack:///./src/app/main/maintenance/work-package/form/popups/dialog-work-order-edition/dialog-work-order-edition.component.ts","webpack:///./src/app/main/maintenance/work-package/form/popups/dialog-work-order-edition/dialog-work-order-edition.module.ts","webpack:///./src/app/shared/components/dialog-search-defect-events/dialog-search-defect-events.component.html","webpack:///./src/app/shared/components/dialog-search-defect-events/dialog-search-defect-events.component.ts","webpack:///./src/app/shared/components/dialog-search-defect-events/dialog-search-defect-events.module.ts","webpack:///./src/app/shared/components/dialog-search-defect-events/dialog-search-defect-events.service.ts","webpack:///./src/app/shared/utils/image-utils.ts"],"names":[],"mappings":"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","file":"default~maintenance-airworthiness-control-airworthiness-control-module~maintenance-maintenance-modul~d7fab608.js","sourcesContent":["module.exports = \"<a-modal class=\\\"aw-modal\\\" [(visible)]=\\\"display\\\" width=\\\"70\\\">\\r\\n  <a-header>\\r\\n    <div class=\\\"modal-title\\\">{{ getComponentName() + \\\".title\\\" | translate }} {{ titleModeEdition | translate }}</div>\\r\\n  </a-header>\\r\\n\\r\\n  <a-content>\\r\\n    <div class=\\\"search-dialog-container\\\">\\r\\n      <div class=\\\"section search-criteria-section\\\">\\r\\n        <div class=\\\"section-content\\\">\\r\\n          <div class=\\\"column\\\">\\r\\n            <div class=\\\"row\\\">\\r\\n              <div class=\\\"form-group\\\" [ngClass]=\\\"{ required: true }\\\">\\r\\n                <label class=\\\"form-label\\\">\\r\\n                  {{ getComponentName() + \\\".type\\\" | translate }}\\r\\n                </label>\\r\\n\\r\\n                <div class=\\\"form-control\\\">\\r\\n                  <p-dropdown\\r\\n                    class=\\\"aw-dropdown fixed-width\\\"\\r\\n                    [options]=\\\"typeList\\\"\\r\\n                    [(ngModel)]=\\\"workOrder.woType\\\"\\r\\n                    placeholder=\\\"&nbsp;\\\"\\r\\n                    [disabled]=\\\"isUpdateMode && !isFromMaintenancePlanning\\\"\\r\\n                    (onChange)=\\\"updateType(false)\\\"\\r\\n                    appendTo=\\\"body\\\"\\r\\n                  ></p-dropdown>\\r\\n                </div>\\r\\n              </div>\\r\\n              <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"form-label\\\">\\r\\n                  {{ getComponentName() + \\\".scheduledStartDate\\\" | translate }}\\r\\n                </label>\\r\\n\\r\\n                <div class=\\\"form-control\\\">\\r\\n                  <p-calendar\\r\\n                    showButtonBar=\\\"true\\\"\\r\\n                    [monthNavigator]=\\\"true\\\"\\r\\n                    [yearNavigator]=\\\"true\\\"\\r\\n                    [yearRange]=\\\"sessionService.calendarYearRange\\\"\\r\\n                    class=\\\"aw-calendar\\\"\\r\\n                    [dateFormat]=\\\"sessionService.dateFormatPrimeNG\\\"\\r\\n                    [locale]=\\\"sessionService.calendarFormat\\\"\\r\\n                    [(ngModel)]=\\\"workOrder.woScheduledStartDate\\\"\\r\\n                    [disabled]=\\\"isReadOpenMode\\\"\\r\\n                    appendTo=\\\"body\\\"\\r\\n                    showTime=\\\"true\\\"\\r\\n                  ></p-calendar>\\r\\n                </div>\\r\\n              </div>\\r\\n\\r\\n              <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"form-label\\\">\\r\\n                  {{ getComponentName() + \\\".scheduledEndDate\\\" | translate }}\\r\\n                </label>\\r\\n\\r\\n                <div class=\\\"form-control\\\">\\r\\n                  <p-calendar\\r\\n                    showButtonBar=\\\"true\\\"\\r\\n                    [monthNavigator]=\\\"true\\\"\\r\\n                    [yearNavigator]=\\\"true\\\"\\r\\n                    [yearRange]=\\\"sessionService.calendarYearRange\\\"\\r\\n                    class=\\\"aw-calendar\\\"\\r\\n                    [dateFormat]=\\\"sessionService.dateFormatPrimeNG\\\"\\r\\n                    [locale]=\\\"sessionService.calendarFormat\\\"\\r\\n                    [(ngModel)]=\\\"workOrder.woScheduledEndDate\\\"\\r\\n                    [disabled]=\\\"isReadOpenMode\\\"\\r\\n                    appendTo=\\\"body\\\"\\r\\n                    showTime=\\\"true\\\"\\r\\n                  ></p-calendar>\\r\\n                </div>\\r\\n              </div>\\r\\n\\r\\n              <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"form-label\\\">\\r\\n                  {{ getComponentName() + \\\".topWo\\\" | translate }}\\r\\n                </label>\\r\\n\\r\\n                <div class=\\\"form-control\\\">\\r\\n                  <p-dropdown\\r\\n                    class=\\\"aw-dropdown fixed-width\\\"\\r\\n                    [options]=\\\"topWoList\\\"\\r\\n                    [(ngModel)]=\\\"topWo\\\"\\r\\n                    [showClear]=\\\"true\\\"\\r\\n                    placeholder=\\\"&nbsp;\\\"\\r\\n                    [disabled]=\\\"isReadOpenMode\\\"\\r\\n                    appendTo=\\\"body\\\"\\r\\n                  ></p-dropdown>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"row\\\">\\r\\n              <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"form-label\\\">{{ \\\"global.code\\\" | translate }}</label>\\r\\n\\r\\n                <div class=\\\"form-control\\\">\\r\\n                  <input\\r\\n                    *ngIf=\\\"isUpdateMode\\\"\\r\\n                    name=\\\"code\\\"\\r\\n                    type=\\\"text\\\"\\r\\n                    class=\\\"aw-input\\\"\\r\\n                    [(ngModel)]=\\\"workOrder.woCode\\\"\\r\\n                    [disabled]=\\\"true\\\"\\r\\n                  />\\r\\n                  <input\\r\\n                    *ngIf=\\\"!isUpdateMode\\\"\\r\\n                    name=\\\"code\\\"\\r\\n                    type=\\\"text\\\"\\r\\n                    class=\\\"aw-input\\\"\\r\\n                    [disabled]=\\\"true\\\"\\r\\n                    [value]=\\\"'global.n_a' | translate\\\"\\r\\n                  />\\r\\n                </div>\\r\\n              </div>\\r\\n              <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"form-label\\\">\\r\\n                  {{ getComponentName() + \\\".workCenter\\\" | translate }}\\r\\n                </label>\\r\\n\\r\\n                <div class=\\\"form-control\\\" *ngIf=\\\"warehouseList.length > 0\\\">\\r\\n                  <p-dropdown\\r\\n                    class=\\\"aw-dropdown fixed-width\\\"\\r\\n                    [options]=\\\"warehouseList\\\"\\r\\n                    [(ngModel)]=\\\"workOrder.bidtWarehouseId\\\"\\r\\n                    [showClear]=\\\"true\\\"\\r\\n                    placeholder=\\\"&nbsp;\\\"\\r\\n                    [disabled]=\\\"isReadOpenMode\\\"\\r\\n                    appendTo=\\\"body\\\"\\r\\n                  ></p-dropdown>\\r\\n                </div>\\r\\n\\r\\n                <div class=\\\"form-control\\\" *ngIf=\\\"warehouseList.length === 0\\\">\\r\\n                  <p-dropdown\\r\\n                    class=\\\"aw-dropdown fixed-width\\\"\\r\\n                    [options]=\\\"warehouseList\\\"\\r\\n                    [(ngModel)]=\\\"workOrder.bidtWarehouseId\\\"\\r\\n                    [showClear]=\\\"true\\\"\\r\\n                    placeholder=\\\"&nbsp;\\\"\\r\\n                    [disabled]=\\\"true\\\"\\r\\n                    appendTo=\\\"body\\\"\\r\\n                  ></p-dropdown>\\r\\n                </div>\\r\\n              </div>\\r\\n\\r\\n              <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"form-label\\\">\\r\\n                  {{ getComponentName() + \\\".assignedTo\\\" | translate }}\\r\\n                </label>\\r\\n\\r\\n                <div class=\\\"form-control\\\">\\r\\n                  <p-dropdown\\r\\n                    class=\\\"aw-dropdown fixed-width\\\"\\r\\n                    [options]=\\\"userList\\\"\\r\\n                    [(ngModel)]=\\\"workOrder.woAssignedTo\\\"\\r\\n                    [showClear]=\\\"true\\\"\\r\\n                    placeholder=\\\"&nbsp;\\\"\\r\\n                    [disabled]=\\\"isReadOpenMode\\\"\\r\\n                    (onChange)=\\\"onAssignedUserChange()\\\"\\r\\n                    appendTo=\\\"body\\\"\\r\\n                  ></p-dropdown>\\r\\n                </div>\\r\\n              </div>\\r\\n\\r\\n              <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"form-label\\\">\\r\\n                  {{ getComponentName() + \\\".qualification\\\" | translate }}\\r\\n                </label>\\r\\n\\r\\n                <div class=\\\"form-control\\\">\\r\\n                  <input\\r\\n                    name=\\\"employeeQualification\\\"\\r\\n                    type=\\\"text\\\"\\r\\n                    class=\\\"aw-input\\\"\\r\\n                    [ngModel]=\\\"employeeQualification\\\"\\r\\n                    [disabled]=\\\"true\\\"\\r\\n                    [title]=\\\"employeeQualification\\\"\\r\\n                  />\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"row\\\">\\r\\n              <div class=\\\"form-group flex--4\\\">\\r\\n                <label class=\\\"form-label\\\">\\r\\n                  {{ getComponentName() + \\\".description\\\" | translate }}\\r\\n                </label>\\r\\n\\r\\n                <div class=\\\"form-control\\\">\\r\\n                  <textarea\\r\\n                    class=\\\"aw-textarea\\\"\\r\\n                    pInputTextarea\\r\\n                    [rows]=\\\"3\\\"\\r\\n                    [(ngModel)]=\\\"workOrder.woDescription\\\"\\r\\n                    maxlength=\\\"1000\\\"\\r\\n                  ></textarea>\\r\\n                </div>\\r\\n              </div>\\r\\n              <div class=\\\"form-group\\\">\\r\\n                <label class=\\\"form-label\\\">\\r\\n                  {{ getComponentName() + \\\".warranty\\\" | translate }}\\r\\n                </label>\\r\\n\\r\\n                <div class=\\\"form-control\\\">\\r\\n                  <p-checkbox\\r\\n                    p-checkbox\\r\\n                    class=\\\"aw-checkbox\\\"\\r\\n                    binary=\\\"true\\\"\\r\\n                    [(ngModel)]=\\\"workOrder.underWarranty\\\"\\r\\n                    (onChange)=\\\"onWarrantyChange()\\\"\\r\\n                  ></p-checkbox>\\r\\n                </div>\\r\\n              </div>\\r\\n              <div class=\\\"form-group flex--3\\\">\\r\\n                <label class=\\\"form-label\\\">{{ getComponentName() + \\\".warrantyProvider\\\" | translate }} </label>\\r\\n                <div class=\\\"form-control form-control-with-modal\\\" [ngClass]=\\\"{ disabled: isReadOpenMode }\\\">\\r\\n                  <div class=\\\"form-control-data\\\" *ngIf=\\\"workOrder.underWarranty\\\" (click)=\\\"quickSearchBusinessPartner()\\\">\\r\\n                    {{ workOrder.warrantyProvider }}\\r\\n                    <span *ngIf=\\\"warrantyProviderName\\\">- {{ warrantyProviderName }}</span>\\r\\n                  </div>\\r\\n                  <div class=\\\"form-control-data\\\" *ngIf=\\\"!workOrder.underWarranty\\\">\\r\\n                    {{ workOrder.warrantyProvider }}\\r\\n                    <span *ngIf=\\\"warrantyProviderName\\\">- {{ warrantyProviderName }}</span>\\r\\n                  </div>\\r\\n\\r\\n                  <div *ngIf=\\\"workOrder.warrantyProvider\\\" class=\\\"btn-clear-wrapper\\\">\\r\\n                    <i\\r\\n                      class=\\\"ui-dropdown-clear-icon pi pi-times aw-icon btn-clear\\\"\\r\\n                      aria-hidden=\\\"true\\\"\\r\\n                      (click)=\\\"workOrder.warrantyProvider = undefined; warrantyProviderName = undefined\\\"\\r\\n                    ></i>\\r\\n                  </div>\\r\\n                  <div class=\\\"btn-search-wrapper\\\" *ngIf=\\\"workOrder.underWarranty\\\">\\r\\n                    <i\\r\\n                      class=\\\"fa fa-fw fa-search aw-icon btn-search\\\"\\r\\n                      aria-hidden=\\\"true\\\"\\r\\n                      (click)=\\\"quickSearchBusinessPartner()\\\"\\r\\n                    ></i>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"section\\\" *ngIf=\\\"showTaskSection\\\">\\r\\n        <h4 class=\\\"section-title\\\">\\r\\n          {{ getComponentName() + \\\".task\\\" | translate }}\\r\\n        </h4>\\r\\n        <div class=\\\"section-content\\\">\\r\\n          <div class=\\\"row\\\">\\r\\n            <div class=\\\"form-group\\\" [ngClass]=\\\"{ required: true }\\\">\\r\\n              <label class=\\\"form-label\\\">\\r\\n                {{ getComponentName() + \\\".taskCode\\\" | translate }}\\r\\n              </label>\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <input *ngIf=\\\"isUpdateMode\\\" type=\\\"text\\\" class=\\\"aw-input\\\" [value]=\\\"task.taskCode\\\" [disabled]=\\\"true\\\" />\\r\\n              </div>\\r\\n              <div *ngIf=\\\"!isUpdateMode\\\" class=\\\"form-control form-control-with-modal\\\">\\r\\n                <div class=\\\"form-control-data\\\" (click)=\\\"openTaskDialog()\\\">\\r\\n                  {{ task.taskCode }}\\r\\n                </div>\\r\\n                <div class=\\\"btn-search-wrapper\\\">\\r\\n                  <i class=\\\"fa fa-fw fa-search aw-icon btn-search\\\" aria-hidden=\\\"true\\\" (click)=\\\"openTaskDialog()\\\"></i>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"form-label\\\">{{ getComponentName() + \\\".taskVersion\\\" | translate }}</label>\\r\\n\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <input\\r\\n                  name=\\\"taskVersion\\\"\\r\\n                  type=\\\"text\\\"\\r\\n                  class=\\\"aw-input\\\"\\r\\n                  [(ngModel)]=\\\"task.taskVersion\\\"\\r\\n                  [disabled]=\\\"true\\\"\\r\\n                />\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group flex--2\\\">\\r\\n              <label class=\\\"form-label\\\">{{ getComponentName() + \\\".taskDesignation\\\" | translate }}</label>\\r\\n\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <input\\r\\n                  name=\\\"taskDesignation\\\"\\r\\n                  type=\\\"text\\\"\\r\\n                  class=\\\"aw-input\\\"\\r\\n                  [title]=\\\"task.taskDesignation\\\"\\r\\n                  [(ngModel)]=\\\"task.taskDesignation\\\"\\r\\n                  [disabled]=\\\"true\\\"\\r\\n                />\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"row\\\" *ngIf=\\\"showRelatedFields\\\">\\r\\n        <div class=\\\"form-group flex--2\\\">\\r\\n          <label class=\\\"form-label\\\">\\r\\n            {{ getComponentName() + \\\".relatedItem\\\" | translate }}\\r\\n          </label>\\r\\n\\r\\n          <div class=\\\"form-control\\\">\\r\\n            <p-dropdown\\r\\n              class=\\\"aw-dropdown fixed-width\\\"\\r\\n              [options]=\\\"relatedItemList\\\"\\r\\n              [(ngModel)]=\\\"relatedItem\\\"\\r\\n              [showClear]=\\\"!isUpdateMode\\\"\\r\\n              placeholder=\\\"&nbsp;\\\"\\r\\n              [disabled]=\\\"isUpdateMode && workOrder.woType === awPropertiesConstants.AIRM_WORK_ORDER_TYPE_EVOLUTION\\\"\\r\\n              (onChange)=\\\"onRelatedItemChange()\\\"\\r\\n            ></p-dropdown>\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"form-group flex--2\\\">\\r\\n          <label class=\\\"form-label\\\">\\r\\n            {{ getComponentName() + \\\".relatedAsset\\\" | translate }}\\r\\n          </label>\\r\\n\\r\\n          <div class=\\\"form-control\\\">\\r\\n            <p-dropdown\\r\\n              class=\\\"aw-dropdown fixed-width\\\"\\r\\n              [options]=\\\"relatedAssetList\\\"\\r\\n              [(ngModel)]=\\\"relatedAsset\\\"\\r\\n              [showClear]=\\\"true\\\"\\r\\n              placeholder=\\\"&nbsp;\\\"\\r\\n              [disabled]=\\\"isReadOpenMode\\\"\\r\\n            ></p-dropdown>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"section\\\" *ngIf=\\\"showDefectSection\\\">\\r\\n        <h4 class=\\\"section-title\\\">\\r\\n          {{ getComponentName() + \\\".defect\\\" | translate }}\\r\\n        </h4>\\r\\n        <div class=\\\"section-content\\\">\\r\\n          <div class=\\\"row\\\">\\r\\n            <div class=\\\"form-group  flex--2\\\" [ngClass]=\\\"{ required: true }\\\">\\r\\n              <label class=\\\"form-label\\\">{{ getComponentName() + \\\".eventCode\\\" | translate }}</label>\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <input *ngIf=\\\"isUpdateMode\\\" type=\\\"text\\\" class=\\\"aw-input\\\" [value]=\\\"eventCode\\\" [disabled]=\\\"true\\\" />\\r\\n              </div>\\r\\n              <div *ngIf=\\\"!isUpdateMode\\\" class=\\\"form-control form-control-with-modal\\\">\\r\\n                <div class=\\\"form-control-data\\\" (click)=\\\"openDefectDialog()\\\">\\r\\n                  {{ eventCode }}\\r\\n                </div>\\r\\n                <div (click)=\\\"openDefectDialog()\\\">\\r\\n                  <div class=\\\"btn-search-wrapper\\\">\\r\\n                    <i\\r\\n                      class=\\\"fa fa-fw fa-search aw-icon btn-search\\\"\\r\\n                      aria-hidden=\\\"true\\\"\\r\\n                      (click)=\\\"openDefectDialog()\\\"\\r\\n                    ></i>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"flex--2\\\"></div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"section\\\" *ngIf=\\\"showEvolutionSection\\\">\\r\\n        <h4 class=\\\"section-title\\\">\\r\\n          {{ getComponentName() + \\\".evolution\\\" | translate }}\\r\\n        </h4>\\r\\n        <div class=\\\"section-content\\\">\\r\\n          <div class=\\\"row\\\">\\r\\n            <div class=\\\"form-group\\\" [ngClass]=\\\"{ required: true }\\\">\\r\\n              <label class=\\\"form-label\\\">{{ getComponentName() + \\\".evolutionNumber\\\" | translate }}</label>\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <input\\r\\n                  *ngIf=\\\"isUpdateMode\\\"\\r\\n                  type=\\\"text\\\"\\r\\n                  class=\\\"aw-input\\\"\\r\\n                  [value]=\\\"evolution.evolutionNumber\\\"\\r\\n                  [disabled]=\\\"true\\\"\\r\\n                />\\r\\n              </div>\\r\\n              <div *ngIf=\\\"!isUpdateMode\\\" class=\\\"form-control form-control-with-modal\\\">\\r\\n                <div class=\\\"form-control-data\\\" (click)=\\\"openEvolDialog()\\\">\\r\\n                  {{ evolution.evolutionNumber }}\\r\\n                </div>\\r\\n                <div class=\\\"btn-search-wrapper\\\">\\r\\n                  <i class=\\\"fa fa-fw fa-search aw-icon btn-search\\\" aria-hidden=\\\"true\\\" (click)=\\\"openEvolDialog()\\\"></i>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"form-label\\\">{{ getComponentName() + \\\".evolutionRevisionNumber\\\" | translate }}</label>\\r\\n\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <input\\r\\n                  name=\\\"evolutionRevisionNumber\\\"\\r\\n                  type=\\\"text\\\"\\r\\n                  class=\\\"aw-input\\\"\\r\\n                  [(ngModel)]=\\\"evolution.evolutionRevisionNumber\\\"\\r\\n                  [disabled]=\\\"true\\\"\\r\\n                />\\r\\n              </div>\\r\\n            </div>\\r\\n            <div class=\\\"form-group\\\">\\r\\n              <label class=\\\"form-label\\\">{{ getComponentName() + \\\".evolutionType\\\" | translate }}</label>\\r\\n\\r\\n              <div class=\\\"form-control\\\">\\r\\n                <input\\r\\n                  name=\\\"evolutionType\\\"\\r\\n                  type=\\\"text\\\"\\r\\n                  class=\\\"aw-input\\\"\\r\\n                  [(ngModel)]=\\\"evolution.evolutionType\\\"\\r\\n                  [disabled]=\\\"true\\\"\\r\\n                />\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"section\\\" *ngIf=\\\"showOperationSection\\\">\\r\\n        <h4 class=\\\"section-title\\\">\\r\\n          {{ getComponentName() + \\\".operations\\\" | translate }}\\r\\n        </h4>\\r\\n        <div class=\\\"section-content\\\">\\r\\n          <p-table\\r\\n            [resizableColumns]=\\\"true\\\"\\r\\n            class=\\\"aw-table2\\\"\\r\\n            [columns]=\\\"opTableCols\\\"\\r\\n            [value]=\\\"opTable\\\"\\r\\n            [(selection)]=\\\"selectedOperations\\\"\\r\\n            dataKey=\\\"code\\\"\\r\\n            [scrollable]=\\\"true\\\"\\r\\n          >\\r\\n            <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n              <span *ngIf=\\\"!isTableLoading\\\"> &nbsp;</span>\\r\\n\\r\\n              <div *ngIf=\\\"isTableLoading\\\" class=\\\"aw-table-loading-indicator\\\">\\r\\n                <div class=\\\"loading-message\\\">{{ \\\"table.loadingData\\\" | translate }}</div>\\r\\n                <div class=\\\"lds-hourglass\\\"></div>\\r\\n              </div>\\r\\n            </ng-template>\\r\\n\\r\\n            <ng-template pTemplate=\\\"caption\\\">\\r\\n              <div class=\\\"aw-table-header\\\" [ngClass]=\\\"{ 'rows-selected': selectedOperations.length > 0 }\\\">\\r\\n                <div class=\\\"aw-table-actions\\\">\\r\\n                  <button\\r\\n                    *ngIf=\\\"selectedOperations.length === 0\\\"\\r\\n                    type=\\\"button\\\"\\r\\n                    mat-raised-button\\r\\n                    (click)=\\\"openOperationDialog()\\\"\\r\\n                  >\\r\\n                    {{ \\\"global.add\\\" | translate }}\\r\\n                  </button>\\r\\n                  <button\\r\\n                    *ngIf=\\\"selectedOperations && selectedOperations.length > 0\\\"\\r\\n                    type=\\\"button\\\"\\r\\n                    mat-raised-button\\r\\n                    color=\\\"warn\\\"\\r\\n                    (click)=\\\"deleteOperation()\\\"\\r\\n                  >\\r\\n                    {{ \\\"global.delete\\\" | translate }}\\r\\n                  </button>\\r\\n                </div>\\r\\n              </div>\\r\\n            </ng-template>\\r\\n\\r\\n            <ng-template pTemplate=\\\"colgroup\\\" let-columns>\\r\\n              <colgroup>\\r\\n                <col class=\\\"aw-table-checkbox-wrapper\\\" />\\r\\n                <col *ngFor=\\\"let col of columns\\\" [ngStyle]=\\\"{ width: col.width }\\\" />\\r\\n              </colgroup>\\r\\n            </ng-template>\\r\\n\\r\\n            <ng-template pTemplate=\\\"header\\\" let-columns>\\r\\n              <tr>\\r\\n                <th class=\\\"aw-table-checkbox-wrapper\\\">\\r\\n                  <p-tableHeaderCheckbox class=\\\"aw-table-checkbox\\\"></p-tableHeaderCheckbox>\\r\\n                </th>\\r\\n\\r\\n                <th pResizableColumn *ngFor=\\\"let col of columns\\\" [ngStyle]=\\\"{ 'text-align': col.alignment }\\\">\\r\\n                  {{ getComponentName() + \\\".\\\" + col.field | translate }}\\r\\n                </th>\\r\\n              </tr>\\r\\n            </ng-template>\\r\\n\\r\\n            <ng-template pTemplate=\\\"body\\\" let-rowData let-columns=\\\"columns\\\" let-rowIndex=\\\"rowIndex\\\">\\r\\n              <tr [pSelectableRow]=\\\"rowData\\\" [pSelectableRowIndex]=\\\"rowIndex\\\">\\r\\n                <td class=\\\"aw-table-checkbox-wrapper\\\">\\r\\n                  <p-tableCheckbox class=\\\"aw-table-checkbox\\\" [value]=\\\"rowData\\\"></p-tableCheckbox>\\r\\n                </td>\\r\\n                <td *ngFor=\\\"let col of columns\\\" [ngStyle]=\\\"{ 'text-align': col.alignment }\\\">\\r\\n                  <span [title]=\\\"rowData[col.field]\\\">{{ rowData[col.field] }}</span>\\r\\n                </td>\\r\\n              </tr>\\r\\n            </ng-template>\\r\\n          </p-table>\\r\\n        </div>\\r\\n      </div>\\r\\n\\r\\n      <div class=\\\"section\\\" *ngIf=\\\"showOperationSection\\\">\\r\\n        <h4 class=\\\"section-title\\\">\\r\\n          {{ getComponentName() + \\\".procurementRequests\\\" | translate }}\\r\\n        </h4>\\r\\n        <div class=\\\"section-content\\\">\\r\\n          <p-table\\r\\n            [resizableColumns]=\\\"true\\\"\\r\\n            class=\\\"aw-table2\\\"\\r\\n            [columns]=\\\"procurementRequestTableCols\\\"\\r\\n            [value]=\\\"procurementRequestRows\\\"\\r\\n            [scrollable]=\\\"true\\\"\\r\\n          >\\r\\n            <ng-template pTemplate=\\\"caption\\\">\\r\\n              <div class=\\\"aw-table-header\\\">\\r\\n                <div class=\\\"aw-table-actions\\\">\\r\\n                  <button mat-raised-button type=\\\"button\\\" [disabled]=\\\"isReadOpenMode\\\" (click)=\\\"addProcurementRequest()\\\">\\r\\n                    {{ \\\"global.add\\\" | translate }}\\r\\n                  </button>\\r\\n                </div>\\r\\n              </div>\\r\\n            </ng-template>\\r\\n\\r\\n            <ng-template pTemplate=\\\"colgroup\\\" let-columns>\\r\\n              <colgroup>\\r\\n                <col *ngFor=\\\"let col of columns\\\" [ngStyle]=\\\"{ width: col.width }\\\" />\\r\\n              </colgroup>\\r\\n            </ng-template>\\r\\n\\r\\n            <ng-template pTemplate=\\\"header\\\" let-columns>\\r\\n              <tr>\\r\\n                <th\\r\\n                  pResizableColumn\\r\\n                  *ngFor=\\\"let col of columns\\\"\\r\\n                  [ngStyle]=\\\"{ 'text-align': col.alignment }\\\"\\r\\n                  [ngSwitch]=\\\"col.field\\\"\\r\\n                >\\r\\n                  <span *ngSwitchCase=\\\"'action'\\\">&nbsp;</span>\\r\\n                  <span *ngSwitchDefault>{{ getComponentName() + \\\".\\\" + col.field | translate }}</span>\\r\\n                </th>\\r\\n              </tr>\\r\\n            </ng-template>\\r\\n\\r\\n            <ng-template pTemplate=\\\"body\\\" let-rowData let-columns=\\\"columns\\\" let-rowIndex=\\\"rowIndex\\\">\\r\\n              <tr [pSelectableRow]=\\\"rowData\\\" [pSelectableRowIndex]=\\\"rowIndex\\\">\\r\\n                <td *ngFor=\\\"let col of columns\\\" [ngStyle]=\\\"{ 'text-align': col.alignment }\\\" [ngSwitch]=\\\"col.field\\\">\\r\\n                  <span *ngSwitchCase=\\\"'materials'\\\">\\r\\n                    <div>\\r\\n                      <div class=\\\"form-control\\\">\\r\\n                        <input\\r\\n                          *ngIf=\\\"rowData.procurementRequestId\\\"\\r\\n                          type=\\\"text\\\"\\r\\n                          class=\\\"aw-input\\\"\\r\\n                          [value]=\\\"rowData.materials\\\"\\r\\n                          [disabled]=\\\"true\\\"\\r\\n                        />\\r\\n                      </div>\\r\\n                      <div *ngIf=\\\"!rowData.procurementRequestId\\\" class=\\\"form-control form-control-with-modal\\\">\\r\\n                        <div class=\\\"form-control-data\\\" (click)=\\\"openPnSearchDialog(rowData)\\\">\\r\\n                          <span *ngIf=\\\"rowData.materials\\\">\\r\\n                            {{ rowData.materials }}\\r\\n                          </span>\\r\\n                          <span *ngIf=\\\"!rowData.materials\\\">\\r\\n                            {{ \\\"global.search\\\" | translate }}\\r\\n                          </span>\\r\\n                          <div class=\\\"btn-search-wrapper\\\">\\r\\n                            <i\\r\\n                              class=\\\"fa fa-fw fa-search aw-icon btn-search\\\"\\r\\n                              aria-hidden=\\\"true\\\"\\r\\n                              (click)=\\\"openPnSearchDialog(rowData)\\\"\\r\\n                            ></i>\\r\\n                          </div>\\r\\n                        </div>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                    <div *ngIf=\\\"rowData.materialsDesc\\\">\\r\\n                      <i>{{ rowData.materialsDesc }}</i>\\r\\n                    </div>\\r\\n\\r\\n                    <div *ngIf=\\\"!rowData.materialsDesc && rowData.numberOfRecords\\\">\\r\\n                      <i>{{ rowData.numberOfRecords }} {{ getComponentName() + \\\".items\\\" | translate }}</i>\\r\\n                    </div>\\r\\n                  </span>\\r\\n\\r\\n                  <span *ngSwitchCase=\\\"'requestedQuantity'\\\">\\r\\n                    <input\\r\\n                      type=\\\"number\\\"\\r\\n                      class=\\\"aw-input\\\"\\r\\n                      name=\\\"quantity\\\"\\r\\n                      [(ngModel)]=\\\"rowData.requestedQuantity\\\"\\r\\n                      [disabled]=\\\"isReadOpenMode || rowData.procurementRequestId\\\"\\r\\n                    />\\r\\n                  </span>\\r\\n\\r\\n                  <span *ngSwitchCase=\\\"'calendarPotential'\\\">\\r\\n                    <p-calendar\\r\\n                      appendTo=\\\"body\\\"\\r\\n                      class=\\\"aw-calendar\\\"\\r\\n                      [dateFormat]=\\\"sessionService.dateFormatPrimeNG\\\"\\r\\n                      [locale]=\\\"sessionService.calendarFormat\\\"\\r\\n                      [(ngModel)]=\\\"rowData.calendarPotential\\\"\\r\\n                      showButtonBar=\\\"true\\\"\\r\\n                      [monthNavigator]=\\\"true\\\"\\r\\n                      [yearNavigator]=\\\"true\\\"\\r\\n                      [disabled]=\\\"isReadOpenMode || rowData.procurementRequestId\\\"\\r\\n                      [yearRange]=\\\"sessionService.calendarYearRange\\\"\\r\\n                    ></p-calendar>\\r\\n                  </span>\\r\\n\\r\\n                  <span *ngSwitchCase=\\\"'potentialUnit'\\\">\\r\\n                    <span *ngIf=\\\"!rowData.procurementRequestId\\\">\\r\\n                      <p-dropdown\\r\\n                        class=\\\"aw-dropdown fixed-width\\\"\\r\\n                        [options]=\\\"rowData.units\\\"\\r\\n                        [(ngModel)]=\\\"rowData.potentialUnit\\\"\\r\\n                        placeholder=\\\"&nbsp;\\\"\\r\\n                        [disabled]=\\\"\\r\\n                          isReadOpenMode || !rowData.materials || !rowData.units || rowData.units.length === 0\\r\\n                        \\\"\\r\\n                        appendTo=\\\"body\\\"\\r\\n                      ></p-dropdown>\\r\\n                    </span>\\r\\n                    <span *ngIf=\\\"rowData.procurementRequestId\\\">\\r\\n                      {{ rowData.potentialUnit }}\\r\\n                    </span>\\r\\n                  </span>\\r\\n\\r\\n                  <span *ngSwitchCase=\\\"'requestedPotential'\\\">\\r\\n                    <input\\r\\n                      type=\\\"number\\\"\\r\\n                      class=\\\"aw-input\\\"\\r\\n                      name=\\\"quantity\\\"\\r\\n                      [(ngModel)]=\\\"rowData.requestedPotential\\\"\\r\\n                      [disabled]=\\\"\\r\\n                        isReadOpenMode || rowData.procurementRequestId || !rowData.units || rowData.units.length === 0\\r\\n                      \\\"\\r\\n                    />\\r\\n                  </span>\\r\\n\\r\\n                  <span *ngSwitchCase=\\\"'criticality'\\\">\\r\\n                    <p-dropdown\\r\\n                      class=\\\"aw-dropdown fixed-width\\\"\\r\\n                      [options]=\\\"procurementRequestCriticalityList\\\"\\r\\n                      [(ngModel)]=\\\"rowData.criticality\\\"\\r\\n                      placeholder=\\\"&nbsp;\\\"\\r\\n                      [disabled]=\\\"isReadOpenMode || rowData.procurementRequestId\\\"\\r\\n                      appendTo=\\\"body\\\"\\r\\n                    ></p-dropdown>\\r\\n                  </span>\\r\\n\\r\\n                  <span *ngSwitchCase=\\\"'expectedOn'\\\">\\r\\n                    <p-calendar\\r\\n                      showButtonBar=\\\"true\\\"\\r\\n                      [monthNavigator]=\\\"true\\\"\\r\\n                      [yearNavigator]=\\\"true\\\"\\r\\n                      [yearRange]=\\\"sessionService.calendarYearRange\\\"\\r\\n                      class=\\\"aw-calendar\\\"\\r\\n                      [dateFormat]=\\\"sessionService.dateFormatPrimeNG\\\"\\r\\n                      [locale]=\\\"sessionService.calendarFormat\\\"\\r\\n                      [(ngModel)]=\\\"rowData.expectedOn\\\"\\r\\n                      [disabled]=\\\"isReadOpenMode || rowData.procurementRequestId\\\"\\r\\n                      appendTo=\\\"body\\\"\\r\\n                    ></p-calendar>\\r\\n                  </span>\\r\\n\\r\\n                  <span *ngSwitchCase=\\\"'action'\\\">\\r\\n                    <button\\r\\n                      *ngIf=\\\"!rowData.procurementRequestId\\\"\\r\\n                      mat-icon-button\\r\\n                      class=\\\"mat-elevation-z1\\\"\\r\\n                      color=\\\"warn\\\"\\r\\n                      (click)=\\\"deleteProcurementRequest(rowData)\\\"\\r\\n                    >\\r\\n                      <mat-icon>remove</mat-icon>\\r\\n                    </button>\\r\\n                  </span>\\r\\n\\r\\n                  <span *ngSwitchCase=\\\"'recepient'\\\">\\r\\n                    <div>{{ rowData.recepient }}</div>\\r\\n                    <div>{{ rowData.recepientDesc }}</div>\\r\\n                  </span>\\r\\n                  <span *ngSwitchDefault [title]=\\\"rowData[col.field]\\\">{{ rowData[col.field] }}</span>\\r\\n                </td>\\r\\n              </tr>\\r\\n            </ng-template>\\r\\n          </p-table>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </a-content>\\r\\n\\r\\n  <a-footer>\\r\\n    <button type=\\\"button\\\" mat-raised-button (click)=\\\"closeDialog()\\\">{{ \\\"global.cancel\\\" | translate }}</button>\\r\\n\\r\\n    <button\\r\\n      type=\\\"button\\\"\\r\\n      class=\\\"btn-with-spinner\\\"\\r\\n      color=\\\"primary\\\"\\r\\n      mat-raised-button\\r\\n      [disabled]=\\\"!isValid()\\\"\\r\\n      (click)=\\\"validate()\\\"\\r\\n    >\\r\\n      <span class=\\\"lds-hourglass\\\" *ngIf=\\\"showSaveSpinner\\\"></span>\\r\\n      {{ \\\"global.validate\\\" | translate }}\\r\\n    </button>\\r\\n  </a-footer>\\r\\n</a-modal>\\r\\n\\r\\n<aw-dialog-search-task\\r\\n  *ngIf=\\\"displayTaskDialog\\\"\\r\\n  [(display)]=\\\"displayTaskDialog\\\"\\r\\n  [familyCode]=\\\"familyCode\\\"\\r\\n  [variantCode]=\\\"variantCode\\\"\\r\\n  (onSelected)=\\\"onSelectedTask($event)\\\"\\r\\n>\\r\\n</aw-dialog-search-task>\\r\\n\\r\\n<aw-dialog-search-pn\\r\\n  *ngIf=\\\"searchPnDialogVisible\\\"\\r\\n  [(display)]=\\\"searchPnDialogVisible\\\"\\r\\n  [withAllTypes]=\\\"true\\\"\\r\\n  [withSparePartClass]=\\\"true\\\"\\r\\n  [showPartTypeSelection]=\\\"true\\\"\\r\\n  (onSelected)=\\\"checkPn($event)\\\"\\r\\n></aw-dialog-search-pn>\\r\\n\\r\\n<aw-dialog-search-evolution\\r\\n  *ngIf=\\\"displayEvolDialog\\\"\\r\\n  [(display)]=\\\"displayEvolDialog\\\"\\r\\n  (onSelected)=\\\"onSelectedEvol($event)\\\"\\r\\n></aw-dialog-search-evolution>\\r\\n\\r\\n<aw-dialog-search-defect-events\\r\\n  *ngIf=\\\"displayDefectDialog\\\"\\r\\n  [(display)]=\\\"displayDefectDialog\\\"\\r\\n  [equipmentCode]=\\\"equipmentCode\\\"\\r\\n  (onSelected)=\\\"onSelectedDefect($event)\\\"\\r\\n></aw-dialog-search-defect-events>\\r\\n\\r\\n<aw-dialog-search-operation\\r\\n  *ngIf=\\\"displayOperationDialog\\\"\\r\\n  [(display)]=\\\"displayOperationDialog\\\"\\r\\n  (onValidated)=\\\"onSelectedOperation($event)\\\"\\r\\n></aw-dialog-search-operation>\\r\\n\\r\\n<aw-dialog-search-customer\\r\\n  *ngIf=\\\"showQuickSearchBusinessPartnerPopup\\\"\\r\\n  [(display)]=\\\"showQuickSearchBusinessPartnerPopup\\\"\\r\\n  [customer-code]=\\\"workOrder.warrantyProvider\\\"\\r\\n  (onSelected)=\\\"setSelectedBusinessPartner($event)\\\"\\r\\n>\\r\\n</aw-dialog-search-customer>\\r\\n\"","module.exports = \":host textarea {\\n  height: 46px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbWFpbi9tYWludGVuYW5jZS93b3JrLXBhY2thZ2UvZm9ybS9wb3B1cHMvZGlhbG9nLXdvcmstb3JkZXItZWRpdGlvbi9EOlxcUHJvZmlsZXNcXGFwcmFkaGFuXFxEZXNrdG9wXFxBZXJvd2ViYlxcUFJPSkVDVFNcXGZyb250ZW5kX2Flcm93ZWJiL3NyY1xcYXBwXFxtYWluXFxtYWludGVuYW5jZVxcd29yay1wYWNrYWdlXFxmb3JtXFxwb3B1cHNcXGRpYWxvZy13b3JrLW9yZGVyLWVkaXRpb25cXGRpYWxvZy13b3JrLW9yZGVyLWVkaXRpb24uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0E7RUFFUSxZQUFZLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9tYWluL21haW50ZW5hbmNlL3dvcmstcGFja2FnZS9mb3JtL3BvcHVwcy9kaWFsb2ctd29yay1vcmRlci1lZGl0aW9uL2RpYWxvZy13b3JrLW9yZGVyLWVkaXRpb24uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwiY29uc3RhbnRzXCI7XHJcbkBpbXBvcnQgXCJtaXhpbnNcIjtcclxuXHJcbjpob3N0IHtcclxuICAgIHRleHRhcmVhIHtcclxuICAgICAgICBoZWlnaHQ6IDQ2cHg7XHJcbiAgICB9XHJcbn0iXX0= */\"","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { isEqual as _isEqual } from 'lodash-es';\r\nimport * as moment from 'moment';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { finalize } from 'rxjs/operators';\r\n\r\nimport { GenericPropertyConstants } from '../../../../../..//shared/constants/generic-property-constants';\r\nimport { PropertiesService } from '../../../../../..//shared/services/properties.service';\r\nimport { AWPropertiesConstants } from '../../../../../../shared/constants/aw-properties-constants';\r\nimport { BidoFunctionTypeConstants } from '../../../../../../shared/constants/bido-function-type-constants';\r\nimport { ComponentOpenMode } from '../../../../../../shared/enums/component-open-mode.enum';\r\nimport { MessageService } from '../../../../../../shared/services/message.service';\r\nimport { SessionService } from '../../../../../../shared/services/session.service';\r\nimport { AssetWorkOrderOriginInput } from '../../../../../../shared/types/api-input-types/airworthiness-management/asset-work-order-origin-input.inteface';\r\nimport { FindRelatedAssetsInput } from '../../../../../../shared/types/api-input-types/task-management/find-related-assets.interface';\r\nimport { UsersForWorkOrderInput } from '../../../../../../shared/types/api-input-types/user-profile-management/users-for-work-order.interface';\r\nimport { CalculateWorkOrderImput } from '../../../../../../shared/types/api-input-types/work-order/calculate-work-order-input.interface';\r\nimport { CreateBidmWorkOrderInput } from '../../../../../../shared/types/api-input-types/work-order/create-bidm-work-order-input';\r\nimport { ProcReqItemAndQtyIndicatorsDTO } from '../../../../../../shared/types/api-output-types/product-structure-management/proc-req-item-and-qty-indicators-dto';\r\nimport { ProcurementRequestAndIndicatorsOutputDTO } from '../../../../../../shared/types/api-output-types/product-structure-management/procurement-request-and-indicators-output-dto';\r\nimport { BidmOperationDTO } from '../../../../../../shared/types/api-types/bidm-operation-dto.interface';\r\nimport { BidmProjectDTO } from '../../../../../../shared/types/api-types/bidm-project-dto.interface';\r\nimport { BidmWorkOrderDTOId } from '../../../../../../shared/types/api-types/bidm-work-order-dto-id.interface';\r\nimport { BidmWorkOrderDTO } from '../../../../../../shared/types/api-types/bidm-work-order-dto.interface';\r\nimport { BidoCustomerDTO } from '../../../../../../shared/types/api-types/bido-customer-dto.interface';\r\nimport { BidoUserDTO } from '../../../../../../shared/types/api-types/bido-user-dto.interface';\r\nimport { BidtSiteDTO } from '../../../../../../shared/types/api-types/bidt-site-dto.interface';\r\nimport { BidtWarehouseDTO } from '../../../../../../shared/types/api-types/bidt-warehouse-dto.interface';\r\nimport { BireEvolutionDTO } from '../../../../../../shared/types/api-types/bire-evolution-dto.interface';\r\nimport { BireOperationDTO } from '../../../../../../shared/types/api-types/bire-operation-dto.interface';\r\nimport { BirePnDTO } from '../../../../../../shared/types/api-types/bire-pn-dto.interface';\r\nimport { BireTaskDTOId } from '../../../../../../shared/types/api-types/bire-task-dto-id.interface';\r\nimport { BireTaskDTO } from '../../../../../../shared/types/api-types/bire-task-dto.interface';\r\nimport { DeferredDefectEventDTO } from '../../../../../../shared/types/api-types/deferred-defect-event-dto.interface';\r\nimport { WoProcurementRequestInputDTO } from '../../../../../../shared/types/api-types/wo-procurement-request-input-dto.interface';\r\nimport { DialogComponent } from '../../../../../../shared/types/dialog-component';\r\nimport { LabelValue } from '../../../../../../shared/types/label-value.interface';\r\nimport { TableColumn } from '../../../../../../shared/types/table-column.interface';\r\nimport { NumberUtils } from '../../../../../../shared/utils/number-utils';\r\nimport { StringUtils } from '../../../../../../shared/utils/string-utils';\r\nimport { EmployeeFormService } from '../../../../../human-resources/employee-form/employee-form.service';\r\nimport { LogisticsService } from '../../../../../logistics/logistics.service';\r\nimport { ProcurementRequestsTableService } from '../../../../procurement-request/procurement-requests-table.service';\r\nimport { WorkOrderFormService } from '../../../../work-order/form/work-order-form.service';\r\nimport { WorkOrderRow, WorkPackageFormService } from '../../work-package-form.service';\r\n\r\nimport { DialogWorkOrderEditService } from './dialog-work-order-edition.service';\r\n\r\ninterface OperationRow {\r\n  code?: string;\r\n  version?: string;\r\n  rangeCode?: string;\r\n  qualification?: string;\r\n  designation?: string;\r\n  bidmOperation: BidmOperationDTO;\r\n}\r\n\r\nexport interface WoProcurementRequestInputRow {\r\n  procurementRequestId?: number;\r\n  id?: number;\r\n  procurementRequest?: string;\r\n  procurementRequestDescription?: string;\r\n  recepient?: string;\r\n  recepientDesc?: string;\r\n  materials?: string;\r\n  materialsDesc?: string;\r\n  requestedQuantity?: number;\r\n  status?: string;\r\n  statusDesc?: Date;\r\n  expectedOn?: Date;\r\n  criticality?: string;\r\n  unit?: string;\r\n  units?: LabelValue<string>[];\r\n  potentialUnit?: string;\r\n  requestedPotential?: number;\r\n  calendarPotential?: Date;\r\n}\r\n\r\n@Component({\r\n  selector: 'aw-dialog-work-order-edition',\r\n  styleUrls: ['./dialog-work-order-edition.component.scss'],\r\n  templateUrl: './dialog-work-order-edition.component.html'\r\n})\r\nexport class DialogWorkOrderEditComponent extends DialogComponent implements OnInit {\r\n  @Input()\r\n  public get workPackage(): BidmProjectDTO {\r\n    return this._workPackage;\r\n  }\r\n\r\n  public set workPackage(workPackage: BidmProjectDTO) {\r\n    this._workPackage = workPackage;\r\n    this.equipmentCode = this.workPackage.assetCode;\r\n\r\n    this.dialogWorkOrderEditService.loadWarehouseList(workPackage.bireRepairCenterCode).subscribe((result) => {\r\n      this.warehouseList = result.map((warehouse) => {\r\n        return {\r\n          label: warehouse.label,\r\n          value: Number(warehouse.value)\r\n        };\r\n      });\r\n    });\r\n\r\n    this.logisticsService.findAllBireSite().subscribe((sites) => {\r\n      const selectedSites = sites.filter((site) => site.siteCode === workPackage.bireRepairCenterCode);\r\n      this.bidtSiteDTO = selectedSites && selectedSites.length === 1 ? selectedSites[0] : undefined;\r\n      if (this.bidtSiteDTO && this.bidtSiteDTO.siteId) {\r\n        this.logisticsService.getWarehousesBySiteId(this.bidtSiteDTO.siteId).subscribe((warehouses) => {\r\n          this.bidtWarehouseDTOs = warehouses;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  @Input()\r\n  public get isFromMaintenancePlanning(): boolean {\r\n    return this._isFromMaintenancePlanning;\r\n  }\r\n\r\n  public set isFromMaintenancePlanning(isFromMaintenancePlanning: boolean) {\r\n    this._isFromMaintenancePlanning = isFromMaintenancePlanning;\r\n  }\r\n\r\n  public awPropertiesConstants: typeof AWPropertiesConstants;\r\n\r\n  @Input()\r\n  public get workOrderSelected(): BidmWorkOrderDTOId {\r\n    return this._bidmWorkOrderDTOId;\r\n  }\r\n\r\n  public set workOrderSelected(bidmWorkOrderDTOId: BidmWorkOrderDTOId) {\r\n    this._bidmWorkOrderDTOId = bidmWorkOrderDTOId;\r\n  }\r\n\r\n  @Input()\r\n  public get addWorkOrder(): BidmWorkOrderDTOId {\r\n    return this._addBidmWorkOrderDTOId;\r\n  }\r\n\r\n  public set addWorkOrder(bidmWorkOrderDTOId: BidmWorkOrderDTOId) {\r\n    this._addBidmWorkOrderDTOId = bidmWorkOrderDTOId;\r\n  }\r\n\r\n  @Input()\r\n  public get workOrders(): WorkOrderRow[] {\r\n    return this._workOrders;\r\n  }\r\n\r\n  public set workOrders(workOrders: WorkOrderRow[]) {\r\n    this._workOrders = workOrders;\r\n    this.topWoList = workOrders.map((wo) => {\r\n      return { label: wo.code, value: wo.woId };\r\n    });\r\n  }\r\n\r\n  @Input()\r\n  public familyCode: string;\r\n  @Input()\r\n  public variantCode: string;\r\n\r\n  @Output()\r\n  public onValidated: EventEmitter<{ isCreated: boolean }>;\r\n\r\n  private _bidmWorkOrderDTOId: BidmWorkOrderDTOId;\r\n  private _addBidmWorkOrderDTOId: BidmWorkOrderDTOId;\r\n  private _workPackage: BidmProjectDTO;\r\n  private _workOrders: WorkOrderRow[];\r\n  public _isFromMaintenancePlanning: boolean = false;\r\n\r\n  public isUpdateMode: boolean;\r\n  public isAddMode: boolean;\r\n  public titleModeEdition: string;\r\n  public workOrder: BidmWorkOrderDTO = {};\r\n  public task: BireTaskDTO = {};\r\n  public evolution: BireEvolutionDTO;\r\n  public relatedItem: string | undefined;\r\n  public relatedAsset: string | undefined;\r\n  public topWo: string;\r\n  public eventCode: string;\r\n  public equipmentCode: string | undefined;\r\n  public showQuickSearchBusinessPartnerPopup: boolean = false;\r\n  public warrantyProviderName: string | undefined;\r\n\r\n  public warehouseList: SelectItem[];\r\n  public typeList: SelectItem[];\r\n  public userList: SelectItem[];\r\n  public employeeQualification: string = '';\r\n  public relatedItemList: SelectItem[];\r\n  public relatedAssetList: SelectItem[];\r\n  public topWoList: SelectItem[];\r\n\r\n  public opTable: OperationRow[] = [];\r\n  public opTableCols: TableColumn[];\r\n  public procurementRequestTableCols: TableColumn[];\r\n  public selectedOperations: OperationRow[] = [];\r\n  public selectedProcurementRequestRow: WoProcurementRequestInputRow;\r\n  public isTableLoading: boolean;\r\n\r\n  public showTaskSection: boolean;\r\n  public showDefectSection: boolean;\r\n  public showEvolutionSection: boolean;\r\n  public showOperationSection: boolean;\r\n  public showRelatedFields: boolean;\r\n  public showSaveSpinner: boolean = false;\r\n  public displayTaskDialog: boolean;\r\n  public displayDefectDialog: boolean;\r\n  public displayEvolDialog: boolean;\r\n  public displayOperationDialog: boolean;\r\n\r\n  // Procurement request\r\n  public procurementRequests: ProcurementRequestAndIndicatorsOutputDTO[];\r\n  public procurementRequestRows: WoProcurementRequestInputRow[];\r\n  public procurementRequestStatusList: LabelValue<string>[];\r\n  public procurementRequestTypes: LabelValue<string>[];\r\n  public procurementRequestCriticalityList: LabelValue<string>[];\r\n  public searchPnDialogVisible: boolean;\r\n  public bidtSiteDTO: BidtSiteDTO | undefined;\r\n  public bidtWarehouseDTOs: BidtWarehouseDTO[];\r\n\r\n  public taskCode: string;\r\n\r\n  private oldWorkOrder: BidmWorkOrderDTO | undefined;\r\n\r\n  public constructor(\r\n    public sessionService: SessionService,\r\n    private readonly logisticsService: LogisticsService,\r\n    private readonly messageService: MessageService,\r\n    private readonly wpFormService: WorkPackageFormService,\r\n    private readonly dialogWorkOrderEditService: DialogWorkOrderEditService,\r\n    private readonly employeeFormService: EmployeeFormService,\r\n    private readonly workOrderFormService: WorkOrderFormService,\r\n    private readonly procurementRequestsTableService: ProcurementRequestsTableService,\r\n    private readonly propertiesService: PropertiesService,\r\n    private readonly translateService: TranslateService\r\n  ) {\r\n    super(ComponentOpenMode.Write, 'DialogWorkOrderEditComponent');\r\n    this.init();\r\n    this.initDropDowns();\r\n    this.initOpTableCols();\r\n    this.initProcurementRequestTableCols();\r\n  }\r\n\r\n  public initDropDowns(): void {\r\n    // Load Status List\r\n    this.propertiesService.getValue(GenericPropertyConstants.PROCUREMENT_REQUEST_STATUS_MAP).subscribe((res) => {\r\n      this.procurementRequestStatusList = res;\r\n    });\r\n\r\n    this.procurementRequestTypes = [];\r\n    this.propertiesService.getValue(GenericPropertyConstants.PROCUREMENT_REQUEST_TYPE_MAP).subscribe((res) => {\r\n      this.procurementRequestTypes = res;\r\n    });\r\n\r\n    this.procurementRequestCriticalityList = [\r\n      {\r\n        label: this.translateService.instant(this.getTranslateKey('immediate')),\r\n        value: AWPropertiesConstants.LOGISTICAL_CRITICALITY_IMMEDIATE\r\n      },\r\n      {\r\n        label: this.translateService.instant(this.getTranslateKey('urgent')),\r\n        value: AWPropertiesConstants.LOGISTICAL_CRITICALITY_URGENT\r\n      },\r\n      {\r\n        label: this.translateService.instant(this.getTranslateKey('routine')),\r\n        value: AWPropertiesConstants.LOGISTICAL_CRITICALITY_ROUTINE\r\n      }\r\n    ];\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n    this.isUpdateMode = this._bidmWorkOrderDTOId !== undefined && this._bidmWorkOrderDTOId.woId.length > 0;\r\n\r\n    if (this.isUpdateMode) {\r\n      this.dialogWorkOrderEditService.findBidmWorkOrder(this._bidmWorkOrderDTOId).subscribe((wo) => {\r\n        this.oldWorkOrder = wo;\r\n        this.workOrder = wo.bidmWorkOrder;\r\n\r\n        if (this.workOrder.bidWoId) {\r\n          this.topWo = this.workOrder.bidWoId;\r\n        }\r\n        if (this.workOrder.warrantyProvider) {\r\n          this.dialogWorkOrderEditService\r\n            .findBidoCustomer({ customerCode: this.workOrder.warrantyProvider })\r\n            .subscribe((customer) => (this.warrantyProviderName = customer.customerName));\r\n        }\r\n\r\n        this.dialogWorkOrderEditService\r\n          .findBidmOperationsByWorkOrder(this._bidmWorkOrderDTOId)\r\n          .subscribe((operationList) => {\r\n            const calculateWorkOrderImput: CalculateWorkOrderImput = {\r\n              workOrderData: this.workOrder,\r\n              fromLineMaintenance: false\r\n            };\r\n            this.dialogWorkOrderEditService\r\n              .calculateWorkOrderStatus(calculateWorkOrderImput)\r\n              .subscribe((calculateWorkOrderOutput) => {\r\n                if (\r\n                  this.workOrder.woType === AWPropertiesConstants.AIRM_WORK_ORDER_TYPE_TASK &&\r\n                  calculateWorkOrderOutput.originText\r\n                ) {\r\n                  const assetWorkOrderOriginInput: AssetWorkOrderOriginInput = {\r\n                    woType: this.workOrder.woType,\r\n                    woSource: this.workOrder.woSource,\r\n                    evolutionType: calculateWorkOrderOutput.evolutionType\r\n                  };\r\n                  this.dialogWorkOrderEditService\r\n                    .findWorkOrderOriginDetails(assetWorkOrderOriginInput)\r\n                    .subscribe((assetOutput) => {\r\n                      if (!!assetOutput.bireTaskDTOId) {\r\n                        // open task form\r\n                        const bireTaskDTO: BireTaskDTOId = assetOutput.bireTaskDTOId;\r\n                        this.getTask(bireTaskDTO);\r\n                      }\r\n                    });\r\n                } else if (\r\n                  this.workOrder.woType === AWPropertiesConstants.AIRM_WORK_ORDER_TYPE_TASK &&\r\n                  operationList.length > 0 &&\r\n                  operationList[0].bireTaskCode &&\r\n                  operationList[0].bireTaskVersion\r\n                ) {\r\n                  // Load task\r\n                  this.workOrderFormService\r\n                    .findBireTask({\r\n                      taskCode: operationList[0].bireTaskCode,\r\n                      taskVersion: operationList[0].bireTaskVersion\r\n                    })\r\n                    .subscribe((linkedTask) => {\r\n                      this.task = linkedTask;\r\n                      this.onSelectedTask(this.task);\r\n                      this.fillRelatedAssetsList();\r\n                    });\r\n                } else if (this.workOrder.woType === AWPropertiesConstants.AIRM_WORK_ORDER_TYPE_DEFECT) {\r\n                  if (this.workOrder.woSource) {\r\n                    this.eventCode = this.workOrder.woSource.split('#')[0];\r\n                  }\r\n                  this.fillRelatedAssetsList();\r\n                } else if (this.workOrder.woType === AWPropertiesConstants.AIRM_WORK_ORDER_TYPE_EVOLUTION) {\r\n                  if (this.workOrder.woSource) {\r\n                    const woSource = this.workOrder.woSource.split('#');\r\n                    this.evolution = {\r\n                      evolutionNumber: woSource[1],\r\n                      evolutionRevisionNumber: woSource[2],\r\n                      evolutionType: woSource[0]\r\n                    };\r\n                    this.onSelectedEvol(this.evolution);\r\n                    this.fillRelatedAssetsList();\r\n                  }\r\n                }\r\n              });\r\n            const operationRows: OperationRow[] = operationList.map((bidmOperation) => {\r\n              if (bidmOperation.bireOperationDTO) {\r\n                const operationRow: OperationRow = {\r\n                  bidmOperation,\r\n                  code: bidmOperation.bireOpeCode,\r\n                  rangeCode: bidmOperation.bireOpeRangeCode,\r\n                  version: bidmOperation.bireOpeVersion,\r\n                  designation: bidmOperation.bireOperationDTO.opeDesignation,\r\n                  qualification: bidmOperation.bireOperationDTO.opeQualification\r\n                };\r\n\r\n                return operationRow;\r\n              }\r\n              throw new Error('Bire not loaded on BIDM Operations');\r\n            });\r\n            this.insertOpTableIfNotExist(operationRows);\r\n\r\n            this.procurementRequestsTableService\r\n              .findProcReqItemsAndStockQuantityIndicators(this.workOrder, undefined)\r\n              .subscribe((proqReqs: ProcurementRequestAndIndicatorsOutputDTO[]) => {\r\n                this.procurementRequests = proqReqs;\r\n                this.procurementRequests.forEach((proqReq) => {\r\n                  this.procurementRequestRows.push(...this.createProcReqItemRow(proqReq));\r\n                });\r\n              });\r\n          });\r\n\r\n        if (this.workOrder.bireItemFamilyCode && this.workOrder.bireItemVariantCode) {\r\n          this.relatedItem =\r\n            this.workOrder.bireItemFamilyCode +\r\n            '-' +\r\n            this.workOrder.bireItemVariantCode +\r\n            '/' +\r\n            [\r\n              this.workOrder.bireItemChapter,\r\n              this.workOrder.bireItemSection,\r\n              this.workOrder.bireItemSubject,\r\n              this.workOrder.bireItemSheet,\r\n              this.workOrder.bireItemMarks\r\n            ].join('-');\r\n        }\r\n        this.relatedAsset = this.getRelatedAssetKey(this.workOrder.assetPn, this.workOrder.assetSn);\r\n        this.updateType(true);\r\n        this.onAssignedUserChange();\r\n      });\r\n    } else {\r\n      if (this._addBidmWorkOrderDTOId) {\r\n        this.dialogWorkOrderEditService.findWorkOrder(this._addBidmWorkOrderDTOId).subscribe((topWo) => {\r\n          if (topWo.woId) {\r\n            this.topWo = topWo.woId;\r\n          }\r\n        });\r\n      }\r\n\r\n      this.workOrder = {\r\n        woScheduledStartDate: new Date()\r\n      };\r\n      this.updateType(false);\r\n      this.fillRelatedAssetsList();\r\n    }\r\n    this.titleModeEdition = this.isCreateOpenMode\r\n      ? this.getTranslateKey('titleCreation')\r\n      : this.getTranslateKey('titleEdition');\r\n    // this.wpFormService.userList$.subscribe((list) => (this.userList = list));\r\n    this.getUsersList();\r\n\r\n    this.wpFormService.woTypeList$.subscribe((list) => {\r\n      this.typeList = this._isFromMaintenancePlanning\r\n        ? list.filter((a) => a.value === AWPropertiesConstants.AIRM_WORK_ORDER_TYPE_SN_CHANGE)\r\n        : list;\r\n    });\r\n    if (this._isFromMaintenancePlanning) {\r\n      this.workOrder.woType = AWPropertiesConstants.AIRM_WORK_ORDER_TYPE_SN_CHANGE;\r\n    }\r\n  }\r\n\r\n  private getRelatedAssetKey(assetPn?: string, assetSn?: string): string | undefined {\r\n    if (assetPn && assetSn) {\r\n      return `${assetPn}/${assetSn}`;\r\n    } else if (assetPn) {\r\n      return `${assetPn}/ `;\r\n    } else if (assetSn) {\r\n      return ` /${assetSn}`;\r\n    }\r\n\r\n    return undefined;\r\n  }\r\n\r\n  public isValid(): boolean {\r\n    return true;\r\n  }\r\n\r\n  private getTask(bireTaskId: BireTaskDTOId) {\r\n    this.workOrderFormService.findBireTask(bireTaskId).subscribe((linkedTask) => {\r\n      this.task = linkedTask;\r\n      this.onSelectedTask(this.task);\r\n      this.fillRelatedAssetsList();\r\n    });\r\n  }\r\n\r\n  private getUsersList(): void {\r\n    const param: UsersForWorkOrderInput = {\r\n      useCaseCode: BidoFunctionTypeConstants.UC_AIRM_RECEPTION\r\n    };\r\n    if (!!this.task) {\r\n      param.taskCode = this.task.taskCode;\r\n      param.taskVersion = this.task.taskVersion;\r\n      param.projectId = this._workPackage.projectId;\r\n      param.startDate = this.workOrder.woScheduledStartDate;\r\n    }\r\n    this.dialogWorkOrderEditService.findUsersWithUseCaseForWorkOrder(param).subscribe((data: BidoUserDTO[]) => {\r\n      this.userList = data.map((user) => {\r\n        return {\r\n          label: `${user.lastname} ${user.firstname}`,\r\n          value: user.userId\r\n        };\r\n      });\r\n      if (!!this.workOrder.woAssignedTo) {\r\n        const inList = this.userList.find((elem: SelectItem) => elem.value === this.workOrder.woAssignedTo);\r\n        this.workOrder.woAssignedTo = !!inList ? inList.value : undefined;\r\n      }\r\n    });\r\n  }\r\n\r\n  public validate(): void {\r\n    if (StringUtils.isNullOrEmpty(this.workOrder.woType)) {\r\n      this.messageService.showWarningMessage(this.getComponentName() + '.errorOnWoType');\r\n    } else if (\r\n      this.workOrder.woType === AWPropertiesConstants.AIRM_WORK_ORDER_TYPE_TASK &&\r\n      StringUtils.isNullOrEmpty(this.task.taskCode)\r\n    ) {\r\n      this.messageService.showWarningMessage(this.getComponentName() + '.errorOnWoTaskCode');\r\n    } else if (moment(this.workOrder.woScheduledStartDate).isAfter(moment(this.workOrder.woScheduledEndDate))) {\r\n      this.messageService.showWarningMessage(this.getComponentName() + '.errorOnDates');\r\n    } else if (this.showDefectSection && StringUtils.isNullOrEmpty(this.eventCode)) {\r\n      this.messageService.showWarningMessage(this.getComponentName() + '.errorOnDefect');\r\n    } else if (this.showEvolutionSection && StringUtils.isNullOrEmpty(this.evolution.evolutionNumber)) {\r\n      this.messageService.showWarningMessage(this.getComponentName() + '.errorOnEvolution');\r\n    } else if (this.showOperationSection && !this.validateProcurementRequests()) {\r\n      this.messageService.showWarningMessage(this.getComponentName() + '.errorOnProcurementRequests');\r\n    } else {\r\n      this.saveWorkOrder();\r\n    }\r\n  }\r\n\r\n  private validateProcurementRequests(): boolean {\r\n    if (this.procurementRequestRows && this.procurementRequestRows.length > 0) {\r\n      this.procurementRequestRows.forEach((row) => {\r\n        if (!row.materials || !row.requestedQuantity || row.requestedQuantity < 0) {\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  private saveWorkOrder() {\r\n    this.showSaveSpinner = true;\r\n    this.workOrder.projectId = this.workPackage.projectId;\r\n\r\n    // Top work order ?\r\n    if (!!this.topWo) {\r\n      this.workOrder.bidProjectId = this.workPackage.projectId;\r\n      this.workOrder.bidWoId = this.topWo;\r\n    }\r\n\r\n    const bidmOperations: BidmOperationDTO[] = this.opTable.map((operationRow) => operationRow.bidmOperation);\r\n\r\n    const woProcurementRequestInputDTOs: WoProcurementRequestInputDTO[] = this.procurementRequestRows\r\n      .filter((row) => !row.procurementRequestId)\r\n      .map((row) => {\r\n        const input: WoProcurementRequestInputDTO = {\r\n          pnCode: row.materials as string,\r\n          quantity: Number(row.requestedQuantity),\r\n          criticality: row.criticality as string,\r\n          date: row.expectedOn,\r\n          expirationDate: row.expectedOn,\r\n          requestedPotential: row.requestedPotential,\r\n          potentialUnit: row.potentialUnit,\r\n          calendarPotential: row.calendarPotential\r\n        };\r\n\r\n        return input;\r\n      });\r\n\r\n    this.task = { ...this.task, taskCode: this.task.taskCode || undefined };\r\n\r\n    const newWorkOrder: CreateBidmWorkOrderInput = {\r\n      bidmProjectDTO: this.workPackage,\r\n      bidmWorkOrderDTO: this.workOrder,\r\n      relatedItem: this.relatedItem,\r\n      relatedAsset: this.relatedAsset,\r\n      evolution: this.evolution,\r\n      task: this.task,\r\n      eventCode: this.eventCode,\r\n      operations: bidmOperations,\r\n      woProcurementRequestInputDTOs\r\n    };\r\n\r\n    this.dialogWorkOrderEditService\r\n      .createOrUpdateBidmWorkOrder(newWorkOrder)\r\n      .pipe(\r\n        finalize(() => {\r\n          this.showSaveSpinner = false;\r\n        })\r\n      )\r\n      .subscribe(\r\n        (workOrder) => {\r\n          if (this.oldWorkOrder && this.oldWorkOrder.bidtWarehouseId !== this.workOrder.bidtWarehouseId) {\r\n            this.logisticsService.updateProcurementRequestReceiver(workOrder).subscribe();\r\n          }\r\n\r\n          this.messageService.showSuccessMessage(this.getTranslateKey('woCreated'));\r\n          this.onValidated.emit({ isCreated: true });\r\n          this.showSaveSpinner = false;\r\n          this.closeDialog();\r\n        },\r\n        (err) => {\r\n          this.messageService.showErrorMessage(\r\n            err.error && err.error.errorDetail ? err.error.errorDetail : this.getTranslateKey('errorOnAddingWO')\r\n          );\r\n        }\r\n      );\r\n  }\r\n\r\n  public updateType(keepValues: boolean) {\r\n    this.showTaskSection = this.workOrder.woType === AWPropertiesConstants.AIRM_WORK_ORDER_TYPE_TASK;\r\n    this.showDefectSection = this.workOrder.woType === AWPropertiesConstants.AIRM_WORK_ORDER_TYPE_DEFECT;\r\n    this.showEvolutionSection = this.workOrder.woType === AWPropertiesConstants.AIRM_WORK_ORDER_TYPE_EVOLUTION;\r\n    this.showOperationSection =\r\n      this.workOrder.woType !== AWPropertiesConstants.AIRM_WORK_ORDER_TYPE_SUBCONTRACTING &&\r\n      !StringUtils.isNullOrEmpty(this.workOrder.woType);\r\n    this.showRelatedFields = this.showTaskSection || this.showDefectSection || this.showEvolutionSection;\r\n\r\n    if (!keepValues) {\r\n      this.clearTask();\r\n      this.eventCode = '';\r\n      this.evolution = {};\r\n      this.relatedItem = undefined;\r\n      this.workOrder.assetSn = undefined;\r\n      this.relatedItemList = [];\r\n    }\r\n  }\r\n\r\n  public openTaskDialog() {\r\n    this.displayTaskDialog = true;\r\n  }\r\n\r\n  public openDefectDialog() {\r\n    this.displayDefectDialog = true;\r\n  }\r\n\r\n  public openEvolDialog() {\r\n    this.displayEvolDialog = true;\r\n  }\r\n\r\n  public openOperationDialog() {\r\n    this.displayOperationDialog = true;\r\n  }\r\n\r\n  public clearTask(): void {\r\n    this.task = {};\r\n    this.clearOperations();\r\n  }\r\n\r\n  public clearOperations(): void {\r\n    this.opTable = [];\r\n    this.selectedOperations = [];\r\n    if (!this.isUpdateMode) {\r\n      this.procurementRequestRows = [];\r\n    }\r\n  }\r\n\r\n  public onAssignedUserChange() {\r\n    if (!!this.workOrder.woAssignedTo) {\r\n      const employeeId: string = this.workOrder.woAssignedTo;\r\n      this.employeeFormService.getEmployeeQualificationText(employeeId).subscribe((result) => {\r\n        this.employeeQualification = result;\r\n      });\r\n    }\r\n  }\r\n\r\n  public onSelectedTask(task: BireTaskDTO) {\r\n    this.task = {\r\n      taskCode: task.taskCode,\r\n      taskVersion: task.taskVersion,\r\n      taskDesignation: task.taskDesignation\r\n    };\r\n    this.workOrder.woDescription = task.taskDescription;\r\n    this.fillOperationListFromTask();\r\n    this.fillRelatedItemsList();\r\n    this.getUsersList();\r\n  }\r\n\r\n  public onSelectedOperation(popupOp: BireOperationDTO) {\r\n    const op: OperationRow = {\r\n      code: popupOp.opeCode,\r\n      version: popupOp.opeVersion,\r\n      rangeCode: popupOp.rangeCode,\r\n      designation: popupOp.opeDesignation,\r\n      qualification: popupOp.opeQualification,\r\n      bidmOperation: {\r\n        bireOperationDTO: popupOp\r\n      }\r\n    };\r\n    this.insertOpTableIfNotExist([op], true);\r\n  }\r\n\r\n  private insertOpTableIfNotExist(\r\n    operationList: OperationRow[],\r\n    createProcurementRequest?: boolean,\r\n    bireTaskDTO?: BireTaskDTO\r\n  ) {\r\n    for (const op of operationList) {\r\n      if (!this.opTable.some((o) => _isEqual(o.code, op.code) && _isEqual(o.version, op.version))) {\r\n        this.opTable.push(op);\r\n      }\r\n    }\r\n    if (createProcurementRequest) {\r\n      const bireOperationDTOs: BireOperationDTO[] = [];\r\n      this.opTable.forEach((o) => {\r\n        if (o.bidmOperation.bireOperationDTO) {\r\n          bireOperationDTOs.push(o.bidmOperation.bireOperationDTO);\r\n        }\r\n      });\r\n      this.dialogWorkOrderEditService\r\n        .initalizeWoProcurementRequestInput({\r\n          bireTaskDTO,\r\n          bireOperationDTOs\r\n        })\r\n        .subscribe((results) => {\r\n          results.forEach((input) => {\r\n            const row = {\r\n              materials: input.pnCode,\r\n              requestedQuantity: input.quantity ? NumberUtils.roundNumber(input.quantity, 2) : 1,\r\n              expectedOn: this.workOrder.woScheduledStartDate,\r\n              criticality: AWPropertiesConstants.LOGISTICAL_CRITICALITY_ROUTINE,\r\n              recepient: !!this.bidtSiteDTO ? this.bidtSiteDTO.siteName : '',\r\n              recepientDesc:\r\n                !!this.bidtWarehouseDTOs && !!this.workOrder.bidtWarehouseId\r\n                  ? this.bidtWarehouseDTOs.filter(\r\n                      (warehouse) => warehouse.wareHouseId === this.workOrder.bidtWarehouseId\r\n                    )[0].whName\r\n                  : ''\r\n            };\r\n            this.loadUnits(row);\r\n            this.procurementRequestRows.push(row);\r\n          });\r\n        });\r\n    }\r\n  }\r\n\r\n  public onSelectedDefect(event: DeferredDefectEventDTO) {\r\n    this.workOrder.woDescription = event.caDescription;\r\n    this.eventCode = (event.bidoNotificationData && event.bidoNotificationData.notificationCode) || '';\r\n  }\r\n\r\n  public onSelectedEvol(evol: BireEvolutionDTO) {\r\n    this.evolution = {\r\n      evolutionNumber: evol.evolutionNumber,\r\n      evolutionRevisionNumber: evol.evolutionRevisionNumber,\r\n      evolutionType: evol.evolutionType\r\n    };\r\n    this.workOrder.woDescription = evol.evolutionSummary;\r\n    this.fillOperationListFromEvol();\r\n    this.fillRelatedItemsList();\r\n  }\r\n\r\n  public deleteOperation() {\r\n    this.opTable = this.opTable.filter((op) => !this.selectedOperations.includes(op));\r\n    this.selectedOperations = [];\r\n  }\r\n\r\n  public quickSearchBusinessPartner(): void {\r\n    this.showQuickSearchBusinessPartnerPopup = true;\r\n  }\r\n\r\n  public setSelectedBusinessPartner(event: BidoCustomerDTO): void {\r\n    this.workOrder.warrantyProvider = event.customerCode;\r\n    if (event.customerName) {\r\n      this.warrantyProviderName = event.customerName;\r\n    }\r\n  }\r\n\r\n  public onWarrantyChange(): void {\r\n    if (!this.workOrder.underWarranty) {\r\n      this.warrantyProviderName = undefined;\r\n      this.workOrder.warrantyProvider = undefined;\r\n    }\r\n  }\r\n\r\n  private init(): void {\r\n    this.warehouseList = [];\r\n    this.typeList = [];\r\n    this.userList = [];\r\n    this.procurementRequests = [];\r\n    this.procurementRequestRows = [];\r\n    this.procurementRequestStatusList = [];\r\n    this.procurementRequestTypes = [];\r\n    this.awPropertiesConstants = AWPropertiesConstants;\r\n    this.onValidated = new EventEmitter<{ isCreated: boolean }>();\r\n  }\r\n\r\n  private initOpTableCols(): void {\r\n    this.opTableCols = [\r\n      { field: 'code', alignment: 'left', width: '30%' },\r\n      { field: 'version', alignment: 'left', width: '10%' },\r\n      { field: 'rangeCode', alignment: 'left', width: '20%' },\r\n      { field: 'qualification', alignment: 'left', width: '15%' },\r\n      { field: 'designation', alignment: 'left', width: '25%' }\r\n    ];\r\n  }\r\n\r\n  private fillOperationListFromTask() {\r\n    const bireTaskDTOId: BireTaskDTOId = {\r\n      taskCode: this.task.taskCode || '',\r\n      taskVersion: this.task.taskVersion || ''\r\n    };\r\n    this.dialogWorkOrderEditService.findOperationsFromTaskAndRelatedTasks(bireTaskDTOId).subscribe((operationList) => {\r\n      this.convertBireOperationsAndInsertIfNotExist(operationList, this.task);\r\n    });\r\n  }\r\n\r\n  private convertBireOperationsAndInsertIfNotExist(operationList: BireOperationDTO[], bireTaskDTO?: BireTaskDTO) {\r\n    const operationRows: OperationRow[] = operationList.map((bireOperation) => {\r\n      const bidmOperationDTO: BidmOperationDTO = {\r\n        bireOperationDTO: bireOperation\r\n      };\r\n\r\n      const operationRow: OperationRow = {\r\n        bidmOperation: bidmOperationDTO,\r\n        code: bireOperation.opeCode,\r\n        rangeCode: bireOperation.rangeCode,\r\n        version: bireOperation.opeVersion,\r\n        designation: bireOperation.opeDesignation,\r\n        qualification: bireOperation.opeQualification\r\n      };\r\n\r\n      return operationRow;\r\n    });\r\n    this.clearOperations();\r\n    this.insertOpTableIfNotExist(operationRows, !this.isUpdateMode, bireTaskDTO);\r\n  }\r\n\r\n  private fillOperationListFromEvol() {\r\n    this.dialogWorkOrderEditService.findOperationsFromEvolution(this.evolution).subscribe((operationList) => {\r\n      this.convertBireOperationsAndInsertIfNotExist(operationList);\r\n    });\r\n  }\r\n\r\n  private fillRelatedItemsList() {\r\n    if (this.workOrder.woType === AWPropertiesConstants.AIRM_WORK_ORDER_TYPE_TASK) {\r\n      const bireTaskDTOId: BireTaskDTOId = {\r\n        taskCode: this.task.taskCode || '',\r\n        taskVersion: this.task.taskVersion || ''\r\n      };\r\n      this.dialogWorkOrderEditService.findRelatedItemsFromTask(bireTaskDTOId).subscribe((relatedItemList) => {\r\n        this.updateRelatedItemList(relatedItemList);\r\n      });\r\n    } else if (this.workOrder.woType === AWPropertiesConstants.AIRM_WORK_ORDER_TYPE_EVOLUTION) {\r\n      this.dialogWorkOrderEditService.findRelatedItemsFromEvolution(this.evolution).subscribe((relatedItemList) => {\r\n        this.updateRelatedItemList(relatedItemList);\r\n      });\r\n    }\r\n  }\r\n\r\n  private updateRelatedItemList(relatedItemList: SelectItem[]) {\r\n    this.relatedItemList = relatedItemList;\r\n    if (relatedItemList.length === 1) {\r\n      this.relatedItem = relatedItemList[0].value;\r\n      this.onRelatedItemChange();\r\n    }\r\n  }\r\n\r\n  public onRelatedItemChange() {\r\n    this.fillRelatedAssetsList();\r\n  }\r\n\r\n  private fillRelatedAssetsList() {\r\n    if (this._workPackage.assetCode) {\r\n      const findRelatedAssetsInput: FindRelatedAssetsInput = {\r\n        assetCode: this._workPackage.assetCode,\r\n        relatedItem: this.relatedItem\r\n      };\r\n      this.dialogWorkOrderEditService.findRelatedAssets(findRelatedAssetsInput).subscribe((relatedAssetList) => {\r\n        this.relatedAssetList = relatedAssetList;\r\n      });\r\n    }\r\n  }\r\n\r\n  private initProcurementRequestTableCols(): void {\r\n    this.procurementRequestTableCols = [\r\n      { field: 'materials', alignment: 'left', width: '20%' },\r\n      { field: 'requestedQuantity', alignment: 'left', width: '5%' },\r\n      { field: 'unit', alignment: 'left', width: '5%' },\r\n      { field: 'requestedPotential', alignment: 'left', width: '7%' },\r\n      { field: 'potentialUnit', alignment: 'left', width: '7%' },\r\n      { field: 'calendarPotential', alignment: 'left', width: '10%' },\r\n      { field: 'expectedOn', alignment: 'left', width: '10%' },\r\n      { field: 'criticality', alignment: 'left', width: '10%' },\r\n      { field: 'recepient', alignment: 'left', width: '10%' },\r\n      { field: 'action', alignment: 'center', width: '5%' }\r\n    ];\r\n  }\r\n\r\n  public createProcReqItemRow(\r\n    procurementRequest: ProcurementRequestAndIndicatorsOutputDTO\r\n  ): WoProcurementRequestInputRow[] {\r\n    return procurementRequest.procReqItemsAndQtyIndicatorsDTO.map(\r\n      (procReqItemsAndQtyIndicatorsDTO: ProcReqItemAndQtyIndicatorsDTO) => {\r\n        const row: WoProcurementRequestInputRow = {\r\n          procurementRequestId: procurementRequest.id,\r\n          id: procReqItemsAndQtyIndicatorsDTO.id,\r\n          procurementRequest: procurementRequest.procCode,\r\n          procurementRequestDescription: procurementRequest.procType,\r\n          recepient: !!procurementRequest.bidtSiteReceipt ? procurementRequest.bidtSiteReceipt.siteName : '',\r\n          recepientDesc: !!procurementRequest.bidtWarehouseReceipt\r\n            ? procurementRequest.bidtWarehouseReceipt.whName\r\n            : '',\r\n          expectedOn: procurementRequest.requestedDate,\r\n          criticality: procurementRequest.criticality,\r\n          materials: procReqItemsAndQtyIndicatorsDTO.birePn ? procReqItemsAndQtyIndicatorsDTO.birePn.pnCode : undefined,\r\n          materialsDesc: procReqItemsAndQtyIndicatorsDTO.birePn\r\n            ? procReqItemsAndQtyIndicatorsDTO.birePn.articleDesignation\r\n            : undefined,\r\n          requestedQuantity: procReqItemsAndQtyIndicatorsDTO.requestedQuantity\r\n            ? NumberUtils.roundNumber(NumberUtils.fromString(procReqItemsAndQtyIndicatorsDTO.requestedQuantity), 2)\r\n            : 1,\r\n          calendarPotential: procurementRequest.calendarPotential,\r\n          potentialUnit: procurementRequest.potentialUnit,\r\n          requestedPotential: procurementRequest.requestedPotential\r\n            ? NumberUtils.roundNumber(NumberUtils.fromString(procurementRequest.requestedPotential), 2)\r\n            : undefined\r\n        };\r\n\r\n        return row;\r\n      }\r\n    );\r\n  }\r\n\r\n  public addProcurementRequest(): void {\r\n    this.procurementRequestRows.push({\r\n      materials: undefined,\r\n      materialsDesc: undefined,\r\n      expectedOn: this.workOrder.woScheduledStartDate,\r\n      requestedQuantity: 1,\r\n      criticality: AWPropertiesConstants.LOGISTICAL_CRITICALITY_ROUTINE,\r\n      recepient: !!this.bidtSiteDTO ? this.bidtSiteDTO.siteName : '',\r\n      recepientDesc:\r\n        !!this.bidtWarehouseDTOs && !!this.workOrder.bidtWarehouseId\r\n          ? this.bidtWarehouseDTOs.filter((warehouse) => warehouse.wareHouseId === this.workOrder.bidtWarehouseId)[0]\r\n              .whName\r\n          : ''\r\n    });\r\n  }\r\n\r\n  public openPnSearchDialog(row: WoProcurementRequestInputRow): void {\r\n    this.selectedProcurementRequestRow = row;\r\n    this.searchPnDialogVisible = true;\r\n  }\r\n\r\n  public checkPn(pn: BirePnDTO | undefined) {\r\n    if (pn) {\r\n      this.selectedProcurementRequestRow.materials = pn.pnCode;\r\n      this.selectedProcurementRequestRow.unit = pn.unitOfIssue;\r\n      this.loadUnits(this.selectedProcurementRequestRow);\r\n    }\r\n  }\r\n\r\n  public deleteProcurementRequest(row: WoProcurementRequestInputRow): void {\r\n    this.procurementRequestRows = this.procurementRequestRows.filter((pr) => pr !== row);\r\n  }\r\n\r\n  private loadUnits(row: WoProcurementRequestInputRow) {\r\n    this.logisticsService.findBidoCounterReferencesByPnCode({ pnCode: row.materials as string }).subscribe({\r\n      next: (counterReferences) => {\r\n        row.units = counterReferences\r\n          .map((counterReference) => {\r\n            return {\r\n              label: `${counterReference.unitCode} (${counterReference.counterCode})`,\r\n              value: counterReference.counterCode as string\r\n            };\r\n          })\r\n          .sort((s1, s2) => s1.label.localeCompare(s2.label));\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CalendarModule } from 'primeng/calendar';\r\nimport { CheckboxModule } from 'primeng/checkbox';\r\nimport { DropdownModule } from 'primeng/dropdown';\r\nimport { TableModule } from 'primeng/table';\r\n\r\nimport { AngularCommonSharedModule } from '../../../../../../shared/angular-common-shared.module';\r\nimport { AngularGenericTemplatesSharedModule } from '../../../../../../shared/angular-generic-templates-shared-module';\r\nimport { AppCommonSharedModule } from '../../../../../../shared/app-common-shared.module';\r\nimport { DialogSearchCustomerModule } from '../../../../../../shared/components/dialog-search-customer/dialog-search-customer.module';\r\nimport { DialogSearchDefectEventsModule } from '../../../../../../shared/components/dialog-search-defect-events/dialog-search-defect-events.module';\r\nimport { DialogSearchEventModule } from '../../../../../../shared/components/dialog-search-event/dialog-search-event.module';\r\nimport { DialogSearchEvolutionModule } from '../../../../../../shared/components/dialog-search-evolution/dialog-search-evolution.module';\r\nimport { DialogSearchOperationModule } from '../../../../../../shared/components/dialog-search-operation/dialog-search-operation.module';\r\nimport { DialogSearchPnModule } from '../../../../../../shared/components/dialog-search-pn/dialog-search-pn.module';\r\nimport { DialogSearchTaskModule } from '../../../../../../shared/components/dialog-search-task/dialog-search-task.module';\r\nimport { ModalModule } from '../../../../../../shared/components/modal/modal.module';\r\n\r\nimport { DialogWorkOrderEditComponent } from './dialog-work-order-edition.component';\r\nimport { DialogWorkOrderEditService } from './dialog-work-order-edition.service';\r\n\r\n/******************************************************************************\r\n * Modules\r\n *************************************************************************** */\r\n\r\nconst EXTERNAL_MODULES = [\r\n  DropdownModule,\r\n  TableModule,\r\n  CalendarModule,\r\n  CheckboxModule,\r\n  DialogSearchDefectEventsModule,\r\n  DialogSearchCustomerModule\r\n];\r\n\r\nconst INTERNAL_MODULES = [ModalModule, DialogSearchPnModule];\r\n\r\n/******************************************************************************\r\n * Components\r\n *************************************************************************** */\r\n\r\nconst COMPONENTS = [DialogWorkOrderEditComponent];\r\n\r\n/******************************************************************************\r\n * Services\r\n *************************************************************************** */\r\n\r\nconst SERVICES = [DialogWorkOrderEditService];\r\n\r\n@NgModule({\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n  imports: [\r\n    AngularCommonSharedModule,\r\n    AngularGenericTemplatesSharedModule,\r\n    AppCommonSharedModule,\r\n    DialogSearchTaskModule,\r\n    DialogSearchEvolutionModule,\r\n    DialogSearchEventModule,\r\n    DialogSearchOperationModule,\r\n    ...EXTERNAL_MODULES,\r\n    ...INTERNAL_MODULES\r\n  ],\r\n  providers: [...SERVICES]\r\n})\r\nexport class DialogWorkOrderEditionModule {}\r\n","module.exports = \"<a-modal class=\\\"aw-modal\\\" [(visible)]=\\\"display\\\" [width]=\\\"80\\\">\\r\\n  <a-header>\\r\\n    <div class=\\\"modal-title\\\">{{ \\\"defectEventPopin.title\\\" | translate }}</div>\\r\\n\\r\\n    <!-- <i class=\\\"material-icons aw-icon aw-icon-with-border\\\" (click)=\\\"onCancel()\\\">close</i> -->\\r\\n  </a-header>\\r\\n\\r\\n  <a-content>\\r\\n    <div class=\\\"search-dialog-container\\\">\\r\\n      <div class=\\\"section results-section\\\">\\r\\n        <h4 class=\\\"section-title\\\">{{ \\\"global.results\\\" | translate }} ({{ resultsTable ? resultsTable.length : 0 }})</h4>\\r\\n\\r\\n        <div class=\\\"section-content\\\">\\r\\n          <p-table\\r\\n            [resizableColumns]=\\\"true\\\"\\r\\n            #ptable\\r\\n            class=\\\"aw-table2\\\"\\r\\n            [columns]=\\\"resultsTableCols\\\"\\r\\n            [value]=\\\"resultsTable\\\"\\r\\n            [(selection)]=\\\"selectedRow\\\"\\r\\n            selectionMode=\\\"single\\\"\\r\\n            [scrollable]=\\\"true\\\"\\r\\n          >\\r\\n            <ng-template pTemplate=\\\"emptymessage\\\">\\r\\n              <span *ngIf=\\\"!isLoading\\\"> &nbsp;</span>\\r\\n\\r\\n              <div *ngIf=\\\"isLoading\\\" class=\\\"aw-table-loading-indicator\\\">\\r\\n                <div class=\\\"loading-message\\\">{{ \\\"table.loadingData\\\" | translate }}</div>\\r\\n                <div class=\\\"lds-hourglass\\\"></div>\\r\\n              </div>\\r\\n            </ng-template>\\r\\n\\r\\n            <ng-template pTemplate=\\\"caption\\\">\\r\\n              <div class=\\\"aw-table-header\\\">\\r\\n                <div class=\\\"aw-table-global-filter\\\">\\r\\n                  <label class=\\\"aw-table-global-filter-label\\\">\\r\\n                    <i class=\\\"fa fa-fw fa-search\\\" aria-hidden=\\\"true\\\"></i>\\r\\n                  </label>\\r\\n\\r\\n                  <input\\r\\n                    #ptableGlobalFilter\\r\\n                    class=\\\"aw-table-global-filter-input\\\"\\r\\n                    type=\\\"text\\\"\\r\\n                    placeholder=\\\"{{ 'table.globalFilterText' | translate }}\\\"\\r\\n                    (input)=\\\"ptable.filterGlobal($event.target.value, 'contains')\\\"\\r\\n                  />\\r\\n                </div>\\r\\n              </div>\\r\\n            </ng-template>\\r\\n\\r\\n            <ng-template pTemplate=\\\"colgroup\\\" let-columns>\\r\\n              <colgroup>\\r\\n                <col *ngFor=\\\"let col of columns\\\" [ngStyle]=\\\"{ width: col.width }\\\" />\\r\\n              </colgroup>\\r\\n            </ng-template>\\r\\n\\r\\n            <ng-template pTemplate=\\\"header\\\" let-columns>\\r\\n              <tr>\\r\\n                <th pResizableColumn *ngFor=\\\"let col of columns\\\" [ngStyle]=\\\"{ 'text-align': col.alignment }\\\">\\r\\n                  {{ \\\"defectEventPopin.\\\" + col.field | translate }}\\r\\n                </th>\\r\\n              </tr>\\r\\n            </ng-template>\\r\\n\\r\\n            <ng-template pTemplate=\\\"body\\\" let-rowData let-columns=\\\"columns\\\" let-rowIndex=\\\"rowIndex\\\">\\r\\n              <tr [pSelectableRow]=\\\"rowData\\\" [pSelectableRowIndex]=\\\"rowIndex\\\">\\r\\n                <td *ngFor=\\\"let col of columns\\\" [ngSwitch]=\\\"col.field\\\" [ngStyle]=\\\"{ 'text-align': col.alignment }\\\">\\r\\n                  <span *ngSwitchCase=\\\"'isDeferred'\\\">\\r\\n                    <i\\r\\n                      *ngIf=\\\"rowData[col.field] !== null && rowData[col.field]\\\"\\r\\n                      class=\\\"fa fa-fw fa-check\\\"\\r\\n                      aria-hidden=\\\"true\\\"\\r\\n                    ></i>\\r\\n                  </span>\\r\\n\\r\\n                  <span *ngSwitchDefault [title]=\\\"rowData[col.field]\\\">{{ rowData[col.field] }}</span>\\r\\n                </td>\\r\\n              </tr>\\r\\n            </ng-template>\\r\\n          </p-table>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </a-content>\\r\\n\\r\\n  <a-footer>\\r\\n    <button type=\\\"button\\\" mat-raised-button (click)=\\\"onCancel()\\\">\\r\\n      <span>{{ \\\"global.cancel\\\" | translate }}</span>\\r\\n    </button>\\r\\n\\r\\n    <button [disabled]=\\\"!this.selectedObject\\\" color=\\\"primary\\\" type=\\\"button\\\" mat-raised-button (click)=\\\"onValidate()\\\">\\r\\n      {{ \\\"global.validate\\\" | translate }}\\r\\n    </button>\\r\\n  </a-footer>\\r\\n</a-modal>\\r\\n\"","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport * as moment from 'moment';\r\n\r\nimport { ComponentOpenMode } from '../../../shared/enums/component-open-mode.enum';\r\nimport { MessageService } from '../../../shared/services/message.service';\r\nimport { SessionService } from '../../../shared/services/session.service';\r\nimport { DeferredDefectEventDTO } from '../../../shared/types/api-types/deferred-defect-event-dto.interface';\r\nimport { DialogComponent } from '../../../shared/types/dialog-component';\r\nimport { TableColumn } from '../../../shared/types/table-column.interface';\r\n\r\nimport { DialogSearchDefectEventsService } from './dialog-search-defect-events.service';\r\n\r\ninterface TableRow {\r\n  code?: string;\r\n  date?: string;\r\n  logNumber?: string;\r\n  context?: string;\r\n  description?: string;\r\n  lastAuthor?: string;\r\n  correctiveDescription?: string;\r\n  correctiveLastAuthor?: string;\r\n  isDeferred?: Boolean;\r\n  deferralDelay?: string;\r\n  deferralLastAuthor?: string;\r\n  _obj: DeferredDefectEventDTO;\r\n}\r\n\r\n@Component({\r\n  selector: 'aw-dialog-search-defect-events',\r\n  templateUrl: 'dialog-search-defect-events.component.html'\r\n})\r\nexport class DialogSearchDefectEventsComponent extends DialogComponent implements OnInit {\r\n  public resultsTableCols: TableColumn[];\r\n  public resultsTable: TableRow[];\r\n  public selectedObject: DeferredDefectEventDTO | undefined;\r\n\r\n  public set selectedRow(selectedRow: TableRow) {\r\n    this.selectedObject = selectedRow._obj;\r\n  }\r\n\r\n  @Output()\r\n  public onSelected = new EventEmitter<DeferredDefectEventDTO>();\r\n\r\n  @Input()\r\n  public equipmentCode: string;\r\n\r\n  public constructor(\r\n    private readonly dialogSearchDefectEventsService: DialogSearchDefectEventsService,\r\n    private readonly sessionService: SessionService,\r\n    private readonly messageService: MessageService\r\n  ) {\r\n    super(ComponentOpenMode.Write, 'DialogSearchDefectEventsComponent');\r\n\r\n    this.resultsTable = [];\r\n\r\n    this.resultsTableCols = [\r\n      { field: 'code', alignment: 'left' },\r\n      { field: 'date', alignment: 'left' },\r\n      { field: 'logNumber', alignment: 'left' },\r\n      { field: 'context', alignment: 'left' },\r\n      { field: 'description', alignment: 'left' },\r\n      { field: 'correctiveDescription', alignment: 'left' },\r\n      { field: 'isDeferred', alignment: 'center' },\r\n      { field: 'deferralDelay', alignment: 'left' }\r\n    ];\r\n  }\r\n\r\n  public ngOnInit() {\r\n    this.selectedObject = undefined;\r\n    this.resultsTable = [];\r\n    this.searchDefectEvents();\r\n  }\r\n\r\n  public searchDefectEvents(): void {\r\n    this.dialogSearchDefectEventsService\r\n      .findDefectEventsByEquipmentCode({\r\n        equipmentCode: this.equipmentCode,\r\n        forWholeStructure: true\r\n      })\r\n      .subscribe(\r\n        (results) => {\r\n          if (results) {\r\n            this.selectedObject = undefined;\r\n            this.resultsTable = results.map((findDefectEventsByEquipmentCodeOutput) => {\r\n              const deferredDefectEventDTO = findDefectEventsByEquipmentCodeOutput.deferredDefectEventDTO;\r\n              deferredDefectEventDTO.caDescription = findDefectEventsByEquipmentCodeOutput.defectCADescription;\r\n              const notification = deferredDefectEventDTO.bidoNotificationData;\r\n              if (!notification) {\r\n                throw new Error('Missing notification data');\r\n              }\r\n\r\n              return {\r\n                code: notification.notificationCode,\r\n                date: notification.reportingPeriodStartDate\r\n                  ? moment(notification.reportingPeriodStartDate).format(this.sessionService.dateTimeFormatMomentJS)\r\n                  : '',\r\n                logNumber: findDefectEventsByEquipmentCodeOutput.defectLogNumber,\r\n                context: findDefectEventsByEquipmentCodeOutput.defectDetectionContext,\r\n                description: findDefectEventsByEquipmentCodeOutput.defectDescription,\r\n                correctiveDescription: findDefectEventsByEquipmentCodeOutput.defectCADescription,\r\n                isDeferred: findDefectEventsByEquipmentCodeOutput.isDeferred,\r\n                deferralDelay: findDefectEventsByEquipmentCodeOutput.deferralDelay,\r\n                _obj: deferredDefectEventDTO\r\n              };\r\n            });\r\n          }\r\n        },\r\n        () => {\r\n          this.messageService.showErrorMessage(this.getTranslateKey('errorOnSearch'));\r\n        }\r\n      );\r\n  }\r\n\r\n  /*\r\n    <summary>Emit the selectedObject on validate</summary>\r\n    */\r\n  public onValidate(): void {\r\n    this.onSelected.emit(this.selectedObject);\r\n    this.selectedObject = undefined;\r\n    this.display = false;\r\n  }\r\n\r\n  /*\r\n    <summary>Close the pop up on cancel</summary>\r\n    */\r\n  public onCancel(): void {\r\n    this.display = false;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { TableModule } from 'primeng/table';\r\n\r\nimport { AngularCommonSharedModule } from '../../angular-common-shared.module';\r\nimport { AngularGenericTemplatesSharedModule } from '../../angular-generic-templates-shared-module';\r\nimport { AppCommonSharedModule } from '../../app-common-shared.module';\r\nimport { ModalModule } from '../modal/modal.module';\r\n\r\nimport { DialogSearchDefectEventsComponent } from './dialog-search-defect-events.component';\r\nimport { DialogSearchDefectEventsService } from './dialog-search-defect-events.service';\r\n\r\n/******************************************************************************\r\n * Modules\r\n *************************************************************************** */\r\n\r\nconst EXTERNAL_MODULES = [TableModule];\r\n\r\nconst INTERNAL_MODULES = [ModalModule];\r\n\r\n/******************************************************************************\r\n * Components\r\n *************************************************************************** */\r\n\r\nconst COMPONENTS = [DialogSearchDefectEventsComponent];\r\n\r\n/******************************************************************************\r\n * Services\r\n *************************************************************************** */\r\n\r\nconst SERVICES = [DialogSearchDefectEventsService];\r\n\r\n@NgModule({\r\n  declarations: [...COMPONENTS],\r\n  exports: [...COMPONENTS],\r\n  imports: [\r\n    AngularCommonSharedModule,\r\n    AngularGenericTemplatesSharedModule,\r\n    AppCommonSharedModule,\r\n    ...EXTERNAL_MODULES,\r\n    ...INTERNAL_MODULES\r\n  ],\r\n  providers: [...SERVICES]\r\n})\r\nexport class DialogSearchDefectEventsModule {}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { FleetBusinessApi } from '../../../shared/api/fleet-business.api';\r\nimport { FleetManagementApi } from '../../../shared/api/fleet-management.api';\r\nimport { AbstractAwHttpService } from '../../../shared/http/abstract-aw-http';\r\nimport { AppConfigService } from '../../../shared/services/app-config.service';\r\nimport { FindDefectEventsByEquipmentCodeInput } from '../../../shared/types/api-input-types/work-order/find-defect-events-by-equipment-code-input.interface';\r\nimport { FindDefectEventsByEquipmentCodeOutput } from '../../../shared/types/api-input-types/work-order/find-defect-events-by-equipment-code-output.interface';\r\nimport { BidoRootCauseDTO } from '../../../shared/types/api-types/bido-root-cause-dto.interface';\r\n\r\n\r\n@Injectable()\r\nexport class DialogSearchDefectEventsService extends AbstractAwHttpService {\r\n  public constructor(\r\n    http: HttpClient,\r\n    appConfigService: AppConfigService,\r\n    private readonly fleetBusinessApi: FleetBusinessApi,\r\n    private readonly fleetManagementApi: FleetManagementApi\r\n  ) {\r\n    super(http, appConfigService);\r\n  }\r\n\r\n  /***********************************\r\n   fleet business api\r\n  ***********************************/\r\n  public findDefectEventsByEquipmentCode(\r\n      input: FindDefectEventsByEquipmentCodeInput\r\n    ): Observable<FindDefectEventsByEquipmentCodeOutput[]> {\r\n    return super.post<FindDefectEventsByEquipmentCodeInput, FindDefectEventsByEquipmentCodeOutput[]>(\r\n      this.fleetBusinessApi.findDefectEventsByEquipmentCode,\r\n      input\r\n    );\r\n  }\r\n\r\n  public findBidoRootCause(input: string): Observable<BidoRootCauseDTO> {\r\n      return super.post<string, BidoRootCauseDTO>(\r\n        this.fleetManagementApi.findBidoRootCause,\r\n        input\r\n      );\r\n  }\r\n}\r\n","import { StringUtils } from './string-utils';\r\n\r\nexport class ImageUtils {\r\n  private static readonly JPG_BASE64_ID = 'jpg';\r\n  private static readonly PNG_BASE64_ID = 'png';\r\n\r\n  private static readonly JPG_EXTENSION_LIST = ['jpeg', 'jpg'];\r\n  private static readonly PNG_EXTENSION_LIST = ['png'];\r\n\r\n  public static getBase64Prefix(extension: string | undefined): string {\r\n    let formattedExtension = '';\r\n    if (this.isJpg(extension)) {\r\n      formattedExtension = ImageUtils.JPG_BASE64_ID;\r\n    } else if (this.isPng(extension)) {\r\n      formattedExtension = ImageUtils.PNG_BASE64_ID;\r\n    }\r\n\r\n    return StringUtils.isEmpty(formattedExtension) ? '' : `data:image/${formattedExtension};base64,`;\r\n  }\r\n\r\n  public static isJpg(extension: string | undefined): boolean {\r\n    return this.isFormatMatching(extension, ImageUtils.JPG_EXTENSION_LIST);\r\n  }\r\n\r\n  public static isPng(extension: string | undefined): boolean {\r\n    return this.isFormatMatching(extension, ImageUtils.PNG_EXTENSION_LIST);\r\n  }\r\n\r\n  private static isFormatMatching(extension: string | undefined, validExtensionList: string[]): boolean {\r\n    if (StringUtils.isNullOrEmpty(extension)) {\r\n      return false;\r\n    } else {\r\n      const extensionToCheck = (extension as string).toLowerCase();\r\n\r\n      return validExtensionList.some((elt) => elt === extensionToCheck);\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}