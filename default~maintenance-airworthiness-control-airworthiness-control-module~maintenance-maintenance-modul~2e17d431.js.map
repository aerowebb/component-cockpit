{"version":3,"sources":["webpack:///./src/app/main/maintenance/work-orders/form/work-orders-form.service.ts","webpack:///./src/app/shared/services/file.service.ts"],"names":[],"mappings":"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","file":"default~maintenance-airworthiness-control-airworthiness-control-module~maintenance-maintenance-modul~2e17d431.js","sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { SelectItem } from 'primeng/api';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\nimport { AircraftMaintenanceApi } from '../../../../shared/api/aircraft-maintenance.api';\r\nimport { AirworthinessManagementApi } from '../../../../shared/api/airworthiness-management.api';\r\nimport { AMProjectManagementApi } from '../../../../shared/api/am-project-management.api';\r\nimport { FleetManagementApi } from '../../../../shared/api/fleet-management.api';\r\nimport { ProductStructureManagementApi } from '../../../../shared/api/product-structure-management.api';\r\nimport { AbstractAwHttpService } from '../../../../shared/http/abstract-aw-http';\r\nimport { AppConfigService } from '../../../../shared/services/app-config.service';\r\nimport { AssetWorkOrderOriginInput } from '../../../../shared/types/api-input-types/airworthiness-management/asset-work-order-origin-input.inteface';\r\nimport { CalculateWorkOrderImput } from '../../../../shared/types/api-input-types/work-order/calculate-work-order-input.interface';\r\nimport { AssetWorkOrderOriginDataOutput } from '../../../../shared/types/api-output-types/airworthiness-management/asset-work-order-origin-data-output.inteface';\r\nimport { CalculateWorkOrderOutput } from '../../../../shared/types/api-output-types/calculate-work-order-output.interface';\r\nimport { BidmProjectDTO } from '../../../../shared/types/api-types/bidm-project-dto.interface';\r\nimport { BidmWorkOrderDTOId } from '../../../../shared/types/api-types/bidm-work-order-dto-id.interface';\r\nimport { BidmWorkOrderDTO } from '../../../../shared/types/api-types/bidm-work-order-dto.interface';\r\nimport { BidoEquipmentDTOId } from '../../../../shared/types/api-types/bido-equipment-dto-id.interface';\r\nimport { BidoEquipmentDTO } from '../../../../shared/types/api-types/bido-equipment-dto.interface';\r\nimport { FileContentDTO } from '../../../../shared/types/api-types/file-content-dto.interface';\r\nimport { MoveWorkOrdersInput } from '../../../../shared/types/api-types/move-work-order-dto.interface';\r\nimport { LabelValue } from '../../../../shared/types/label-value.interface';\r\nimport { SelectItemUtils } from '../../../../shared/utils/select-item-utils';\r\n\r\n@Injectable()\r\nexport class WorkOrdersFormService extends AbstractAwHttpService {\r\n  public constructor(\r\n    http: HttpClient,\r\n    appConfigService: AppConfigService,\r\n    private readonly airworthinessManagementApi: AirworthinessManagementApi,\r\n    private readonly aircraftMaintenanceApi: AircraftMaintenanceApi,\r\n    private readonly amProjectManagementApi: AMProjectManagementApi,\r\n    private readonly fleetManagementApi: FleetManagementApi,\r\n    private readonly productStructureManagementApi: ProductStructureManagementApi\r\n  ) {\r\n    super(http, appConfigService);\r\n  }\r\n\r\n  /**************************************************************************\r\n   * Aircraft management api\r\n   *************************************************************************/\r\n  public calculateWorkOrderStatus(workOrderDetailInput: CalculateWorkOrderImput): Observable<CalculateWorkOrderOutput> {\r\n    return super.post<CalculateWorkOrderImput, CalculateWorkOrderOutput>(\r\n      this.aircraftMaintenanceApi.calculateWorkOrderStatus,\r\n      workOrderDetailInput\r\n    );\r\n  }\r\n\r\n  public removeBidmWorkOrderList(input: BidmWorkOrderDTOId[]): Observable<void> {\r\n    return super.post<BidmWorkOrderDTOId[], void>(this.aircraftMaintenanceApi.removeBidmWorkOrderList, input);\r\n  }\r\n\r\n  public updateBidmWorkOrders(bidmWorkOrderList: BidmWorkOrderDTO[]): Observable<void> {\r\n    return super.post<BidmWorkOrderDTO[], void>(this.aircraftMaintenanceApi.updateBidmWorkOrders, bidmWorkOrderList);\r\n  }\r\n\r\n  public moveWorkOrders(moveWorkOrders: MoveWorkOrdersInput): Observable<void> {\r\n    return super.post<MoveWorkOrdersInput, void>(this.aircraftMaintenanceApi.moveWorkOrdersToProject, moveWorkOrders);\r\n  }\r\n\r\n  /**************************************************************************\r\n   * AM project management api\r\n   *************************************************************************/\r\n\r\n  public generateJobcards(workOrderIdList: BidmWorkOrderDTOId[]): Observable<FileContentDTO> {\r\n    return super.post<BidmWorkOrderDTOId[], FileContentDTO>(\r\n      this.amProjectManagementApi.generateJobcards,\r\n      workOrderIdList\r\n    );\r\n  }\r\n\r\n  /**************************************************************************\r\n   * Fleet management api\r\n   *************************************************************************/\r\n\r\n  public findBidoEquipmentById(bidoEquipementDtoId: BidoEquipmentDTOId): Observable<BidoEquipmentDTO> {\r\n    return super.post<BidoEquipmentDTOId, BidoEquipmentDTO>(\r\n      this.fleetManagementApi.findBidoEquipment,\r\n      bidoEquipementDtoId\r\n    );\r\n  }\r\n\r\n  /**************************************************************************\r\n   * Airworthiness management api\r\n   *************************************************************************/\r\n\r\n  public findWorkOrderOriginDetails(input: AssetWorkOrderOriginInput): Observable<AssetWorkOrderOriginDataOutput> {\r\n    return super.post<AssetWorkOrderOriginInput, AssetWorkOrderOriginDataOutput>(\r\n      this.airworthinessManagementApi.findWorkOrderOriginDetails,\r\n      input\r\n    );\r\n  }\r\n\r\n  public calculateBidmProjectStatus(input: BidmProjectDTO): Observable<string> {\r\n    return super.post<BidmProjectDTO, string>(this.airworthinessManagementApi.calculateBidmProjectStatus, input);\r\n  }\r\n\r\n  /**************************************************************************\r\n   * Reference list\r\n   *************************************************************************/\r\n\r\n  private findAuthorizedBireSite(): Observable<LabelValue<string>[]> {\r\n    return super.post<void, LabelValue<string>[]>(this.productStructureManagementApi.findAuthorizedBireSite);\r\n  }\r\n\r\n  public loadMROCenterList(): Observable<SelectItem[]> {\r\n    return this.findAuthorizedBireSite().pipe(\r\n      map((results) => {\r\n        const mroCenterList = !!results ? SelectItemUtils.fromLabelValues(results) : [];\r\n\r\n        return mroCenterList.map((mro) => {\r\n          mro.label = mro.label ? `${mro.value} (${mro.label})` : mro.value;\r\n\r\n          return mro;\r\n        });\r\n      })\r\n    );\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { DocumentApi } from '../api/document.api';\r\nimport { ProductStructureManagementApi } from '../api/product-structure-management.api';\r\nimport { AbstractAwHttpService } from '../http/abstract-aw-http';\r\nimport { BidoBireDocumentDTO } from '../types/api-types/bido-bire-documentdto';\r\nimport { BidoBireWrapperId } from '../types/api-types/bido-bire-wrapper-id';\r\nimport { BidoEquipmentDTO } from '../types/api-types/bido-equipment-dto.interface';\r\nimport { BireDocItemDTO } from '../types/api-types/bire-doc-item-dto.interface';\r\nimport { BireItemDTOId } from '../types/api-types/bire-item-dto-id.interface';\r\nimport { ImageUtils } from '../utils/image-utils';\r\n\r\nimport { AppConfigService } from './app-config.service';\r\n\r\n@Injectable()\r\nexport class FileService extends AbstractAwHttpService {\r\n  public constructor(http: HttpClient,\r\n                     appConfigService: AppConfigService,\r\n                     private readonly domSanitizer: DomSanitizer,\r\n                     private readonly productStructureManagementApi: ProductStructureManagementApi,\r\n                     private readonly documentApi : DocumentApi\r\n  ) {\r\n    super(http, appConfigService);\r\n  }\r\n\r\n  public findIllustration(bireItemDtoId: BireItemDTOId | undefined, bidoEquipementDTO: BidoEquipmentDTO)\r\n    : Observable<BidoBireDocumentDTO> {\r\n    const bidoBireId : BidoBireWrapperId = {\r\n      bidoEquipmentDTOId: {equipmentCode: bidoEquipementDTO.equipmentCode},\r\n      bireItemDTOId: bireItemDtoId,\r\n      sn: bidoEquipementDTO.sn\r\n    };\r\n\r\n    return super.post<BidoBireWrapperId, BidoBireDocumentDTO>(\r\n      this.documentApi.findBidoBireDoc, bidoBireId);\r\n  }\r\n\r\n  public findBireDocItemByPnCode(input: string): Observable<BireDocItemDTO | undefined> {\r\n    return super.post<string, BireDocItemDTO | undefined>(\r\n      this.productStructureManagementApi.findBireDocItemByPnCode,\r\n      input\r\n    );\r\n  }\r\n\r\n  public sanitizeAndGetBase64Prefix(illustrationDocument: BidoBireDocumentDTO) : SafeResourceUrl {\r\n    return this.domSanitizer.bypassSecurityTrustResourceUrl(\r\n      `${ImageUtils.getBase64Prefix(illustrationDocument.docType)}${illustrationDocument.docFile}`);\r\n  }\r\n}\r\n"],"sourceRoot":""}