(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"+It2":function(t,e,o){"use strict";o.d(e,"a",function(){return c});var r=o("wd/R"),i=o("ag2f"),n=o("1QpY"),p=o("LCkZ"),s=o("x3i7"),a=o("8jAZ"),c=function(){function t(){}return t.sortCriticities=function(t){return t.sort(function(t,e){return t.value===i.a.LOGISTICAL_CRITICALITY_ROUTINE?-1:t.value===i.a.LOGISTICAL_CRITICALITY_IMMEDIATE?1:0})},t.getServedIndicators=function(t){if(t.bidtWarehouseReceipt&&t.bidtWarehouseReceipt.whCategory){var e=this.buildProcurementRequestItemsRows(t);return this.computeProcurementRequestProgress(e)}},t.buildProcurementRequestItemsRows=function(t){var e=this;return p.a.orEmpty(t.bidtProcReqItems).map(function(t){return e.buildProcurementRequestItemRow(t)}).sort(function(t,e){return t.obj.statusDate&&e.obj.statusDate?r(t.obj.statusDate).isBefore(e.obj.statusDate)?-1:1:t.obj.statusDate?-1:1})},t.buildProcurementRequestItemRow=function(t){var e=this.computeProcurementRequestItemProgress(t.workshopEntries,t.requestedQuantity);return{obj:t,allNb:e.allNb,servedNb:e.servedNb,bookedNb:e.bookedNb,notBookedNb:e.notBookedNb,warehouseName:void 0,siteName:void 0}},t.computeProcurementRequestReverseItemProgress=function(t){var e=p.a.orEmpty(t).filter(function(t){return t.stockMvtWay===n.a.MVT_WAY_CREDIT}),o=e.filter(function(t){return t.mvtStatus===i.a.MM_MVT_STATUS_EXECUTED_KEY}),r=e.length,s=o.map(function(t){return t.stockMvtQuantity?Number(t.stockMvtQuantity):0}).reduce(function(t,e){return t+e},0);return{allNb:r,reversedNb:s,notReversedNb:r-s}},t.computeProcurementRequestItemProgress=function(t,e){var o=p.a.orEmpty(t).filter(function(t){return t.stockMvtWay===n.a.MVT_WAY_CREDIT}),r=o.filter(function(t){return t.mvtStatus===i.a.MM_MVT_STATUS_EXECUTED_KEY}).map(function(t){return t.stockMvtQuantity?Number(t.stockMvtQuantity):0}).reduce(function(t,e){return t+e},0),c=o.filter(function(t){return!(t.mvtStatus===i.a.MM_MVT_STATUS_EXECUTED_KEY||t.mvtStatus===i.a.MM_MVT_STATUS_CANCELED_KEY||a.a.isNullOrEmpty(t.stockMvtSn)&&a.a.isNullOrEmpty(t.stockMvtBatchNumber))}).map(function(t){return t.stockMvtQuantity?Number(t.stockMvtQuantity):0}).reduce(function(t,e){return t+e},0),u=a.a.isNullOrEmpty(e)?0:Math.max(0,s.a.fromString(e)-r-c);return{allNb:o.length,bookedNb:c,notBookedNb:u,servedNb:r}},t.computeProcurementRequestProgress=function(t){var e=p.a.orEmpty(t).map(function(t){return t.obj.requestedQuantity}).filter(function(t){return!a.a.isNullOrEmpty(t)}).map(function(t){return s.a.fromString(t)}).reduce(function(t,e){return t+e},0),o=p.a.orEmpty(t).reduce(function(t,e){return{bookedNb:t.bookedNb+e.bookedNb,notBookedNb:t.notBookedNb+e.notBookedNb,servedNb:t.servedNb+e.servedNb}},{bookedNb:0,notBookedNb:0,servedNb:0});return{bookedNb:o.bookedNb,notBookedNb:o.notBookedNb,isServed:o.servedNb===e,servedNb:o.servedNb}},t.isReversedTransfer=function(t){return t.some(function(t){return t.stockMvtWay===n.a.MVT_WAY_CREDIT&&t.mvtStatus===i.a.MM_MVT_STATUS_EXECUTED_KEY})},t.isReversingTransfer=function(t){return t.some(function(t){return t.stockMvtWay===n.a.MVT_WAY_DEBIT&&t.mvtStatus===i.a.MM_MVT_STATUS_EXECUTED_KEY})&&t.some(function(t){return t.stockMvtWay===n.a.MVT_WAY_CREDIT&&t.mvtStatus!==i.a.MM_MVT_STATUS_EXECUTED_KEY})},t.isExecutingTransfer=function(t){return!t.some(function(t){return t.stockMvtWay===n.a.MVT_WAY_DEBIT&&t.mvtStatus===i.a.MM_MVT_STATUS_EXECUTED_KEY})&&!t.some(function(t){return t.stockMvtWay===n.a.MVT_WAY_CREDIT&&t.mvtStatus===i.a.MM_MVT_STATUS_EXECUTED_KEY})},t.isWaitingTransfer=function(t){return t.some(function(t){return t.stockMvtWay===n.a.MVT_WAY_TRANSFER&&t.mvtStatus!==i.a.MM_MVT_STATUS_EXECUTED_KEY})},t}()},"1QpY":function(t,e,o){"use strict";o.d(e,"a",function(){return r});var r=function(){function t(){}return t.MVT_WAY_CREDIT="C",t.MVT_WAY_DEBIT="D",t.MVT_WAY_TRANSFER="T",t.MVT_RECONDITIONING="MVT_RECONDITIONING",t.MVT_RELATED_FL="MVT_RELATED_FL",t.MVT_STORAGE_COUNTER_RESET="MVT_STORAGE_COUNTER_RESET",t.MVT_STATUS_STEP_WAY_BEFORE_TRANSFERT=0,t.MVT_STATUS_STEP_WAY_TRANSFERT=1,t.MVT_STATUS_STEP_WAY_DEBIT=2,t.MVT_STATUS_STEP_WAY_CREDIT=3,t}()},hFGf:function(t,e,o){"use strict";o.d(e,"a",function(){return B});var r=o("mrSG"),i=o("CqHe"),n=o("3CNd"),p=o("lhSP"),s=o("7ve5"),a=o("byfJ"),c=o("iXEG"),u=o("o2oR"),d=o("gfL+"),l=o("Cbii"),y=o("8lOw"),f=o("MgNQ"),h=o("fKCH"),m=o("TsDO"),A=o("8i2z"),b=o("OLKY"),T=o("w5Jw"),M=o("4jwn"),v=o("OovH"),S=o("2XxF"),R=o("CcnG"),k=o("t/Na"),B=function(t){function e(e,o,r,i,n,p,s,a,c,u,d,l,y,f,h,m,A,b,T){var M=t.call(this,e,o)||this;return M.bidtWorkCenterApi=r,M.aircraftMaintenanceApi=i,M.amProjectManagementApi=n,M.bidtDeliveryFolderApi=p,M.bidtTransferOrderApi=s,M.bidtDfTypeApi=a,M.bidtProcReqItemApi=c,M.bidtProcurementRequestApi=u,M.bidtStockMvtApi=d,M.bidtStockMvtTypeApi=l,M.productStructureManagementApi=y,M.bidtWarehouseApi=f,M.bidtSiteApi=h,M.fleetManagementApi=m,M.bidtDocumentApi=A,M.assetManagementApi=b,M.bidoEquipmentApi=T,M}return Object(r.__extends)(e,t),e.prototype.findWorkCenterById=function(e){return t.prototype.post.call(this,this.bidtWorkCenterApi.getById,e)},e.prototype.createProcurementRequestFromWorkOrder=function(e){return t.prototype.post.call(this,this.aircraftMaintenanceApi.createProcurementRequest,e)},e.prototype.findWorkPackage=function(e){return t.prototype.post.call(this,this.amProjectManagementApi.findBidmProject,e)},e.prototype.findEquipment=function(e){return t.prototype.post.call(this,this.fleetManagementApi.findBidoEquipment,e)},e.prototype.addOrUpdateTransferOrder=function(e){return t.prototype.post.call(this,this.bidtTransferOrderApi.addOrUpdateTransferOrder,e)},e.prototype.findTransferOrdersByCriteria=function(e){return t.prototype.post.call(this,this.bidtTransferOrderApi.findTransferOrdersByCriteria,e)},e.prototype.findTransferOrdersById=function(e){return t.prototype.post.call(this,this.bidtTransferOrderApi.findTransferOrderById,e)},e.prototype.searchWarehouseCandidateAssetsByTorItem=function(e){return t.prototype.post.call(this,this.bidtTransferOrderApi.searchWarehouseCandidateAssets,e)},e.prototype.searchGlobalCandidateAssetsByTorItem=function(e){return t.prototype.post.call(this,this.bidtTransferOrderApi.searchGlobalCandidateAssets,e)},e.prototype.searchLocalCandidateAssetsByTorItem=function(e){return t.prototype.post.call(this,this.bidtTransferOrderApi.searchLocalCandidateAssets,e)},e.prototype.bookCandidateAssetByTorItem=function(e){return t.prototype.post.call(this,this.bidtTransferOrderApi.bookCandidateAsset,e)},e.prototype.cancelBookedAssetByTorItem=function(e){return t.prototype.post.call(this,this.bidtTransferOrderApi.cancelBookedAsset,e)},e.prototype.isAssetBookedByTorItem=function(e){return t.prototype.post.call(this,this.bidtTransferOrderApi.isAssetBooked,e)},e.prototype.preemptCandidateAssetByTorItem=function(e){return t.prototype.post.call(this,this.bidtTransferOrderApi.preemptCandidateAsset,e)},e.prototype.addOrUpdateReceiptFolder=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.addOrUpdateReceiptFolder,e)},e.prototype.addOrUpdateShipmentFolder=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.addOrUpdateShipmentFolder,e)},e.prototype.addReceiptItem=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.addReceiptItem,e)},e.prototype.addReceiptMaterialList=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.addReceiptMaterialList,e)},e.prototype.addReceiptPackage=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.addReceiptPackage,e)},e.prototype.findShipmentFolderWithAllObjectsById=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.findShipmentFolderWithAllObjectsById,e)},e.prototype.cancelItemOperations=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.cancelItemOperations,e)},e.prototype.cancelPackageOperations=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.cancelPackageOperations,e)},e.prototype.cancelStockMovementOperations=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.cancelStockMovementOperations,e)},e.prototype.deleteDeliveryFolder=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.deleteDeliveryFolder,e)},e.prototype.deleteReceiptItem=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.deleteReceiptItem,e)},e.prototype.deleteShipmentItem=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.deleteShipmentItem,e)},e.prototype.deleteReceiptMaterial=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.deleteReceiptMaterial,e)},e.prototype.deleteReceiptPackage=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.deleteReceiptPackage,e)},e.prototype.findDeliveryFoldersByCriteria=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.findDeliveryFoldersByCriteria,e)},e.prototype.findReceiptFolderByPackageCode=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.findReceiptFolderByPackageCode,e)},e.prototype.findReceiptFolderWithAllObjectsById=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.findReceiptFolderWithAllObjectsById,e)},e.prototype.performItemOperations=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.performItemOperations,e)},e.prototype.performPackageOperations=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.performPackageOperations,e)},e.prototype.performStockMovementOperations=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.performStockMovementOperations,e)},e.prototype.putInLitigationItemOperations=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.putInLitigationItemOperations,e)},e.prototype.putInLitigationPackageOperations=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.putInLitigationPackageOperations,e)},e.prototype.putInLitigationStockMovementOperations=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.putInLitigationStockMovementOperations,e)},e.prototype.fetchLengthUnitMap=function(){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.fetchLengthUnitMap)},e.prototype.fetchWeightUnitMap=function(){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.fetchWeightUnitMap)},e.prototype.addOrUpdateDeliveryFolderType=function(e){return t.prototype.post.call(this,this.bidtDfTypeApi.addOrUpdate,e)},e.prototype.deleteDeliveryFolerType=function(e){return t.prototype.post.call(this,this.bidtDfTypeApi.delete,e)},e.prototype.findReceiptDfTypes=function(){return t.prototype.post.call(this,this.bidtDfTypeApi.findReceiptDfTypes)},e.prototype.findReceiptDfTypeById=function(e){return t.prototype.post.call(this,this.bidtDfTypeApi.findReceiptDfTypeById,e)},e.prototype.findShipmentDfTypes=function(){return t.prototype.post.call(this,this.bidtDfTypeApi.findShipmentDfTypes)},e.prototype.findShipmentDfTypeById=function(e){return t.prototype.post.call(this,this.bidtDfTypeApi.findShipmentDfTypeById,e)},e.prototype.findAllBidoCustomer=function(){return t.prototype.post.call(this,this.fleetManagementApi.findAllBidoCustomer)},e.prototype.deleteProcurementRequestItem=function(e){return t.prototype.post.call(this,this.bidtProcReqItemApi.delete,e)},e.prototype.updateProcurementRequestReceiver=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.updateProcurementRequestReceiver,e)},e.prototype.duplicateProcurementRequest=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.duplicate,e)},e.prototype.updateProcurementRequestItemQuantity=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.updateProcurementRequestItemQuantity,e)},e.prototype.checkQuantityConsistency=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.checkQuantityConsistency,e)},e.prototype.createProcurementRequest=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.createProcurementRequest,e)},e.prototype.addMaterial=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.addMaterial,e)},e.prototype.addOrUpdateProcurementRequest=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.addOrUpdate,e)},e.prototype.addOrUpdateItem=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.addOrUpdateItem,e)},e.prototype.bookCandidateAsset=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.bookCandidateAsset,e)},e.prototype.preemptCandidateAsset=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.preemptCandidateAsset,e)},e.prototype.cancelBookedAsset=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.cancelBookedAsset,e)},e.prototype.isAssetBooked=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.isAssetBooked,e)},e.prototype.cannibalizeAsset=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.cannibalizeAsset,e)},e.prototype.createProcurementRequestItem=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.createProcurementRequestItem,e)},e.prototype.cancelProcurementRequest=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.cancel,e)},e.prototype.deleteProcurementRequest=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.delete,e)},e.prototype.findProcurementRequestsByCriteria=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.findProcurementRequestsByCriteria,e)},e.prototype.findProcurementRequestsByWoId=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.findProcurementRequestsByWoId,e)},e.prototype.findProcurementRequestByIdWithAllObjects=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.findWithAllObjectsById,e.id)},e.prototype.searchCandidateAssetsForCannibalism=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.searchCandidateAssetsForCannibalism,e)},e.prototype.searchGlobalCandidateAssets=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.searchGlobalCandidateAssets,e)},e.prototype.searchLocalCandidateAssets=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.searchLocalCandidateAssets,e)},e.prototype.searchWarehouseCandidateAssets=function(e){return t.prototype.post.call(this,this.bidtProcurementRequestApi.searchWarehouseCandidateAssets,e)},e.prototype.cancelStockMvtPending=function(e){return t.prototype.post.call(this,this.bidtStockMvtApi.cancelStockMvtPending,e)},e.prototype.deleteMaterial=function(e){return t.prototype.post.call(this,this.bidtStockMvtApi.deleteMaterial,e)},e.prototype.findStockMvtsByCriteria=function(e){return t.prototype.post.call(this,this.bidtStockMvtApi.findByCriteria,e)},e.prototype.findStockMvtStory=function(e){return t.prototype.post.call(this,this.bidtStockMvtApi.findStockMvtStory,e)},e.prototype.findStockMvtStoryFromFirstStockMvt=function(e){return t.prototype.post.call(this,this.bidtStockMvtApi.findStockMvtStoryFromFirstStockMvt,e)},e.prototype.putStockMvtPending=function(e){return t.prototype.post.call(this,this.bidtStockMvtApi.putStockMvtPending,e)},e.prototype.updateStockMvtStatus=function(e){return t.prototype.post.call(this,this.bidtStockMvtApi.updateStatus,e)},e.prototype.addOrUpdateStockMovementType=function(e){return t.prototype.post.call(this,this.bidtStockMvtTypeApi.addOrUpdate,e)},e.prototype.deleteStockMovementType=function(e){return t.prototype.post.call(this,this.bidtStockMvtTypeApi.delete,e)},e.prototype.findStockMvtTypes=function(){return t.prototype.post.call(this,this.bidtStockMvtTypeApi.findAll)},e.prototype.findStockMvtTypeById=function(e){return t.prototype.post.call(this,this.bidtStockMvtTypeApi.findStockMvtTypeById,e)},e.prototype.findBidtStockMvtForm=function(e){return t.prototype.post.call(this,this.bidtStockMvtApi.findBidtStockMvtForm,e)},e.prototype.findBidoCounterReferencesByPnCode=function(e){return t.prototype.post.call(this,this.productStructureManagementApi.findBidoCounterReferencesByPnCode,e)},e.prototype.findBirePnMeasuresByPnCode=function(e){return t.prototype.post.call(this,this.productStructureManagementApi.findBirePnMeasuresByPnCode,e)},e.prototype.findCounterByAsset=function(e){return t.prototype.post.call(this,this.productStructureManagementApi.findCounterByAsset,e)},e.prototype.findBireVersionPnsByFamilyAndVariantAndPnCode=function(e){return t.prototype.post.call(this,this.productStructureManagementApi.findBireVersionPnsByFamilyAndVariantAndPnCode,e)},e.prototype.removeBidmProject=function(e){return t.prototype.post.call(this,this.amProjectManagementApi.removeBidmProject,e)},e.prototype.findShipmentMaterial=function(e){return t.prototype.post.call(this,this.bidtDeliveryFolderApi.findShipmentMaterial,e)},e.prototype.getWarehouseById=function(e){return t.prototype.post.call(this,this.bidtWarehouseApi.getById,e)},e.prototype.getWarehousesBySiteId=function(e){return t.prototype.post.call(this,this.bidtWarehouseApi.findBySiteId,e)},e.prototype.findWarehousesByCriteria=function(e){return t.prototype.post.call(this,this.bidtWarehouseApi.findByCriteria,e)},e.prototype.findAllBireSite=function(){return t.prototype.post.call(this,this.bidtSiteApi.findAll)},e.prototype.getSiteById=function(e){return t.prototype.post.call(this,this.bidtSiteApi.getById,e)},e.prototype.addOrUpdateBatch=function(e){return t.prototype.post.call(this,this.bidoEquipmentApi.addOrUpdateBatch,e)},e.prototype.findDocumentByDeliveryFolderId=function(e){return t.prototype.post.call(this,this.bidtDocumentApi.findByDeliveryFolderId,e)},e.prototype.updateAsset=function(e){return t.prototype.post.call(this,this.assetManagementApi.updateAsset,e)},e.prototype.createBidoNotification=function(e){return t.prototype.post.call(this,this.assetManagementApi.createBidoNotification,e)},e.prototype.findEquipmentByPnAndBatchNumber=function(e){return t.prototype.post.call(this,this.fleetManagementApi.findBidoEquipmentByPnAndBatchNumber,e)},e.prototype.findEquipmentByPnAndSn=function(e){return t.prototype.post.call(this,this.fleetManagementApi.findFirstBidoEquipmentsByPnAndSnCodes,e)},e.prototype.findBidoEquipmentCounter=function(e){return t.prototype.post.call(this,this.fleetManagementApi.findBidoEquipmentCounter,e)},e.prototype.findBirePn=function(e){return t.prototype.post.call(this,this.productStructureManagementApi.findBirePn,e)},e.prototype.findTransferOrdersByRemoval=function(e){return t.prototype.post.call(this,this.bidtTransferOrderApi.findByRemoval,e)},e.prototype.cancelTransferOrder=function(e){return t.prototype.post.call(this,this.bidtTransferOrderApi.cancelTransferOrder,e)},e.ngInjectableDef=R.defineInjectable({factory:function(){return new e(R.inject(k.HttpClient),R.inject(S.a),R.inject(b.a),R.inject(i.a),R.inject(n.a),R.inject(a.a),R.inject(m.a),R.inject(c.a),R.inject(d.a),R.inject(l.a),R.inject(h.a),R.inject(f.a),R.inject(M.a),R.inject(A.a),R.inject(y.a),R.inject(T.a),R.inject(u.a),R.inject(p.a),R.inject(s.a))},token:e,providedIn:"root"}),e}(v.a)}}]);