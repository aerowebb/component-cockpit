(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{J7ry:function(t,e,r){"use strict";r.d(e,"a",function(){return n}),r("mZtN");var i=r("fh6f"),n=function(){function t(t){this.sessionService=t}return t.prototype.isCalendarAttribute=function(t){return t.type===i.a.Date},t.prototype.isCheckboxAttribute=function(t){return t.type===i.a.Boolean},t.prototype.isDropdownAttribute=function(t){return t.type===i.a.List},t.prototype.isInputAttribute=function(t){return t.type===i.a.Text},t.prototype.isRequired=function(){return!(!this.workflowControl||!this.workflowControl.isMandatory)||void 0},t.prototype.isDisabled=function(){return this.isReadOpenMode||!!this.workflowControl&&!!this.workflowControl.isReadOnly},t}()},"Li7/":function(t,e,r){"use strict";r.d(e,"a",function(){return i}),r("1bHX"),r("3/N/"),r("dLo5"),r("r5xa"),r("wcip"),r("J7ry"),r("WLg2"),r("O978");var i=function(){return function(){}}()},M6cb:function(t,e,r){"use strict";r.d(e,"a",function(){return i});var i=function(){function t(){}return t.ATTRIBUTE_TYPE_TEXT="Text",t.ATTRIBUTE_TYPE_DATE="Date",t.ATTRIBUTE_TYPE_BOOLEAN="Boolean",t.ATTRIBUTE_TYPE_LIST="List",t.SAP_EQUIPMENT_CODE=1,t.ASSET_LOCATION=2,t.MANUFACTURER=3,t.ICAO_CODE=4,t.ITEM_NUMBER=5,t.EVENT_LOCATION=6,t.ASSET_SYSTEM_SOURCE_ID=7,t.ASSET_SYSTEM_SOURCE_REFERENCE=8,t.EVENT_SYSTEM_SOURCE_ID=9,t.EVENT_SYSTEM_SOURCE_REFERENCE=10,t.FUNCTIONAL_LOCATION=11,t.EVENT_IS_DEFERRED_DEFECT=12,t.EVENT_DD_DELAY_CATEGORY=13,t.EVENT_DD_DELAY_AUTHORIZED_VALUE=14,t.EVENT_DD_DELAY_AUTHORIZED_UNIT=15,t.EVENT_DD_TASK_PROPOSED_TO_PROCESS=16,t.EVENT_DD_DELAY_AUTHORIZATION_NUMBER=17,t.EVENT_DEFECT_LAST_AUTHOR=18,t.EVENT_DEFECT_CORRECTIVE_ACTION_LAST_AUTHOR=19,t.EVENT_DEFECT_DEFERRAL_LAST_AUTHOR=20,t.EVENT_DEFECT_DETECTION_CONTEXT=21,t.EVENT_DEFECT_CORRECTIVE_ACTION_DESCRIPTION=22,t.EVENT_DEFECT_LOG_NUMBER=23,t.EVENT_DEFECT_EXTENSION=24,t.EVENT_DEFECT_AUTHOR=25,t.EVENT_DEFECT_CORRECTIVE_ACTION_AUTHOR=26,t.EVENT_DEFECT_DEFERRAL_AUTHOR=27,t.EVENT_WORK_POSTPONEMENT_REQUEST_WO_CONTEXT=28,t.EVENT_WORK_POSTPONEMENT_REQUEST_AUTHORIZATION_NUMBER=29,t.EVENT_WORK_POSTPONEMENT_REQUEST_LIMIT_DATE=30,t.EVENT_WORK_POSTPONEMENT_REQUEST_REFUSAL_REASON=31,t.EVENT_WORK_POSTPONEMENT_REQUEST_AUTHOR=32,t.EVENT_WORK_POSTPONEMENT_REQUEST_DECISION_LAST_AUTHOR=33,t.MAINTENANCE_PLAN_ORIGINAL_DEADLINES=34,t.EVENT_WORK_POSTPONEMENT_REQUEST_FLIGHT_RESTRICTIONS=35,t.EVENT_DEFECT_FLIGHT_RESTRICTIONS=36,t.EVENT_DEFECT_IS_CRITICAL=37,t.FLIGHT_GONOGO_VALIDATION=38,t.EVENT_TASK_APPLIED_FLIGHT_CONTEXT=39,t.IGNORE_INITIAL_DEADLINE_NEXT_OCCURRENCE_CALCULATION=40,t.EVENT_DEFECT_INSPECTION_MEAN=41,t.EVENT_DEFECT_SRM_REFERENCE=42,t.EVENT_DEFECT_FRAME_FROM=43,t.EVENT_DEFECT_FRAME_FROM_DISTANCE=44,t.EVENT_DEFECT_FRAME_TO=45,t.EVENT_DEFECT_FRAME_TO_DISTANCE=46,t.EVENT_DEFECT_STRINGER_FROM=47,t.EVENT_DEFECT_STRINGER_FROM_DISTANCE=48,t.EVENT_DEFECT_STRINGER_TO=49,t.EVENT_DEFECT_STRINGER_TO_DISTANCE=50,t.EVENT_DEFECT_RIB_FROM=51,t.EVENT_DEFECT_RIB_FROM_DISTANCE=52,t.EVENT_DEFECT_RIB_TO=53,t.EVENT_DEFECT_RIB_TO_DISTANCE=54,t.EVENT_DEFECT_BEAM_FROM=55,t.EVENT_DEFECT_BEAM_FROM_DISTANCE=56,t.EVENT_DEFECT_BEAM_TO=57,t.EVENT_DEFECT_BEAM_TO_DISTANCE=56,t.EVENT_DEFECT_DEPTH=59,t.EVENT_DEFECT_LENGHT=60,t.EVENT_DEFECT_WIDTH=61,t.EVENT_DEFECT_SURFACE_AREA=62,t.FLIGHT_SYSTEM_SOURCE_ID=63,t.FLIGHT_SYSTEM_SOURCE_REFERENCE=64,t.EVENT_WORK_ORDER_SOURCE=65,t.EVENT_FAULT_CODE=68,t.DAV_HUMS_STATUS=2e3,t.DAV_HUMS_MESSAGE=2001,t.DAV_MANUAL_FLIGHT_ENTRIES=2003,t}()},O978:function(t,e,r){"use strict";r.d(e,"a",function(){return f});var i=r("mrSG"),n=r("wd/R"),o=r("M6cb"),u=r("5RMJ"),a=r("OovH"),E=(r("2XxF"),r("LCkZ")),s=r("8jAZ"),T=r("fh6f"),c=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var i,n,o=r.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)u.push(i.value)}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return u},_=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t},f=function(t){function e(e,r,i){var n=t.call(this,e,r)||this;return n.translateService=i,n}return Object(i.__extends)(e,t),e.prototype.attributeValueToString=function(t){return t.value&&t.type===T.a.Date?n(t.value).format(e.DATE_FORMAT):t.value?t.value.toString():""},e.prototype.from=function(t){var e=this,r=new Map,i=[];return t.forEach(function(t){var n=e.getAttributeLabel(t).split("."),o=e.getAttributeType(t),u={id:t.attributeId,label:n[n.length-1],type:o,value:e.computeDefaultAttributeValue(o),listOptions:e.computeListOptions(t)},a=function(t,e){var i={label:t,attributes:[],children:[]};return r.set(e||t,i),i},E=function(t){return n.slice(0,t).join(".")};if(1===n.length){if(!r.has("")){var s=a("");i=_(i,[s])}var T=r.get("");T&&T.attributes.push(u)}else{if(!r.has(n[0])){var c=a(n[0]);i=_(i,[c])}for(var f=1;f<n.length-1;f++){var l=E(f+1);if(!r.has(l)){var b=a(n[f],l),p=r.get(E(f));p&&p.children.push(b)}}var d=r.get(E(n.length-1));d&&d.attributes.push(u)}}),i},e.prototype.getLeafs=function(t){for(var e=[].concat(t),r=[];!E.a.isEmpty(e);){var i=e.shift();i&&(r=_(r,i.attributes),e=_(e,i.children))}return r},e.prototype.setValues=function(t,e){var r=this,i=this.getLeafs(t);e.forEach(function(t){var e=i.find(function(e){return e.id===t.attributeId});e&&(e.value=r.computeAttributeValue(e.type,t.attributeValue))})},e.prototype.sort=function(t){return t.sort(function(t,e){return s.a.isNullOrEmpty(t.label)?1:s.a.isNullOrEmpty(e.label)?1:t.label.localeCompare(e.label)})},e.prototype.toBidoCustomerAttribute=function(t,e){var r=this;return this.getLeafs(e).map(function(e){return{attributeId:e.id,attributeValue:r.attributeValueToString(e),customerCode:t}})},e.prototype.toBidoEquipmentAttribute=function(t,e){var r=this;return this.getLeafs(e).map(function(e){return{attributeId:e.id,attributeValue:r.attributeValueToString(e),equipmentCode:t}})},e.prototype.toBireEvolutionAttribute=function(t,e,r){var i=this;return this.getLeafs(r).map(function(r){return{attributeId:r.id,attributeValue:i.attributeValueToString(r),evolutionRevisionNumber:e,evolutionNumber:t}})},e.prototype.toBireVariantAttribute=function(t,e,r,i){var n=this;return this.getLeafs(i).map(function(i){return{attributeId:i.id,attributeValue:n.attributeValueToString(i),familyCode:t,variantCode:e,structureType:r}})},e.prototype.toBireItemAttribute=function(t,e,r,i,n,o,u,a,E){var s=this;return this.getLeafs(E).map(function(E){return{attributeId:E.id,attributeValue:s.attributeValueToString(E),familyCode:t,variantCode:e,structureType:r,chapter:i,marks:n,section:o,sheet:u,subject:a}})},e.prototype.toBireEventAttributeId=function(t,e){var r=this;return this.getLeafs(e).map(function(e){return{attributeId:e.id,attributeValue:r.attributeValueToString(e),notificationCode:t}})},e.prototype.toBireOperationAttributeId=function(t,e,r,i){var n=this;return this.getLeafs(i).map(function(i){return{attributeId:i.id,attributeValue:n.attributeValueToString(i),opeCode:t,rangeCode:e,opeVersion:r}})},e.prototype.toBireEvolutionAttributeId=function(t,e,r){return this.getLeafs(r).map(function(r){return{attributeId:r.id,evolutionRevisionNumber:e,evolutionNumber:t}})},e.prototype.toBireEquipmentAttributeId=function(t,e){return this.getLeafs(e).map(function(e){return{attributeId:e.id,equipmentCode:t}})},e.prototype.toBireModificationAttributeId=function(t,e,r,i,n,o){return this.getLeafs(o).map(function(o){return{attributeId:o.id,modificationNumber:t,modificationRevisionNumber:e,modificationType:r,familyCode:i,structureType:n}})},e.prototype.toBireSbAttribute=function(t,e,r){var i=this;return this.getLeafs(r).map(function(r){return{attributeId:r.id,attributeValue:i.attributeValueToString(r),sbNumber:t,sbRevisionNumber:e}})},e.prototype.toBireTaskAttribute=function(t,e,r){var i=this;return this.getLeafs(r).map(function(r){return{taskCode:t,taskVersion:e,attributeId:r.id,attributeValue:i.attributeValueToString(r)}})},e.prototype.toBireTaskAttributeId=function(t,e,r){return this.getLeafs(r).map(function(r){return{attributeId:r.id,taskCode:t,taskVersion:e}})},e.prototype.toBireNotificationAttributeId=function(t,e){return this.getLeafs(e).map(function(e){return{attributeId:e.id,notificationCode:t}})},e.prototype.toBirePnAttribute=function(t,e){var r=this;return this.getLeafs(e).map(function(e){return{pnCode:t,attributeId:e.id,attributeValue:r.attributeValueToString(e)}})},e.prototype.toBireModificationAttribute=function(t,e){var r=this;return this.getLeafs(e).map(function(e){return{attributeId:e.id,attributeValue:r.attributeValueToString(e),modificationType:t.modificationType,modificationNumber:t.modificationNumber,modificationRevisionNumber:t.modificationRevisionNumber,familyCode:t.familyCode,structureType:t.structureType}})},e.prototype.toBirePlanAttribute=function(t,e){var r=this;return this.getLeafs(e).map(function(e){return{planCode:t,attributeId:e.id,attributeValue:r.attributeValueToString(e)}})},e.prototype.computeAttributeValue=function(t,e){return e?t===T.a.Boolean?"true"===e:t===T.a.Date?new Date(e):e:void 0},e.prototype.computeDefaultAttributeValue=function(t){return t!==T.a.Boolean&&(t===T.a.Text?"":void 0)},e.prototype.computeListOptions=function(t){var e=this,r=[];return this.isBidoAttribute(t)?t.bidoAttributeValueDatas&&(r=t.bidoAttributeValueDatas):this.isBireAttribute(t)&&t.bireAttributeValueDatas&&(r=t.bireAttributeValueDatas),r.map(function(t){var r=e.getAttributeValueLabel(t);return{label:r,value:r}})},e.prototype.getAttributeLabel=function(t){switch(this.translateService.currentLang){case u.a.ENGLISH_CODE:return t.attributeNameEn?t.attributeNameEn:"";case u.a.FRENCH_CODE:return t.attributeNameFr?t.attributeNameFr:"";default:return""}},e.prototype.getAttributeType=function(t){switch(t.attributeType){case o.a.ATTRIBUTE_TYPE_BOOLEAN:return T.a.Boolean;case o.a.ATTRIBUTE_TYPE_DATE:return T.a.Date;case o.a.ATTRIBUTE_TYPE_LIST:return T.a.List;case o.a.ATTRIBUTE_TYPE_TEXT:default:return T.a.Text}},e.prototype.getAttributeValueLabel=function(t){switch(this.translateService.currentLang){case u.a.ENGLISH_CODE:return t.textEn;case u.a.FRENCH_CODE:return t.textFr;default:return""}},e.prototype.isBidoAttribute=function(t){return null!=t.bidoAttributeValueDatas},e.prototype.isBireAttribute=function(t){return null!=t.bireAttributeValueDatas},e.DATE_FORMAT="YYYY-MM-DD",e}(a.a)},WLg2:function(t,e,r){"use strict";r.d(e,"a",function(){return n});var i=r("s1Eh"),n=(r("O978"),function(){function t(t){this.dynamicAttributesService=t,this.defaultColumnWidth=4,this._attributesNodes=[],this.showDynamicAttributesHistoric=!1,this.showHistory=!1,this._columnWidth=this.defaultColumnWidth,this.controlByAttributeId={}}return Object.defineProperty(t.prototype,"workflowControls",{get:function(){return this._workflowControls},set:function(t){var e=this;this._workflowControls=t,this.controlByAttributeId={},this._workflowControls&&this._workflowControls.forEach(function(t){var r=i.a.getAttributeId(t);r&&(e.controlByAttributeId[r]=t)})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attributesNodes",{get:function(){return this._attributesNodes},set:function(t){t&&(this._attributesNodes=t,this.dynamicAttributesService.sort(this.attributesNodes))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnWidth",{get:function(){return this._columnWidth},set:function(t){t&&(this._columnWidth=t)},enumerable:!0,configurable:!0}),t.prototype.openHistoricAttributes=function(){this.showDynamicAttributesHistoric=!0},t}())},XtYA:function(t,e,r){"use strict";var i;r.d(e,"a",function(){return i}),function(t){t.Multiple="multiple",t.Single="single"}(i||(i={}))},fh6f:function(t,e,r){"use strict";var i;r.d(e,"a",function(){return i}),function(t){t.Boolean="Boolean",t.Date="Date",t.List="List",t.Text="Text"}(i||(i={}))},ob9d:function(t,e,r){"use strict";r.d(e,"a",function(){return a});var i=r("mrSG"),n=r("IXZH"),o=r("qYLG"),u=(r("ydES"),r("BIm4"),r("cxgq"),r("8jAZ")),a=(r("O978"),r("ySWK"),function(t){function e(e,r,i,n,u,a){var E=t.call(this,o.a.Write,"DynamicAttributesHistoryComponent")||this;return E.translateService=e,E.confirmationService=r,E.dateService=i,E.dynamicAttributesHistoryService=n,E.dynamicAttributesService=u,E.loaderService=a,E.attributeMap=new Map,E.attributes=[],E.selectedAttribute=void 0,E.selectedRows=[],E.formattedTableRows=[],E.showDelete=!1,E.setTableCols(),E}return Object(i.__extends)(e,t),e.prototype.ngOnInit=function(){var t=this;this.loaderService.hideLoadingBar(),this.historyObservable.subscribe(function(e){t.attributesHistory=e||[]}),this.attributes=this.dynamicAttributesService.getLeafs(this.dynamicAttributes).map(function(t){return{label:t.label,value:t.id}})},e.prototype.deleteSelectedHistory=function(){var t=this;this.confirmationService.confirmDelete({messageKey:"dynamicAttributesHistory.confirmDeleteSelectedHistory",accept:function(){t.selectedRows.forEach(function(e){var r=t.attributeMap.get(e.attributeId);r&&t.dynamicAttributesHistoryService.removeAttributeHistory(t.deleteApi,r).subscribe(function(r){t.formattedTableRows=t.formattedTableRows.filter(function(t){return t.attributeId!==e.attributeId}),t.attributesHistory=t.attributesHistory.filter(function(t){return t.attributeId!==e.attributeId})})}),t.selectedRows=[]}})},e.prototype.handleAttributeSelected=function(t){var e=this;if(t){var r=this.attributesHistory.filter(function(e){return e.attributeId===t});this.formattedTableRows=r?r.map(function(t){var r={attributeId:t.attributeId,attributeValue:u.a.orEmpty(t.attributeValue),statusDate:e.dateService.dateWithHourMinSecToString(t.statusDate),statusState:u.a.orEmpty(t.statusState),statusUser:u.a.orEmpty(t.statusUser),timestamp:e.dateService.dateWithHourMinSecToString(t.timestamp)};return e.attributeMap.set(r.attributeId,t),r}):[]}},e.prototype.setTableCols=function(){this.tableCols=[{field:"statusUser",alignment:"left"},{field:"statusState",alignment:"left"},{field:"attributeValue",alignment:"left"},{field:"statusDate",alignment:"left"},{field:"timestamp",alignment:"left"}]},e}(n.a))},wcip:function(t,e,r){"use strict";r.d(e,"a",function(){return i}),r("dLo5"),r("8YFm"),r("r5xa"),r("iphE"),r("ob9d"),r("ySWK");var i=function(){return function(){}}()},ySWK:function(t,e,r){"use strict";r.d(e,"a",function(){return o});var i=r("mrSG"),n=r("OovH"),o=(r("2XxF"),function(t){function e(e,r){return t.call(this,e,r)||this}return Object(i.__extends)(e,t),e.prototype.removeAttributeHistory=function(e,r){return t.prototype.post.call(this,e,r)},e}(n.a))}}]);